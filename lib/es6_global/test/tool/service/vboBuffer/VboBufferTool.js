// Generated by BUCKLESCRIPT VERSION 2.1.0, PLEASE EDIT WITH CARE
'use strict';

import * as Sinon                                        from "../../../../../../node_modules/wonder-bs-sinon/lib/es6_global/src/sinon.js";
import * as FakeGlTool$Wonderjs                          from "../../gl/FakeGlTool.js";
import * as RenderStateTool$Wonderjs                     from "../../state/RenderStateTool.js";
import * as DeviceManagerService$Wonderjs                from "../../../../src/service/record/all/device/DeviceManagerService.js";
import * as SparseMapService$WonderCommonlib             from "../../../../../../node_modules/wonder-commonlib/lib/es6_global/src/SparseMapService.js";
import * as ArrayBufferRenderService$Wonderjs            from "../../../../src/service/state/render/vboBuffer/ArrayBufferRenderService.js";
import * as GetVboBufferRenderService$Wonderjs           from "../../../../src/service/state/render/vboBuffer/GetVboBufferRenderService.js";
import * as InstanceBufferRenderService$Wonderjs         from "../../../../src/service/state/render/vboBuffer/InstanceBufferRenderService.js";
import * as ElementArrayBufferRenderService$Wonderjs     from "../../../../src/service/state/render/vboBuffer/ElementArrayBufferRenderService.js";
import * as GetBoxGeometryIndicesRenderService$Wonderjs  from "../../../../src/service/state/render/geometry/box/GetBoxGeometryIndicesRenderService.js";
import * as GetBoxGeometryNormalsRenderService$Wonderjs  from "../../../../src/service/state/render/geometry/box/GetBoxGeometryNormalsRenderService.js";
import * as GetBoxGeometryVerticesRenderService$Wonderjs from "../../../../src/service/state/render/geometry/box/GetBoxGeometryVerticesRenderService.js";

function getRecord(state) {
  return state[/* vboBufferRecord */31];
}

function getOrCreateBoxGeometryVertexArrayBuffer(geometryIndex, state) {
  var state$1 = RenderStateTool$Wonderjs.createState(state);
  return GetVboBufferRenderService$Wonderjs.getOrCreateBuffer(DeviceManagerService$Wonderjs.unsafeGetGl(state$1[/* deviceManagerRecord */16]), /* tuple */[
              geometryIndex,
              state$1[/* vboBufferRecord */0][/* boxGeometryVertexBufferMap */0]
            ], /* tuple */[
              ArrayBufferRenderService$Wonderjs.createBuffer,
              GetBoxGeometryVerticesRenderService$Wonderjs.getVertices
            ], state$1);
}

function getOrCreateBoxGeometryNormalArrayBuffer(geometryIndex, state) {
  var state$1 = RenderStateTool$Wonderjs.createState(state);
  return GetVboBufferRenderService$Wonderjs.getOrCreateBuffer(DeviceManagerService$Wonderjs.unsafeGetGl(state$1[/* deviceManagerRecord */16]), /* tuple */[
              geometryIndex,
              state$1[/* vboBufferRecord */0][/* boxGeometryNormalBufferMap */1]
            ], /* tuple */[
              ArrayBufferRenderService$Wonderjs.createBuffer,
              GetBoxGeometryNormalsRenderService$Wonderjs.getNormals
            ], state$1);
}

function getOrCreateBoxGeometryElementArrayBuffer(geometryIndex, state) {
  var state$1 = RenderStateTool$Wonderjs.createState(state);
  return GetVboBufferRenderService$Wonderjs.getOrCreateBuffer(DeviceManagerService$Wonderjs.unsafeGetGl(state$1[/* deviceManagerRecord */16]), /* tuple */[
              geometryIndex,
              state$1[/* vboBufferRecord */0][/* boxGeometryElementArrayBufferMap */2]
            ], /* tuple */[
              ElementArrayBufferRenderService$Wonderjs.createBuffer,
              GetBoxGeometryIndicesRenderService$Wonderjs.getIndices
            ], state$1);
}

function getOrCreateInstanceBuffer(sourceInstanceIndex, defaultCapacity, state) {
  var state$1 = RenderStateTool$Wonderjs.createState(state);
  return InstanceBufferRenderService$Wonderjs.getOrCreateBuffer(/* tuple */[
              DeviceManagerService$Wonderjs.unsafeGetGl(state$1[/* deviceManagerRecord */16]),
              sourceInstanceIndex,
              defaultCapacity
            ], /* tuple */[
              state$1[/* sourceInstanceRecord */13][/* matrixInstanceBufferCapacityMap */3],
              state$1[/* vboBufferRecord */0][/* matrixInstanceBufferMap */6]
            ], state$1);
}

function addVboBufferToBoxGeometryBufferMapByRecord(geometryIndex, vboBufferRecord) {
  SparseMapService$WonderCommonlib.set(geometryIndex, 0, vboBufferRecord[/* boxGeometryVertexBufferMap */0]);
  SparseMapService$WonderCommonlib.set(geometryIndex, 1, vboBufferRecord[/* boxGeometryNormalBufferMap */1]);
  SparseMapService$WonderCommonlib.set(geometryIndex, 2, vboBufferRecord[/* boxGeometryElementArrayBufferMap */2]);
  return vboBufferRecord;
}

function addVboBufferToCustomGeometryBufferMapByRecord(geometryIndex, vboBufferRecord) {
  SparseMapService$WonderCommonlib.set(geometryIndex, 0, vboBufferRecord[/* customGeometryVertexBufferMap */3]);
  SparseMapService$WonderCommonlib.set(geometryIndex, 1, vboBufferRecord[/* customGeometryNormalBufferMap */4]);
  SparseMapService$WonderCommonlib.set(geometryIndex, 2, vboBufferRecord[/* customGeometryElementArrayBufferMap */5]);
  return vboBufferRecord;
}

function addVboBufferToSourceInstanceBufferMapByRecord(sourceInstanceIndex, vboBufferRecord) {
  SparseMapService$WonderCommonlib.set(sourceInstanceIndex, 0, vboBufferRecord[/* matrixInstanceBufferMap */6]);
  return vboBufferRecord;
}

function addVboBufferToBoxGeometryBufferMap(geometryIndex, state) {
  var newrecord = state.slice();
  newrecord[/* vboBufferRecord */31] = addVboBufferToBoxGeometryBufferMapByRecord(geometryIndex, state[/* vboBufferRecord */31]);
  return newrecord;
}

function addVboBufferToCustomGeometryBufferMap(geometryIndex, state) {
  var newrecord = state.slice();
  newrecord[/* vboBufferRecord */31] = addVboBufferToCustomGeometryBufferMapByRecord(geometryIndex, state[/* vboBufferRecord */31]);
  return newrecord;
}

function addVboBufferToSourceInstanceBufferMap(sourceInstanceIndex, state) {
  var newrecord = state.slice();
  newrecord[/* vboBufferRecord */31] = addVboBufferToSourceInstanceBufferMapByRecord(sourceInstanceIndex, state[/* vboBufferRecord */31]);
  return newrecord;
}

function getVboBufferRecord(state) {
  return state[/* vboBufferRecord */31];
}

function prepareCreatedBuffer(sandbox, state) {
  var createBuffer = Sinon.createEmptyStubWithJsObjSandbox(sandbox);
  Sinon.returns(20, Sinon.onCall(0, createBuffer));
  Sinon.returns(21, Sinon.onCall(1, createBuffer));
  Sinon.returns(12, Sinon.onCall(2, createBuffer));
  Sinon.returns(22, Sinon.onCall(3, createBuffer));
  Sinon.returns(23, Sinon.onCall(4, createBuffer));
  Sinon.returns(13, Sinon.onCall(5, createBuffer));
  var state$1 = FakeGlTool$Wonderjs.setFakeGl(FakeGlTool$Wonderjs.buildFakeGl(sandbox, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* Some */[createBuffer], /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* None */0, /* () */0), state);
  return /* tuple */[
          state$1,
          /* tuple */[
            20,
            21,
            22,
            23
          ],
          /* tuple */[
            12,
            13
          ],
          createBuffer
        ];
}

function getOrCreateAllBoxGeometryBuffers(geometry, state) {
  return /* tuple */[
          getOrCreateBoxGeometryVertexArrayBuffer(geometry, state),
          getOrCreateBoxGeometryNormalArrayBuffer(geometry, state),
          getOrCreateBoxGeometryElementArrayBuffer(geometry, state)
        ];
}

export {
  getRecord                                     ,
  getOrCreateBoxGeometryVertexArrayBuffer       ,
  getOrCreateBoxGeometryNormalArrayBuffer       ,
  getOrCreateBoxGeometryElementArrayBuffer      ,
  getOrCreateInstanceBuffer                     ,
  addVboBufferToBoxGeometryBufferMapByRecord    ,
  addVboBufferToCustomGeometryBufferMapByRecord ,
  addVboBufferToSourceInstanceBufferMapByRecord ,
  addVboBufferToBoxGeometryBufferMap            ,
  addVboBufferToCustomGeometryBufferMap         ,
  addVboBufferToSourceInstanceBufferMap         ,
  getVboBufferRecord                            ,
  prepareCreatedBuffer                          ,
  getOrCreateAllBoxGeometryBuffers              ,
  
}
/* Sinon Not a pure module */
