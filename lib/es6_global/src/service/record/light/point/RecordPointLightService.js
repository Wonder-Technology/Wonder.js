// Generated by BUCKLESCRIPT VERSION 2.1.0, PLEASE EDIT WITH CARE
'use strict';

import * as Caml_int32                       from "../../../../../../../node_modules/bs-platform/lib/es6/caml_int32.js";
import * as SparseMapService$Wonderjs        from "../../../atom/SparseMapService.js";
import * as TypeArrayService$Wonderjs        from "../../../primitiive/TypeArrayService.js";
import * as ArrayService$WonderCommonlib     from "../../../../../../../node_modules/wonder-commonlib/lib/es6_global/src/ArrayService.js";
import * as CopyTypeArrayService$Wonderjs    from "../../../primitiive/CopyTypeArrayService.js";
import * as SparseMapService$WonderCommonlib from "../../../../../../../node_modules/wonder-commonlib/lib/es6_global/src/SparseMapService.js";

function getBufferMaxCount() {
  return 4;
}

function getColorDataSize() {
  return 3;
}

function getIntensityDataSize() {
  return 1;
}

function getConstantDataSize() {
  return 1;
}

function getLinearDataSize() {
  return 1;
}

function getQuadraticDataSize() {
  return 1;
}

function getRangeDataSize() {
  return 1;
}

function _getColorIndex(index) {
  return Caml_int32.imul(index, 3);
}

function getColor(index, typeArr) {
  return TypeArrayService$Wonderjs.getFloat3(Caml_int32.imul(index, 3), typeArr);
}

function setColor(index, color, typeArr) {
  return TypeArrayService$Wonderjs.setFloat3(Caml_int32.imul(index, 3), color, typeArr);
}

function getIntensity(index, typeArr) {
  return typeArr[index];
}

function setIntensity(index, intensity, typeArr) {
  typeArr[index] = intensity;
  return typeArr;
}

function getConstant(index, typeArr) {
  return typeArr[index];
}

function setConstant(index, constant, typeArr) {
  typeArr[index] = constant;
  return typeArr;
}

function getLinear(index, typeArr) {
  return typeArr[index];
}

function setLinear(index, linear, typeArr) {
  typeArr[index] = linear;
  return typeArr;
}

function getQuadratic(index, typeArr) {
  return typeArr[index];
}

function setQuadratic(index, quadratic, typeArr) {
  typeArr[index] = quadratic;
  return typeArr;
}

function getRange(index, typeArr) {
  return typeArr[index];
}

function setRange(index, range, typeArr) {
  typeArr[index] = range;
  return typeArr;
}

function getDefaultColor() {
  return /* float array */[
          1,
          1,
          1
        ];
}

function getDefaultIntensity() {
  return 1;
}

function getDefaultConstant() {
  return 1;
}

function getDefaultLinear() {
  return 0.07;
}

function getDefaultQuadratic() {
  return 0.017;
}

function getDefaultRange() {
  return 65;
}

function _setDefaultTypeArrData(count, param) {
  var defaultColor = /* float array */[
    1,
    1,
    1
  ];
  return /* tuple */[
          param[0],
          ArrayService$WonderCommonlib.reduceOneParam((function (param, index) {
                  return /* tuple */[
                          setColor(index, defaultColor, param[0]),
                          setIntensity(index, 1, param[1]),
                          setConstant(index, 1, param[2]),
                          setLinear(index, 0.07, param[3]),
                          setQuadratic(index, 0.017, param[4]),
                          setRange(index, 65, param[5])
                        ];
                }), /* tuple */[
                param[1],
                param[2],
                param[3],
                param[4],
                param[5],
                param[6]
              ], ArrayService$WonderCommonlib.range(0, count - 1 | 0))
        ];
}

function getColorsOffset() {
  return 0;
}

function getColorsLength() {
  return 12;
}

function getIntensitiesOffset() {
  return Caml_int32.imul(getColorsLength(/* () */0), Float32Array.BYTES_PER_ELEMENT);
}

function getIntensitiesLength() {
  return 4;
}

function getConstantsOffset() {
  return Caml_int32.imul(getColorsLength(/* () */0), Float32Array.BYTES_PER_ELEMENT) + Caml_int32.imul(getIntensitiesLength(/* () */0), Float32Array.BYTES_PER_ELEMENT) | 0;
}

function getConstantsLength() {
  return 4;
}

function getLinearsOffset() {
  return getConstantsOffset(/* () */0) + Caml_int32.imul(getConstantsLength(/* () */0), Float32Array.BYTES_PER_ELEMENT) | 0;
}

function getLinearsLength() {
  return 4;
}

function getQuadraticsOffset() {
  return getLinearsOffset(/* () */0) + Caml_int32.imul(getLinearsLength(/* () */0), Float32Array.BYTES_PER_ELEMENT) | 0;
}

function getQuadraticsLength() {
  return 4;
}

function getRangesOffset() {
  return getQuadraticsOffset(/* () */0) + Caml_int32.imul(getQuadraticsLength(/* () */0), Float32Array.BYTES_PER_ELEMENT) | 0;
}

function getRangesLength() {
  return 4;
}

function _initBufferData() {
  var buffer = new ArrayBuffer(((Float32Array.BYTES_PER_ELEMENT << 2) << 3));
  var colors = new Float32Array(buffer, 0, getColorsLength(/* () */0));
  var intensities = new Float32Array(buffer, Caml_int32.imul(getColorsLength(/* () */0), Float32Array.BYTES_PER_ELEMENT), getIntensitiesLength(/* () */0));
  var constants = new Float32Array(buffer, getConstantsOffset(/* () */0), getConstantsLength(/* () */0));
  var linears = new Float32Array(buffer, getLinearsOffset(/* () */0), getLinearsLength(/* () */0));
  var quadratics = new Float32Array(buffer, getQuadraticsOffset(/* () */0), getQuadraticsLength(/* () */0));
  var ranges = new Float32Array(buffer, getRangesOffset(/* () */0), getRangesLength(/* () */0));
  return _setDefaultTypeArrData(4, /* tuple */[
              buffer,
              colors,
              intensities,
              constants,
              linears,
              quadratics,
              ranges
            ]);
}

function create() {
  var match = _initBufferData(/* () */0);
  var match$1 = match[1];
  return /* record */[
          /* index */0,
          /* buffer */match[0],
          /* colors */match$1[0],
          /* intensities */match$1[1],
          /* constants */match$1[2],
          /* linears */match$1[3],
          /* quadratics */match$1[4],
          /* ranges */match$1[5],
          /* mappedIndexMap */SparseMapService$WonderCommonlib.createEmpty(/* () */0),
          /* gameObjectMap */SparseMapService$WonderCommonlib.createEmpty(/* () */0)
        ];
}

function deepCopyForRestore(param) {
  var gameObjectMap = param[/* gameObjectMap */9];
  var copiedBuffer = CopyTypeArrayService$Wonderjs.copyArrayBuffer(param[/* buffer */1]);
  return /* record */[
          /* index */param[/* index */0],
          /* buffer */copiedBuffer,
          /* colors */CopyTypeArrayService$Wonderjs.copyFloat32TypeArrayFromBufferRange(copiedBuffer, 0, getColorsLength(/* () */0)),
          /* intensities */CopyTypeArrayService$Wonderjs.copyFloat32TypeArrayFromBufferRange(copiedBuffer, Caml_int32.imul(getColorsLength(/* () */0), Float32Array.BYTES_PER_ELEMENT), getIntensitiesLength(/* () */0)),
          /* constants */CopyTypeArrayService$Wonderjs.copyFloat32TypeArrayFromBufferRange(copiedBuffer, getConstantsOffset(/* () */0), getConstantsLength(/* () */0)),
          /* linears */CopyTypeArrayService$Wonderjs.copyFloat32TypeArrayFromBufferRange(copiedBuffer, getLinearsOffset(/* () */0), getLinearsLength(/* () */0)),
          /* quadratics */CopyTypeArrayService$Wonderjs.copyFloat32TypeArrayFromBufferRange(copiedBuffer, getQuadraticsOffset(/* () */0), getQuadraticsLength(/* () */0)),
          /* ranges */CopyTypeArrayService$Wonderjs.copyFloat32TypeArrayFromBufferRange(copiedBuffer, getRangesOffset(/* () */0), getRangesLength(/* () */0)),
          /* mappedIndexMap */SparseMapService$Wonderjs.copy(gameObjectMap),
          /* gameObjectMap */SparseMapService$Wonderjs.copy(gameObjectMap)
        ];
}

export {
  getBufferMaxCount      ,
  getColorDataSize       ,
  getIntensityDataSize   ,
  getConstantDataSize    ,
  getLinearDataSize      ,
  getQuadraticDataSize   ,
  getRangeDataSize       ,
  _getColorIndex         ,
  getColor               ,
  setColor               ,
  getIntensity           ,
  setIntensity           ,
  getConstant            ,
  setConstant            ,
  getLinear              ,
  setLinear              ,
  getQuadratic           ,
  setQuadratic           ,
  getRange               ,
  setRange               ,
  getDefaultColor        ,
  getDefaultIntensity    ,
  getDefaultConstant     ,
  getDefaultLinear       ,
  getDefaultQuadratic    ,
  getDefaultRange        ,
  _setDefaultTypeArrData ,
  getColorsOffset        ,
  getColorsLength        ,
  getIntensitiesOffset   ,
  getIntensitiesLength   ,
  getConstantsOffset     ,
  getConstantsLength     ,
  getLinearsOffset       ,
  getLinearsLength       ,
  getQuadraticsOffset    ,
  getQuadraticsLength    ,
  getRangesOffset        ,
  getRangesLength        ,
  _initBufferData        ,
  create                 ,
  deepCopyForRestore     ,
  
}
/* SparseMapService-Wonderjs Not a pure module */
