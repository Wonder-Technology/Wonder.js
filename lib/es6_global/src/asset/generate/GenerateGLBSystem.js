// Generated by BUCKLESCRIPT VERSION 4.0.0, PLEASE EDIT WITH CARE

import * as BuildBufferSystem$Wonderjs from "./BuildBufferSystem.js";
import * as GetNodeDataSystem$Wonderjs from "./node/GetNodeDataSystem.js";
import * as EncodeGLBJsonSystem$Wonderjs from "./EncodeGLBJsonSystem.js";
import * as BuildLightDataSystem$Wonderjs from "./BuildLightDataSystem.js";
import * as BuildCameraDataSystem$Wonderjs from "./BuildCameraDataSystem.js";
import * as BuildGeometryDataSystem$Wonderjs from "./BuildGeometryDataSystem.js";
import * as BuildMaterialDataSystem$Wonderjs from "./material/BuildMaterialDataSystem.js";
import * as BuildExtensionDataSystem$Wonderjs from "./BuildExtensionDataSystem.js";

function generateGLBData(rootGameObject, imageBase64Map, state) {
  var match = GetNodeDataSystem$Wonderjs.getAllNodeData(rootGameObject, state);
  var match$1 = match[1];
  var state$1 = match[0];
  var match$2 = BuildGeometryDataSystem$Wonderjs.build(match$1[0]);
  var totalByteLength = match$2[0];
  var match$3 = match$2[2];
  var match$4 = match$2[1];
  var match$5 = BuildMaterialDataSystem$Wonderjs.build(match$1[1], imageBase64Map, /* tuple */[
        totalByteLength,
        totalByteLength,
        match$4[0]
      ], state$1);
  var match$6 = match$5[4];
  var totalByteLength$1 = match$6[0];
  var imageUint8DataArr = match$5[3];
  var buffer = BuildBufferSystem$Wonderjs.build(totalByteLength$1, /* tuple */[
        totalByteLength,
        /* tuple */[
          match$3[0],
          match$3[1]
        ]
      ], imageUint8DataArr);
  var cameraDataArr = BuildCameraDataSystem$Wonderjs.build(match$1[2], state$1);
  var lightDataArr = BuildLightDataSystem$Wonderjs.build(match$1[3], state$1);
  var extensionsUsedArr = BuildExtensionDataSystem$Wonderjs.buildExtensionsUsed(lightDataArr);
  return /* tuple */[
          EncodeGLBJsonSystem$Wonderjs.encode(totalByteLength$1, /* tuple */[
                match[2],
                match$6[1],
                match$4[1],
                match$4[2],
                match$5[0],
                match$5[1],
                match$5[2],
                imageUint8DataArr,
                cameraDataArr,
                lightDataArr,
                extensionsUsedArr
              ], state$1),
          buffer
        ];
}

export {
  generateGLBData ,
  
}
/* BuildBufferSystem-Wonderjs Not a pure module */
