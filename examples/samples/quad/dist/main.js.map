{"version":3,"file":"main.js","sources":["../../../../node_modules/wonder-commonlib/dist/es2015/utils/JudgeUtils.ts","../../../../node_modules/wonder-frp/dist/es2015/JudgeUtils.ts","../../../../node_modules/wonder-frp/dist/es2015/global/Variable.ts","../../../../node_modules/wonder-frp/dist/es2015/extend/root.ts","../lib/cuon-utils.ts","../../../../node_modules/wonder-commonlib/dist/es2015/global/Variable.ts","../../../../node_modules/wonder-commonlib/dist/es2015/Log.ts","../../../../node_modules/wonder-frp/dist/es2015/core/Entity.ts","../../../../node_modules/wonder-commonlib/dist/es2015/global/Const.ts","../../../../node_modules/wonder-commonlib/dist/es2015/List.ts","../../../../node_modules/wonder-commonlib/dist/es2015/utils/ExtendUtils.ts","../../../../node_modules/wonder-commonlib/dist/es2015/Collection.ts","../../../../node_modules/wonder-frp/dist/es2015/observer/SubjectObserver.ts","../../../../node_modules/wonder-frp/dist/es2015/core/Observer.ts","../../../../node_modules/wonder-frp/dist/es2015/core/Main.ts","../../../../node_modules/wonder-frp/dist/es2015/definition/typescript/decorator/contract.ts","../../../../node_modules/wonder-frp/dist/es2015/observer/AutoDetachObserver.ts","../../../../node_modules/wonder-frp/dist/es2015/Disposable/InnerSubscription.ts","../../../../node_modules/wonder-frp/dist/es2015/subject/Subject.ts","../../../../node_modules/wonder-frp/dist/es2015/Disposable/SingleDisposable.ts","../../../../node_modules/wonder-frp/dist/es2015/utils/ClassMapUtils.ts","../../../../node_modules/wonder-commonlib/dist/es2015/utils/FunctionUtils.ts","../../../../node_modules/wonder-frp/dist/es2015/core/Stream.ts","../../../../node_modules/wonder-frp/dist/es2015/core/Scheduler.ts","../../../../node_modules/wonder-frp/dist/es2015/stream/AnonymousStream.ts","../../../../node_modules/wonder-frp/dist/es2015/stream/BaseStream.ts","../../../../node_modules/wonder-frp/dist/es2015/stream/FromArrayStream.ts","../../../../node_modules/wonder-frp/dist/es2015/stream/FromPromiseStream.ts","../../../../node_modules/wonder-frp/dist/es2015/stream/FromEventPatternStream.ts","../../../../node_modules/wonder-frp/dist/es2015/stream/IntervalStream.ts","../../../../node_modules/wonder-frp/dist/es2015/stream/IntervalRequestStream.ts","../../../../node_modules/wonder-frp/dist/es2015/stream/TimeoutStream.ts","../../../../node_modules/wonder-frp/dist/es2015/Disposable/GroupDisposable.ts","../../../../node_modules/wonder-frp/dist/es2015/stream/DeferStream.ts","../../../../node_modules/wonder-frp/dist/es2015/definition/typescript/decorator/registerClass.ts","../../../../node_modules/wonder-frp/dist/es2015/global/Operator.ts","../main.ts"],"sourcesContent":["declare var global: any, module: any;\r\n\r\nexport class JudgeUtils {\r\n    public static isArray(arr: any) {\r\n        const MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\r\n        var length = arr && arr.length;\r\n\r\n        return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\r\n    }\r\n\r\n    public static isArrayExactly(arr: any) {\r\n        return Object.prototype.toString.call(arr) === \"[object Array]\";\r\n    }\r\n\r\n    public static isNumber(num: any) {\r\n        return typeof num == \"number\";\r\n    }\r\n\r\n    public static isNumberExactly(num: any) {\r\n        return Object.prototype.toString.call(num) === \"[object Number]\";\r\n    }\r\n\r\n    public static isString(str: any) {\r\n        return typeof str == \"string\";\r\n    }\r\n\r\n    public static isStringExactly(str: any) {\r\n        return Object.prototype.toString.call(str) === \"[object String]\";\r\n    }\r\n\r\n    public static isBoolean(bool: any) {\r\n        return bool === true || bool === false || toString.call(bool) === '[boolect Boolean]';\r\n    }\r\n\r\n    public static isDom(obj: any) {\r\n        return !!(obj && obj.nodeType === 1);\r\n    }\r\n\r\n\r\n    public static isObject(obj: any) {\r\n        var type = typeof obj;\r\n\r\n        return type === 'function' || type === 'object' && !!obj;\r\n    }\r\n\r\n    /**\r\n     * 判断是否为对象字面量（{}）\r\n     */\r\n    public static isDirectObject(obj: any) {\r\n        return Object.prototype.toString.call(obj) === \"[object Object]\";\r\n    }\r\n\r\n    /**\r\n     * 检查宿主对象是否可调用\r\n     *\r\n     * 任何对象，如果其语义在ECMAScript规范中被定义过，那么它被称为原生对象；\r\n     环境所提供的，而在ECMAScript规范中没有被描述的对象，我们称之为宿主对象。\r\n\r\n     该方法用于特性检测，判断对象是否可用。用法如下：\r\n\r\n     MyEngine addEvent():\r\n     if (Tool.judge.isHostMethod(dom, \"addEventListener\")) {    //判断dom是否具有addEventListener方法\r\n        dom.addEventListener(sEventType, fnHandler, false);\r\n        }\r\n     */\r\n    public static isHostMethod(object: any, property: any) {\r\n        var type = typeof object[property];\r\n\r\n        return type === \"function\" ||\r\n            (type === \"object\" && !!object[property]);\r\n        // || type == \"unknown\";\r\n    }\r\n\r\n    public static isNodeJs() {\r\n        return ((typeof global != \"undefined\" && global.module) || (typeof module != \"undefined\")) && typeof module.exports != \"undefined\";\r\n    }\r\n\r\n    //overwrite it in the end of this file\r\n    public static isFunction(func: any): boolean {\r\n        return true;\r\n    }\r\n}\r\n\r\n// Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,\r\n// IE 11 (#1621), and in Safari 8 (#1929).\r\nif (typeof /./ != 'function' && typeof Int8Array != 'object') {\r\n    JudgeUtils.isFunction = (func: any) => {\r\n        return typeof func == 'function';\r\n    };\r\n}\r\nelse {\r\n    JudgeUtils.isFunction = (func: any) => {\r\n        return Object.prototype.toString.call(func) === \"[object Function]\";\r\n    };\r\n}","import { JudgeUtils as JudgeUtils$ } from \"wonder-commonlib/dist/es2015/utils/JudgeUtils\";\r\nimport { Entity } from \"./core/Entity\";\r\nimport { IObserver } from \"./observer/IObserver\";\r\n\r\nexport class JudgeUtils extends JudgeUtils$ {\r\n    public static isPromise(obj) {\r\n        return !!obj\r\n            && !super.isFunction(obj.subscribe)\r\n            && super.isFunction(obj.then);\r\n    }\r\n\r\n    public static isEqual(ob1: Entity, ob2: Entity) {\r\n        return ob1.uid === ob2.uid;\r\n    }\r\n\r\n    public static isIObserver(i: IObserver) {\r\n        return i.next && i.error && i.completed;\r\n    }\r\n}","import { JudgeUtils } from \"../JudgeUtils\";\r\n\r\ndeclare var global: NodeJS.Global, window: Window;\r\n\r\nexport var root: any;\r\n\r\nif (JudgeUtils.isNodeJs() && typeof global != \"undefined\") {\r\n    root = global;\r\n}\r\nelse {\r\n    root = window;\r\n}\r\n","import { root } from \"../global/Variable\";\r\n\r\nroot.requestNextAnimationFrame = (function() {\r\n    var originalRequestAnimationFrame = undefined,\r\n        wrapper = undefined,\r\n        callback = undefined,\r\n        geckoVersion = null,\r\n        userAgent = root.navigator && root.navigator.userAgent,\r\n        index = 0,\r\n        self = this;\r\n\r\n    wrapper = function(time) {\r\n        time = root.performance.now();\r\n        self.callback(time);\r\n    };\r\n\r\n    /*!\r\n     bug!\r\n     below code:\r\n     when invoke b after 1s, will only invoke b, not invoke a!\r\n\r\n     function a(time){\r\n     console.log(\"a\", time);\r\n     webkitRequestAnimationFrame(a);\r\n     }\r\n\r\n     function b(time){\r\n     console.log(\"b\", time);\r\n     webkitRequestAnimationFrame(b);\r\n     }\r\n\r\n     a();\r\n\r\n     setTimeout(b, 1000);\r\n\r\n\r\n\r\n     so use requestAnimationFrame priority!\r\n     */\r\n    if (root.requestAnimationFrame) {\r\n        return requestAnimationFrame;\r\n    }\r\n\r\n\r\n    // Workaround for Chrome 10 bug where Chrome\r\n    // does not pass the time to the animation function\r\n\r\n    if (root.webkitRequestAnimationFrame) {\r\n        // Define the wrapper\r\n\r\n        // Make the switch\r\n\r\n        originalRequestAnimationFrame = root.webkitRequestAnimationFrame;\r\n\r\n        root.webkitRequestAnimationFrame = function(callback, element) {\r\n            self.callback = callback;\r\n\r\n            // Browser calls the wrapper and wrapper calls the callback\r\n\r\n            return originalRequestAnimationFrame(wrapper, element);\r\n        }\r\n    }\r\n\r\n    //修改time参数\r\n    if (root.msRequestAnimationFrame) {\r\n        originalRequestAnimationFrame = root.msRequestAnimationFrame;\r\n\r\n        root.msRequestAnimationFrame = function(callback) {\r\n            self.callback = callback;\r\n\r\n            return originalRequestAnimationFrame(wrapper);\r\n        }\r\n    }\r\n\r\n    // Workaround for Gecko 2.0, which has a bug in\r\n    // mozRequestAnimationFrame() that restricts animations\r\n    // to 30-40 fps.\r\n\r\n    if (root.mozRequestAnimationFrame) {\r\n        // Check the Gecko version. Gecko is used by browsers\r\n        // other than Firefox. Gecko 2.0 corresponds to\r\n        // Firefox 4.0.\r\n\r\n        index = userAgent.indexOf('rv:');\r\n\r\n        if (userAgent.indexOf('Gecko') != -1) {\r\n            geckoVersion = userAgent.substr(index + 3, 3);\r\n\r\n            if (geckoVersion === '2.0') {\r\n                // Forces the return statement to fall through\r\n                // to the setTimeout() function.\r\n\r\n                root.mozRequestAnimationFrame = undefined;\r\n            }\r\n        }\r\n    }\r\n\r\n    return root.webkitRequestAnimationFrame ||\r\n        root.mozRequestAnimationFrame ||\r\n        root.oRequestAnimationFrame ||\r\n        root.msRequestAnimationFrame ||\r\n\r\n        function(callback, element) {\r\n            var start,\r\n                finish;\r\n\r\n            root.setTimeout(function() {\r\n                start = root.performance.now();\r\n                callback(start);\r\n                finish = root.performance.now();\r\n\r\n                self.timeout = 1000 / 60 - (finish - start);\r\n\r\n            }, self.timeout);\r\n        };\r\n}());\r\n\r\nroot.cancelNextRequestAnimationFrame = root.cancelRequestAnimationFrame\r\n    || root.webkitCancelAnimationFrame\r\n    || root.webkitCancelRequestAnimationFrame\r\n    || root.mozCancelRequestAnimationFrame\r\n    || root.oCancelRequestAnimationFrame\r\n    || root.msCancelRequestAnimationFrame\r\n    || clearTimeout;\r\n\r\n","// cuon-utils.js (c) 2012 kanda and matsuda\r\n\r\n/**\r\n * Create a program object and make current\r\n * @param gl GL context\r\n * @param vshader a vertex shader program (string)\r\n * @param fshader a fragment shader program (string)\r\n * @return true, if the program object was created and successfully made current \r\n */\r\nexport function initShaders(gl, vshader, fshader) {\r\n  var program = createProgram(gl, vshader, fshader);\r\n  if (!program) {\r\n    console.log('Failed to create program');\r\n    return false;\r\n  }\r\n\r\n  gl.useProgram(program);\r\n  gl.program = program;\r\n\r\n  return true;\r\n}\r\n\r\n/**\r\n * Create the linked program object\r\n * @param gl GL context\r\n * @param vshader a vertex shader program (string)\r\n * @param fshader a fragment shader program (string)\r\n * @return created program object, or null if the creation has failed\r\n */\r\nfunction createProgram(gl, vshader, fshader) {\r\n  // Create shader object\r\n  var vertexShader = loadShader(gl, gl.VERTEX_SHADER, vshader);\r\n  var fragmentShader = loadShader(gl, gl.FRAGMENT_SHADER, fshader);\r\n  if (!vertexShader || !fragmentShader) {\r\n    return null;\r\n  }\r\n\r\n  // Create a program object\r\n  var program = gl.createProgram();\r\n  if (!program) {\r\n    return null;\r\n  }\r\n\r\n  // Attach the shader objects\r\n  gl.attachShader(program, vertexShader);\r\n  gl.attachShader(program, fragmentShader);\r\n\r\n  // Link the program object\r\n  gl.linkProgram(program);\r\n\r\n  // Check the result of linking\r\n  var linked = gl.getProgramParameter(program, gl.LINK_STATUS);\r\n  if (!linked) {\r\n    var error = gl.getProgramInfoLog(program);\r\n    console.log('Failed to link program: ' + error);\r\n    gl.deleteProgram(program);\r\n    gl.deleteShader(fragmentShader);\r\n    gl.deleteShader(vertexShader);\r\n    return null;\r\n  }\r\n  return program;\r\n}\r\n\r\n/**\r\n * Create a shader object\r\n * @param gl GL context\r\n * @param type the type of the shader object to be created\r\n * @param source shader program (string)\r\n * @return created shader object, or null if the creation has failed.\r\n */\r\nfunction loadShader(gl, type, source) {\r\n  // Create shader object\r\n  var shader = gl.createShader(type);\r\n  if (shader == null) {\r\n    console.log('unable to create shader');\r\n    return null;\r\n  }\r\n\r\n  // Set the shader program\r\n  gl.shaderSource(shader, source);\r\n\r\n  // Compile the shader\r\n  gl.compileShader(shader);\r\n\r\n  // Check the result of compilation\r\n  var compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\r\n  if (!compiled) {\r\n    var error = gl.getShaderInfoLog(shader);\r\n    console.log('Failed to compile shader: ' + error);\r\n    gl.deleteShader(shader);\r\n    return null;\r\n  }\r\n\r\n  return shader;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Initialize and get the rendering for WebGL\r\n * @param canvas <cavnas> element\r\n * @param opt_debug flag to initialize the context for debugging\r\n * @return the rendering context for WebGL\r\n */\r\nexport function getWebGLContext(canvas) {\r\n  // Get the rendering context for WebGL\r\n  var gl = setupWebGL(canvas);\r\n\r\n  if (!gl) return null;\r\n\r\n  // // if opt_debug is explicitly false, create the context for debugging\r\n  // if (arguments.length < 2 || opt_debug) {\r\n  //     gl = WebGLDebugUtils.makeDebugContext(gl);\r\n  // }\r\n\r\n  return gl;\r\n}\r\n\r\n\r\n/**\r\n * Creates a webgl context. If creation fails it will\r\n * change the contents of the container of the <canvas>\r\n * tag to an error message with the correct links for WebGL.\r\n * @param {Element} canvas. The canvas element to create a\r\n *     context from.\r\n * @param {WebGLContextCreationAttirbutes} opt_attribs Any\r\n *     creation attributes you want to pass in.\r\n * @param {function:(msg)} opt_onError An function to call\r\n *     if there is an error during creation.\r\n * @return {WebGLRenderingContext} The created context.\r\n */\r\nvar setupWebGL = function(canvas) {\r\n  // function handleCreationError(msg) {\r\n  //     var container = document.getElementsByTagName(\"body\")[0];\r\n  //     //var container = canvas.parentNode;\r\n  //     if (container) {\r\n  //         var str = window.WebGLRenderingContext ?\r\n  //             OTHER_PROBLEM :\r\n  //             GET_A_WEBGL_BROWSER;\r\n  //         if (msg) {\r\n  //             str += \"<br/><br/>Status: \" + msg;\r\n  //         }\r\n  //         container.innerHTML = makeFailHTML(str);\r\n  //     }\r\n  // };\r\n  //\r\n  // opt_onError = opt_onError || handleCreationError;\r\n\r\n  if (canvas.addEventListener) {\r\n    canvas.addEventListener(\"webglcontextcreationerror\", function(event) {\r\n      throw new Error(event.statusMessage);\r\n    }, false);\r\n  }\r\n\r\n  var context = create3DContext(canvas);\r\n  // if (!context) {\r\n  //     if (!window.WebGLRenderingContext) {\r\n  //         opt_onError(\"\");\r\n  //     } else {\r\n  //         opt_onError(\"\");\r\n  //     }\r\n  // }\r\n\r\n  if(!context){\r\n    throw new Error(\"error\");\r\n  }\r\n\r\n  return context;\r\n};\r\n\r\n\r\n/**\r\n * Creates a webgl context.\r\n * @param {!Canvas} canvas The canvas tag to get context\r\n *     from. If one is not passed in one will be created.\r\n * @return {!WebGLContext} The created context.\r\n */\r\nvar create3DContext = function(canvas) {\r\n  var names = [\"webgl\", \"experimental-webgl\", \"webkit-3d\", \"moz-webgl\"];\r\n  var context = null;\r\n  for (var ii = 0; ii < names.length; ++ii) {\r\n    try {\r\n      context = canvas.getContext(names[ii]);\r\n    } catch(e) {}\r\n    if (context) {\r\n      break;\r\n    }\r\n  }\r\n  return context;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","import { JudgeUtils } from \"../utils/JudgeUtils\";\r\n\r\ndeclare var global: NodeJS.Global, window: Window;\r\nexport var root: any;\r\n\r\nif (JudgeUtils.isNodeJs() && typeof global != \"undefined\") {\r\n    root = global;\r\n}\r\nelse {\r\n    root = window;\r\n}","import { root } from \"./global/Variable\";\r\n\r\nexport class Log {\r\n    public static info = {\r\n        INVALID_PARAM: \"invalid parameter\",\r\n\r\n        helperFunc: function(...args) {\r\n            var result = \"\";\r\n\r\n            args.forEach(function(val) {\r\n                result += String(val) + \" \";\r\n            });\r\n\r\n            return result.slice(0, -1);\r\n        },\r\n        assertion: function(...args) {\r\n            if (args.length === 2) {\r\n                return this.helperFunc(args[0], args[1]);\r\n            }\r\n            else if (args.length === 3) {\r\n                return this.helperFunc(args[1], args[0], args[2]);\r\n            }\r\n            else {\r\n                throw new Error(\"args.length must <= 3\");\r\n            }\r\n        },\r\n\r\n        FUNC_INVALID: function(...args) {\r\n            args.unshift(\"invalid\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST: function(...args) {\r\n            args.unshift(\"must\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST_BE: function(...args) {\r\n            args.unshift(\"must be\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST_NOT_BE: function(...args) {\r\n            args.unshift(\"must not be\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_SHOULD: function(...args) {\r\n            args.unshift(\"should\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_SHOULD_NOT: function(...args) {\r\n            args.unshift(\"should not\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_SUPPORT: function(...args) {\r\n            args.unshift(\"support\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_NOT_SUPPORT: function(...args) {\r\n            args.unshift(\"not support\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST_DEFINE: function(...args) {\r\n            args.unshift(\"must define\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST_NOT_DEFINE: function(...args) {\r\n            args.unshift(\"must not define\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_UNKNOW: function(...args) {\r\n            args.unshift(\"unknow\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_EXPECT: function(...args) {\r\n            args.unshift(\"expect\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_UNEXPECT: function(...args) {\r\n            args.unshift(\"unexpect\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_EXIST: function(...args) {\r\n            args.unshift(\"exist\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_NOT_EXIST: function(...args) {\r\n            args.unshift(\"not exist\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_ONLY: function(...args) {\r\n            args.unshift(\"only\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_CAN_NOT: function(...args) {\r\n            args.unshift(\"can't\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Output Debug message.\r\n     * @function\r\n     * @param {String} message\r\n     */\r\n    public static log(...messages) {\r\n        if (!this._exec(\"log\", messages)) {\r\n            root.alert(messages.join(\",\"));\r\n        }\r\n\r\n        this._exec(\"trace\", messages);\r\n    }\r\n\r\n    /**\r\n     * 断言失败时，会提示错误信息，但程序会继续执行下去\r\n     * 使用断言捕捉不应该发生的非法情况。不要混淆非法情况与错误情况之间的区别，后者是必然存在的并且是一定要作出处理的。\r\n     *\r\n     * 1）对非预期错误使用断言\r\n     断言中的布尔表达式的反面一定要描述一个非预期错误，下面所述的在一定情况下为非预期错误的一些例子：\r\n     （1）空指针。\r\n     （2）输入或者输出参数的值不在预期范围内。\r\n     （3）数组的越界。\r\n     非预期错误对应的就是预期错误，我们通常使用错误处理代码来处理预期错误，而使用断言处理非预期错误。在代码执行过程中，有些错误永远不应该发生，这样的错误是非预期错误。断言可以被看成是一种可执行的注释，你不能依赖它来让代码正常工作（《Code Complete 2》）。例如：\r\n     int nRes = f(); // nRes 由 f 函数控制， f 函数保证返回值一定在 -100 ~ 100\r\n     Assert(-100 <= nRes && nRes <= 100); // 断言，一个可执行的注释\r\n     由于 f 函数保证了返回值处于 -100 ~ 100，那么如果出现了 nRes 不在这个范围的值时，就表明一个非预期错误的出现。后面会讲到“隔栏”，那时会对断言有更加深刻的理解。\r\n     2）不要把需要执行的代码放入断言中\r\n     断言用于软件的开发和维护，而通常不在发行版本中包含断言。\r\n     需要执行的代码放入断言中是不正确的，因为在发行版本中，这些代码通常不会被执行，例如：\r\n     Assert(f()); // f 函数通常在发行版本中不会被执行\r\n     而使用如下方法则比较安全：\r\n     res = f();\r\n     Assert(res); // 安全\r\n     3）对来源于内部系统的可靠的数据使用断言，而不要对外部不可靠的数据使用断言，对于外部不可靠数据，应该使用错误处理代码。\r\n     再次强调，把断言看成可执行的注释。\r\n     * @param cond 如果cond返回false，则断言失败，显示message\r\n     * @param message\r\n     */\r\n    public static assert(cond, ...messages) {\r\n        if (cond) {\r\n            if (!this._exec(\"assert\", arguments, 1)) {\r\n                this.log.apply(this, Array.prototype.slice.call(arguments, 1));\r\n            }\r\n        }\r\n    }\r\n\r\n    public static error(cond, ...message): any {\r\n        if (cond) {\r\n            /*!\r\n            console.error will not interrupt, it will throw error and continue exec the left statements\r\n\r\n            but here need interrupt! so not use it here.\r\n             */\r\n            //if (!this._exec(\"error\", arguments, 1)) {\r\n            throw new Error(Array.prototype.slice.call(arguments, 1).join(\"\\n\"));\r\n            //}\r\n        }\r\n    }\r\n\r\n    public static warn(...message) {\r\n        var result = this._exec(\"warn\", arguments);\r\n\r\n        if (!result) {\r\n            this.log.apply(this, arguments);\r\n        }\r\n        else {\r\n            this._exec(\"trace\", [\"warn trace\"]);\r\n        }\r\n    }\r\n\r\n    private static _exec(consoleMethod, args, sliceBegin = 0) {\r\n        if (root.console && root.console[consoleMethod]) {\r\n            root.console[consoleMethod].apply(root.console, Array.prototype.slice.call(args, sliceBegin));\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n}","export abstract class Entity {\r\n    public static UID: number = 1;\r\n\r\n    private _uid: string = null;\r\n    get uid() {\r\n        return this._uid;\r\n    }\r\n    set uid(uid: string) {\r\n        this._uid = uid;\r\n    }\r\n\r\n    constructor(uidPre: string) {\r\n        this._uid = uidPre + String(Entity.UID++);\r\n    }\r\n}","export const $BREAK = {\r\n    break: true\r\n};\r\nexport const $REMOVE = void 0;","import { JudgeUtils } from \"./utils/JudgeUtils\";\r\nimport { $BREAK } from \"./global/Const\";\r\n\r\nexport class List<T> {\r\n    protected children: Array<T> = null;\r\n\r\n    public getCount(): number {\r\n        return this.children.length;\r\n    }\r\n\r\n    public hasChild(child: any): boolean {\r\n        var c: any = null,\r\n            children = this.children;\r\n\r\n        for (let i = 0, len = children.length; i < len; i++) {\r\n            c = children[i];\r\n\r\n            if (child.uid && c.uid && child.uid == c.uid) {\r\n                return true;\r\n            }\r\n            else if (child === c) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public hasChildWithFunc(func: Function): boolean {\r\n        for (let i = 0, len = this.children.length; i < len; i++) {\r\n            if (func(this.children[i], i)) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n\r\n    public getChildren() {\r\n        return this.children;\r\n    }\r\n\r\n    public getChild(index: number) {\r\n        return this.children[index];\r\n    }\r\n\r\n    public addChild(child: T) {\r\n        this.children.push(child);\r\n\r\n        return this;\r\n    }\r\n\r\n    public addChildren(arg: Array<T> | List<T> | any) {\r\n        if (JudgeUtils.isArray(arg)) {\r\n            let children: Array<T> = arg;\r\n\r\n            this.children = this.children.concat(children);\r\n        }\r\n        else if (arg instanceof List) {\r\n            let children: List<T> = arg;\r\n\r\n            this.children = this.children.concat(children.getChildren());\r\n        }\r\n        else {\r\n            let child: any = arg;\r\n\r\n            this.addChild(child);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    //todo test\r\n    public setChildren(children: Array<T>) {\r\n        this.children = children;\r\n\r\n        return this;\r\n    }\r\n\r\n    public unShiftChild(child: T) {\r\n        this.children.unshift(child);\r\n    }\r\n\r\n    public removeAllChildren() {\r\n        this.children = [];\r\n\r\n        return this;\r\n    }\r\n\r\n    public forEach(func: Function, context?: any) {\r\n        this._forEach(this.children, func, context);\r\n\r\n        return this;\r\n    }\r\n\r\n    //public removeChildAt (index) {\r\n    //    Log.error(index < 0, \"序号必须大于等于0\");\r\n    //\r\n    //    this.children.splice(index, 1);\r\n    //}\r\n    //\r\n\r\n    public toArray() {\r\n        return this.children;\r\n    }\r\n\r\n    protected copyChildren() {\r\n        return this.children.slice(0);\r\n    }\r\n\r\n    protected removeChildHelper(arg: any): Array<T> {\r\n        var result = null;\r\n\r\n        if (JudgeUtils.isFunction(arg)) {\r\n            let func = <Function>arg;\r\n\r\n            result = this._removeChild(this.children, func);\r\n        }\r\n        else if (arg.uid) {\r\n            result = this._removeChild(this.children, (e) => {\r\n                if (!e.uid) {\r\n                    return false;\r\n                }\r\n                return e.uid === arg.uid;\r\n            });\r\n        }\r\n        else {\r\n            result = this._removeChild(this.children, (e) => {\r\n                return e === arg;\r\n            });\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    private _forEach(arr: T[], func: Function, context?: any) {\r\n        var scope = context,\r\n            i = 0,\r\n            len = arr.length;\r\n\r\n\r\n        for (i = 0; i < len; i++) {\r\n            if (func.call(scope, arr[i], i) === $BREAK) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    private _removeChild(arr: T[], func: Function) {\r\n        var self = this,\r\n            removedElementArr = [],\r\n            remainElementArr = [];\r\n\r\n        this._forEach(arr, (e, index) => {\r\n            if (!!func.call(self, e)) {\r\n                removedElementArr.push(e);\r\n            }\r\n            else {\r\n                remainElementArr.push(e);\r\n            }\r\n        });\r\n\r\n        this.children = remainElementArr;\r\n\r\n        return removedElementArr;\r\n    }\r\n}","import { JudgeUtils } from \"./JudgeUtils\";\r\n\r\nexport class ExtendUtils {\r\n    /**\r\n     * 深拷贝\r\n     *\r\n     * 示例：\r\n     * 如果拷贝对象为数组，能够成功拷贝（不拷贝Array原型链上的成员）\r\n     * expect(extend.extendDeep([1, { x: 1, y: 1 }, \"a\", { x: 2 }, [2]])).toEqual([1, { x: 1, y: 1 }, \"a\", { x: 2 }, [2]]);\r\n     *\r\n     * 如果拷贝对象为对象，能够成功拷贝（能拷贝原型链上的成员）\r\n     * var result = null;\r\n     function A() {\r\n            };\r\n     A.prototype.a = 1;\r\n\r\n     function B() {\r\n            };\r\n     B.prototype = new A();\r\n     B.prototype.b = { x: 1, y: 1 };\r\n     B.prototype.c = [{ x: 1 }, [2]];\r\n\r\n     var t = new B();\r\n\r\n     result = extend.extendDeep(t);\r\n\r\n     expect(result).toEqual(\r\n     {\r\n         a: 1,\r\n         b: { x: 1, y: 1 },\r\n         c: [{ x: 1 }, [2]]\r\n     });\r\n     * @param parent\r\n     * @param child\r\n     * @returns\r\n     */\r\n    public static extendDeep(parent, child?, filter = function(val, i) { return true; }) {\r\n        var i = null,\r\n            len = 0,\r\n            toStr = Object.prototype.toString,\r\n            sArr = \"[object Array]\",\r\n            sOb = \"[object Object]\",\r\n            type = \"\",\r\n            _child = null;\r\n\r\n        //数组的话，不获得Array原型上的成员。\r\n        if (toStr.call(parent) === sArr) {\r\n            _child = child || [];\r\n\r\n            for (i = 0, len = parent.length; i < len; i++) {\r\n                let member = parent[i];\r\n\r\n                if (!filter(member, i)) {\r\n                    continue;\r\n                }\r\n\r\n                if (member.clone) {\r\n                    _child[i] = member.clone();\r\n                    continue;\r\n                }\r\n\r\n                type = toStr.call(member);\r\n                if (type === sArr || type === sOb) {    //如果为数组或object对象\r\n                    _child[i] = type === sArr ? [] : {};\r\n                    ExtendUtils.extendDeep(member, _child[i]);\r\n                } else {\r\n                    _child[i] = member;\r\n                }\r\n            }\r\n        }\r\n        //对象的话，要获得原型链上的成员。因为考虑以下情景：\r\n        //类A继承于类B，现在想要拷贝类A的实例a的成员（包括从类B继承来的成员），那么就需要获得原型链上的成员。\r\n        else if (toStr.call(parent) === sOb) {\r\n            _child = child || {};\r\n\r\n            for (i in parent) {\r\n                let member = parent[i];\r\n\r\n                if (!filter(member, i)) {\r\n                    continue;\r\n                }\r\n\r\n                if (member.clone) {\r\n                    _child[i] = member.clone();\r\n                    continue;\r\n                }\r\n\r\n                type = toStr.call(member);\r\n                if (type === sArr || type === sOb) {    //如果为数组或object对象\r\n                    _child[i] = type === sArr ? [] : {};\r\n                    ExtendUtils.extendDeep(member, _child[i]);\r\n                } else {\r\n                    _child[i] = member;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            _child = parent;\r\n        }\r\n\r\n        return _child;\r\n    }\r\n\r\n    /**\r\n     * 浅拷贝\r\n     */\r\n    public static extend(destination: any, source: any) {\r\n        var property = \"\";\r\n\r\n        for (property in source) {\r\n            destination[property] = source[property];\r\n        }\r\n        return destination;\r\n    }\r\n\r\n    public static copyPublicAttri(source: any) {\r\n        var property = null,\r\n            destination = {};\r\n\r\n        this.extendDeep(source, destination, function(item, property) {\r\n            return property.slice(0, 1) !== \"_\"\r\n                && !JudgeUtils.isFunction(item);\r\n        });\r\n\r\n        return destination;\r\n    }\r\n}","import { List } from \"./List\";\r\nimport { JudgeUtils } from \"./utils/JudgeUtils\";\r\nimport { ExtendUtils } from \"./utils/ExtendUtils\";\r\nimport { $BREAK, $REMOVE } from \"./global/Const\";\r\n\r\nexport class Collection<T> extends List<T>{\r\n    public static create<T>(children = []) {\r\n        var obj = new this(<Array<T>>children);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(children: Array<T> = []) {\r\n        super();\r\n\r\n        this.children = children;\r\n    }\r\n\r\n    public clone();\r\n    public clone(isDeep: boolean);\r\n    public clone(target: Collection<T>);\r\n    public clone(target: Collection<T>, isDeep: boolean);\r\n\r\n    public clone(...args) {\r\n        var target: Collection<T> = null,\r\n            isDeep: boolean = null;\r\n\r\n        if (args.length === 0) {\r\n            isDeep = false;\r\n            target = Collection.create<T>();\r\n        }\r\n        else if (args.length === 1) {\r\n            if (JudgeUtils.isBoolean(args[0])) {\r\n                target = Collection.create<T>();\r\n                isDeep = args[0];\r\n            }\r\n            else {\r\n                target = args[0];\r\n                isDeep = false;\r\n            }\r\n        }\r\n        else {\r\n            target = args[0];\r\n            isDeep = args[1];\r\n        }\r\n\r\n        if (isDeep === true) {\r\n            target.setChildren(ExtendUtils.extendDeep(this.children));\r\n        }\r\n        else {\r\n            target.setChildren(ExtendUtils.extend([], this.children));\r\n        }\r\n\r\n        return target;\r\n    }\r\n\r\n    public filter(func: (value: T, index: number) => boolean): Collection<T> {\r\n        var children = this.children,\r\n            result = [],\r\n            value = null;\r\n\r\n        for (let i = 0, len = children.length; i < len; i++) {\r\n            value = children[i];\r\n\r\n            if (func.call(children, value, i)) {\r\n                result.push(value);\r\n            }\r\n        }\r\n\r\n        return Collection.create<T>(result);\r\n    }\r\n\r\n    public findOne(func: (value: T, index: number) => boolean) {\r\n        var scope = this.children,\r\n            result: T = null;\r\n\r\n        this.forEach((value: T, index) => {\r\n            if (!func.call(scope, value, index)) {\r\n                return;\r\n            }\r\n\r\n            result = value;\r\n            return $BREAK;\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    public reverse() {\r\n        return Collection.create<T>(this.copyChildren().reverse());\r\n    }\r\n\r\n    public removeChild(arg: any) {\r\n        return Collection.create<T>(this.removeChildHelper(arg));\r\n    }\r\n\r\n    public sort(func: (a: T, b: T) => any, isSortSelf = false): Collection<T> {\r\n        if (isSortSelf) {\r\n            this.children.sort(func);\r\n\r\n            return this;\r\n        }\r\n\r\n        return Collection.create<T>(this.copyChildren().sort(func));\r\n    }\r\n\r\n    public map(func: (value: T, index: number) => any) {\r\n        var resultArr = [];\r\n\r\n        this.forEach((e, index) => {\r\n            var result = func(e, index);\r\n\r\n            if (result !== $REMOVE) {\r\n                resultArr.push(result);\r\n            }\r\n            //e && e[handlerName] && e[handlerName].apply(context || e, valueArr);\r\n        });\r\n\r\n        return Collection.create<any>(resultArr);\r\n    }\r\n\r\n    public removeRepeatItems() {\r\n        var noRepeatList = Collection.create<T>();\r\n\r\n        this.forEach((item: T) => {\r\n            if (noRepeatList.hasChild(item)) {\r\n                return;\r\n            }\r\n\r\n            noRepeatList.addChild(item);\r\n        });\r\n\r\n        return noRepeatList;\r\n    }\r\n\r\n    public hasRepeatItems() {\r\n        var noRepeatList = Collection.create<T>(),\r\n            hasRepeat: boolean = false;\r\n\r\n        this.forEach((item: T) => {\r\n            if (noRepeatList.hasChild(item)) {\r\n                hasRepeat = true;\r\n\r\n                return $BREAK;\r\n            }\r\n\r\n            noRepeatList.addChild(item);\r\n        });\r\n\r\n        return hasRepeat;\r\n    }\r\n}\r\n","import { IObserver } from \"./IObserver\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\n\r\nexport class SubjectObserver implements IObserver {\r\n    public observers: Collection<IObserver> = Collection.create<IObserver>();\r\n\r\n    private _disposable: IDisposable = null;\r\n\r\n    public isEmpty() {\r\n        return this.observers.getCount() === 0;\r\n    }\r\n\r\n    public next(value: any) {\r\n        this.observers.forEach((ob: Observer) => {\r\n            ob.next(value);\r\n        });\r\n    }\r\n\r\n    public error(error: any) {\r\n        this.observers.forEach((ob: Observer) => {\r\n            ob.error(error);\r\n        });\r\n    }\r\n\r\n    public completed() {\r\n        this.observers.forEach((ob: Observer) => {\r\n            ob.completed();\r\n        });\r\n    }\r\n\r\n    public addChild(observer: Observer) {\r\n        this.observers.addChild(observer);\r\n\r\n        observer.setDisposable(this._disposable);\r\n    }\r\n\r\n    public removeChild(observer: Observer) {\r\n        this.observers.removeChild((ob: Observer) => {\r\n            return JudgeUtils.isEqual(ob, observer);\r\n        });\r\n    }\r\n\r\n    public dispose() {\r\n        this.observers.forEach((ob: Observer) => {\r\n            ob.dispose();\r\n        });\r\n\r\n        this.observers.removeAllChildren();\r\n    }\r\n\r\n    public setDisposable(disposable: IDisposable) {\r\n        this.observers.forEach((observer: Observer) => {\r\n            observer.setDisposable(disposable);\r\n        });\r\n\r\n        this._disposable = disposable;\r\n    }\r\n}\r\n","import { Entity } from \"./Entity\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\n\r\nexport abstract class Observer extends Entity implements IObserver {\r\n    private _isDisposed: boolean = null;\r\n    get isDisposed() {\r\n        return this._isDisposed;\r\n    }\r\n    set isDisposed(isDisposed: boolean) {\r\n        this._isDisposed = isDisposed;\r\n    }\r\n\r\n    protected onUserNext: Function = null;\r\n    protected onUserError: Function = null;\r\n    protected onUserCompleted: Function = null;\r\n\r\n    private _isStop: boolean = false;\r\n    //private _disposeHandler:wdCb.Collection<Function> = wdCb.Collection.create<Function>();\r\n    private _disposable: IDisposable = null;\r\n\r\n\r\n    constructor(observer: IObserver);\r\n    constructor(onNext: Function, onError: Function, onCompleted: Function);\r\n\r\n    constructor(...args) {\r\n        super(\"Observer\");\r\n\r\n        if (args.length === 1) {\r\n            let observer: IObserver = args[0];\r\n\r\n            this.onUserNext = function(v) {\r\n                observer.next(v);\r\n            };\r\n            this.onUserError = function(e) {\r\n                observer.error(e);\r\n            };\r\n            this.onUserCompleted = function() {\r\n                observer.completed();\r\n            };\r\n        }\r\n        else {\r\n            let onNext = args[0],\r\n                onError = args[1],\r\n                onCompleted = args[2];\r\n\r\n            this.onUserNext = onNext || function(v) { };\r\n            this.onUserError = onError || function(e) {\r\n                throw e;\r\n            };\r\n            this.onUserCompleted = onCompleted || function() { };\r\n        }\r\n    }\r\n\r\n    public next(value: any) {\r\n        if (!this._isStop) {\r\n            return this.onNext(value);\r\n        }\r\n    }\r\n\r\n    public error(error: any) {\r\n        if (!this._isStop) {\r\n            this._isStop = true;\r\n            this.onError(error);\r\n        }\r\n    }\r\n\r\n    public completed() {\r\n        if (!this._isStop) {\r\n            this._isStop = true;\r\n            this.onCompleted();\r\n        }\r\n    }\r\n\r\n    public dispose() {\r\n        this._isStop = true;\r\n        this._isDisposed = true;\r\n\r\n        if (this._disposable) {\r\n            this._disposable.dispose();\r\n        }\r\n\r\n        //this._disposeHandler.forEach((handler) => {\r\n        //    handler();\r\n        //});\r\n    }\r\n\r\n    //public fail(e) {\r\n    //    if (!this._isStop) {\r\n    //        this._isStop = true;\r\n    //        this.error(e);\r\n    //        return true;\r\n    //    }\r\n    //\r\n    //    return false;\r\n    //}\r\n\r\n    public setDisposable(disposable: IDisposable) {\r\n        this._disposable = disposable;\r\n    }\r\n\r\n    protected abstract onNext(value: any);\r\n\r\n    protected abstract onError(error: any);\r\n\r\n    protected abstract onCompleted();\r\n}","export class Main {\r\n    public static isTest: boolean = false;\r\n}","import { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\nimport { Main } from \"../../../core/Main\";\r\n\r\nexport function assert(cond: boolean, message: string = \"contract error\") {\r\n    Log.error(!cond, message);\r\n}\r\n\r\nexport function requireCheck(InFunc) {\r\n    return function(target, name, descriptor) {\r\n        var value = descriptor.value;\r\n\r\n        descriptor.value = function(...args) {\r\n            if (Main.isTest) {\r\n                InFunc.apply(this, args);\r\n            }\r\n\r\n            return value.apply(this, args);\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function ensure(OutFunc) {\r\n    return function(target, name, descriptor) {\r\n        var value = descriptor.value;\r\n\r\n        descriptor.value = function(...args) {\r\n            var result = value.apply(this, args),\r\n                params = [result].concat(args);\r\n\r\n            if (Main.isTest) {\r\n                OutFunc.apply(this, params);\r\n            }\r\n\r\n            return result;\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function requireGetter(InFunc) {\r\n    return function(target, name, descriptor) {\r\n        var getter = descriptor.get;\r\n\r\n        descriptor.get = function() {\r\n            if (Main.isTest) {\r\n                InFunc.call(this);\r\n            }\r\n\r\n            return getter.call(this);\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function requireSetter(InFunc) {\r\n    return function(target, name, descriptor) {\r\n        var setter = descriptor.set;\r\n\r\n        descriptor.set = function(val) {\r\n            if (Main.isTest) {\r\n                InFunc.call(this, val);\r\n            }\r\n\r\n            setter.call(this, val);\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function ensureGetter(OutFunc) {\r\n    return function(target, name, descriptor) {\r\n        var getter = descriptor.get;\r\n\r\n        descriptor.get = function() {\r\n            var result = getter.call(this);\r\n\r\n            if (Main.isTest) {\r\n                OutFunc.call(this, result);\r\n            }\r\n\r\n            return result;\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function ensureSetter(OutFunc) {\r\n    return function(target, name, descriptor) {\r\n        var setter = descriptor.set;\r\n\r\n        descriptor.set = function(val) {\r\n            var result = setter.call(this, val),\r\n                params = [result, val];\r\n\r\n            if (Main.isTest) {\r\n                OutFunc.apply(this, params);\r\n            }\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function invariant(func) {\r\n    return function(target) {\r\n        if (Main.isTest) {\r\n            func(target);\r\n        }\r\n    }\r\n}","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\nimport { requireCheck } from \"../definition/typescript/decorator/contract\";\r\nimport { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\n\r\nexport class AutoDetachObserver extends Observer {\r\n    public static create(observer: IObserver);\r\n    public static create(onNext: Function, onError: Function, onCompleted: Function);\r\n\r\n    public static create(...args) {\r\n        if (args.length === 1) {\r\n            return new this(args[0]);\r\n        }\r\n        else {\r\n            return new this(args[0], args[1], args[2]);\r\n        }\r\n    }\r\n\r\n    @requireCheck(function() {\r\n        if (this.isDisposed) {\r\n            Log.warn(\"only can dispose once\");\r\n        }\r\n    })\r\n    public dispose() {\r\n        if (this.isDisposed) {\r\n            return;\r\n        }\r\n\r\n        super.dispose();\r\n    }\r\n\r\n    protected onNext(value: any) {\r\n        try {\r\n            this.onUserNext(value);\r\n        }\r\n        catch (e) {\r\n            this.onError(e);\r\n        }\r\n    }\r\n\r\n    protected onError(error: any) {\r\n        try {\r\n            this.onUserError(error);\r\n        }\r\n        catch (e) {\r\n            throw e;\r\n        }\r\n        finally {\r\n            this.dispose();\r\n        }\r\n    }\r\n\r\n    protected onCompleted() {\r\n        try {\r\n            this.onUserCompleted();\r\n            this.dispose();\r\n        }\r\n        catch (e) {\r\n            throw e;\r\n        }\r\n    }\r\n}","import { IDisposable } from \"./IDisposable\";\r\nimport { Subject } from \"../subject/Subject\";\r\nimport { GeneratorSubject } from \"../subject/GeneratorSubject\";\r\nimport { Observer } from \"../core/Observer\";\r\n\r\nexport class InnerSubscription implements IDisposable {\r\n    public static create(subject: Subject | GeneratorSubject, observer: Observer) {\r\n        var obj = new this(subject, observer);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _subject: Subject | GeneratorSubject = null;\r\n    private _observer: Observer = null;\r\n\r\n    constructor(subject: Subject | GeneratorSubject, observer: Observer) {\r\n        this._subject = subject;\r\n        this._observer = observer;\r\n    }\r\n\r\n    public dispose() {\r\n        this._subject.remove(this._observer);\r\n\r\n        this._observer.dispose();\r\n    }\r\n}","import { IObserver } from \"../observer/IObserver\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { SubjectObserver } from \"../observer/SubjectObserver\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { AutoDetachObserver } from \"../observer/AutoDetachObserver\";\r\nimport { InnerSubscription } from \"../Disposable/InnerSubscription\";\r\n\r\nexport class Subject implements IObserver {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _source: Stream = null;\r\n    get source() {\r\n        return this._source;\r\n    }\r\n    set source(source: Stream) {\r\n        this._source = source;\r\n    }\r\n\r\n    private _observer: any = new SubjectObserver();\r\n\r\n    public subscribe(arg1?: Function | Observer, onError?: Function, onCompleted?: Function): IDisposable {\r\n        var observer: Observer = arg1 instanceof Observer\r\n            ? <AutoDetachObserver>arg1\r\n            : AutoDetachObserver.create(<Function>arg1, onError, onCompleted);\r\n\r\n        //this._source && observer.setDisposeHandler(this._source.disposeHandler);\r\n\r\n        this._observer.addChild(observer);\r\n\r\n        return InnerSubscription.create(this, observer);\r\n    }\r\n\r\n    public next(value: any) {\r\n        this._observer.next(value);\r\n    }\r\n\r\n    public error(error: any) {\r\n        this._observer.error(error);\r\n    }\r\n\r\n    public completed() {\r\n        this._observer.completed();\r\n    }\r\n\r\n    public start() {\r\n        if (!this._source) {\r\n            return;\r\n        }\r\n\r\n        this._observer.setDisposable(this._source.buildStream(this));\r\n    }\r\n\r\n    public remove(observer: Observer) {\r\n        this._observer.removeChild(observer);\r\n    }\r\n\r\n    public dispose() {\r\n        this._observer.dispose();\r\n    }\r\n}","import { Entity } from \"../core/Entity\";\r\nimport { IDisposable } from \"./IDisposable\";\r\n\r\nexport class SingleDisposable extends Entity implements IDisposable {\r\n    public static create(disposeHandler: Function = function() { }) {\r\n        var obj = new this(disposeHandler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _disposeHandler: Function = null;\r\n    private _isDisposed: boolean = false;\r\n\r\n    constructor(disposeHandler: Function) {\r\n        super(\"SingleDisposable\");\r\n\r\n        this._disposeHandler = disposeHandler;\r\n    }\r\n\r\n    public setDisposeHandler(handler: Function) {\r\n        this._disposeHandler = handler;\r\n    }\r\n\r\n    public dispose() {\r\n        if (this._isDisposed) {\r\n            return;\r\n        }\r\n\r\n        this._isDisposed = true;\r\n\r\n        this._disposeHandler();\r\n    }\r\n}","export class ClassMapUtils {\r\n    private static _classMap: ClassMapData = {};\r\n\r\n    public static addClassMap(className: string, _class: any) {\r\n        this._classMap[className] = _class;\r\n    }\r\n\r\n    public static getClass(className: string) {\r\n        return this._classMap[className];\r\n    }\r\n}\r\n\r\ntype ClassMapData = {\r\n    [className: string]: any;\r\n}\r\n","export class FunctionUtils {\r\n    public static bind(object: any, func: Function) {\r\n        return function() {\r\n            return func.apply(object, arguments);\r\n        };\r\n    }\r\n}","import { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\nimport { Entity } from \"./Entity\";\r\nimport { Scheduler } from \"./Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { Observer } from \"./Observer\";\r\nimport { Subject } from \"../subject/Subject\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\nimport { ClassMapUtils } from \"../utils/ClassMapUtils\";\r\nimport { requireCheck, assert } from \"../definition/typescript/decorator/contract\";\r\nimport { FunctionUtils } from \"wonder-commonlib/dist/es2015/utils/FunctionUtils\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\n\r\nexport abstract class Stream extends Entity {\r\n    public scheduler: Scheduler = null;\r\n    public subscribeFunc: (observer: IObserver) => Function | void = null;\r\n\r\n    constructor(subscribeFunc) {\r\n        super(\"Stream\");\r\n\r\n        this.subscribeFunc = subscribeFunc || function() { };\r\n    }\r\n\r\n    public abstract subscribe(arg1: Function | Observer | Subject, onError?: Function, onCompleted?: Function): IDisposable;\r\n\r\n    public buildStream(observer: IObserver): IDisposable {\r\n        return SingleDisposable.create(<Function>(this.subscribeFunc(observer) || function() { }));\r\n    }\r\n\r\n    public do(onNext?: Function, onError?: Function, onCompleted?: Function) {\r\n        return ClassMapUtils.getClass(\"DoStream\").create(this, onNext, onError, onCompleted);\r\n    }\r\n\r\n    public map(selector: Function) {\r\n        return ClassMapUtils.getClass(\"MapStream\").create(this, selector);\r\n    }\r\n\r\n    public flatMap(selector: Function) {\r\n        return this.map(selector).mergeAll();\r\n    }\r\n\r\n    public concatMap(selector: Function) {\r\n        return this.map(selector).concatAll();\r\n    }\r\n\r\n    public mergeAll() {\r\n        return ClassMapUtils.getClass(\"MergeAllStream\").create(this);\r\n    }\r\n\r\n    public concatAll() {\r\n        return this.merge(1);\r\n    }\r\n\r\n    public skipUntil(otherStream: Stream) {\r\n        return ClassMapUtils.getClass(\"SkipUntilStream\").create(this, otherStream);\r\n    }\r\n\r\n    public takeUntil(otherStream: Stream) {\r\n        return ClassMapUtils.getClass(\"TakeUntilStream\").create(this, otherStream);\r\n    }\r\n\r\n    @requireCheck(function(count: number = 1) {\r\n        assert(count >= 0, Log.info.FUNC_SHOULD(\"count\", \">= 0\"));\r\n    })\r\n    public take(count: number = 1) {\r\n        var self = this;\r\n\r\n        if (count === 0) {\r\n            return ClassMapUtils.getClass(\"Operator\").empty();\r\n        }\r\n\r\n        return ClassMapUtils.getClass(\"Operator\").createStream((observer: IObserver) => {\r\n            self.subscribe((value: any) => {\r\n                if (count > 0) {\r\n                    observer.next(value);\r\n                }\r\n\r\n                count--;\r\n\r\n                if (count <= 0) {\r\n                    observer.completed();\r\n                }\r\n            }, (e: any) => {\r\n                observer.error(e);\r\n            }, () => {\r\n                observer.completed();\r\n            });\r\n        });\r\n    }\r\n\r\n    @requireCheck(function(count: number = 1) {\r\n        assert(count >= 0, Log.info.FUNC_SHOULD(\"count\", \">= 0\"));\r\n    })\r\n    public takeLast(count: number = 1) {\r\n        var self = this;\r\n\r\n        if (count === 0) {\r\n            return ClassMapUtils.getClass(\"Operator\").empty();\r\n        }\r\n\r\n        return ClassMapUtils.getClass(\"Operator\").createStream((observer: IObserver) => {\r\n            var queue = [];\r\n\r\n            self.subscribe((value: any) => {\r\n                queue.push(value);\r\n\r\n                if (queue.length > count) {\r\n                    queue.shift();\r\n                }\r\n            }, (e: any) => {\r\n                observer.error(e);\r\n            }, () => {\r\n                while (queue.length > 0) {\r\n                    observer.next(queue.shift());\r\n                }\r\n\r\n                observer.completed();\r\n            });\r\n        });\r\n    }\r\n\r\n    public takeWhile(predicate: (value: any, index: number, source: Stream) => boolean, thisArg = this) {\r\n        var self = this,\r\n            bindPredicate = null;\r\n\r\n        bindPredicate = FunctionUtils.bind(thisArg, predicate);\r\n\r\n        return ClassMapUtils.getClass(\"Operator\").createStream((observer: IObserver) => {\r\n            var i = 0,\r\n                isStart = false;\r\n\r\n            self.subscribe((value: any) => {\r\n                if (bindPredicate(value, i++, self)) {\r\n                    try {\r\n                        observer.next(value);\r\n                        isStart = true;\r\n                    }\r\n                    catch (e) {\r\n                        observer.error(e);\r\n                        return;\r\n                    }\r\n                }\r\n                else {\r\n                    if (isStart) {\r\n                        observer.completed();\r\n                    }\r\n                }\r\n            }, (e: any) => {\r\n                observer.error(e);\r\n            }, () => {\r\n                observer.completed();\r\n            });\r\n        });\r\n    }\r\n\r\n    public lastOrDefault(defaultValue: any = null) {\r\n        var self = this;\r\n\r\n        return ClassMapUtils.getClass(\"Operator\").createStream((observer: IObserver) => {\r\n            var queue = [];\r\n\r\n            self.subscribe((value: any) => {\r\n                queue.push(value);\r\n\r\n                if (queue.length > 1) {\r\n                    queue.shift();\r\n                }\r\n            }, (e: any) => {\r\n                observer.error(e);\r\n            }, () => {\r\n                if (queue.length === 0) {\r\n                    observer.next(defaultValue);\r\n                }\r\n                else {\r\n                    while (queue.length > 0) {\r\n                        observer.next(queue.shift());\r\n                    }\r\n                }\r\n\r\n                observer.completed();\r\n            });\r\n        });\r\n    }\r\n\r\n    public filter(predicate: (value: any) => boolean, thisArg = this) {\r\n        if (this instanceof ClassMapUtils.getClass(\"FilterStream\")) {\r\n            let self: any = this;\r\n\r\n            return self.internalFilter(predicate, thisArg);\r\n        }\r\n\r\n        return ClassMapUtils.getClass(\"FilterStream\").create(this, predicate, thisArg);\r\n    }\r\n\r\n    public filterWithState(predicate: (value: any) => boolean, thisArg = this) {\r\n        if (this instanceof ClassMapUtils.getClass(\"FilterStream\")) {\r\n            let self: any = this;\r\n\r\n            return self.internalFilter(predicate, thisArg);\r\n        }\r\n\r\n        return ClassMapUtils.getClass(\"FilterWithStateStream\").create(this, predicate, thisArg);\r\n    }\r\n\r\n    public concat(streamArr: Array<Stream>);\r\n    public concat(...otherStream);\r\n\r\n    public concat() {\r\n        var args: Array<Stream> = null;\r\n\r\n        if (JudgeUtils.isArray(arguments[0])) {\r\n            args = arguments[0];\r\n        }\r\n        else {\r\n            args = Array.prototype.slice.call(arguments, 0);\r\n        }\r\n\r\n        args.unshift(this);\r\n\r\n        return ClassMapUtils.getClass(\"ConcatStream\").create(args);\r\n    }\r\n\r\n    public merge(maxConcurrent: number);\r\n    public merge(streamArr: Array<Stream>);\r\n    public merge(...otherStreams);\r\n\r\n    public merge(...args) {\r\n        if (JudgeUtils.isNumber(args[0])) {\r\n            var maxConcurrent: number = args[0];\r\n\r\n            return ClassMapUtils.getClass(\"MergeStream\").create(this, maxConcurrent);\r\n        }\r\n\r\n        if (JudgeUtils.isArray(args[0])) {\r\n            args = arguments[0];\r\n        }\r\n        else {\r\n        }\r\n\r\n        let stream: Stream = null;\r\n\r\n        args.unshift(this);\r\n\r\n        stream = ClassMapUtils.getClass(\"Operator\").fromArray(args).mergeAll();\r\n\r\n        return stream;\r\n    }\r\n\r\n    public repeat(count: number = -1) {\r\n        return ClassMapUtils.getClass(\"RepeatStream\").create(this, count);\r\n    }\r\n\r\n    public ignoreElements() {\r\n        return ClassMapUtils.getClass(\"IgnoreElementsStream\").create(this);\r\n    }\r\n\r\n    protected handleSubject(subject: any) {\r\n        if (this._isSubject(subject)) {\r\n            this._setSubject(subject);\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    private _isSubject(subject: Subject) {\r\n        return subject instanceof Subject;\r\n    }\r\n\r\n    private _setSubject(subject: Subject) {\r\n        subject.source = this;\r\n    }\r\n}","import { IObserver } from \"../observer/IObserver\";\r\nimport { root } from \"../global/Variable\";\r\n\r\nexport class Scheduler {\r\n    //todo remove \"...args\"\r\n    public static create(...args) {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _requestLoopId: any = null;\r\n    get requestLoopId() {\r\n        return this._requestLoopId;\r\n    }\r\n    set requestLoopId(requestLoopId: any) {\r\n        this._requestLoopId = requestLoopId;\r\n    }\r\n\r\n    //param observer is used by TestScheduler to rewrite\r\n\r\n    public publishRecursive(observer: IObserver, initial: any, action: Function) {\r\n        action(initial);\r\n    }\r\n\r\n    public publishInterval(observer: IObserver, initial: any, interval: number, action: Function): number {\r\n        return root.setInterval(() => {\r\n            initial = action(initial);\r\n        }, interval);\r\n    }\r\n\r\n    public publishIntervalRequest(observer: IObserver, action: Function) {\r\n        var self = this,\r\n            loop = (time) => {\r\n                var isEnd = action(time);\r\n\r\n                if (isEnd) {\r\n                    return;\r\n                }\r\n\r\n                self._requestLoopId = root.requestNextAnimationFrame(loop);\r\n            };\r\n\r\n        this._requestLoopId = root.requestNextAnimationFrame(loop);\r\n    }\r\n\r\n    public publishTimeout(observer: IObserver, time: number, action: Function): number {\r\n        return root.setTimeout(() => {\r\n            action(time);\r\n            observer.completed();\r\n        }, time);\r\n    }\r\n}","import { Stream } from \"../core/Stream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { Subject } from \"../subject/Subject\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { AutoDetachObserver } from \"../observer/AutoDetachObserver\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class AnonymousStream extends Stream {\r\n    public static create(subscribeFunc: Function) {\r\n        var obj = new this(subscribeFunc);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(subscribeFunc: Function) {\r\n        super(subscribeFunc);\r\n\r\n        this.scheduler = Scheduler.create();\r\n    }\r\n\r\n    public buildStream(observer: IObserver): IDisposable {\r\n        return SingleDisposable.create(<Function>(this.subscribeFunc(observer) || function() { }));\r\n    }\r\n\r\n    public subscribe(subject: Subject): IDisposable;\r\n    public subscribe(observer: IObserver): IDisposable;\r\n\r\n    public subscribe(onNext: (value: any) => void): IDisposable;\r\n    public subscribe(onNext: (value: any) => void, onError: (e: any) => void): IDisposable;\r\n    public subscribe(onNext: (value: any) => void, onError: (e: any) => void, onComplete: () => void): IDisposable;\r\n\r\n    public subscribe(...args): IDisposable {\r\n        var observer: AutoDetachObserver = null;\r\n\r\n        if (args[0] instanceof Subject) {\r\n            let subject: Subject = <Subject>args[0];\r\n\r\n            this.handleSubject(subject);\r\n\r\n            return;\r\n        }\r\n        else if (JudgeUtils.isIObserver(<IObserver>args[0])) {\r\n            observer = AutoDetachObserver.create(<IObserver>args[0]);\r\n        }\r\n        else {\r\n            let onNext: Function = <Function>args[0],\r\n                onError: Function = <Function>args[1] || null,\r\n                onCompleted: Function = <Function>args[2] || null;\r\n\r\n            observer = AutoDetachObserver.create(onNext, onError, onCompleted);\r\n        }\r\n\r\n        observer.setDisposable(this.buildStream(observer));\r\n\r\n        return observer;\r\n    }\r\n}","import { Stream } from \"../core/Stream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { Subject } from \"../subject/Subject\";\r\nimport { AutoDetachObserver } from \"../observer/AutoDetachObserver\";\r\n\r\nexport abstract class BaseStream extends Stream {\r\n    public abstract subscribeCore(observer: IObserver): IDisposable;\r\n\r\n    public subscribe(arg1: Function | Observer | Subject, onError?, onCompleted?): IDisposable {\r\n        var observer: Observer = null;\r\n\r\n        if (this.handleSubject(arg1)) {\r\n            return;\r\n        }\r\n\r\n        observer = arg1 instanceof Observer\r\n            ? AutoDetachObserver.create(<IObserver>arg1)\r\n            : AutoDetachObserver.create(<Function>arg1, onError, onCompleted);\r\n\r\n        //observer.setDisposeHandler(this.disposeHandler);\r\n\r\n\r\n        observer.setDisposable(this.buildStream(observer));\r\n\r\n        return observer;\r\n    }\r\n\r\n    public buildStream(observer: IObserver): IDisposable {\r\n        super.buildStream(observer);\r\n\r\n        return this.subscribeCore(observer);\r\n    }\r\n\r\n    //private _hasMultiObservers(){\r\n    //    return this.scheduler.getObservers() > 1;\r\n    //}\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class FromArrayStream extends BaseStream {\r\n    public static create(array: Array<any>, scheduler: Scheduler) {\r\n        var obj = new this(array, scheduler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _array: Array<any> = null;\r\n\r\n    constructor(array: Array<any>, scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this._array = array;\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var array = this._array,\r\n            len = array.length;\r\n\r\n        function loopRecursive(i) {\r\n            if (i < len) {\r\n                observer.next(array[i]);\r\n\r\n                loopRecursive(i + 1);\r\n            } else {\r\n                observer.completed();\r\n            }\r\n        }\r\n\r\n        this.scheduler.publishRecursive(observer, 0, loopRecursive);\r\n\r\n        return SingleDisposable.create();\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class FromPromiseStream extends BaseStream {\r\n    public static create(promise: any, scheduler: Scheduler) {\r\n        var obj = new this(promise, scheduler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _promise: any = null;\r\n\r\n    constructor(promise: any, scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this._promise = promise;\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        this._promise.then((data) => {\r\n            observer.next(data);\r\n            observer.completed();\r\n        }, (err) => {\r\n            observer.error(err);\r\n        }, observer);\r\n\r\n        return SingleDisposable.create();\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class FromEventPatternStream extends BaseStream {\r\n    public static create(addHandler: Function, removeHandler: Function) {\r\n        var obj = new this(addHandler, removeHandler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _addHandler: Function = null;\r\n    private _removeHandler: Function = null;\r\n\r\n    constructor(addHandler: Function, removeHandler: Function) {\r\n        super(null);\r\n\r\n        this._addHandler = addHandler;\r\n        this._removeHandler = removeHandler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var self = this;\r\n\r\n        function innerHandler(event) {\r\n            observer.next(event);\r\n        }\r\n\r\n        this._addHandler(innerHandler);\r\n\r\n        return SingleDisposable.create(() => {\r\n            self._removeHandler(innerHandler);\r\n        });\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\nimport { root } from \"../global/Variable\";\r\n\r\nexport class IntervalStream extends BaseStream {\r\n    public static create(interval: number, scheduler: Scheduler) {\r\n        var obj = new this(interval, scheduler);\r\n\r\n        obj.initWhenCreate();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _interval: number = null;\r\n\r\n    constructor(interval: number, scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this._interval = interval;\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public initWhenCreate() {\r\n        this._interval = this._interval <= 0 ? 1 : this._interval;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var self = this,\r\n            id = null;\r\n\r\n        id = this.scheduler.publishInterval(observer, 0, this._interval, (count) => {\r\n            //self.scheduler.next(count);\r\n            observer.next(count);\r\n\r\n            return count + 1;\r\n        });\r\n\r\n        //Disposer.addDisposeHandler(() => {\r\n        //});\r\n\r\n        return SingleDisposable.create(() => {\r\n            root.clearInterval(id);\r\n        });\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\nimport { root } from \"../global/Variable\";\r\n\r\nexport class IntervalRequestStream extends BaseStream {\r\n    public static create(scheduler: Scheduler) {\r\n        var obj = new this(scheduler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _isEnd: boolean = false;\r\n\r\n    constructor(scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var self = this;\r\n\r\n        this.scheduler.publishIntervalRequest(observer, (time) => {\r\n            observer.next(time);\r\n\r\n            return self._isEnd;\r\n        });\r\n\r\n        return SingleDisposable.create(() => {\r\n            root.cancelNextRequestAnimationFrame(self.scheduler.requestLoopId);\r\n            self._isEnd = true;\r\n        });\r\n    }\r\n}","import { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\nimport { BaseStream } from \"./BaseStream\";\r\nimport { requireCheck, assert } from \"../definition/typescript/decorator/contract\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\nimport { root } from \"../global/Variable\";\r\n\r\nexport class TimeoutStream extends BaseStream {\r\n    @requireCheck(function(time: number, scheduler: Scheduler) {\r\n        assert(time > 0, Log.info.FUNC_SHOULD(\"time\", \"> 0\"));\r\n    })\r\n    public static create(time: number, scheduler: Scheduler) {\r\n        var obj = new this(time, scheduler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _time: number = null;\r\n\r\n    constructor(time: number, scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this._time = time;\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var id = null;\r\n\r\n        id = this.scheduler.publishTimeout(observer, this._time, (time) => {\r\n            observer.next(time);\r\n        });\r\n\r\n        return SingleDisposable.create(() => {\r\n            root.clearTimeout(id);\r\n        });\r\n    }\r\n}","import { Entity } from \"../core/Entity\";\r\nimport { IDisposable } from \"./IDisposable\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\n\r\nexport class GroupDisposable extends Entity implements IDisposable {\r\n    public static create(disposable?: IDisposable) {\r\n        var obj = new this(disposable);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _group: Collection<IDisposable> = Collection.create<IDisposable>();\r\n    private _isDisposed: boolean = false;\r\n\r\n    constructor(disposable?: IDisposable) {\r\n        super(\"GroupDisposable\");\r\n\r\n        if (disposable) {\r\n            this._group.addChild(disposable);\r\n        }\r\n    }\r\n\r\n    public add(disposable: IDisposable) {\r\n        this._group.addChild(disposable);\r\n\r\n        return this;\r\n    }\r\n\r\n    public remove(disposable: IDisposable) {\r\n        this._group.removeChild(disposable);\r\n\r\n        return this;\r\n    }\r\n\r\n    public dispose() {\r\n        if (this._isDisposed) {\r\n            return;\r\n        }\r\n\r\n        this._isDisposed = true;\r\n\r\n        this._group.forEach((disposable: IDisposable) => {\r\n            disposable.dispose();\r\n        });\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\n\r\nexport class DeferStream extends BaseStream {\r\n    public static create(buildStreamFunc: Function) {\r\n        var obj = new this(buildStreamFunc);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _buildStreamFunc: Function = null;\r\n\r\n    constructor(buildStreamFunc: Function) {\r\n        super(null);\r\n\r\n        this._buildStreamFunc = buildStreamFunc;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var group = GroupDisposable.create();\r\n\r\n        group.add(this._buildStreamFunc().buildStream(observer));\r\n\r\n        return group;\r\n    }\r\n}","import { ClassMapUtils } from \"../../../utils/ClassMapUtils\";\r\n\r\nexport function registerClass(className: string) {\r\n    return function(target) {\r\n        ClassMapUtils.addClassMap(className, target);\r\n    }\r\n}\r\n\r\n","import { AnonymousStream } from \"../stream/AnonymousStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { FromArrayStream } from \"../stream/FromArrayStream\";\r\nimport { FromPromiseStream } from \"../stream/FromPromiseStream\";\r\nimport { FromEventPatternStream } from \"../stream/FromEventPatternStream\";\r\nimport { IntervalStream } from \"../stream/IntervalStream\";\r\nimport { IntervalRequestStream } from \"../stream/IntervalRequestStream\";\r\nimport { TimeoutStream } from \"../stream/TimeoutStream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { root } from \"./Variable\";\r\nimport { DeferStream } from \"../stream/DeferStream\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"Operator\")\r\nexport class Operator {\r\n    public static empty() {\r\n        return this.createStream((observer: IObserver) => {\r\n            observer.completed();\r\n        });\r\n    }\r\n\r\n    public static createStream(subscribeFunc) {\r\n        return AnonymousStream.create(subscribeFunc);\r\n    }\r\n\r\n    public static fromArray(array: Array<any>, scheduler = Scheduler.create()) {\r\n        return FromArrayStream.create(array, scheduler);\r\n    }\r\n}\r\n\r\nexport var createStream = Operator.createStream;\r\n\r\nexport var empty = Operator.empty;\r\n\r\nexport var fromArray = Operator.fromArray;\r\n\r\nexport var fromPromise = (promise: any, scheduler = Scheduler.create()) => {\r\n    return FromPromiseStream.create(promise, scheduler);\r\n};\r\n\r\nexport var fromEventPattern = (addHandler: Function, removeHandler: Function) => {\r\n    return FromEventPatternStream.create(addHandler, removeHandler);\r\n};\r\n\r\nexport var interval = (interval, scheduler = Scheduler.create()) => {\r\n    return IntervalStream.create(interval, scheduler);\r\n};\r\n\r\nexport var intervalRequest = (scheduler = Scheduler.create()) => {\r\n    return IntervalRequestStream.create(scheduler);\r\n};\r\n\r\nexport var timeout = (time, scheduler = Scheduler.create()) => {\r\n    return TimeoutStream.create(time, scheduler);\r\n};\r\nexport var callFunc = (func: Function, context = root) => {\r\n    return createStream((observer: IObserver) => {\r\n        try {\r\n            observer.next(func.call(context, null));\r\n        }\r\n        catch (e) {\r\n            observer.error(e);\r\n        }\r\n\r\n        observer.completed();\r\n    });\r\n};\r\n\r\nexport var judge = (condition: Function, thenSource: Function, elseSource: Function) => {\r\n    return condition() ? thenSource() : elseSource();\r\n};\r\n\r\nexport var defer = (buildStreamFunc: Function) => {\r\n    return DeferStream.create(buildStreamFunc);\r\n};\r\n\r\nexport var just = (returnValue: any) => {\r\n    return createStream((observer: IObserver) => {\r\n        observer.next(returnValue);\r\n        observer.completed();\r\n    });\r\n}\r\n","import \"wonder-frp/dist/es2015/extend/root\";\nimport {getWebGLContext, initShaders} from \"./lib/cuon-utils\";\nimport {intervalRequest} from \"wonder-frp/dist/es2015/global/Operator\";\n\nexport class AAA{\n    public static a(){}\n}\n\nvar VSHADER_SOURCE =\n    'attribute vec4 a_Position;\\n' +\n    'void main() {\\n' +\n    '  gl_Position = a_Position;\\n' +\n    '}\\n';\n\n// Fragment shader program\nvar FSHADER_SOURCE =\n    'void main() {\\n' +\n    '  gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\\n' +\n    '}\\n';\n\n\nexport var start = () => {\n    intervalRequest()\n        .subscribe((time) => {\n            _loopBody(time);\n        });\n}\n\nvar _loopBody = (time:number) => {\n    // Retrieve <canvas> element\n    var canvas = document.getElementById('webgl');\n\n    // Get the rendering context for WebGL\n    var gl = getWebGLContext(canvas);\n    if (!gl) {\n        console.log('Failed to get the rendering context for WebGL');\n        return;\n    }\n\n    // Initialize shaders\n    if (!initShaders(gl, VSHADER_SOURCE, FSHADER_SOURCE)) {\n        console.log('Failed to intialize shaders.');\n        return;\n    }\n\n    // Write the positions of vertices to a vertex shader\n    var n = initVertexBuffers(gl);\n    if (n < 0) {\n        console.log('Failed to set the positions of the vertices');\n        return;\n    }\n\n    // Specify the color for clearing <canvas>\n    gl.clearColor(0, 0, 0, 1);\n\n    // Clear <canvas>\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    // Draw the rectangle\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, n);\n}\n\nfunction initVertexBuffers(gl) {\n    var vertices = new Float32Array([\n        -0.5, 0.5,   -0.5, -0.5,   0.5, 0.5,　0.5, -0.5\n    ]);\n    var n = 4; // The number of vertices\n\n    // Create a buffer object\n    var vertexBuffer = gl.createBuffer();\n    if (!vertexBuffer) {\n        console.log('Failed to create the buffer object');\n        return -1;\n    }\n\n    // Bind the buffer object to target\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n    // Write date into the buffer object\n    gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n\n    var a_Position = gl.getAttribLocation(gl.program, 'a_Position');\n    if (a_Position < 0) {\n        console.log('Failed to get the storage location of a_Position');\n        return -1;\n    }\n    // Assign the buffer object to a_Position variable\n    gl.vertexAttribPointer(a_Position, 2, gl.FLOAT, false, 0, 0);\n\n    // Enable the assignment to a_Position variable\n    gl.enableVertexAttribArray(a_Position);\n\n    return n;\n}\n"],"names":["JudgeUtils","JudgeUtils$","root"],"mappings":"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"}