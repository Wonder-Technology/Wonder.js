{"version":3,"file":"wd.module.js","sources":["../node_modules/wonder-commonlib/dist/es2015/utils/PathUtils.ts","../node_modules/wonder-commonlib/dist/es2015/utils/JudgeUtils.ts","../node_modules/wonder-commonlib/dist/es2015/global/Variable.ts","../node_modules/wonder-commonlib/dist/es2015/Log.ts","../src/utils/Log.ts","../node_modules/wonder-commonlib/dist/es2015/global/Const.ts","../node_modules/wonder-commonlib/dist/es2015/List.ts","../node_modules/wonder-commonlib/dist/es2015/utils/ExtendUtils.ts","../node_modules/wonder-commonlib/dist/es2015/Collection.ts","../node_modules/wonder-commonlib/dist/es2015/Hash.ts","../src/utils/JudgeUtils.ts","../node_modules/wonder-frp/dist/es2015/core/Entity.ts","../node_modules/wonder-frp/dist/es2015/JudgeUtils.ts","../node_modules/wonder-frp/dist/es2015/observer/SubjectObserver.ts","../node_modules/wonder-frp/dist/es2015/core/Observer.ts","../node_modules/wonder-frp/dist/es2015/core/Main.ts","../node_modules/wonder-frp/dist/es2015/definition/typescript/decorator/contract.ts","../node_modules/wonder-frp/dist/es2015/observer/AutoDetachObserver.ts","../node_modules/wonder-frp/dist/es2015/Disposable/InnerSubscription.ts","../node_modules/wonder-frp/dist/es2015/subject/Subject.ts","../node_modules/wonder-frp/dist/es2015/Disposable/SingleDisposable.ts","../node_modules/wonder-frp/dist/es2015/utils/ClassMapUtils.ts","../node_modules/wonder-commonlib/dist/es2015/utils/FunctionUtils.ts","../node_modules/wonder-frp/dist/es2015/core/Stream.ts","../node_modules/wonder-frp/dist/es2015/stream/BaseStream.ts","../node_modules/wonder-frp/dist/es2015/observer/AnonymousObserver.ts","../node_modules/wonder-frp/dist/es2015/observer/DoObserver.ts","../node_modules/wonder-frp/dist/es2015/definition/typescript/decorator/registerClass.ts","../node_modules/wonder-frp/dist/es2015/stream/DoStream.ts","../node_modules/wonder-frp/dist/es2015/Disposable/GroupDisposable.ts","../node_modules/wonder-frp/dist/es2015/observer/ConcatObserver.ts","../node_modules/wonder-frp/dist/es2015/stream/ConcatStream.ts","../node_modules/wonder-frp/dist/es2015/observer/MapObserver.ts","../node_modules/wonder-frp/dist/es2015/stream/MapStream.ts","../node_modules/wonder-frp/dist/es2015/observer/MergeAllObserver.ts","../node_modules/wonder-frp/dist/es2015/stream/MergeAllStream.ts","../node_modules/wonder-frp/dist/es2015/observer/SkipUntilOtherObserver.ts","../node_modules/wonder-frp/dist/es2015/observer/SkipUntilSourceObserver.ts","../node_modules/wonder-frp/dist/es2015/stream/SkipUntilStream.ts","../node_modules/wonder-frp/dist/es2015/observer/TakeUntilObserver.ts","../node_modules/wonder-frp/dist/es2015/stream/TakeUntilStream.ts","../node_modules/wonder-frp/dist/es2015/observer/FilterObserver.ts","../node_modules/wonder-frp/dist/es2015/stream/FilterStream.ts","../node_modules/wonder-frp/dist/es2015/enum/FilterState.ts","../node_modules/wonder-frp/dist/es2015/observer/FilterWithStateObserver.ts","../node_modules/wonder-frp/dist/es2015/stream/FilterWithStateStream.ts","../node_modules/wonder-frp/dist/es2015/observer/MergeObserver.ts","../node_modules/wonder-frp/dist/es2015/stream/MergeStream.ts","../node_modules/wonder-frp/dist/es2015/stream/RepeatStream.ts","../node_modules/wonder-frp/dist/es2015/observer/IgnoreElementsObserver.ts","../node_modules/wonder-frp/dist/es2015/stream/IgnoreElementsStream.ts","../node_modules/wonder-frp/dist/es2015/global/Variable.ts","../node_modules/wonder-frp/dist/es2015/extend/root.ts","../node_modules/wonder-frp/dist/es2015/core/Scheduler.ts","../node_modules/wonder-frp/dist/es2015/stream/AnonymousStream.ts","../node_modules/wonder-frp/dist/es2015/stream/FromArrayStream.ts","../node_modules/wonder-frp/dist/es2015/stream/FromPromiseStream.ts","../node_modules/wonder-frp/dist/es2015/stream/FromEventPatternStream.ts","../node_modules/wonder-frp/dist/es2015/stream/IntervalStream.ts","../node_modules/wonder-frp/dist/es2015/stream/IntervalRequestStream.ts","../node_modules/wonder-frp/dist/es2015/stream/TimeoutStream.ts","../node_modules/wonder-frp/dist/es2015/stream/DeferStream.ts","../node_modules/wonder-frp/dist/es2015/global/Operator.ts","../src/definition/Variable.ts","../src/renderer/enum/ETextureFormat.ts","../src/renderer/enum/ETextureType.ts","../src/config/CompileConfig.ts","../src/renderer/config/InitConfigData.ts","../src/renderer/worker/render_file/config/InitConfigWorkerData.ts","../node_modules/wonder-commonlib/dist/es2015/Queue.ts","../node_modules/wonder-commonlib/dist/es2015/Stack.ts","../node_modules/wonder-commonlib/dist/es2015/utils/DomQuery.ts","../node_modules/wonder-commonlib/dist/es2015/typescript/decorator/contract.ts","../src/definition/typescript/decorator/contract.ts","../node_modules/wonder-expect.js/dist/wdet.js","../src/renderer/enum/EGPUPrecision.ts","../src/renderer/utils/device/gpuDetectUtils.ts","../src/renderer/utils/worker/render_file/texture/textureCacheUtils.ts","../src/renderer/texture/TextureCacheSystem.ts","../src/utils/arrayUtils.ts","../src/renderer/texture/TextureData.ts","../src/component/ComponentData.ts","../src/utils/ClassUtils.ts","../src/component/ComponentTypeIdManager.ts","../src/utils/objectUtils.ts","../src/component/ComponentSystem.ts","../node_modules/wonder-lodash/isObject.js","../node_modules/wonder-lodash/_baseCreate.js","../node_modules/wonder-lodash/_baseLodash.js","../node_modules/wonder-lodash/_LodashWrapper.js","../node_modules/wonder-lodash/_arrayPush.js","../node_modules/wonder-lodash/_freeGlobal.js","../node_modules/wonder-lodash/_root.js","../node_modules/wonder-lodash/_Symbol.js","../node_modules/wonder-lodash/_getRawTag.js","../node_modules/wonder-lodash/_objectToString.js","../node_modules/wonder-lodash/_baseGetTag.js","../node_modules/wonder-lodash/isObjectLike.js","../node_modules/wonder-lodash/_baseIsArguments.js","../node_modules/wonder-lodash/isArguments.js","../node_modules/wonder-lodash/isArray.js","../node_modules/wonder-lodash/_isFlattenable.js","../node_modules/wonder-lodash/_baseFlatten.js","../node_modules/wonder-lodash/flatten.js","../node_modules/wonder-lodash/_apply.js","../node_modules/wonder-lodash/_overRest.js","../node_modules/wonder-lodash/constant.js","../node_modules/wonder-lodash/isFunction.js","../node_modules/wonder-lodash/_coreJsData.js","../node_modules/wonder-lodash/_isMasked.js","../node_modules/wonder-lodash/_toSource.js","../node_modules/wonder-lodash/_baseIsNative.js","../node_modules/wonder-lodash/_getValue.js","../node_modules/wonder-lodash/_getNative.js","../node_modules/wonder-lodash/_defineProperty.js","../node_modules/wonder-lodash/identity.js","../node_modules/wonder-lodash/_baseSetToString.js","../node_modules/wonder-lodash/_shortOut.js","../node_modules/wonder-lodash/_setToString.js","../node_modules/wonder-lodash/_flatRest.js","../node_modules/wonder-lodash/_WeakMap.js","../node_modules/wonder-lodash/_metaMap.js","../node_modules/wonder-lodash/noop.js","../node_modules/wonder-lodash/_getData.js","../node_modules/wonder-lodash/_realNames.js","../node_modules/wonder-lodash/_getFuncName.js","../node_modules/wonder-lodash/_LazyWrapper.js","../node_modules/wonder-lodash/_copyArray.js","../node_modules/wonder-lodash/_wrapperClone.js","../node_modules/wonder-lodash/wrapperLodash.js","../node_modules/wonder-lodash/_isLaziable.js","../node_modules/wonder-lodash/_createFlow.js","../node_modules/wonder-lodash/flowRight.js","../node_modules/wonder-lodash/_arrayMap.js","../node_modules/wonder-lodash/isSymbol.js","../node_modules/wonder-lodash/_baseToString.js","../node_modules/wonder-lodash/toString.js","../node_modules/wonder-fantasy-land/dist/es2015/types/IO.ts","../node_modules/wonder-lodash/_baseSetData.js","../node_modules/wonder-lodash/_createCtor.js","../node_modules/wonder-lodash/_createBind.js","../node_modules/wonder-lodash/_composeArgs.js","../node_modules/wonder-lodash/_composeArgsRight.js","../node_modules/wonder-lodash/_countHolders.js","../node_modules/wonder-lodash/_setData.js","../node_modules/wonder-lodash/_getWrapDetails.js","../node_modules/wonder-lodash/_insertWrapDetails.js","../node_modules/wonder-lodash/_arrayEach.js","../node_modules/wonder-lodash/_baseFindIndex.js","../node_modules/wonder-lodash/_baseIsNaN.js","../node_modules/wonder-lodash/_strictIndexOf.js","../node_modules/wonder-lodash/_baseIndexOf.js","../node_modules/wonder-lodash/_arrayIncludes.js","../node_modules/wonder-lodash/_updateWrapDetails.js","../node_modules/wonder-lodash/_setWrapToString.js","../node_modules/wonder-lodash/_createRecurry.js","../node_modules/wonder-lodash/_getHolder.js","../node_modules/wonder-lodash/_isIndex.js","../node_modules/wonder-lodash/_reorder.js","../node_modules/wonder-lodash/_replaceHolders.js","../node_modules/wonder-lodash/_createHybrid.js","../node_modules/wonder-lodash/_createCurry.js","../node_modules/wonder-lodash/_createPartial.js","../node_modules/wonder-lodash/_mergeData.js","../node_modules/wonder-lodash/toNumber.js","../node_modules/wonder-lodash/toFinite.js","../node_modules/wonder-lodash/toInteger.js","../node_modules/wonder-lodash/_createWrap.js","../node_modules/wonder-lodash/curry.js","../src/structure/ViewSystem.ts","../src/utils/functionalUtils.ts","../src/renderer/device/EScreenSize.ts","../src/definition/typescript/decorator/registerClass.ts","../src/math/Vector3.ts","../src/math/Vector4.ts","../src/structure/RectRegion.ts","../src/utils/rootUtils.ts","../node_modules/immutable/dist/immutable.js","../src/utils/stateUtils.ts","../src/renderer/enum/ESide.ts","../src/renderer/enum/EWebGLVersion.ts","../src/renderer/utils/worker/render_file/device/webglDetectUtils.ts","../src/renderer/utils/worker/both_file/device/deviceManagerUtils.ts","../src/renderer/device/DeviceManagerSystem.ts","../src/renderer/utils/worker/render_file/device/DeviceManagerDataCommon.ts","../src/renderer/device/DeviceManagerData.ts","../src/device/WorkerDetectData.ts","../src/config/RenderWorkerConfig.ts","../src/device/WorkerDetectSystem.ts","../src/component/renderer/MeshRendererData.ts","../src/component/Component.ts","../src/component/renderer/MeshRenderer.ts","../src/component/utils/contractUtils.ts","../src/component/renderer/MeshRendererSystem.ts","../src/core/entityObject/gameObject/GameObjectData.ts","../src/config/DataBufferConfig.ts","../src/component/transform/ThreeDTransformData.ts","../src/math/Vector2.ts","../src/math/Global.ts","../src/math/Matrix3.ts","../src/math/Quaternion.ts","../src/math/Matrix4.ts","../src/definition/GlobalTempData.ts","../src/component/transform/ThreeDTransform.ts","../src/utils/cacheUtils.ts","../src/component/transform/utils.ts","../src/utils/entityUtils.ts","../src/component/transform/hierarchySystem.ts","../src/utils/typeArrayUtils.ts","../src/component/transform/operateDataSystem.ts","../src/component/transform/LinkList.ts","../src/component/transform/isTransformSystem.ts","../src/component/transform/dirtySystem.ts","../src/component/transform/cacheSystem.ts","../src/component/transform/updateSystem.ts","../src/component/transform/contractUtils.ts","../src/component/transform/batchSystem.ts","../src/component/tag/TagData.ts","../src/component/tag/Tag.ts","../src/component/tag/TagSystem.ts","../src/config/MemoryConfig.ts","../src/utils/memoryUtils.ts","../src/event/EventManagerSystem.ts","../src/component/transform/ThreeDTransformSystem.ts","../src/utils/contractUtils.ts","../src/core/DirectorData.ts","../src/component/ComponentComponentIdManager.ts","../src/core/entityObject/gameObject/GameObject.ts","../src/component/geometry/GeometryData.ts","../src/renderer/enum/EBufferType.ts","../src/renderer/enum/EDrawMode.ts","../src/renderer/utils/worker/render_file/geometry/geometryUtils.ts","../src/utils/arrayBufferUtils.ts","../src/component/geometry/GeometrySystem.ts","../src/component/geometry/Geometry.ts","../src/definition/typescript/decorator/cache.ts","../src/structure/Color.ts","../src/component/material/MaterialData.ts","../src/renderer/utils/common/operateBufferDataUtils.ts","../src/renderer/utils/worker/render_file/material/materialUtils.ts","../src/renderer/utils/worker/render_file/shader/program/programUtils.ts","../src/renderer/utils/worker/render_file/shader/shaderUtils.ts","../src/renderer/shader/ShaderSystem.ts","../src/component/utils/operateBufferDataUtils.ts","../src/renderer/enum/ETextureWrapMode.ts","../src/renderer/enum/ETextureFilterMode.ts","../src/renderer/enum/ETextureTarget.ts","../src/renderer/enum/EVariableType.ts","../src/renderer/utils/worker/render_file/texture/textureUtils.ts","../src/renderer/utils/material/bufferUtils.ts","../src/renderer/utils/worker/render_file/material/lightMaterialUtils.ts","../src/renderer/utils/worker/render_file/material/bufferUtils.ts","../src/renderer/utils/worker/render_file/texture/mapManagerUtils.ts","../src/utils/mapUtils.ts","../src/renderer/texture/MapManagerSystem.ts","../src/renderer/worker/render_file/material/MaterialWorkerSystem.ts","../src/component/material/MaterialSystem.ts","../src/component/material/Material.ts","../src/core/entityObject/gameObject/GameObjectSystem.ts","../src/renderer/utils/command_buffer/basicRenderComandBufferUtils.ts","../src/renderer/utils/worker/logic_file/command_buffer/basicRenderComandBufferUtils.ts","../src/renderer/command_buffer/BasicRenderCommandBufferSystem.ts","../src/renderer/utils/command_buffer/lightRenderComandBufferUtils.ts","../src/component/camera/PerspectiveCameraSystem.ts","../src/component/camera/CameraSystem.ts","../src/component/camera/CameraControllerData.ts","../src/component/camera/PerspectiveCameraData.ts","../src/component/camera/CameraData.ts","../src/component/camera/CameraControllerSystem.ts","../src/component/camera/CameraController.ts","../src/core/entityObject/scene/SceneSystem.ts","../src/renderer/utils/worker/logic_file/command_buffer/lightRenderComandBufferUtils.ts","../src/renderer/command_buffer/LightRenderCommandBufferSystem.ts","../src/renderer/utils/worker/logic_file/command_buffer/renderComandBufferUtils.ts","../src/renderer/command_buffer/RenderCommandBufferSystem.ts","../src/renderer/worker/both_file/EWorkerOperateType.ts","../src/renderer/enum/EGeometryWorkerDataOperateType.ts","../src/worker/WorkerInstanceSystem.ts","../src/component/light/Light.ts","../src/renderer/utils/worker/render_file/light/specifyLightUtils.ts","../src/component/light/SpecifyLightSystem.ts","../src/component/light/SpecifyLightData.ts","../src/component/light/DirectionLightData.ts","../src/renderer/webgl2/light/DirectionLightData.ts","../src/renderer/webgl1/light/DirectionLightData.ts","../src/renderer/device/WebGLDetectData.ts","../src/renderer/device/WebGLDetectSystem.ts","../src/component/light/DirectionLight.ts","../src/renderer/utils/light/directionLightUtils.ts","../src/renderer/utils/worker/render_file/light/directionLightUtils.ts","../src/renderer/utils/light/bufferUtils.ts","../src/component/light/DirectionLightSystem.ts","../src/component/light/PointLightData.ts","../src/renderer/webgl1/light/PointLightData.ts","../src/renderer/webgl2/light/PointLightData.ts","../src/component/light/PointLight.ts","../src/renderer/utils/worker/render_file/light/pointLightUtils.ts","../src/component/light/PointLightSystem.ts","../src/renderer/worker/both_file/ERenderWorkerState.ts","../src/renderer/worker/logic_file/draw/SendDrawRenderCommandBufferDataSystem.ts","../src/renderer/buffer/ArrayBufferData.ts","../src/renderer/buffer/IndexBufferData.ts","../src/component/material/ELightModel.ts","../src/renderer/worker/both_file/data/render_config.ts","../src/core/entityObject/scene/SceneData.ts","../src/renderer/worker/logic_file/draw/SendDrawRenderCommandBufferData.ts","../src/worker/WorkerInstanceData.ts","../src/component/material/SpecifyMaterialData.ts","../src/component/material/BasicMaterialData.ts","../src/component/material/LightMaterialData.ts","../src/component/light/AmbientLightData.ts","../src/renderer/utils/worker/render_file/state/stateUtils.ts","../src/renderer/texture/MapManagerData.ts","../src/renderer/texture/TextureCacheData.ts","../src/renderer/webgl2/render/light/defer/gbuffer/GBufferData.ts","../src/renderer/utils/renderConfigUtils.ts","../src/renderer/utils/worker/render_file/shader/glslSender/glslSenderUtils.ts","../src/renderer/webgl2/utils/worker/render_file/shader/glslSender/glslSenderUtils.ts","../src/renderer/utils/shader/shaderSourceBuildUtils.ts","../src/renderer/data/MaterialConfigSystem.ts","../src/renderer/utils/shader/shaderUtils.ts","../src/renderer/utils/shader/program/programUtils.ts","../src/renderer/webgl2/utils/worker/render_file/ubo/uboUtils.ts","../src/renderer/webgl2/utils/worker/render_file/device/gpuDetectUtils.ts","../src/renderer/webgl2/utils/worker/render_file/ubo/uboManagerUtils.ts","../src/renderer/utils/worker/render_file/vao/vaoUtils.ts","../src/renderer/webgl2/utils/worker/render_file/vao/vaoUtils.ts","../src/renderer/webgl2/utils/worker/render_file/shader/location/locationUtils.ts","../src/renderer/webgl2/utils/worker/render_file/shader/shaderUtils.ts","../src/renderer/webgl2/shader/snippet/ShaderSnippet.ts","../src/renderer/shader/chunk/ShaderChunk.ts","../src/renderer/webgl2/utils/worker/render_file/shader/shaderSourceBuildUtils.ts","../src/renderer/webgl2/shader/ShaderSourceBuildSystem.ts","../src/renderer/webgl1/utils/worker/render_file/shader/ShaderDataCommon.ts","../src/renderer/webgl1/shader/ShaderData.ts","../src/renderer/webgl2/utils/worker/render_file/shader/ShaderDataCommon.ts","../src/renderer/webgl2/shader/ShaderData.ts","../src/component/material/LightMaterial.ts","../src/component/material/SpecifyMaterialSystem.ts","../src/component/material/LightMaterialSystem.ts","../src/renderer/webgl2/shader/ShaderSystem.ts","../src/renderer/webgl1/shader/snippet/ShaderSnippet.ts","../src/renderer/worker/webgl1/both_file/data/shaderLib_generator.ts","../src/renderer/worker/webgl2/both_file/data/shaderLib_generator.ts","../src/renderer/worker/webgl1/both_file/data/material_config.ts","../src/renderer/worker/webgl2/both_file/data/material_config.ts","../src/renderer/webgl1/utils/worker/render_file/shader/location/locationUtils.ts","../src/renderer/webgl1/utils/worker/render_file/shader/glslSender/glslSenderUtils.ts","../src/renderer/utils/buffer/bufferUtils.ts","../src/renderer/utils/buffer/indexBufferUtils.ts","../src/renderer/webgl1/utils/worker/render_file/vao/vaoUtils.ts","../src/renderer/webgl1/utils/worker/render_file/device/gpuDetectUtils.ts","../src/renderer/webgl1/utils/worker/render_file/shader/shaderUtils.ts","../src/renderer/webgl1/utils/worker/render_file/shader/shaderSourceBuildUtils.ts","../src/renderer/webgl1/shader/ShaderSourceBuildSystem.ts","../src/renderer/webgl1/shader/ShaderSystem.ts","../src/renderer/webgl2/utils/worker/render_file/draw/light/defer/deferDrawRenderCommandBufferUtils.ts","../src/component/material/BasicMaterial.ts","../src/renderer/utils/worker/render_file/material/basicMaterialUtils.ts","../src/component/material/BasicMaterialSystem.ts","../src/component/material/AllMaterialSystem.ts","../src/component/webgl2/material/MaterialSystem.ts","../src/component/webgl1/material/MaterialSystem.ts","../src/renderer/utils/worker/render_file/device/GPUDetectDataCommon.ts","../src/renderer/device/GPUDetectData.ts","../src/renderer/command_buffer/BasicRenderCommandBufferData.ts","../src/renderer/command_buffer/LightRenderCommandBufferData.ts","../src/renderer/draw/basic/BasicDrawRenderCommandBufferData.ts","../src/renderer/draw/light/LightDrawRenderCommandBufferData.ts","../src/renderer/utils/draw/basic/basicDrawRenderCommandBufferUtils.ts","../src/renderer/utils/draw/light/lightDrawRenderCommandBufferUtils.ts","../src/renderer/utils/worker/render_file/draw/drawRenderCommandBufferUtils.ts","../src/renderer/draw/DrawRenderCommandBufferSystem.ts","../src/renderer/worker/logic_file/command_buffer/BasicRenderCommandBufferSystem.ts","../src/renderer/worker/logic_file/command_buffer/LightRenderCommandBufferSystem.ts","../src/renderer/worker/logic_file/command_buffer/RenderCommandBufferSystem.ts","../src/renderer/webgl2/utils/worker/render_file/render/light/defer/gbuffer/gBufferUtils.ts","../src/renderer/webgl2/utils/worker/render_file/render/light/defer/light/deferLightPassUtils.ts","../src/renderer/webgl2/utils/render/light/defer/light/deferLightPassUtils.ts","../src/renderer/enum/EBlendEquation.ts","../src/renderer/enum/EBlendFunc.ts","../src/renderer/webgl2/utils/draw/light/defer/pointLightPassDrawUtils.ts","../src/renderer/webgl2/utils/draw/light/defer/lightPassDrawUtils.ts","../src/renderer/utils/draw/drawRenderCommandBufferUtils.ts","../src/renderer/webgl2/utils/worker/render_file/draw/drawRenderCommandBufferUtils.ts","../src/renderer/webgl2/utils/draw/light/defer/gBufferPassDrawUtils.ts","../src/renderer/webgl2/utils/draw/light/defer/deferDrawRenderCommandBufferUtils.ts","../src/renderer/webgl2/utils/worker/render_file/render/light/defer/deferShadingUtils.ts","../src/renderer/webgl2/utils/worker/render_file/render/renderUtils.ts","../src/renderer/utils/worker/render_file/shader/location/locationUtils.ts","../src/renderer/shader/location/LocationSystem.ts","../src/renderer/shader/glslSender/GLSLSenderSystem.ts","../src/renderer/utils/worker/render_file/render/renderUtils.ts","../src/renderer/webgl2/utils/worker/render_file/draw/basic/basicDrawRenderCommandBufferUtils.ts","../src/renderer/webgl2/utils/draw/basic/basicDrawRenderCommandBufferUtils.ts","../src/renderer/webgl2/utils/worker/render_file/render/basic/basicRenderUtils.ts","../src/renderer/utils/worker/render_file/render/basic/basicRenderUtils.ts","../src/renderer/webgl2/render/basic/BasicRenderSystem.ts","../src/component/light/AmbientLight.ts","../src/renderer/utils/worker/render_file/light/ambientLightUtils.ts","../src/renderer/utils/light/ambientLightUtils.ts","../src/component/light/AmbientLightSystem.ts","../src/renderer/webgl2/utils/worker/render_file/light/pointLightUtils.ts","../src/renderer/webgl2/light/PointLightSystem.ts","../src/renderer/utils/worker/render_file/render/light/lightRenderUtils.ts","../src/renderer/webgl2/render/light/LightRenderSystem.ts","../src/renderer/webgl2/render/light/defer/DeferShadingSystem.ts","../src/renderer/webgl2/render/RenderSystem.ts","../src/renderer/utils/buffer/arrayBufferUtils.ts","../src/renderer/webgl1/utils/worker/render_file/render/renderUtils.ts","../src/renderer/webgl1/utils/worker/render_file/draw/drawRenderCommandBufferUtils.ts","../src/renderer/webgl1/utils/draw/light/front/frontDrawRenderCommandBufferUtils.ts","../src/renderer/webgl1/utils/worker/render_file/render/light/front/frontRenderUtils.ts","../src/renderer/webgl1/render/light/LightRenderSystem.ts","../src/renderer/webgl1/render/light/front/FrontRenderSystem.ts","../src/renderer/webgl1/utils/draw/basic/basicDrawRenderCommandBufferUtils.ts","../src/renderer/webgl1/utils/worker/render_file/render/basic/basicRenderUtils.ts","../src/renderer/webgl1/render/basic/BasicRenderSystem.ts","../src/renderer/webgl1/render/RenderSystem.ts","../src/renderer/webgl2/utils/worker/render_file/shader/glslSender/GLSLSenderDataCommon.ts","../src/renderer/webgl2/shader/glslSender/GLSLSenderData.ts","../src/renderer/webgl1/utils/worker/render_file/shader/glslSender/GLSLSenderDataCommon.ts","../src/renderer/webgl1/shader/glslSender/GLSLSenderData.ts","../src/renderer/webgl1/utils/worker/render_file/shader/program/ProgramDataCommon.ts","../src/renderer/webgl1/shader/program/ProgramData.ts","../src/renderer/webgl2/utils/worker/render_file/shader/program/ProgramDataCommon.ts","../src/renderer/webgl2/shader/program/ProgramData.ts","../src/renderer/utils/worker/render_file/vao/VaoDataCommon.ts","../src/renderer/vao/VaoData.ts","../src/renderer/webgl1/utils/worker/render_file/shader/location/LocationDataCommon.ts","../src/renderer/webgl1/shader/location/LocationData.ts","../src/renderer/webgl2/utils/worker/render_file/shader/location/LocationDataCommon.ts","../src/renderer/webgl2/shader/location/LocationData.ts","../src/renderer/webgl2/utils/render/light/defer/light/DeferDirectionLightPassDataCommon.ts","../src/renderer/webgl2/render/light/defer/light/DeferDirectionLightPassData.ts","../src/renderer/webgl2/utils/render/light/defer/light/DeferPointLightPassDataCommon.ts","../src/renderer/webgl2/render/light/defer/light/DeferPointLightPassData.ts","../src/renderer/webgl2/utils/render/light/defer/light/DeferAmbientLightPassDataCommon.ts","../src/renderer/webgl2/render/light/defer/light/DeferAmbientLightPassData.ts","../src/renderer/core/WebGLRenderSystem.ts","../src/core/DirectorSystem.ts","../src/renderer/texture/Texture.ts","../src/renderer/utils/texture/textureUtils.ts","../src/renderer/texture/TextureSystem.ts","../src/asset/texture/TextureAsset.ts","../src/asset/texture/ImageTextureAsset.ts","../src/asset/LoaderSystem.ts","../src/asset/texture/TextureAssetLoaderSystem.ts","../node_modules/wonder-task/background/IdleTaskData.ts","../node_modules/wonder-task/background/extend/root.ts","../node_modules/wonder-task/background/IdleTaskSystem.ts","../src/asset/AssetDatabaseSystem.ts","../src/asset/AssetDatabaseData.ts","../src/asset/AssetDatabase.ts","../src/component/camera/Camera.ts","../src/component/camera/PerspectiveCamera.ts","../src/component/geometry/BoxGeometrySystem.ts","../src/component/geometry/BoxGeometry.ts","../src/component/geometry/CustomGeometrySystem.ts","../src/component/geometry/CustomGeometry.ts","../src/component/material/EShading.ts","../src/config/DebugConfig.ts","../src/definition/typescript/decorator/singleton.ts","../src/utils/time/TimeController.ts","../src/utils/time/DirectorTimeController.ts","../src/utils/time/CommonTimeController.ts","../src/core/Scheduler.ts","../src/renderer/webgl1/light/PointLightSystem.ts","../src/renderer/webgl1/light/DirectionLightSystem.ts","../src/component/webgl1/light/DirectionLightSystem.ts","../src/component/webgl1/light/PointLightSystem.ts","../src/component/webgl1/light/LightSystem.ts","../src/renderer/webgl2/light/DirectionLightSystem.ts","../src/component/webgl2/light/PointLightSystem.ts","../src/component/webgl2/light/DirectionLightSystem.ts","../src/component/webgl2/light/LightSystem.ts","../src/renderer/utils/worker/both_file/buffer/bufferUtils.ts","../src/renderer/webgl1/utils/worker/both_file/buffer/bufferUtils.ts","../src/renderer/utils/worker/render_file/buffer/bufferUtils.ts","../src/renderer/buffer/ArrayBufferSystem.ts","../src/renderer/buffer/IndexBufferSystem.ts","../src/component/webgl1/geometry/GeometrySystem.ts","../src/renderer/webgl2/utils/worker/both_file/buffer/bufferUtils.ts","../src/component/webgl2/geometry/GeometrySystem.ts","../src/core/Director.ts","../src/core/entityObject/scene/Scene.ts","../src/renderer/shader/program/ProgramSystem.ts","../src/renderer/worker/both_file/device/DeviceManagerWorkerSystem.ts","../src/renderer/device/initDeviceSystem.ts","../src/renderer/utils/config/initConfigUtils.ts","../src/renderer/config/InitConfigSystem.ts","../src/renderer/webgl1/device/GPUDetectSystem.ts","../src/renderer/webgl2/device/GPUDetectSystem.ts","../src/renderer/webgl2/shader/glslSender/GLSLSenderSystem.ts","../src/renderer/webgl1/shader/glslSender/GLSLSenderSystem.ts","../src/renderer/webgl2/vao/VaoSystem.ts","../src/renderer/webgl1/shader/location/LocationSystem.ts","../src/renderer/webgl2/shader/location/LocationSystem.ts","../src/renderer/webgl2/render/light/defer/light/DeferLightPassSystem.ts","../src/core/MainSystem.ts","../src/core/Main.ts","../src/definition/typescript/decorator/control.ts","../src/definition/typescript/decorator/virtual.ts","../src/renderer/device/DeviceManager.ts","../src/renderer/enum/ELightWorkerDataOperateType.ts","../src/renderer/worker/both_file/device/DeviceManagerWorkerData.ts","../src/renderer/worker/render_file/buffer/ArrayBufferWorkerData.ts","../src/renderer/worker/render_file/buffer/IndexBufferWorkerData.ts","../src/renderer/worker/render_file/command_buffer/BasicRenderCommandBufferWorkerData.ts","../src/renderer/worker/render_file/command_buffer/LightRenderCommandBufferWorkerData.ts","../src/renderer/worker/render_file/device/GPUDetectWorkerData.ts","../src/renderer/worker/render_file/device/WebGLDetectWorkerData.ts","../src/renderer/worker/render_file/draw/basic/BasicDrawRenderCommandBufferWorkerData.ts","../src/renderer/worker/render_file/draw/light/LightDrawRenderCommandBufferWorkerData.ts","../src/renderer/worker/render_file/geometry/GeometryWorkerData.ts","../src/renderer/worker/render_file/initGL.ts","../src/renderer/worker/render_file/light/SpecifyLightWorkerData.ts","../src/renderer/worker/render_file/light/AmbientLightWorkerData.ts","../src/renderer/worker/render_file/light/DirectionLightWorkerData.ts","../src/renderer/worker/render_file/light/PointLightWorkerData.ts","../src/renderer/worker/render_file/material/BasicMaterialWorkerData.ts","../src/renderer/worker/render_file/material/LightMaterialWorkerData.ts","../src/renderer/worker/render_file/material/MaterialWorkerData.ts","../src/renderer/worker/render_file/state/StateWorkerData.ts","../src/renderer/worker/render_file/state/StateWorkerSytem.ts","../src/renderer/worker/render_file/texture/MapManagerWorkerData.ts","../src/renderer/worker/render_file/texture/TextureCacheWorkerData.ts","../src/renderer/worker/render_file/texture/TextureWorkerData.ts","../src/renderer/worker/render_file/vao/VaoWorkerData.ts","../src/renderer/worker/webgl1/render_file/light/DirectionLightWorkerData.ts","../src/renderer/worker/webgl1/render_file/light/PointLightWorkerData.ts","../src/renderer/worker/webgl1/render_file/shader/glslSender/GLSLSenderWorkerData.ts","../src/renderer/worker/webgl1/render_file/shader/location/LocationWorkerData.ts","../src/renderer/worker/webgl1/render_file/shader/program/ProgramWorkerData.ts","../src/renderer/worker/webgl1/render_file/shader/ShaderWorkerData.ts","../src/renderer/worker/webgl2/render_file/light/DirectionLightWorkerData.ts","../src/renderer/worker/webgl2/render_file/light/PointLightWorkerData.ts","../src/renderer/worker/webgl2/render_file/render/light/defer/gbuffer/GBufferWorkerData.ts","../src/renderer/worker/webgl2/render_file/render/light/defer/light/DeferAmbientLightPassWorkerData.ts","../src/renderer/worker/webgl2/render_file/render/light/defer/light/DeferDirectionLightPassWorkerData.ts","../src/renderer/worker/webgl2/render_file/render/light/defer/light/DeferPointLightPassWorkerData.ts","../src/renderer/worker/webgl2/render_file/shader/glslSender/GLSLSenderWorkerData.ts","../src/renderer/worker/webgl2/render_file/shader/location/LocationWorkerData.ts","../src/renderer/worker/webgl2/render_file/shader/program/ProgramWorkerData.ts","../src/renderer/worker/webgl2/render_file/shader/ShaderWorkerData.ts","../src/structure/View.ts","../src/renderer/worker/render_file/shader/program/ProgramWorkerSystem.ts","../src/renderer/worker/render_file/draw/DrawRenderCommandBufferWorkerSystem.ts","../src/renderer/worker/render_file/texture/TextureCacheWorkerSystem.ts","../node_modules/bowser/src/bowser.js","../src/renderer/worker/render_file/texture/TextureWorkerSystem.ts","../src/renderer/worker/render_file/light/SpecifyLightWorkerSystem.ts","../src/renderer/worker/webgl1/render_file/light/DirectionLightWorkerSystem.ts","../src/renderer/worker/render_file/light/AmbientLightWorkerSystem.ts","../src/renderer/worker/webgl1/render_file/light/PointLightWorkerSystem.ts","../src/renderer/worker/webgl1/render_file/light/LightWorkerSystem.ts","../src/renderer/worker/webgl2/render_file/light/PointLightWorkerSystem.ts","../src/renderer/worker/webgl2/render_file/light/DirectionLightWorkerSystem.ts","../src/renderer/worker/webgl2/render_file/light/LightWorkerSystem.ts","../src/renderer/worker/render_file/render/RenderWorkerSystem.ts","../src/renderer/worker/webgl1/render_file/shader/glslSender/GLSLSenderWorkerSystem.ts","../src/renderer/worker/webgl2/render_file/shader/glslSender/GLSLSenderWorkerSystem.ts","../src/renderer/worker/render_file/buffer/ArrayBufferWorkerSystem.ts","../src/renderer/worker/render_file/buffer/IndexBufferWorkerSystem.ts","../src/renderer/worker/render_file/vao/VaoWorkerSystem.ts","../src/renderer/worker/webgl1/render_file/shader/location/LocationWorkerSystem.ts","../src/renderer/worker/webgl2/render_file/shader/location/LocationWorkerSystem.ts","../src/renderer/worker/render_file/texture/MapManagerWorkerSystem.ts","../src/renderer/worker/render_file/material/LightMaterialWorkerSystem.ts","../src/renderer/worker/render_file/geometry/GeometryWorkerSystem.ts","../src/renderer/worker/webgl1/render_file/shader/ShaderWorkerSystem.ts","../src/renderer/worker/webgl2/render_file/shader/ShaderWorkerSystem.ts","../src/renderer/worker/render_file/light/DirectionLightWorkerSystem.ts","../src/renderer/worker/render_file/light/PointLightWorkerSystem.ts","../src/renderer/worker/render_file/device/WebGLDetectWorkerSystem.ts","../src/renderer/worker/webgl1/render_file/device/GPUDetectWorkerSystem.ts","../src/renderer/worker/webgl2/render_file/device/GPUDetectWorkerSystem.ts","../src/renderer/worker/render_file/shader/ShaderWorkerSystem.ts","../src/renderer/worker/render_file/shader/location/LocationWorkerSystem.ts","../src/renderer/worker/render_file/shader/glslSender/GLSLSenderWorkerSystem.ts","../src/utils/BufferUtilsForUnitTest.ts","../src/renderer/worker/webgl2/render_file/render/light/LightRenderWorkerSystem.ts","../src/renderer/worker/webgl2/render_file/render/light/defer/DeferShadingWorkerSystem.ts","../src/renderer/worker/webgl2/render_file/render/RenderWorkerSystem.ts","../src/renderer/worker/webgl2/render_file/render/light/defer/light/DeferLightPassWorkerSystem.ts","../src/renderer/worker/render_file/RenderWorkerSystem.ts","../src/test/forRenderWorkerUnitTest.ts","../src/test/forUnitTest.ts"],"sourcesContent":["import { root } from \"../global/Variable\";\r\n\r\nvar SPLITPATH_REGEX =\r\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\r\n\r\n//reference from\r\n//https://github.com/cookfront/learn-note/blob/master/blog-backup/2014/nodejs-path.md\r\nexport class PathUtils {\r\n    public static basename(path: string, ext?: string) {\r\n        var f = this._splitPath(path)[2];\r\n        // TODO: make this comparison case-insensitive on windows?\r\n        if (ext && f.substr(-1 * ext.length) === ext) {\r\n            f = f.substr(0, f.length - ext.length);\r\n        }\r\n        return f;\r\n\r\n    }\r\n\r\n    public static changeExtname(pathStr: string, extname: string) {\r\n        var extname = extname || \"\",\r\n            index = pathStr.indexOf(\"?\"),\r\n            tempStr = \"\";\r\n\r\n        if (index > 0) {\r\n            tempStr = pathStr.substring(index);\r\n            pathStr = pathStr.substring(0, index);\r\n        }\r\n\r\n        index = pathStr.lastIndexOf(\".\");\r\n\r\n        if (index < 0) {\r\n            return pathStr + extname + tempStr;\r\n        }\r\n\r\n        return pathStr.substring(0, index) + extname + tempStr;\r\n    }\r\n\r\n    public static changeBasename(pathStr: string, basename: string, isSameExt: boolean = false) {\r\n        var index = null,\r\n            tempStr = null,\r\n            ext = null;\r\n\r\n        if (basename.indexOf(\".\") == 0) {\r\n            return this.changeExtname(pathStr, basename);\r\n        }\r\n\r\n        index = pathStr.indexOf(\"?\");\r\n        tempStr = \"\";\r\n        ext = isSameExt ? this.extname(pathStr) : \"\";\r\n\r\n        if (index > 0) {\r\n            tempStr = pathStr.substring(index);\r\n            pathStr = pathStr.substring(0, index);\r\n        }\r\n\r\n        index = pathStr.lastIndexOf(\"/\");\r\n        index = index <= 0 ? 0 : index + 1;\r\n\r\n        return pathStr.substring(0, index) + basename + ext + tempStr;\r\n    }\r\n\r\n    public static extname(path: string) {\r\n        return this._splitPath(path)[3];\r\n    }\r\n\r\n    public static dirname(path: string) {\r\n        var result = this._splitPath(path),\r\n            root = result[0],\r\n            dir = result[1];\r\n\r\n        if (!root && !dir) {\r\n            //no dirname whatsoever\r\n            return '.';\r\n        }\r\n\r\n        if (dir) {\r\n            //it has a dirname, strip trailing slash\r\n            dir = dir.substr(0, dir.length - 1);\r\n        }\r\n\r\n        return root + dir;\r\n    }\r\n\r\n    private static _splitPath(fileName: string) {\r\n        return SPLITPATH_REGEX.exec(fileName).slice(1);\r\n    }\r\n}","declare var global: any, module: any;\r\n\r\nexport class JudgeUtils {\r\n    public static isArray(arr: any) {\r\n        const MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\r\n        var length = arr && arr.length;\r\n\r\n        return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\r\n    }\r\n\r\n    public static isArrayExactly(arr: any) {\r\n        return Object.prototype.toString.call(arr) === \"[object Array]\";\r\n    }\r\n\r\n    public static isNumber(num: any) {\r\n        return typeof num == \"number\";\r\n    }\r\n\r\n    public static isNumberExactly(num: any) {\r\n        return Object.prototype.toString.call(num) === \"[object Number]\";\r\n    }\r\n\r\n    public static isString(str: any) {\r\n        return typeof str == \"string\";\r\n    }\r\n\r\n    public static isStringExactly(str: any) {\r\n        return Object.prototype.toString.call(str) === \"[object String]\";\r\n    }\r\n\r\n    public static isBoolean(bool: any) {\r\n        return bool === true || bool === false || toString.call(bool) === '[boolect Boolean]';\r\n    }\r\n\r\n    public static isDom(obj: any) {\r\n        return !!(obj && obj.nodeType === 1);\r\n    }\r\n\r\n\r\n    public static isObject(obj: any) {\r\n        var type = typeof obj;\r\n\r\n        return type === 'function' || type === 'object' && !!obj;\r\n    }\r\n\r\n    /**\r\n     * 判断是否为对象字面量（{}）\r\n     */\r\n    public static isDirectObject(obj: any) {\r\n        return Object.prototype.toString.call(obj) === \"[object Object]\";\r\n    }\r\n\r\n    /**\r\n     * 检查宿主对象是否可调用\r\n     *\r\n     * 任何对象，如果其语义在ECMAScript规范中被定义过，那么它被称为原生对象；\r\n     环境所提供的，而在ECMAScript规范中没有被描述的对象，我们称之为宿主对象。\r\n\r\n     该方法用于特性检测，判断对象是否可用。用法如下：\r\n\r\n     MyEngine addEvent():\r\n     if (Tool.judge.isHostMethod(dom, \"addEventListener\")) {    //判断dom是否具有addEventListener方法\r\n        dom.addEventListener(sEventType, fnHandler, false);\r\n        }\r\n     */\r\n    public static isHostMethod(object: any, property: any) {\r\n        var type = typeof object[property];\r\n\r\n        return type === \"function\" ||\r\n            (type === \"object\" && !!object[property]);\r\n        // || type == \"unknown\";\r\n    }\r\n\r\n    public static isNodeJs() {\r\n        return ((typeof global != \"undefined\" && global.module) || (typeof module != \"undefined\")) && typeof module.exports != \"undefined\";\r\n    }\r\n\r\n    //overwrite it in the end of this file\r\n    public static isFunction(func: any): boolean {\r\n        return true;\r\n    }\r\n}\r\n\r\n// Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,\r\n// IE 11 (#1621), and in Safari 8 (#1929).\r\nif (typeof /./ != 'function' && typeof Int8Array != 'object') {\r\n    JudgeUtils.isFunction = (func: any) => {\r\n        return typeof func == 'function';\r\n    };\r\n}\r\nelse {\r\n    JudgeUtils.isFunction = (func: any) => {\r\n        return Object.prototype.toString.call(func) === \"[object Function]\";\r\n    };\r\n}","import { JudgeUtils } from \"../utils/JudgeUtils\";\r\nimport { Log } from \"../Log\";\r\n\r\ndeclare var global: NodeJS.Global, window: Window;\r\nexport var root: any;\r\n\r\nif (JudgeUtils.isNodeJs() && typeof global != \"undefined\") {\r\n    root = global;\r\n}\r\nelse if (typeof window != \"undefined\") {\r\n    root = window;\r\n}\r\nelse if (typeof self != \"undefined\") {\r\n    /*!\r\n     in web worker\r\n     */\r\n    root = self;\r\n}\r\nelse {\r\n    Log.error(\"no avaliable root!\");\r\n}","import { root } from \"./global/Variable\";\r\n\r\nexport class Log {\r\n    public static info = {\r\n        INVALID_PARAM: \"invalid parameter\",\r\n\r\n        helperFunc: function(...args) {\r\n            var result = \"\";\r\n\r\n            args.forEach(function(val) {\r\n                result += String(val) + \" \";\r\n            });\r\n\r\n            return result.slice(0, -1);\r\n        },\r\n        assertion: function(...args) {\r\n            if (args.length === 2) {\r\n                return this.helperFunc(args[0], args[1]);\r\n            }\r\n            else if (args.length === 3) {\r\n                return this.helperFunc(args[1], args[0], args[2]);\r\n            }\r\n            else {\r\n                throw new Error(\"args.length must <= 3\");\r\n            }\r\n        },\r\n\r\n        FUNC_INVALID: function(...args) {\r\n            args.unshift(\"invalid\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST: function(...args) {\r\n            args.unshift(\"must\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST_BE: function(...args) {\r\n            args.unshift(\"must be\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST_NOT_BE: function(...args) {\r\n            args.unshift(\"must not be\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_SHOULD: function(...args) {\r\n            args.unshift(\"should\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_SHOULD_NOT: function(...args) {\r\n            args.unshift(\"should not\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_SUPPORT: function(...args) {\r\n            args.unshift(\"support\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_NOT_SUPPORT: function(...args) {\r\n            args.unshift(\"not support\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST_DEFINE: function(...args) {\r\n            args.unshift(\"must define\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_MUST_NOT_DEFINE: function(...args) {\r\n            args.unshift(\"must not define\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_UNKNOW: function(...args) {\r\n            args.unshift(\"unknow\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_EXPECT: function(...args) {\r\n            args.unshift(\"expect\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_UNEXPECT: function(...args) {\r\n            args.unshift(\"unexpect\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_EXIST: function(...args) {\r\n            args.unshift(\"exist\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_NOT_EXIST: function(...args) {\r\n            args.unshift(\"not exist\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_ONLY: function(...args) {\r\n            args.unshift(\"only\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        },\r\n        FUNC_CAN_NOT: function(...args) {\r\n            args.unshift(\"can't\");\r\n\r\n            return this.assertion.apply(this, args);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Output Debug message.\r\n     * @function\r\n     * @param {String} message\r\n     */\r\n    public static log(...messages) {\r\n        if (!this._exec(\"log\", messages)) {\r\n            root.alert(messages.join(\",\"));\r\n        }\r\n\r\n        this._exec(\"trace\", messages);\r\n    }\r\n\r\n    /**\r\n     * 断言失败时，会提示错误信息，但程序会继续执行下去\r\n     * 使用断言捕捉不应该发生的非法情况。不要混淆非法情况与错误情况之间的区别，后者是必然存在的并且是一定要作出处理的。\r\n     *\r\n     * 1）对非预期错误使用断言\r\n     断言中的布尔表达式的反面一定要描述一个非预期错误，下面所述的在一定情况下为非预期错误的一些例子：\r\n     （1）空指针。\r\n     （2）输入或者输出参数的值不在预期范围内。\r\n     （3）数组的越界。\r\n     非预期错误对应的就是预期错误，我们通常使用错误处理代码来处理预期错误，而使用断言处理非预期错误。在代码执行过程中，有些错误永远不应该发生，这样的错误是非预期错误。断言可以被看成是一种可执行的注释，你不能依赖它来让代码正常工作（《Code Complete 2》）。例如：\r\n     int nRes = f(); // nRes 由 f 函数控制， f 函数保证返回值一定在 -100 ~ 100\r\n     Assert(-100 <= nRes && nRes <= 100); // 断言，一个可执行的注释\r\n     由于 f 函数保证了返回值处于 -100 ~ 100，那么如果出现了 nRes 不在这个范围的值时，就表明一个非预期错误的出现。后面会讲到“隔栏”，那时会对断言有更加深刻的理解。\r\n     2）不要把需要执行的代码放入断言中\r\n     断言用于软件的开发和维护，而通常不在发行版本中包含断言。\r\n     需要执行的代码放入断言中是不正确的，因为在发行版本中，这些代码通常不会被执行，例如：\r\n     Assert(f()); // f 函数通常在发行版本中不会被执行\r\n     而使用如下方法则比较安全：\r\n     res = f();\r\n     Assert(res); // 安全\r\n     3）对来源于内部系统的可靠的数据使用断言，而不要对外部不可靠的数据使用断言，对于外部不可靠数据，应该使用错误处理代码。\r\n     再次强调，把断言看成可执行的注释。\r\n     * @param cond 如果cond返回false，则断言失败，显示message\r\n     * @param message\r\n     */\r\n    public static assert(cond, ...messages) {\r\n        if (cond) {\r\n            if (!this._exec(\"assert\", arguments, 1)) {\r\n                this.log.apply(this, Array.prototype.slice.call(arguments, 1));\r\n            }\r\n        }\r\n    }\r\n\r\n    public static error(cond, ...message): any {\r\n        if (cond) {\r\n            /*!\r\n            console.error will not interrupt, it will throw error and continue exec the left statements\r\n\r\n            but here need interrupt! so not use it here.\r\n             */\r\n            //if (!this._exec(\"error\", arguments, 1)) {\r\n            throw new Error(Array.prototype.slice.call(arguments, 1).join(\"\\n\"));\r\n            //}\r\n        }\r\n    }\r\n\r\n    public static warn(...message) {\r\n        var result = this._exec(\"warn\", arguments);\r\n\r\n        if (!result) {\r\n            this.log.apply(this, arguments);\r\n        }\r\n        else {\r\n            this._exec(\"trace\", [\"warn trace\"]);\r\n        }\r\n    }\r\n\r\n    private static _exec(consoleMethod, args, sliceBegin = 0) {\r\n        if (root.console && root.console[consoleMethod]) {\r\n            root.console[consoleMethod].apply(root.console, Array.prototype.slice.call(args, sliceBegin));\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n}","// import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Log as Log$ } from \"wonder-commonlib/dist/es2015/Log\";\r\n\r\n// @registerClass(\"Log\")\r\nexport class Log extends Log$ {\r\n}\r\n","export const $BREAK = {\r\n    break: true\r\n};\r\nexport const $REMOVE = void 0;","import { JudgeUtils } from \"./utils/JudgeUtils\";\r\nimport { $BREAK } from \"./global/Const\";\r\n\r\nexport class List<T> {\r\n    protected children: Array<T> = null;\r\n\r\n    public getCount(): number {\r\n        return this.children.length;\r\n    }\r\n\r\n    public hasChild(child: any): boolean {\r\n        var c: any = null,\r\n            children = this.children;\r\n\r\n        for (let i = 0, len = children.length; i < len; i++) {\r\n            c = children[i];\r\n\r\n            if (child.uid && c.uid && child.uid == c.uid) {\r\n                return true;\r\n            }\r\n            else if (child === c) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public hasChildWithFunc(func: Function): boolean {\r\n        for (let i = 0, len = this.children.length; i < len; i++) {\r\n            if (func(this.children[i], i)) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n\r\n    public getChildren() {\r\n        return this.children;\r\n    }\r\n\r\n    public getChild(index: number) {\r\n        return this.children[index];\r\n    }\r\n\r\n    public addChild(child: T) {\r\n        this.children.push(child);\r\n\r\n        return this;\r\n    }\r\n\r\n    public addChildren(arg: Array<T> | List<T> | any) {\r\n        if (JudgeUtils.isArray(arg)) {\r\n            let children: Array<T> = arg;\r\n\r\n            this.children = this.children.concat(children);\r\n        }\r\n        else if (arg instanceof List) {\r\n            let children: List<T> = arg;\r\n\r\n            this.children = this.children.concat(children.getChildren());\r\n        }\r\n        else {\r\n            let child: any = arg;\r\n\r\n            this.addChild(child);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    //todo test\r\n    public setChildren(children: Array<T>) {\r\n        this.children = children;\r\n\r\n        return this;\r\n    }\r\n\r\n    public unShiftChild(child: T) {\r\n        this.children.unshift(child);\r\n    }\r\n\r\n    public removeAllChildren() {\r\n        this.children = [];\r\n\r\n        return this;\r\n    }\r\n\r\n    public forEach(func: Function, context?: any) {\r\n        this._forEach(this.children, func, context);\r\n\r\n        return this;\r\n    }\r\n\r\n    //public removeChildAt (index) {\r\n    //    Log.error(index < 0, \"序号必须大于等于0\");\r\n    //\r\n    //    this.children.splice(index, 1);\r\n    //}\r\n    //\r\n\r\n    public toArray() {\r\n        return this.children;\r\n    }\r\n\r\n    protected copyChildren() {\r\n        return this.children.slice(0);\r\n    }\r\n\r\n    protected removeChildHelper(arg: any): Array<T> {\r\n        var result = null;\r\n\r\n        if (JudgeUtils.isFunction(arg)) {\r\n            let func = <Function>arg;\r\n\r\n            result = this._removeChild(this.children, func);\r\n        }\r\n        else if (arg.uid) {\r\n            result = this._removeChild(this.children, (e) => {\r\n                if (!e.uid) {\r\n                    return false;\r\n                }\r\n                return e.uid === arg.uid;\r\n            });\r\n        }\r\n        else {\r\n            result = this._removeChild(this.children, (e) => {\r\n                return e === arg;\r\n            });\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    private _forEach(arr: T[], func: Function, context?: any) {\r\n        var scope = context,\r\n            i = 0,\r\n            len = arr.length;\r\n\r\n\r\n        for (i = 0; i < len; i++) {\r\n            if (func.call(scope, arr[i], i) === $BREAK) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    private _removeChild(arr: T[], func: Function) {\r\n        var self = this,\r\n            removedElementArr = [],\r\n            remainElementArr = [];\r\n\r\n        this._forEach(arr, (e, index) => {\r\n            if (!!func.call(self, e)) {\r\n                removedElementArr.push(e);\r\n            }\r\n            else {\r\n                remainElementArr.push(e);\r\n            }\r\n        });\r\n\r\n        this.children = remainElementArr;\r\n\r\n        return removedElementArr;\r\n    }\r\n}","import { JudgeUtils } from \"./JudgeUtils\";\r\n\r\nexport class ExtendUtils {\r\n    /**\r\n     * 深拷贝\r\n     *\r\n     * 示例：\r\n     * 如果拷贝对象为数组，能够成功拷贝（不拷贝Array原型链上的成员）\r\n     * expect(extend.extendDeep([1, { x: 1, y: 1 }, \"a\", { x: 2 }, [2]])).toEqual([1, { x: 1, y: 1 }, \"a\", { x: 2 }, [2]]);\r\n     *\r\n     * 如果拷贝对象为对象，能够成功拷贝（能拷贝原型链上的成员）\r\n     * var result = null;\r\n     function A() {\r\n            };\r\n     A.prototype.a = 1;\r\n\r\n     function B() {\r\n            };\r\n     B.prototype = new A();\r\n     B.prototype.b = { x: 1, y: 1 };\r\n     B.prototype.c = [{ x: 1 }, [2]];\r\n\r\n     var t = new B();\r\n\r\n     result = extend.extendDeep(t);\r\n\r\n     expect(result).toEqual(\r\n     {\r\n         a: 1,\r\n         b: { x: 1, y: 1 },\r\n         c: [{ x: 1 }, [2]]\r\n     });\r\n     * @param parent\r\n     * @param child\r\n     * @returns\r\n     */\r\n    public static extendDeep(parent, child?, filter = function(val, i) { return true; }) {\r\n        var i = null,\r\n            len = 0,\r\n            toStr = Object.prototype.toString,\r\n            sArr = \"[object Array]\",\r\n            sOb = \"[object Object]\",\r\n            type = \"\",\r\n            _child = null;\r\n\r\n        //数组的话，不获得Array原型上的成员。\r\n        if (toStr.call(parent) === sArr) {\r\n            _child = child || [];\r\n\r\n            for (i = 0, len = parent.length; i < len; i++) {\r\n                let member = parent[i];\r\n\r\n                if (!filter(member, i)) {\r\n                    continue;\r\n                }\r\n\r\n                if (member.clone) {\r\n                    _child[i] = member.clone();\r\n                    continue;\r\n                }\r\n\r\n                type = toStr.call(member);\r\n                if (type === sArr || type === sOb) {    //如果为数组或object对象\r\n                    _child[i] = type === sArr ? [] : {};\r\n                    ExtendUtils.extendDeep(member, _child[i]);\r\n                } else {\r\n                    _child[i] = member;\r\n                }\r\n            }\r\n        }\r\n        //对象的话，要获得原型链上的成员。因为考虑以下情景：\r\n        //类A继承于类B，现在想要拷贝类A的实例a的成员（包括从类B继承来的成员），那么就需要获得原型链上的成员。\r\n        else if (toStr.call(parent) === sOb) {\r\n            _child = child || {};\r\n\r\n            for (i in parent) {\r\n                let member = parent[i];\r\n\r\n                if (!filter(member, i)) {\r\n                    continue;\r\n                }\r\n\r\n                if (member.clone) {\r\n                    _child[i] = member.clone();\r\n                    continue;\r\n                }\r\n\r\n                type = toStr.call(member);\r\n                if (type === sArr || type === sOb) {    //如果为数组或object对象\r\n                    _child[i] = type === sArr ? [] : {};\r\n                    ExtendUtils.extendDeep(member, _child[i]);\r\n                }\r\n                else {\r\n                    _child[i] = member;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            _child = parent;\r\n        }\r\n\r\n        return _child;\r\n\r\n    }\r\n\r\n    /**\r\n     * 浅拷贝\r\n     */\r\n    public static extend(destination: any, source: any) {\r\n        var property = \"\";\r\n\r\n        for (property in source) {\r\n            if (source.hasOwnProperty(property)) {\r\n                destination[property] = source[property];\r\n            }\r\n        }\r\n\r\n        return destination;\r\n    }\r\n\r\n    public static assign(source: any, target: any) {\r\n        for (let property in source) {\r\n            if (source.hasOwnProperty(property)) {\r\n                if (target[property] === void 0 || target[property] === null) {\r\n                    target[property] = source[property];\r\n                }\r\n            }\r\n        }\r\n\r\n        return target;\r\n    }\r\n\r\n    public static copyPublicAttri(source: any) {\r\n        var property = null,\r\n            destination = {};\r\n\r\n        this.extendDeep(source, destination, function(item, property) {\r\n            return property.slice(0, 1) !== \"_\"\r\n                && !JudgeUtils.isFunction(item);\r\n        });\r\n\r\n        return destination;\r\n    }\r\n}","import { List } from \"./List\";\r\nimport { JudgeUtils } from \"./utils/JudgeUtils\";\r\nimport { ExtendUtils } from \"./utils/ExtendUtils\";\r\nimport { $BREAK, $REMOVE } from \"./global/Const\";\r\n\r\nexport class Collection<T> extends List<T>{\r\n    public static create<T>(children = []) {\r\n        var obj = new this(<Array<T>>children);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(children: Array<T> = []) {\r\n        super();\r\n\r\n        this.children = children;\r\n    }\r\n\r\n    public clone();\r\n    public clone(isDeep: boolean);\r\n    public clone(target: Collection<T>);\r\n    public clone(target: Collection<T>, isDeep: boolean);\r\n\r\n    public clone(...args) {\r\n        var target: Collection<T> = null,\r\n            isDeep: boolean = null;\r\n\r\n        if (args.length === 0) {\r\n            isDeep = false;\r\n            target = Collection.create<T>();\r\n        }\r\n        else if (args.length === 1) {\r\n            if (JudgeUtils.isBoolean(args[0])) {\r\n                target = Collection.create<T>();\r\n                isDeep = args[0];\r\n            }\r\n            else {\r\n                target = args[0];\r\n                isDeep = false;\r\n            }\r\n        }\r\n        else {\r\n            target = args[0];\r\n            isDeep = args[1];\r\n        }\r\n\r\n        if (isDeep === true) {\r\n            target.setChildren(ExtendUtils.extendDeep(this.children));\r\n        }\r\n        else {\r\n            target.setChildren(ExtendUtils.extend([], this.children));\r\n        }\r\n\r\n        return target;\r\n    }\r\n\r\n    public filter(func: (value: T, index: number) => boolean): Collection<T> {\r\n        var children = this.children,\r\n            result = [],\r\n            value = null;\r\n\r\n        for (let i = 0, len = children.length; i < len; i++) {\r\n            value = children[i];\r\n\r\n            if (func.call(children, value, i)) {\r\n                result.push(value);\r\n            }\r\n        }\r\n\r\n        return Collection.create<T>(result);\r\n    }\r\n\r\n    public findOne(func: (value: T, index: number) => boolean) {\r\n        var scope = this.children,\r\n            result: T = null;\r\n\r\n        this.forEach((value: T, index) => {\r\n            if (!func.call(scope, value, index)) {\r\n                return;\r\n            }\r\n\r\n            result = value;\r\n            return $BREAK;\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    public reverse() {\r\n        return Collection.create<T>(this.copyChildren().reverse());\r\n    }\r\n\r\n    public removeChild(arg: any) {\r\n        return Collection.create<T>(this.removeChildHelper(arg));\r\n    }\r\n\r\n    public sort(func: (a: T, b: T) => any, isSortSelf = false): Collection<T> {\r\n        if (isSortSelf) {\r\n            this.children.sort(func);\r\n\r\n            return this;\r\n        }\r\n\r\n        return Collection.create<T>(this.copyChildren().sort(func));\r\n    }\r\n\r\n    public map(func: (value: T, index: number) => any) {\r\n        var resultArr = [];\r\n\r\n        this.forEach((e, index) => {\r\n            var result = func(e, index);\r\n\r\n            if (result !== $REMOVE) {\r\n                resultArr.push(result);\r\n            }\r\n            //e && e[handlerName] && e[handlerName].apply(context || e, valueArr);\r\n        });\r\n\r\n        return Collection.create<any>(resultArr);\r\n    }\r\n\r\n    public removeRepeatItems() {\r\n        var noRepeatList = Collection.create<T>();\r\n\r\n        this.forEach((item: T) => {\r\n            if (noRepeatList.hasChild(item)) {\r\n                return;\r\n            }\r\n\r\n            noRepeatList.addChild(item);\r\n        });\r\n\r\n        return noRepeatList;\r\n    }\r\n\r\n    public hasRepeatItems() {\r\n        var noRepeatList = Collection.create<T>(),\r\n            hasRepeat: boolean = false;\r\n\r\n        this.forEach((item: T) => {\r\n            if (noRepeatList.hasChild(item)) {\r\n                hasRepeat = true;\r\n\r\n                return $BREAK;\r\n            }\r\n\r\n            noRepeatList.addChild(item);\r\n        });\r\n\r\n        return hasRepeat;\r\n    }\r\n}\r\n","import { Collection } from \"./Collection\";\r\nimport { JudgeUtils } from \"./utils/JudgeUtils\";\r\nimport { $BREAK, $REMOVE } from \"./global/Const\";\r\nimport { Log } from \"./Log\";\r\nimport { ExtendUtils } from \"./utils/ExtendUtils\";\r\n\r\nexport class Hash<T> {\r\n    public static create<T>(children = {}) {\r\n        var obj = new this(<{ [s: string]: T }>children);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(children: { [s: string]: T } = {}) {\r\n        this._children = children;\r\n    }\r\n\r\n    private _children: {\r\n        [s: string]: T\r\n    } = null;\r\n\r\n    public getChildren() {\r\n        return this._children;\r\n    }\r\n\r\n    public getCount() {\r\n        var result = 0,\r\n            children = this._children,\r\n            key = null;\r\n\r\n        for (key in children) {\r\n            if (children.hasOwnProperty(key)) {\r\n                result++;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public getKeys() {\r\n        var result = Collection.create<string>(),\r\n            children = this._children,\r\n            key = null;\r\n\r\n        for (key in children) {\r\n            if (children.hasOwnProperty(key)) {\r\n                result.addChild(key);\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public getValues() {\r\n        var result = Collection.create<T>(),\r\n            children = this._children,\r\n            key = null;\r\n\r\n        for (key in children) {\r\n            if (children.hasOwnProperty(key)) {\r\n                result.addChild(children[key]);\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public getChild(key: string) {\r\n        return this._children[key];\r\n    }\r\n\r\n    public setValue(key: string, value: any) {\r\n        this._children[key] = value;\r\n\r\n        return this;\r\n    }\r\n\r\n    public addChild(key: string, value: any) {\r\n        this._children[key] = value;\r\n\r\n        return this;\r\n    }\r\n\r\n    public addChildren(arg: {} | Hash<T>) {\r\n        var i = null,\r\n            children = null;\r\n\r\n        if (arg instanceof Hash) {\r\n            children = arg.getChildren();\r\n        }\r\n        else {\r\n            children = arg;\r\n        }\r\n\r\n        for (i in children) {\r\n            if (children.hasOwnProperty(i)) {\r\n                this.addChild(i, children[i]);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public appendChild(key: string, value: any) {\r\n        if (this._children[key] instanceof Collection) {\r\n            let c = <any>(this._children[key]);\r\n\r\n            c.addChild(<T>value);\r\n        }\r\n        else {\r\n            this._children[key] = <any>(Collection.create<any>().addChild(value));\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public setChildren(children: { [s: string]: T }) {\r\n        this._children = children;\r\n    }\r\n\r\n    public removeChild(arg: any): Collection<T> {\r\n        var result = [];\r\n\r\n        if (JudgeUtils.isString(arg)) {\r\n            let key = <string>arg;\r\n\r\n            result.push(this._children[key]);\r\n\r\n            this._children[key] = void 0;\r\n            delete this._children[key];\r\n        }\r\n        else if (JudgeUtils.isFunction(arg)) {\r\n            let func = <Function>arg,\r\n                self = this;\r\n\r\n            this.forEach((val: any, key: string) => {\r\n                if (func(val, key)) {\r\n                    result.push(self._children[key]);\r\n\r\n                    self._children[key] = void 0;\r\n                    delete self._children[key];\r\n                }\r\n            });\r\n        }\r\n\r\n        return Collection.create<T>(result);\r\n    }\r\n\r\n    public removeAllChildren() {\r\n        this._children = {};\r\n    }\r\n\r\n    public hasChild(key: string): boolean {\r\n        return this._children[key] !== void 0;\r\n    }\r\n\r\n    public hasChildWithFunc(func: Function): boolean {\r\n        var result = false;\r\n\r\n        this.forEach((val: any, key: string) => {\r\n            if (func(val, key)) {\r\n                result = true;\r\n                return $BREAK;\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    public forEach(func: Function, context?: any) {\r\n        var children = this._children;\r\n\r\n        for (let i in children) {\r\n            if (children.hasOwnProperty(i)) {\r\n                if (func.call(context, children[i], i) === $BREAK) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public filter(func: Function): Hash<T> {\r\n        var result = {},\r\n            children = this._children,\r\n            value = null;\r\n\r\n        for (let key in children) {\r\n            if (children.hasOwnProperty(key)) {\r\n                value = children[key];\r\n\r\n                if (func.call(children, value, key)) {\r\n                    result[key] = value;\r\n                }\r\n            }\r\n        }\r\n\r\n        return Hash.create<T>(result);\r\n    }\r\n\r\n    public findOne(func: Function) {\r\n        var result = [],\r\n            self = this,\r\n            scope = this._children;\r\n\r\n        this.forEach((val: any, key: string) => {\r\n            if (!func.call(scope, val, key)) {\r\n                return;\r\n            }\r\n\r\n            result = [key, self.getChild(key)];\r\n            return $BREAK;\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    public map(func: Function): Hash<T> {\r\n        var resultMap = {};\r\n\r\n        this.forEach((val: any, key: string) => {\r\n            var result = func(val, key);\r\n\r\n            if (result !== $REMOVE) {\r\n                Log.error(!JudgeUtils.isArray(result) || result.length !== 2, Log.info.FUNC_MUST_BE(\"iterator\", \"[key, value]\"));\r\n\r\n                resultMap[result[0]] = result[1];\r\n            }\r\n        });\r\n\r\n        return Hash.create<T>(resultMap);\r\n    }\r\n\r\n    public toCollection(): Collection<any> {\r\n        var result = Collection.create<any>();\r\n\r\n        this.forEach((val: any, key: string) => {\r\n            if (val instanceof Collection) {\r\n                result.addChildren(val);\r\n            }\r\n            //else if(val instanceof Hash){\r\n            //    Log.error(true, Log.info.FUNC_NOT_SUPPORT(\"toCollection\", \"value is Hash\"));\r\n            //}\r\n            else {\r\n                result.addChild(val);\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    public toArray(): Array<T> {\r\n        var result = [];\r\n\r\n        this.forEach((val: any, key: string) => {\r\n            if (val instanceof Collection) {\r\n                result = result.concat(val.getChildren());\r\n            }\r\n            else {\r\n                result.push(val);\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    public clone();\r\n    public clone(isDeep: boolean);\r\n    public clone(target: Hash<T>);\r\n    public clone(target: Hash<T>, isDeep: boolean);\r\n\r\n    public clone(...args) {\r\n        var target: Hash<T> = null,\r\n            isDeep: boolean = null;\r\n\r\n        if (args.length === 0) {\r\n            isDeep = false;\r\n            target = Hash.create<T>();\r\n        }\r\n        else if (args.length === 1) {\r\n            if (JudgeUtils.isBoolean(args[0])) {\r\n                target = Hash.create<T>();\r\n                isDeep = args[0];\r\n            }\r\n            else {\r\n                target = args[0];\r\n                isDeep = false;\r\n            }\r\n        }\r\n        else {\r\n            target = args[0];\r\n            isDeep = args[1];\r\n        }\r\n\r\n        if (isDeep === true) {\r\n            target.setChildren(ExtendUtils.extendDeep(this._children));\r\n        }\r\n        else {\r\n            target.setChildren(ExtendUtils.extend({}, this._children));\r\n        }\r\n\r\n        return target;\r\n    }\r\n}","import { JudgeUtils as JudgeUtils$ } from \"wonder-commonlib/dist/es2015/utils/JudgeUtils\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\n\r\n// @registerClass(\"JudgeUtils\")\r\nexport class JudgeUtils extends JudgeUtils$ {\r\n    public static isCollection(list: Collection<any>) {\r\n        return list instanceof Collection;\r\n    }\r\n}\r\n\r\nexport const isString = JudgeUtils.isString;\r\n\r\nexport const isArray = JudgeUtils.isArray;\r\n\r\nexport const isUndefined = (v: any) => v === void 0;\r\n\r\nexport const isNotUndefined = (v: any) => v !== void 0;\r\n","export abstract class Entity {\r\n    public static UID: number = 1;\r\n\r\n    private _uid: string = null;\r\n    get uid() {\r\n        return this._uid;\r\n    }\r\n    set uid(uid: string) {\r\n        this._uid = uid;\r\n    }\r\n\r\n    constructor(uidPre: string) {\r\n        this._uid = uidPre + String(Entity.UID++);\r\n    }\r\n}","import { JudgeUtils as JudgeUtils$ } from \"wonder-commonlib/dist/es2015/utils/JudgeUtils\";\r\nimport { Entity } from \"./core/Entity\";\r\nimport { IObserver } from \"./observer/IObserver\";\r\n\r\nexport class JudgeUtils extends JudgeUtils$ {\r\n    public static isPromise(obj) {\r\n        return !!obj\r\n            && !super.isFunction(obj.subscribe)\r\n            && super.isFunction(obj.then);\r\n    }\r\n\r\n    public static isEqual(ob1: Entity, ob2: Entity) {\r\n        return ob1.uid === ob2.uid;\r\n    }\r\n\r\n    public static isIObserver(i: IObserver) {\r\n        return i.next && i.error && i.completed;\r\n    }\r\n}","import { IObserver } from \"./IObserver\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\n\r\nexport class SubjectObserver implements IObserver {\r\n    public observers: Collection<IObserver> = Collection.create<IObserver>();\r\n\r\n    private _disposable: IDisposable = null;\r\n\r\n    public isEmpty() {\r\n        return this.observers.getCount() === 0;\r\n    }\r\n\r\n    public next(value: any) {\r\n        this.observers.forEach((ob: Observer) => {\r\n            ob.next(value);\r\n        });\r\n    }\r\n\r\n    public error(error: any) {\r\n        this.observers.forEach((ob: Observer) => {\r\n            ob.error(error);\r\n        });\r\n    }\r\n\r\n    public completed() {\r\n        this.observers.forEach((ob: Observer) => {\r\n            ob.completed();\r\n        });\r\n    }\r\n\r\n    public addChild(observer: Observer) {\r\n        this.observers.addChild(observer);\r\n\r\n        observer.setDisposable(this._disposable);\r\n    }\r\n\r\n    public removeChild(observer: Observer) {\r\n        this.observers.removeChild((ob: Observer) => {\r\n            return JudgeUtils.isEqual(ob, observer);\r\n        });\r\n    }\r\n\r\n    public dispose() {\r\n        this.observers.forEach((ob: Observer) => {\r\n            ob.dispose();\r\n        });\r\n\r\n        this.observers.removeAllChildren();\r\n    }\r\n\r\n    public setDisposable(disposable: IDisposable) {\r\n        this.observers.forEach((observer: Observer) => {\r\n            observer.setDisposable(disposable);\r\n        });\r\n\r\n        this._disposable = disposable;\r\n    }\r\n}\r\n","import { Entity } from \"./Entity\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\n\r\nexport abstract class Observer extends Entity implements IObserver {\r\n    private _isDisposed: boolean = null;\r\n    get isDisposed() {\r\n        return this._isDisposed;\r\n    }\r\n    set isDisposed(isDisposed: boolean) {\r\n        this._isDisposed = isDisposed;\r\n    }\r\n\r\n    protected onUserNext: Function = null;\r\n    protected onUserError: Function = null;\r\n    protected onUserCompleted: Function = null;\r\n\r\n    private _isStop: boolean = false;\r\n    //private _disposeHandler:wdCb.Collection<Function> = wdCb.Collection.create<Function>();\r\n    private _disposable: IDisposable = null;\r\n\r\n\r\n    constructor(observer: IObserver);\r\n    constructor(onNext: Function, onError: Function, onCompleted: Function);\r\n\r\n    constructor(...args) {\r\n        super(\"Observer\");\r\n\r\n        if (args.length === 1) {\r\n            let observer: IObserver = args[0];\r\n\r\n            this.onUserNext = function(v) {\r\n                observer.next(v);\r\n            };\r\n            this.onUserError = function(e) {\r\n                observer.error(e);\r\n            };\r\n            this.onUserCompleted = function() {\r\n                observer.completed();\r\n            };\r\n        }\r\n        else {\r\n            let onNext = args[0],\r\n                onError = args[1],\r\n                onCompleted = args[2];\r\n\r\n            this.onUserNext = onNext || function(v) { };\r\n            this.onUserError = onError || function(e) {\r\n                throw e;\r\n            };\r\n            this.onUserCompleted = onCompleted || function() { };\r\n        }\r\n    }\r\n\r\n    public next(value: any) {\r\n        if (!this._isStop) {\r\n            return this.onNext(value);\r\n        }\r\n    }\r\n\r\n    public error(error: any) {\r\n        if (!this._isStop) {\r\n            this._isStop = true;\r\n            this.onError(error);\r\n        }\r\n    }\r\n\r\n    public completed() {\r\n        if (!this._isStop) {\r\n            this._isStop = true;\r\n            this.onCompleted();\r\n        }\r\n    }\r\n\r\n    public dispose() {\r\n        this._isStop = true;\r\n        this._isDisposed = true;\r\n\r\n        if (this._disposable) {\r\n            this._disposable.dispose();\r\n        }\r\n\r\n        //this._disposeHandler.forEach((handler) => {\r\n        //    handler();\r\n        //});\r\n    }\r\n\r\n    //public fail(e) {\r\n    //    if (!this._isStop) {\r\n    //        this._isStop = true;\r\n    //        this.error(e);\r\n    //        return true;\r\n    //    }\r\n    //\r\n    //    return false;\r\n    //}\r\n\r\n    public setDisposable(disposable: IDisposable) {\r\n        this._disposable = disposable;\r\n    }\r\n\r\n    protected abstract onNext(value: any);\r\n\r\n    protected abstract onError(error: any);\r\n\r\n    protected abstract onCompleted();\r\n}","export class Main {\r\n    public static isTest: boolean = false;\r\n}","import { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\nimport { Main } from \"../../../core/Main\";\r\n\r\nexport function assert(cond: boolean, message: string = \"contract error\") {\r\n    Log.error(!cond, message);\r\n}\r\n\r\nexport function requireCheck(InFunc) {\r\n    return function(target, name, descriptor) {\r\n        var value = descriptor.value;\r\n\r\n        descriptor.value = function(...args) {\r\n            if (Main.isTest) {\r\n                InFunc.apply(this, args);\r\n            }\r\n\r\n            return value.apply(this, args);\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function ensure(OutFunc) {\r\n    return function(target, name, descriptor) {\r\n        var value = descriptor.value;\r\n\r\n        descriptor.value = function(...args) {\r\n            var result = value.apply(this, args),\r\n                params = [result].concat(args);\r\n\r\n            if (Main.isTest) {\r\n                OutFunc.apply(this, params);\r\n            }\r\n\r\n            return result;\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function requireGetter(InFunc) {\r\n    return function(target, name, descriptor) {\r\n        var getter = descriptor.get;\r\n\r\n        descriptor.get = function() {\r\n            if (Main.isTest) {\r\n                InFunc.call(this);\r\n            }\r\n\r\n            return getter.call(this);\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function requireSetter(InFunc) {\r\n    return function(target, name, descriptor) {\r\n        var setter = descriptor.set;\r\n\r\n        descriptor.set = function(val) {\r\n            if (Main.isTest) {\r\n                InFunc.call(this, val);\r\n            }\r\n\r\n            setter.call(this, val);\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function ensureGetter(OutFunc) {\r\n    return function(target, name, descriptor) {\r\n        var getter = descriptor.get;\r\n\r\n        descriptor.get = function() {\r\n            var result = getter.call(this);\r\n\r\n            if (Main.isTest) {\r\n                OutFunc.call(this, result);\r\n            }\r\n\r\n            return result;\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function ensureSetter(OutFunc) {\r\n    return function(target, name, descriptor) {\r\n        var setter = descriptor.set;\r\n\r\n        descriptor.set = function(val) {\r\n            var result = setter.call(this, val),\r\n                params = [result, val];\r\n\r\n            if (Main.isTest) {\r\n                OutFunc.apply(this, params);\r\n            }\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function invariant(func) {\r\n    return function(target) {\r\n        if (Main.isTest) {\r\n            func(target);\r\n        }\r\n    }\r\n}","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\nimport { requireCheck } from \"../definition/typescript/decorator/contract\";\r\nimport { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\n\r\nexport class AutoDetachObserver extends Observer {\r\n    public static create(observer: IObserver);\r\n    public static create(onNext: Function, onError: Function, onCompleted: Function);\r\n\r\n    public static create(...args) {\r\n        if (args.length === 1) {\r\n            return new this(args[0]);\r\n        }\r\n        else {\r\n            return new this(args[0], args[1], args[2]);\r\n        }\r\n    }\r\n\r\n    @requireCheck(function() {\r\n        if (this.isDisposed) {\r\n            Log.warn(\"only can dispose once\");\r\n        }\r\n    })\r\n    public dispose() {\r\n        // if (this.isDisposed) {\r\n        //     return;\r\n        // }\r\n\r\n        super.dispose();\r\n    }\r\n\r\n    protected onNext(value: any) {\r\n        try {\r\n            this.onUserNext(value);\r\n        }\r\n        catch (e) {\r\n            this.onError(e);\r\n        }\r\n    }\r\n\r\n    protected onError(error: any) {\r\n        try {\r\n            this.onUserError(error);\r\n        }\r\n        catch (e) {\r\n            throw e;\r\n        }\r\n        finally {\r\n            this.dispose();\r\n        }\r\n    }\r\n\r\n    protected onCompleted() {\r\n        try {\r\n            this.onUserCompleted();\r\n            this.dispose();\r\n        }\r\n        catch (e) {\r\n            throw e;\r\n        }\r\n    }\r\n}","import { IDisposable } from \"./IDisposable\";\r\nimport { Subject } from \"../subject/Subject\";\r\nimport { GeneratorSubject } from \"../subject/GeneratorSubject\";\r\nimport { Observer } from \"../core/Observer\";\r\n\r\nexport class InnerSubscription implements IDisposable {\r\n    public static create(subject: Subject | GeneratorSubject, observer: Observer) {\r\n        var obj = new this(subject, observer);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _subject: Subject | GeneratorSubject = null;\r\n    private _observer: Observer = null;\r\n\r\n    constructor(subject: Subject | GeneratorSubject, observer: Observer) {\r\n        this._subject = subject;\r\n        this._observer = observer;\r\n    }\r\n\r\n    public dispose() {\r\n        this._subject.remove(this._observer);\r\n\r\n        this._observer.dispose();\r\n    }\r\n}","import { IObserver } from \"../observer/IObserver\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { SubjectObserver } from \"../observer/SubjectObserver\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { AutoDetachObserver } from \"../observer/AutoDetachObserver\";\r\nimport { InnerSubscription } from \"../Disposable/InnerSubscription\";\r\n\r\nexport class Subject implements IObserver {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _source: Stream = null;\r\n    get source() {\r\n        return this._source;\r\n    }\r\n    set source(source: Stream) {\r\n        this._source = source;\r\n    }\r\n\r\n    private _observer: any = new SubjectObserver();\r\n\r\n    public subscribe(arg1?: Function | Observer, onError?: Function, onCompleted?: Function): IDisposable {\r\n        var observer: Observer = arg1 instanceof Observer\r\n            ? <AutoDetachObserver>arg1\r\n            : AutoDetachObserver.create(<Function>arg1, onError, onCompleted);\r\n\r\n        //this._source && observer.setDisposeHandler(this._source.disposeHandler);\r\n\r\n        this._observer.addChild(observer);\r\n\r\n        return InnerSubscription.create(this, observer);\r\n    }\r\n\r\n    public next(value: any) {\r\n        this._observer.next(value);\r\n    }\r\n\r\n    public error(error: any) {\r\n        this._observer.error(error);\r\n    }\r\n\r\n    public completed() {\r\n        this._observer.completed();\r\n    }\r\n\r\n    public start() {\r\n        if (!this._source) {\r\n            return;\r\n        }\r\n\r\n        this._observer.setDisposable(this._source.buildStream(this));\r\n    }\r\n\r\n    public remove(observer: Observer) {\r\n        this._observer.removeChild(observer);\r\n    }\r\n\r\n    public dispose() {\r\n        this._observer.dispose();\r\n    }\r\n}","import { Entity } from \"../core/Entity\";\r\nimport { IDisposable } from \"./IDisposable\";\r\n\r\nexport class SingleDisposable extends Entity implements IDisposable {\r\n    public static create(dispose: IDisposable | Function = null) {\r\n        var obj = new this(dispose);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _disposable: IDisposable | Function = null;\r\n    private _isDisposed: boolean = false;\r\n\r\n    constructor(dispose: IDisposable | Function) {\r\n        super(\"SingleDisposable\");\r\n\r\n        this._disposable = dispose;\r\n    }\r\n\r\n    public setDispose(disposable: IDisposable) {\r\n        this._disposable = disposable;\r\n    }\r\n\r\n    public dispose() {\r\n        if (this._isDisposed) {\r\n            return;\r\n        }\r\n\r\n        this._isDisposed = true;\r\n\r\n        if (!this._disposable) {\r\n            return;\r\n        }\r\n\r\n        if (!!(this._disposable as IDisposable).dispose) {\r\n            (this._disposable as IDisposable).dispose();\r\n        }\r\n        else {\r\n            (this._disposable as Function)();\r\n        }\r\n    }\r\n}","export class ClassMapUtils {\r\n    private static _classMap: ClassMapData = {};\r\n\r\n    public static addClassMap(className: string, _class: any) {\r\n        this._classMap[className] = _class;\r\n    }\r\n\r\n    public static getClass(className: string) {\r\n        return this._classMap[className];\r\n    }\r\n}\r\n\r\ntype ClassMapData = {\r\n    [className: string]: any;\r\n}\r\n","export class FunctionUtils {\r\n    public static bind(object: any, func: Function) {\r\n        return function() {\r\n            return func.apply(object, arguments);\r\n        };\r\n    }\r\n}","import { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\nimport { Entity } from \"./Entity\";\r\nimport { Scheduler } from \"./Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { Observer } from \"./Observer\";\r\nimport { Subject } from \"../subject/Subject\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\nimport { ClassMapUtils } from \"../utils/ClassMapUtils\";\r\nimport { requireCheck, assert } from \"../definition/typescript/decorator/contract\";\r\nimport { FunctionUtils } from \"wonder-commonlib/dist/es2015/utils/FunctionUtils\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\n\r\nexport abstract class Stream extends Entity {\r\n    public scheduler: Scheduler = null;\r\n    public subscribeFunc: (observer: IObserver) => Function | void = null;\r\n\r\n    // private _isBuildStream:boolean = false;\r\n    // private _singleDisposable:IDisposable = null;\r\n\r\n    constructor(subscribeFunc) {\r\n        super(\"Stream\");\r\n\r\n        this.subscribeFunc = subscribeFunc || function() { };\r\n\r\n    }\r\n\r\n    public abstract subscribe(arg1: Function | Observer | Subject, onError?: Function, onCompleted?: Function): IDisposable;\r\n\r\n    public buildStream(observer: IObserver): IDisposable {\r\n        return SingleDisposable.create(<Function>(this.subscribeFunc(observer) || function() { }));\r\n    }\r\n\r\n    public do(onNext?: Function, onError?: Function, onCompleted?: Function) {\r\n        return ClassMapUtils.getClass(\"DoStream\").create(this, onNext, onError, onCompleted);\r\n    }\r\n\r\n    public map(selector: Function) {\r\n        return ClassMapUtils.getClass(\"MapStream\").create(this, selector);\r\n    }\r\n\r\n    public flatMap(selector: Function) {\r\n        return this.map(selector).mergeAll();\r\n    }\r\n\r\n    public concatMap(selector: Function) {\r\n        return this.map(selector).concatAll();\r\n    }\r\n\r\n    public mergeAll() {\r\n        return ClassMapUtils.getClass(\"MergeAllStream\").create(this);\r\n    }\r\n\r\n    public concatAll() {\r\n        return this.merge(1);\r\n    }\r\n\r\n    public skipUntil(otherStream: Stream) {\r\n        return ClassMapUtils.getClass(\"SkipUntilStream\").create(this, otherStream);\r\n    }\r\n\r\n    public takeUntil(otherStream: Stream) {\r\n        return ClassMapUtils.getClass(\"TakeUntilStream\").create(this, otherStream);\r\n    }\r\n\r\n    @requireCheck(function(count: number = 1) {\r\n        assert(count >= 0, Log.info.FUNC_SHOULD(\"count\", \">= 0\"));\r\n    })\r\n    public take(count: number = 1) {\r\n        var self = this;\r\n\r\n        if (count === 0) {\r\n            return ClassMapUtils.getClass(\"Operator\").empty();\r\n        }\r\n\r\n        return ClassMapUtils.getClass(\"Operator\").createStream((observer: IObserver) => {\r\n            self.subscribe((value: any) => {\r\n                if (count > 0) {\r\n                    observer.next(value);\r\n                }\r\n\r\n                count--;\r\n\r\n                if (count <= 0) {\r\n                    observer.completed();\r\n                }\r\n            }, (e: any) => {\r\n                observer.error(e);\r\n            }, () => {\r\n                observer.completed();\r\n            });\r\n        });\r\n    }\r\n\r\n    @requireCheck(function(count: number = 1) {\r\n        assert(count >= 0, Log.info.FUNC_SHOULD(\"count\", \">= 0\"));\r\n    })\r\n    public takeLast(count: number = 1) {\r\n        var self = this;\r\n\r\n        if (count === 0) {\r\n            return ClassMapUtils.getClass(\"Operator\").empty();\r\n        }\r\n\r\n        return ClassMapUtils.getClass(\"Operator\").createStream((observer: IObserver) => {\r\n            var queue = [];\r\n\r\n            self.subscribe((value: any) => {\r\n                queue.push(value);\r\n\r\n                if (queue.length > count) {\r\n                    queue.shift();\r\n                }\r\n            }, (e: any) => {\r\n                observer.error(e);\r\n            }, () => {\r\n                while (queue.length > 0) {\r\n                    observer.next(queue.shift());\r\n                }\r\n\r\n                observer.completed();\r\n            });\r\n        });\r\n    }\r\n\r\n    public takeWhile(predicate: (value: any, index: number, source: Stream) => boolean, thisArg = this) {\r\n        var self = this,\r\n            bindPredicate = null;\r\n\r\n        bindPredicate = FunctionUtils.bind(thisArg, predicate);\r\n\r\n        return ClassMapUtils.getClass(\"Operator\").createStream((observer: IObserver) => {\r\n            var i = 0,\r\n                isStart = false;\r\n\r\n            self.subscribe((value: any) => {\r\n                if (bindPredicate(value, i++, self)) {\r\n                    try {\r\n                        observer.next(value);\r\n                        isStart = true;\r\n                    }\r\n                    catch (e) {\r\n                        observer.error(e);\r\n                        return;\r\n                    }\r\n                }\r\n                else {\r\n                    if (isStart) {\r\n                        observer.completed();\r\n                    }\r\n                }\r\n            }, (e: any) => {\r\n                observer.error(e);\r\n            }, () => {\r\n                observer.completed();\r\n            });\r\n        });\r\n    }\r\n\r\n    public lastOrDefault(defaultValue: any = null) {\r\n        var self = this;\r\n\r\n        return ClassMapUtils.getClass(\"Operator\").createStream((observer: IObserver) => {\r\n            var queue = [];\r\n\r\n            self.subscribe((value: any) => {\r\n                queue.push(value);\r\n\r\n                if (queue.length > 1) {\r\n                    queue.shift();\r\n                }\r\n            }, (e: any) => {\r\n                observer.error(e);\r\n            }, () => {\r\n                if (queue.length === 0) {\r\n                    observer.next(defaultValue);\r\n                }\r\n                else {\r\n                    while (queue.length > 0) {\r\n                        observer.next(queue.shift());\r\n                    }\r\n                }\r\n\r\n                observer.completed();\r\n            });\r\n        });\r\n    }\r\n\r\n    public filter(predicate: (value: any) => boolean, thisArg = this) {\r\n        if (this instanceof ClassMapUtils.getClass(\"FilterStream\")) {\r\n            let self: any = this;\r\n\r\n            return self.internalFilter(predicate, thisArg);\r\n        }\r\n\r\n        return ClassMapUtils.getClass(\"FilterStream\").create(this, predicate, thisArg);\r\n    }\r\n\r\n    public filterWithState(predicate: (value: any) => boolean, thisArg = this) {\r\n        if (this instanceof ClassMapUtils.getClass(\"FilterStream\")) {\r\n            let self: any = this;\r\n\r\n            return self.internalFilter(predicate, thisArg);\r\n        }\r\n\r\n        return ClassMapUtils.getClass(\"FilterWithStateStream\").create(this, predicate, thisArg);\r\n    }\r\n\r\n    public concat(streamArr: Array<Stream>);\r\n    public concat(...otherStream);\r\n\r\n    public concat() {\r\n        var args: Array<Stream> = null;\r\n\r\n        if (JudgeUtils.isArray(arguments[0])) {\r\n            args = arguments[0];\r\n        }\r\n        else {\r\n            args = Array.prototype.slice.call(arguments, 0);\r\n        }\r\n\r\n        args.unshift(this);\r\n\r\n        return ClassMapUtils.getClass(\"ConcatStream\").create(args);\r\n    }\r\n\r\n    public merge(maxConcurrent: number);\r\n    public merge(streamArr: Array<Stream>);\r\n    public merge(...otherStreams);\r\n\r\n    public merge(...args) {\r\n        if (JudgeUtils.isNumber(args[0])) {\r\n            var maxConcurrent: number = args[0];\r\n\r\n            return ClassMapUtils.getClass(\"MergeStream\").create(this, maxConcurrent);\r\n        }\r\n\r\n        if (JudgeUtils.isArray(args[0])) {\r\n            args = arguments[0];\r\n        }\r\n        else {\r\n        }\r\n\r\n        let stream: Stream = null;\r\n\r\n        args.unshift(this);\r\n\r\n        stream = ClassMapUtils.getClass(\"Operator\").fromArray(args).mergeAll();\r\n\r\n        return stream;\r\n    }\r\n\r\n    public repeat(count: number = -1) {\r\n        return ClassMapUtils.getClass(\"RepeatStream\").create(this, count);\r\n    }\r\n\r\n    public ignoreElements() {\r\n        return ClassMapUtils.getClass(\"IgnoreElementsStream\").create(this);\r\n    }\r\n\r\n    protected handleSubject(subject: any) {\r\n        if (this._isSubject(subject)) {\r\n            this._setSubject(subject);\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    private _isSubject(subject: Subject) {\r\n        return subject instanceof Subject;\r\n    }\r\n\r\n    private _setSubject(subject: Subject) {\r\n        subject.source = this;\r\n    }\r\n}","import { Stream } from \"../core/Stream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { Subject } from \"../subject/Subject\";\r\nimport { AutoDetachObserver } from \"../observer/AutoDetachObserver\";\r\n\r\nexport abstract class BaseStream extends Stream {\r\n    public abstract subscribeCore(observer: IObserver): IDisposable;\r\n\r\n    // private _isBuildStream:boolean = false;\r\n    // private _disposable:IDisposable = null;\r\n\r\n    public subscribe(arg1: Function | Observer | Subject, onError?, onCompleted?): IDisposable {\r\n        var observer: Observer = null;\r\n\r\n        if (this.handleSubject(arg1)) {\r\n            return;\r\n        }\r\n\r\n        observer = arg1 instanceof Observer\r\n            ? AutoDetachObserver.create(<IObserver>arg1)\r\n            : AutoDetachObserver.create(<Function>arg1, onError, onCompleted);\r\n\r\n        //observer.setDisposeHandler(this.disposeHandler);\r\n\r\n\r\n        observer.setDisposable(this.buildStream(observer));\r\n\r\n        return observer;\r\n    }\r\n\r\n    public buildStream(observer: IObserver): IDisposable {\r\n        super.buildStream(observer);\r\n\r\n        return this.subscribeCore(observer);\r\n    }\r\n\r\n    //private _hasMultiObservers(){\r\n    //    return this.scheduler.getObservers() > 1;\r\n    //}\r\n}","import { Observer } from \"../core/Observer\";\r\n\r\nexport class AnonymousObserver extends Observer {\r\n    public static create(onNext: Function, onError: Function, onCompleted: Function) {\r\n        return new this(onNext, onError, onCompleted);\r\n    }\r\n\r\n    protected onNext(value: any) {\r\n        this.onUserNext(value);\r\n    }\r\n\r\n    protected onError(error: any) {\r\n        this.onUserError(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        this.onUserCompleted();\r\n    }\r\n}","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\n\r\nexport class DoObserver extends Observer {\r\n    public static create(currentObserver: IObserver, prevObserver: IObserver) {\r\n        return new this(currentObserver, prevObserver);\r\n    }\r\n\r\n    private _currentObserver: IObserver = null;\r\n    private _prevObserver: IObserver = null;\r\n\r\n    constructor(currentObserver: IObserver, prevObserver: IObserver) {\r\n        super(null, null, null);\r\n\r\n        this._currentObserver = currentObserver;\r\n        this._prevObserver = prevObserver;\r\n    }\r\n\r\n    protected onNext(value) {\r\n        try {\r\n            this._prevObserver.next(value);\r\n        }\r\n        catch (e) {\r\n            this._prevObserver.error(e);\r\n            this._currentObserver.error(e);\r\n        }\r\n        finally {\r\n            this._currentObserver.next(value);\r\n        }\r\n    }\r\n\r\n    protected onError(error) {\r\n        try {\r\n            this._prevObserver.error(error);\r\n        }\r\n        catch (e) {\r\n            //this._currentObserver.error(error);\r\n        }\r\n        finally {\r\n            this._currentObserver.error(error);\r\n        }\r\n    }\r\n\r\n    protected onCompleted() {\r\n        try {\r\n            this._prevObserver.completed();\r\n        }\r\n        catch (e) {\r\n            this._prevObserver.error(e);\r\n            this._currentObserver.error(e);\r\n        }\r\n        finally {\r\n            this._currentObserver.completed();\r\n        }\r\n    }\r\n}","import { ClassMapUtils } from \"../../../utils/ClassMapUtils\";\r\n\r\nexport function registerClass(className: string) {\r\n    return function(target) {\r\n        ClassMapUtils.addClassMap(className, target);\r\n    }\r\n}\r\n\r\n","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { AnonymousObserver } from \"../observer/AnonymousObserver\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { DoObserver } from \"../observer/DoObserver\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"DoStream\")\r\nexport class DoStream extends BaseStream {\r\n    public static create(source: Stream, onNext?: Function, onError?: Function, onCompleted?: Function) {\r\n        var obj = new this(source, onNext, onError, onCompleted);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _source: Stream = null;\r\n    private _observer: Observer = null;\r\n\r\n    constructor(source: Stream, onNext: Function, onError: Function, onCompleted: Function) {\r\n        super(null);\r\n\r\n        this._source = source;\r\n        this._observer = AnonymousObserver.create(onNext, onError, onCompleted);\r\n\r\n        this.scheduler = this._source.scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        return this._source.buildStream(DoObserver.create(observer, this._observer));\r\n    }\r\n}\r\n","import { Entity } from \"../core/Entity\";\r\nimport { IDisposable } from \"./IDisposable\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\n\r\nexport class GroupDisposable extends Entity implements IDisposable {\r\n    public static create(disposable?: IDisposable) {\r\n        var obj = new this(disposable);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _group: Collection<IDisposable> = Collection.create<IDisposable>();\r\n    private _isDisposed: boolean = false;\r\n\r\n    constructor(disposable?: IDisposable) {\r\n        super(\"GroupDisposable\");\r\n\r\n        if (disposable) {\r\n            this._group.addChild(disposable);\r\n        }\r\n    }\r\n\r\n    public add(disposable: IDisposable) {\r\n        this._group.addChild(disposable);\r\n\r\n        return this;\r\n    }\r\n\r\n    public remove(disposable: IDisposable) {\r\n        this._group.removeChild(disposable);\r\n\r\n        return this;\r\n    }\r\n\r\n    public getCount() {\r\n        return this._group.getCount();\r\n    }\r\n\r\n    public dispose() {\r\n        if (this._isDisposed) {\r\n            return;\r\n        }\r\n\r\n        this._isDisposed = true;\r\n\r\n        this._group.forEach((disposable: IDisposable) => {\r\n            disposable.dispose();\r\n        });\r\n    }\r\n}","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\n\r\nexport class ConcatObserver extends Observer {\r\n    public static create(currentObserver: IObserver, startNextStream: Function) {\r\n        return new this(currentObserver, startNextStream);\r\n    }\r\n\r\n    //private currentObserver:IObserver = null;\r\n    protected currentObserver: any = null;\r\n    private _startNextStream: Function = null;\r\n\r\n    constructor(currentObserver: IObserver, startNextStream: Function) {\r\n        super(null, null, null);\r\n\r\n        this.currentObserver = currentObserver;\r\n        this._startNextStream = startNextStream;\r\n    }\r\n\r\n    protected onNext(value) {\r\n        /*!\r\n        if \"this.currentObserver.next\" error, it will pase to this.currentObserver->onError.\r\n        so it shouldn't invoke this.currentObserver.error here again!\r\n         */\r\n        //try{\r\n        this.currentObserver.next(value);\r\n        //}\r\n        //catch(e){\r\n        //    this.currentObserver.error(e);\r\n        //}\r\n    }\r\n\r\n    protected onError(error) {\r\n        this.currentObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        //this.currentObserver.completed();\r\n        this._startNextStream();\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { Collection } from \"wonder-commonlib/dist/es2015/Collection\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\nimport { fromPromise } from \"../global/Operator\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\nimport { ConcatObserver } from \"../observer/ConcatObserver\";\r\nimport { ClassMapUtils } from \"../utils/ClassMapUtils\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"ConcatStream\")\r\nexport class ConcatStream extends BaseStream {\r\n    public static create(sources: Array<Stream>) {\r\n        var obj = new this(sources);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _sources: Collection<Stream> = Collection.create<Stream>();\r\n\r\n    constructor(sources: Array<Stream>) {\r\n        super(null);\r\n\r\n        var self = this;\r\n\r\n        //todo don't set scheduler here?\r\n        this.scheduler = sources[0].scheduler;\r\n\r\n        sources.forEach((source) => {\r\n            if (JudgeUtils.isPromise(source)) {\r\n                self._sources.addChild(fromPromise(source));\r\n            }\r\n            else {\r\n                self._sources.addChild(source);\r\n            }\r\n        });\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var self = this,\r\n            count = this._sources.getCount(),\r\n            d = GroupDisposable.create();\r\n\r\n        function loopRecursive(i) {\r\n            if (i === count) {\r\n                observer.completed();\r\n\r\n                return;\r\n            }\r\n\r\n            d.add(self._sources.getChild(i).buildStream(ConcatObserver.create(\r\n                observer, () => {\r\n                    loopRecursive(i + 1);\r\n                })\r\n            ));\r\n        }\r\n\r\n        this.scheduler.publishRecursive(observer, 0, loopRecursive);\r\n\r\n        return GroupDisposable.create(d);\r\n    }\r\n}\r\n","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\n\r\nexport class MapObserver extends Observer {\r\n    public static create(currentObserver: IObserver, selector: Function) {\r\n        return new this(currentObserver, selector);\r\n    }\r\n\r\n    private _currentObserver: IObserver = null;\r\n    private _selector: Function = null;\r\n\r\n    constructor(currentObserver: IObserver, selector: Function) {\r\n        super(null, null, null);\r\n\r\n        this._currentObserver = currentObserver;\r\n        this._selector = selector;\r\n    }\r\n\r\n    protected onNext(value) {\r\n        var result = null;\r\n\r\n        try {\r\n            result = this._selector(value);\r\n        }\r\n        catch (e) {\r\n            this._currentObserver.error(e);\r\n        }\r\n        finally {\r\n            this._currentObserver.next(result);\r\n        }\r\n    }\r\n\r\n    protected onError(error) {\r\n        this._currentObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        this._currentObserver.completed();\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { MapObserver } from \"../observer/MapObserver\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"MapStream\")\r\nexport class MapStream extends BaseStream {\r\n    public static create(source: Stream, selector: Function) {\r\n        var obj = new this(source, selector);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _source: Stream = null;\r\n    private _selector: Function = null;\r\n\r\n    constructor(source: Stream, selector: Function) {\r\n        super(null);\r\n\r\n        this._source = source;\r\n\r\n        this.scheduler = this._source.scheduler;\r\n        this._selector = selector;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        return this._source.buildStream(MapObserver.create(observer, this._selector));\r\n    }\r\n}\r\n","import { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\nimport { requireCheck, assert } from \"../definition/typescript/decorator/contract\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\nimport { fromPromise } from \"../global/Operator\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class MergeAllObserver extends Observer {\r\n    public static create(currentObserver: IObserver, groupDisposable: GroupDisposable) {\r\n        return new this(currentObserver, groupDisposable);\r\n    }\r\n\r\n    constructor(currentObserver: IObserver, groupDisposable: GroupDisposable) {\r\n        super(null, null, null);\r\n\r\n        this.currentObserver = currentObserver;\r\n        this._groupDisposable = groupDisposable;\r\n    }\r\n\r\n    public done: boolean = false;\r\n    public currentObserver: IObserver = null;\r\n\r\n    private _groupDisposable: GroupDisposable = null;\r\n\r\n    @requireCheck(function(innerSource: any) {\r\n        assert(innerSource instanceof Stream || JudgeUtils.isPromise(innerSource), Log.info.FUNC_MUST_BE(\"innerSource\", \"Stream or Promise\"));\r\n\r\n    })\r\n    protected onNext(innerSource: any) {\r\n        if (JudgeUtils.isPromise(innerSource)) {\r\n            innerSource = fromPromise(innerSource);\r\n        }\r\n\r\n        let disposable = SingleDisposable.create(),\r\n            innerObserver = InnerObserver.create(this, innerSource, this._groupDisposable);\r\n\r\n        this._groupDisposable.add(disposable);\r\n\r\n        innerObserver.disposable = disposable;\r\n\r\n        disposable.setDispose(innerSource.buildStream(innerObserver));\r\n    }\r\n\r\n    protected onError(error) {\r\n        this.currentObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        this.done = true;\r\n\r\n        if (this._groupDisposable.getCount() <= 1) {\r\n            this.currentObserver.completed();\r\n        }\r\n    }\r\n}\r\n\r\nclass InnerObserver extends Observer {\r\n    public static create(parent: MergeAllObserver, currentStream: Stream, groupDisposable: GroupDisposable) {\r\n        var obj = new this(parent, currentStream, groupDisposable);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(parent: MergeAllObserver, currentStream: Stream, groupDisposable: GroupDisposable) {\r\n        super(null, null, null);\r\n\r\n        this._parent = parent;\r\n        this._currentStream = currentStream;\r\n        this._groupDisposable = groupDisposable;\r\n    }\r\n\r\n    public disposable: SingleDisposable = null;\r\n\r\n    private _parent: MergeAllObserver = null;\r\n    private _currentStream: Stream = null;\r\n    private _groupDisposable: GroupDisposable = null;\r\n\r\n    protected onNext(value) {\r\n        this._parent.currentObserver.next(value);\r\n    }\r\n\r\n    protected onError(error) {\r\n        this._parent.currentObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        var currentStream = this._currentStream,\r\n            parent = this._parent;\r\n\r\n        if (!!this.disposable) {\r\n            this.disposable.dispose();\r\n            this._groupDisposable.remove(this.disposable);\r\n        }\r\n\r\n        /*!\r\n        if this innerSource is async stream(as promise stream),\r\n        it will first exec all parent.next and one parent.completed,\r\n        then exec all this.next and all this.completed\r\n        so in this case, it should invoke parent.currentObserver.completed after the last invokcation of this.completed(have invoked all the innerSource)\r\n        */\r\n        if (this._isAsync() && this._groupDisposable.getCount() <= 1) {\r\n            parent.currentObserver.completed();\r\n        }\r\n    }\r\n\r\n    private _isAsync() {\r\n        return this._parent.done;\r\n    }\r\n}\r\n","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\nimport { MergeAllObserver } from \"../observer/MergeAllObserver\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"MergeAllStream\")\r\nexport class MergeAllStream extends BaseStream {\r\n    public static create(source: Stream) {\r\n        var obj = new this(source);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(source: Stream) {\r\n        super(null);\r\n\r\n        this._source = source;\r\n\r\n        this.scheduler = this._source.scheduler;\r\n    }\r\n\r\n    private _source: Stream = null;\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var groupDisposable = GroupDisposable.create();\r\n\r\n        groupDisposable.add(this._source.buildStream(MergeAllObserver.create(observer, groupDisposable)));\r\n\r\n        return groupDisposable;\r\n    }\r\n}\r\n","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\nimport { SkipUntilStream } from \"../stream/SkipUntilStream\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\n\r\nexport class SkipUntilOtherObserver extends Observer {\r\n    public static create(prevObserver: IObserver, skipUntilStream: SkipUntilStream) {\r\n        return new this(prevObserver, skipUntilStream);\r\n    }\r\n\r\n    public otherDisposable: IDisposable = null;\r\n\r\n    private _prevObserver: IObserver = null;\r\n    private _skipUntilStream: SkipUntilStream = null;\r\n\r\n    constructor(prevObserver: IObserver, skipUntilStream: SkipUntilStream) {\r\n        super(null, null, null);\r\n\r\n        this._prevObserver = prevObserver;\r\n        this._skipUntilStream = skipUntilStream;\r\n    }\r\n\r\n    protected onNext(value) {\r\n        this._skipUntilStream.isOpen = true;\r\n\r\n        // if(this.otherDisposable.dispose())\r\n        this.otherDisposable.dispose();\r\n    }\r\n\r\n    protected onError(error) {\r\n        this._prevObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        this.otherDisposable.dispose();\r\n    }\r\n}","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\nimport { SkipUntilStream } from \"../stream/SkipUntilStream\";\r\n\r\nexport class SkipUntilSourceObserver extends Observer {\r\n    public static create(prevObserver: IObserver, skipUntilStream: SkipUntilStream) {\r\n        return new this(prevObserver, skipUntilStream);\r\n    }\r\n\r\n    private _prevObserver: IObserver = null;\r\n    private _skipUntilStream: SkipUntilStream = null;\r\n\r\n    constructor(prevObserver: IObserver, skipUntilStream: SkipUntilStream) {\r\n        super(null, null, null);\r\n\r\n        this._prevObserver = prevObserver;\r\n        this._skipUntilStream = skipUntilStream;\r\n    }\r\n\r\n    protected onNext(value) {\r\n        if (this._skipUntilStream.isOpen) {\r\n            this._prevObserver.next(value);\r\n        }\r\n    }\r\n\r\n    protected onError(error) {\r\n        this._prevObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        if (this._skipUntilStream.isOpen) {\r\n            this._prevObserver.completed();\r\n        }\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\nimport { fromPromise } from \"../global/Operator\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { SkipUntilOtherObserver } from \"../observer/SkipUntilOtherObserver\";\r\nimport { SkipUntilSourceObserver } from \"../observer/SkipUntilSourceObserver\";\r\nimport { ClassMapUtils } from \"../utils/ClassMapUtils\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"SkipUntilStream\")\r\nexport class SkipUntilStream extends BaseStream {\r\n    public static create(source: Stream, otherSteam: Stream) {\r\n        var obj = new this(source, otherSteam);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public isOpen: boolean = false;\r\n\r\n    private _source: Stream = null;\r\n    private _otherStream: Stream = null;\r\n\r\n    constructor(source: Stream, otherStream: Stream) {\r\n        super(null);\r\n\r\n        this._source = source;\r\n        this._otherStream = JudgeUtils.isPromise(otherStream) ? fromPromise(otherStream) : otherStream;\r\n\r\n        this.scheduler = this._source.scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var group = GroupDisposable.create(),\r\n            otherDisposable: IDisposable = null,\r\n            skipUntilOtherObserver: SkipUntilOtherObserver = null;\r\n        // autoDetachObserver = AutoDetachObserver.create(observer),\r\n        // sourceDisposable = null;\r\n\r\n        // sourceDisposable = this._source.buildStream(observer);\r\n\r\n        group.add(this._source.buildStream(SkipUntilSourceObserver.create(observer, this)));\r\n\r\n        // autoDetachObserver.setDisposable(sourceDisposable);\r\n\r\n        skipUntilOtherObserver = SkipUntilOtherObserver.create(observer, this);\r\n\r\n        otherDisposable = this._otherStream.buildStream(skipUntilOtherObserver);\r\n\r\n        skipUntilOtherObserver.otherDisposable = otherDisposable;\r\n\r\n        group.add(otherDisposable);\r\n\r\n        return group;\r\n    }\r\n}\r\n","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\n\r\nexport class TakeUntilObserver extends Observer {\r\n    public static create(prevObserver: IObserver) {\r\n        return new this(prevObserver);\r\n    }\r\n\r\n    private _prevObserver: IObserver = null;\r\n\r\n    constructor(prevObserver: IObserver) {\r\n        super(null, null, null);\r\n\r\n        this._prevObserver = prevObserver;\r\n    }\r\n\r\n    protected onNext(value) {\r\n        this._prevObserver.completed();\r\n    }\r\n\r\n    protected onError(error) {\r\n        this._prevObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\nimport { fromPromise } from \"../global/Operator\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\nimport { AutoDetachObserver } from \"../observer/AutoDetachObserver\";\r\nimport { TakeUntilObserver } from \"../observer/TakeUntilObserver\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"TakeUntilStream\")\r\nexport class TakeUntilStream extends BaseStream {\r\n    public static create(source: Stream, otherSteam: Stream) {\r\n        var obj = new this(source, otherSteam);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _source: Stream = null;\r\n    private _otherStream: Stream = null;\r\n\r\n    constructor(source: Stream, otherStream: Stream) {\r\n        super(null);\r\n\r\n        this._source = source;\r\n        this._otherStream = JudgeUtils.isPromise(otherStream) ? fromPromise(otherStream) : otherStream;\r\n\r\n        this.scheduler = this._source.scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var group = GroupDisposable.create(),\r\n            autoDetachObserver = AutoDetachObserver.create(observer),\r\n            sourceDisposable = null;\r\n\r\n        sourceDisposable = this._source.buildStream(observer);\r\n\r\n        group.add(sourceDisposable);\r\n\r\n        autoDetachObserver.setDisposable(sourceDisposable);\r\n\r\n        group.add(this._otherStream.buildStream(TakeUntilObserver.create(autoDetachObserver)));\r\n\r\n        return group;\r\n    }\r\n}\r\n","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\nimport { Stream } from \"../core/Stream\";\r\n\r\nexport class FilterObserver extends Observer {\r\n    public static create(prevObserver: IObserver, predicate: (value: any, index?: number, source?: Stream) => boolean, source: Stream) {\r\n        return new this(prevObserver, predicate, source);\r\n    }\r\n\r\n    constructor(prevObserver: IObserver, predicate: (value: any) => boolean, source: Stream) {\r\n        super(null, null, null);\r\n\r\n        this.prevObserver = prevObserver;\r\n        this.predicate = predicate;\r\n        this.source = source;\r\n    }\r\n\r\n    protected prevObserver: IObserver = null;\r\n    protected source: Stream = null;\r\n    protected i: number = 0;\r\n    protected predicate: (value: any, index?: number, source?: Stream) => boolean = null;\r\n\r\n    protected onNext(value) {\r\n        try {\r\n            if (this.predicate(value, this.i++, this.source)) {\r\n                this.prevObserver.next(value);\r\n            }\r\n        }\r\n        catch (e) {\r\n            this.prevObserver.error(e);\r\n        }\r\n\r\n    }\r\n\r\n    protected onError(error) {\r\n        this.prevObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        this.prevObserver.completed();\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { FunctionUtils } from \"wonder-commonlib/dist/es2015/utils/FunctionUtils\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { FilterObserver } from \"../observer/FilterObserver\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"FilterStream\")\r\nexport class FilterStream extends BaseStream {\r\n    public static create(source: Stream, predicate: (value: any, index?: number, source?: Stream) => boolean, thisArg: any) {\r\n        var obj = new this(source, predicate, thisArg);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(source: Stream, predicate: (value: any, index?: number, source?: Stream) => boolean, thisArg: any) {\r\n        super(null);\r\n\r\n        this._source = source;\r\n        this.predicate = FunctionUtils.bind(thisArg, predicate);\r\n    }\r\n\r\n    public predicate: (value: any, index?: number, source?: Stream) => boolean = null;\r\n\r\n    private _source: Stream = null;\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        return this._source.subscribe(this.createObserver(observer));\r\n    }\r\n\r\n    public internalFilter(predicate: (value: any, index?: number, source?: Stream) => boolean, thisArg: any) {\r\n        return this.createStreamForInternalFilter(this._source, this._innerPredicate(predicate, this), thisArg);\r\n    }\r\n\r\n    protected createObserver(observer: IObserver): Observer {\r\n        return FilterObserver.create(observer, this.predicate, this);\r\n    }\r\n\r\n    protected createStreamForInternalFilter(source: Stream, innerPredicate: any, thisArg: any): Stream {\r\n        return FilterStream.create(source, innerPredicate, thisArg);\r\n    }\r\n\r\n    private _innerPredicate(predicate: (value: any, index?: number, source?: Stream) => boolean, self: any) {\r\n        return (value, i, o) => {\r\n            return self.predicate(value, i, o) && predicate.call(this, value, i, o);\r\n        }\r\n    }\r\n}\r\n","export enum FilterState {\r\n    TRIGGER,\r\n    ENTER,\r\n    LEAVE\r\n}","import { FilterObserver } from \"./FilterObserver\";\r\nimport { IObserver } from \"./IObserver\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { FilterState } from \"../enum/FilterState\";\r\n\r\nexport class FilterWithStateObserver extends FilterObserver {\r\n    public static create(prevObserver: IObserver, predicate: (value: any, index?: number, source?: Stream) => boolean, source: Stream) {\r\n        return new this(prevObserver, predicate, source);\r\n    }\r\n\r\n    private _isTrigger: boolean = false;\r\n\r\n    protected onNext(value) {\r\n        var data: { value: any, state: FilterState } = null;\r\n\r\n        try {\r\n            if (this.predicate(value, this.i++, this.source)) {\r\n                if (!this._isTrigger) {\r\n                    data = {\r\n                        value: value,\r\n                        state: FilterState.ENTER\r\n                    };\r\n                }\r\n                else {\r\n                    data = {\r\n                        value: value,\r\n                        state: FilterState.TRIGGER\r\n                    };\r\n                }\r\n\r\n                this.prevObserver.next(data);\r\n\r\n                this._isTrigger = true;\r\n            }\r\n            else {\r\n                if (this._isTrigger) {\r\n                    data = {\r\n                        value: value,\r\n                        state: FilterState.LEAVE\r\n                    };\r\n\r\n                    this.prevObserver.next(data);\r\n                }\r\n\r\n                this._isTrigger = false;\r\n            }\r\n        }\r\n        catch (e) {\r\n            this.prevObserver.error(e);\r\n        }\r\n    }\r\n}","import { FilterStream } from \"./FilterStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { FilterWithStateObserver } from \"../observer/FilterWithStateObserver\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"FilterWithStateStream\")\r\nexport class FilterWithStateStream extends FilterStream {\r\n    public static create(source: Stream, predicate: (value: any, index?: number, source?: Stream) => boolean, thisArg: any) {\r\n        var obj = new this(source, predicate, thisArg);\r\n\r\n        return obj;\r\n    }\r\n\r\n    protected createObserver(observer: IObserver) {\r\n        return FilterWithStateObserver.create(observer, this.predicate, this);\r\n    }\r\n\r\n    protected createStreamForInternalFilter(source: Stream, innerPredicate: any, thisArg: any): Stream {\r\n        return FilterWithStateStream.create(source, innerPredicate, thisArg);\r\n    }\r\n}\r\n","import { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\nimport { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\nimport { fromPromise } from \"../global/Operator\";\r\nimport { requireCheck, assert } from \"../definition/typescript/decorator/contract\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class MergeObserver extends Observer {\r\n    public static create(currentObserver: IObserver, maxConcurrent: number, groupDisposable: GroupDisposable) {\r\n        return new this(currentObserver, maxConcurrent, groupDisposable);\r\n    }\r\n\r\n    constructor(currentObserver: IObserver, maxConcurrent: number, groupDisposable: GroupDisposable) {\r\n        super(null, null, null);\r\n\r\n        this.currentObserver = currentObserver;\r\n        this._maxConcurrent = maxConcurrent;\r\n        this._groupDisposable = groupDisposable;\r\n    }\r\n\r\n    public done: boolean = false;\r\n    public currentObserver: IObserver = null;\r\n    public activeCount: number = 0;\r\n    public q: Array<Stream> = [];\r\n\r\n    private _maxConcurrent: number = null;\r\n    private _groupDisposable: GroupDisposable = null;\r\n\r\n    public handleSubscribe(innerSource: any) {\r\n        if (JudgeUtils.isPromise(innerSource)) {\r\n            innerSource = fromPromise(innerSource);\r\n        }\r\n\r\n        let disposable = SingleDisposable.create(),\r\n            innerObserver = InnerObserver.create(this, innerSource, this._groupDisposable);\r\n\r\n        this._groupDisposable.add(disposable);\r\n\r\n        innerObserver.disposable = disposable;\r\n\r\n        disposable.setDispose(innerSource.buildStream(innerObserver));\r\n    }\r\n\r\n    @requireCheck(function(innerSource: any) {\r\n        assert(innerSource instanceof Stream || JudgeUtils.isPromise(innerSource), Log.info.FUNC_MUST_BE(\"innerSource\", \"Stream or Promise\"));\r\n\r\n    })\r\n    protected onNext(innerSource: any) {\r\n        if (this._isNotReachMaxConcurrent()) {\r\n            this.activeCount++;\r\n            this.handleSubscribe(innerSource);\r\n\r\n            return;\r\n        }\r\n\r\n        this.q.push(innerSource);\r\n    }\r\n\r\n    protected onError(error) {\r\n        this.currentObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        this.done = true;\r\n\r\n        if (this.activeCount === 0) {\r\n            this.currentObserver.completed();\r\n        }\r\n    }\r\n\r\n    private _isNotReachMaxConcurrent() {\r\n        return this.activeCount < this._maxConcurrent;\r\n    }\r\n}\r\n\r\nclass InnerObserver extends Observer {\r\n    public static create(parent: MergeObserver, currentStream: Stream, groupDisposable: GroupDisposable) {\r\n        var obj = new this(parent, currentStream, groupDisposable);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(parent: MergeObserver, currentStream: Stream, groupDisposable: GroupDisposable) {\r\n        super(null, null, null);\r\n\r\n        this._parent = parent;\r\n        this._currentStream = currentStream;\r\n        this._groupDisposable = groupDisposable;\r\n    }\r\n\r\n    public disposable: SingleDisposable = null;\r\n\r\n    private _parent: MergeObserver = null;\r\n    private _currentStream: Stream = null;\r\n    private _groupDisposable: GroupDisposable = null;\r\n\r\n    protected onNext(value) {\r\n        this._parent.currentObserver.next(value);\r\n    }\r\n\r\n    protected onError(error) {\r\n        this._parent.currentObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        var parent = this._parent;\r\n\r\n        if (!!this.disposable) {\r\n            this.disposable.dispose();\r\n            this._groupDisposable.remove(this.disposable);\r\n        }\r\n\r\n        if (parent.q.length > 0) {\r\n            parent.handleSubscribe(parent.q.shift());\r\n        }\r\n        else {\r\n            parent.activeCount -= 1;\r\n            if (this._isAsync() && parent.activeCount === 0) {\r\n                parent.currentObserver.completed();\r\n            }\r\n        }\r\n    }\r\n\r\n    private _isAsync() {\r\n        return this._parent.done;\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\nimport { MergeObserver } from \"../observer/MergeObserver\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"MergeStream\")\r\nexport class MergeStream extends BaseStream {\r\n    public static create(source: Stream, maxConcurrent: number) {\r\n        var obj = new this(source, maxConcurrent);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(source: Stream, maxConcurrent: number) {\r\n        super(null);\r\n\r\n        this._source = source;\r\n        this._maxConcurrent = maxConcurrent;\r\n\r\n        this.scheduler = this._source.scheduler;\r\n    }\r\n\r\n    private _source: Stream = null;\r\n    private _maxConcurrent: number = null;\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var groupDisposable = GroupDisposable.create();\r\n\r\n        groupDisposable.add(this._source.buildStream(MergeObserver.create(observer, this._maxConcurrent, groupDisposable)));\r\n\r\n        return groupDisposable;\r\n    }\r\n}\r\n","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\nimport { ConcatObserver } from \"../observer/ConcatObserver\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"RepeatStream\")\r\nexport class RepeatStream extends BaseStream {\r\n    public static create(source: Stream, count: number) {\r\n        var obj = new this(source, count);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _source: Stream = null;\r\n    private _count: number = null;\r\n\r\n    constructor(source: Stream, count: number) {\r\n        super(null);\r\n\r\n        this._source = source;\r\n        this._count = count;\r\n\r\n        this.scheduler = this._source.scheduler;\r\n\r\n        //this.subjectGroup = this._source.subjectGroup;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var self = this,\r\n            d = GroupDisposable.create();\r\n\r\n        function loopRecursive(count) {\r\n            if (count === 0) {\r\n                observer.completed();\r\n\r\n                return;\r\n            }\r\n\r\n            d.add(\r\n                self._source.buildStream(ConcatObserver.create(observer, () => {\r\n                    loopRecursive(count - 1);\r\n                }))\r\n            );\r\n        }\r\n\r\n\r\n        this.scheduler.publishRecursive(observer, this._count, loopRecursive);\r\n\r\n        return GroupDisposable.create(d);\r\n    }\r\n}\r\n","import { Observer } from \"../core/Observer\";\r\nimport { IObserver } from \"./IObserver\";\r\n\r\nexport class IgnoreElementsObserver extends Observer {\r\n    public static create(currentObserver: IObserver) {\r\n        return new this(currentObserver);\r\n    }\r\n\r\n    private _currentObserver: IObserver = null;\r\n\r\n    constructor(currentObserver: IObserver) {\r\n        super(null, null, null);\r\n\r\n        this._currentObserver = currentObserver;\r\n    }\r\n\r\n    protected onNext(value) {\r\n    }\r\n\r\n    protected onError(error) {\r\n        this._currentObserver.error(error);\r\n    }\r\n\r\n    protected onCompleted() {\r\n        this._currentObserver.completed();\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Stream } from \"../core/Stream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { IgnoreElementsObserver } from \"../observer/IgnoreElementsObserver\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"IgnoreElementsStream\")\r\nexport class IgnoreElementsStream extends BaseStream {\r\n    public static create(source: Stream) {\r\n        var obj = new this(source);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _source: Stream = null;\r\n\r\n    constructor(source: Stream) {\r\n        super(null);\r\n\r\n        this._source = source;\r\n\r\n        this.scheduler = this._source.scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        return this._source.buildStream(IgnoreElementsObserver.create(observer));\r\n    }\r\n}\r\n","import { JudgeUtils } from \"../JudgeUtils\";\r\nimport { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\n\r\ndeclare var global: NodeJS.Global, window: Window;\r\n\r\nexport var root: any;\r\n\r\nif (JudgeUtils.isNodeJs() && typeof global != \"undefined\") {\r\n    root = global;\r\n}\r\nelse if (typeof window != \"undefined\") {\r\n    root = window;\r\n}\r\nelse if (typeof self != \"undefined\") {\r\n    /*!\r\n     in web worker\r\n     */\r\n    root = self;\r\n}\r\nelse {\r\n    Log.error(\"no avaliable root!\");\r\n}\r\n","import { root } from \"../global/Variable\";\r\n\r\nroot.requestNextAnimationFrame = (function() {\r\n    var originalRequestAnimationFrame = undefined,\r\n        wrapper = undefined,\r\n        callback = undefined,\r\n        geckoVersion = null,\r\n        userAgent = root.navigator && root.navigator.userAgent,\r\n        index = 0,\r\n        self = this;\r\n\r\n    wrapper = function(time) {\r\n        time = root.performance.now();\r\n        self.callback(time);\r\n    };\r\n\r\n    /*!\r\n     bug!\r\n     below code:\r\n     when invoke b after 1s, will only invoke b, not invoke a!\r\n\r\n     function a(time){\r\n     console.log(\"a\", time);\r\n     webkitRequestAnimationFrame(a);\r\n     }\r\n\r\n     function b(time){\r\n     console.log(\"b\", time);\r\n     webkitRequestAnimationFrame(b);\r\n     }\r\n\r\n     a();\r\n\r\n     setTimeout(b, 1000);\r\n\r\n\r\n\r\n     so use requestAnimationFrame priority!\r\n     */\r\n    if (root.requestAnimationFrame) {\r\n        return requestAnimationFrame;\r\n    }\r\n\r\n\r\n    // Workaround for Chrome 10 bug where Chrome\r\n    // does not pass the time to the animation function\r\n\r\n    if (root.webkitRequestAnimationFrame) {\r\n        // Define the wrapper\r\n\r\n        // Make the switch\r\n\r\n        originalRequestAnimationFrame = root.webkitRequestAnimationFrame;\r\n\r\n        root.webkitRequestAnimationFrame = function(callback, element) {\r\n            self.callback = callback;\r\n\r\n            // Browser calls the wrapper and wrapper calls the callback\r\n\r\n            return originalRequestAnimationFrame(wrapper, element);\r\n        }\r\n    }\r\n\r\n    //修改time参数\r\n    if (root.msRequestAnimationFrame) {\r\n        originalRequestAnimationFrame = root.msRequestAnimationFrame;\r\n\r\n        root.msRequestAnimationFrame = function(callback) {\r\n            self.callback = callback;\r\n\r\n            return originalRequestAnimationFrame(wrapper);\r\n        }\r\n    }\r\n\r\n    // Workaround for Gecko 2.0, which has a bug in\r\n    // mozRequestAnimationFrame() that restricts animations\r\n    // to 30-40 fps.\r\n\r\n    if (root.mozRequestAnimationFrame) {\r\n        // Check the Gecko version. Gecko is used by browsers\r\n        // other than Firefox. Gecko 2.0 corresponds to\r\n        // Firefox 4.0.\r\n\r\n        index = userAgent.indexOf('rv:');\r\n\r\n        if (userAgent.indexOf('Gecko') != -1) {\r\n            geckoVersion = userAgent.substr(index + 3, 3);\r\n\r\n            if (geckoVersion === '2.0') {\r\n                // Forces the return statement to fall through\r\n                // to the setTimeout() function.\r\n\r\n                root.mozRequestAnimationFrame = undefined;\r\n            }\r\n        }\r\n    }\r\n\r\n    return root.webkitRequestAnimationFrame ||\r\n        root.mozRequestAnimationFrame ||\r\n        root.oRequestAnimationFrame ||\r\n        root.msRequestAnimationFrame ||\r\n\r\n        function(callback, element) {\r\n            var start,\r\n                finish;\r\n\r\n            root.setTimeout(function() {\r\n                start = root.performance.now();\r\n                callback(start);\r\n                finish = root.performance.now();\r\n\r\n                self.timeout = 1000 / 60 - (finish - start);\r\n\r\n            }, self.timeout);\r\n        };\r\n}());\r\n\r\nroot.cancelNextRequestAnimationFrame = root.cancelRequestAnimationFrame\r\n    || root.webkitCancelAnimationFrame\r\n    || root.webkitCancelRequestAnimationFrame\r\n    || root.mozCancelRequestAnimationFrame\r\n    || root.oCancelRequestAnimationFrame\r\n    || root.msCancelRequestAnimationFrame\r\n    || clearTimeout;\r\n\r\n","import { IObserver } from \"../observer/IObserver\";\r\nimport { root } from \"../global/Variable\";\r\n\r\nexport class Scheduler {\r\n    //todo remove \"...args\"\r\n    public static create(...args) {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _requestLoopId: any = null;\r\n    get requestLoopId() {\r\n        return this._requestLoopId;\r\n    }\r\n    set requestLoopId(requestLoopId: any) {\r\n        this._requestLoopId = requestLoopId;\r\n    }\r\n\r\n    //param observer is used by TestScheduler to rewrite\r\n\r\n    public publishRecursive(observer: IObserver, initial: any, action: Function) {\r\n        action(initial);\r\n    }\r\n\r\n    public publishInterval(observer: IObserver, initial: any, interval: number, action: Function): number {\r\n        return root.setInterval(() => {\r\n            initial = action(initial);\r\n        }, interval);\r\n    }\r\n\r\n    public publishIntervalRequest(observer: IObserver, action: Function) {\r\n        var self = this,\r\n            loop = (time) => {\r\n                var isEnd = action(time);\r\n\r\n                if (isEnd) {\r\n                    return;\r\n                }\r\n\r\n                self._requestLoopId = root.requestNextAnimationFrame(loop);\r\n            };\r\n\r\n        this._requestLoopId = root.requestNextAnimationFrame(loop);\r\n    }\r\n\r\n    public publishTimeout(observer: IObserver, time: number, action: Function): number {\r\n        return root.setTimeout(() => {\r\n            action(time);\r\n            observer.completed();\r\n        }, time);\r\n    }\r\n}","import { Stream } from \"../core/Stream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { Subject } from \"../subject/Subject\";\r\nimport { IDisposable } from \"../Disposable/IDisposable\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { AutoDetachObserver } from \"../observer/AutoDetachObserver\";\r\nimport { JudgeUtils } from \"../JudgeUtils\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class AnonymousStream extends Stream {\r\n    public static create(subscribeFunc: Function) {\r\n        var obj = new this(subscribeFunc);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(subscribeFunc: Function) {\r\n        super(subscribeFunc);\r\n\r\n        this.scheduler = Scheduler.create();\r\n    }\r\n\r\n    public buildStream(observer: IObserver): IDisposable {\r\n        return SingleDisposable.create(<Function>(this.subscribeFunc(observer) || function() { }));\r\n    }\r\n\r\n    public subscribe(subject: Subject): IDisposable;\r\n    public subscribe(observer: IObserver): IDisposable;\r\n\r\n    public subscribe(onNext: (value: any) => void): IDisposable;\r\n    public subscribe(onNext: (value: any) => void, onError: (e: any) => void): IDisposable;\r\n    public subscribe(onNext: (value: any) => void, onError: (e: any) => void, onComplete: () => void): IDisposable;\r\n\r\n    public subscribe(...args): IDisposable {\r\n        var observer: AutoDetachObserver = null;\r\n\r\n        if (args[0] instanceof Subject) {\r\n            let subject: Subject = <Subject>args[0];\r\n\r\n            this.handleSubject(subject);\r\n\r\n            return;\r\n        }\r\n        else if (JudgeUtils.isIObserver(<IObserver>args[0])) {\r\n            observer = AutoDetachObserver.create(<IObserver>args[0]);\r\n        }\r\n        else {\r\n            let onNext: Function = <Function>args[0],\r\n                onError: Function = <Function>args[1] || null,\r\n                onCompleted: Function = <Function>args[2] || null;\r\n\r\n            observer = AutoDetachObserver.create(onNext, onError, onCompleted);\r\n        }\r\n\r\n        observer.setDisposable(this.buildStream(observer));\r\n\r\n        return observer;\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class FromArrayStream extends BaseStream {\r\n    public static create(array: Array<any>, scheduler: Scheduler) {\r\n        var obj = new this(array, scheduler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _array: Array<any> = null;\r\n\r\n    constructor(array: Array<any>, scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this._array = array;\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var array = this._array,\r\n            len = array.length;\r\n\r\n        function loopRecursive(i) {\r\n            if (i < len) {\r\n                observer.next(array[i]);\r\n\r\n                loopRecursive(i + 1);\r\n            } else {\r\n                observer.completed();\r\n            }\r\n        }\r\n\r\n        this.scheduler.publishRecursive(observer, 0, loopRecursive);\r\n\r\n        return SingleDisposable.create();\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class FromPromiseStream extends BaseStream {\r\n    public static create(promise: any, scheduler: Scheduler) {\r\n        var obj = new this(promise, scheduler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _promise: any = null;\r\n\r\n    constructor(promise: any, scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this._promise = promise;\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        this._promise.then((data) => {\r\n            observer.next(data);\r\n            observer.completed();\r\n        }, (err) => {\r\n            observer.error(err);\r\n        }, observer);\r\n\r\n        return SingleDisposable.create();\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\n\r\nexport class FromEventPatternStream extends BaseStream {\r\n    public static create(addHandler: Function, removeHandler: Function) {\r\n        var obj = new this(addHandler, removeHandler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _addHandler: Function = null;\r\n    private _removeHandler: Function = null;\r\n\r\n    constructor(addHandler: Function, removeHandler: Function) {\r\n        super(null);\r\n\r\n        this._addHandler = addHandler;\r\n        this._removeHandler = removeHandler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var self = this;\r\n\r\n        function innerHandler(event) {\r\n            observer.next(event);\r\n        }\r\n\r\n        this._addHandler(innerHandler);\r\n\r\n        return SingleDisposable.create(() => {\r\n            self._removeHandler(innerHandler);\r\n        });\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\nimport { root } from \"../global/Variable\";\r\n\r\nexport class IntervalStream extends BaseStream {\r\n    public static create(interval: number, scheduler: Scheduler) {\r\n        var obj = new this(interval, scheduler);\r\n\r\n        obj.initWhenCreate();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _interval: number = null;\r\n\r\n    constructor(interval: number, scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this._interval = interval;\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public initWhenCreate() {\r\n        this._interval = this._interval <= 0 ? 1 : this._interval;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var self = this,\r\n            id = null;\r\n\r\n        id = this.scheduler.publishInterval(observer, 0, this._interval, (count) => {\r\n            //self.scheduler.next(count);\r\n            observer.next(count);\r\n\r\n            return count + 1;\r\n        });\r\n\r\n        //Disposer.addDisposeHandler(() => {\r\n        //});\r\n\r\n        return SingleDisposable.create(() => {\r\n            root.clearInterval(id);\r\n        });\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\nimport { root } from \"../global/Variable\";\r\n\r\nexport class IntervalRequestStream extends BaseStream {\r\n    public static create(scheduler: Scheduler) {\r\n        var obj = new this(scheduler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _isEnd: boolean = false;\r\n\r\n    constructor(scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var self = this;\r\n\r\n        this.scheduler.publishIntervalRequest(observer, (time) => {\r\n            observer.next(time);\r\n\r\n            return self._isEnd;\r\n        });\r\n\r\n        return SingleDisposable.create(() => {\r\n            root.cancelNextRequestAnimationFrame(self.scheduler.requestLoopId);\r\n            self._isEnd = true;\r\n        });\r\n    }\r\n}","import { Log } from \"wonder-commonlib/dist/es2015/Log\";\r\nimport { BaseStream } from \"./BaseStream\";\r\nimport { requireCheck, assert } from \"../definition/typescript/decorator/contract\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { SingleDisposable } from \"../Disposable/SingleDisposable\";\r\nimport { root } from \"../global/Variable\";\r\n\r\nexport class TimeoutStream extends BaseStream {\r\n    @requireCheck(function(time: number, scheduler: Scheduler) {\r\n        assert(time > 0, Log.info.FUNC_SHOULD(\"time\", \"> 0\"));\r\n    })\r\n    public static create(time: number, scheduler: Scheduler) {\r\n        var obj = new this(time, scheduler);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _time: number = null;\r\n\r\n    constructor(time: number, scheduler: Scheduler) {\r\n        super(null);\r\n\r\n        this._time = time;\r\n        this.scheduler = scheduler;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var id = null;\r\n\r\n        id = this.scheduler.publishTimeout(observer, this._time, (time) => {\r\n            observer.next(time);\r\n        });\r\n\r\n        return SingleDisposable.create(() => {\r\n            root.clearTimeout(id);\r\n        });\r\n    }\r\n}","import { BaseStream } from \"./BaseStream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { GroupDisposable } from \"../Disposable/GroupDisposable\";\r\n\r\nexport class DeferStream extends BaseStream {\r\n    public static create(buildStreamFunc: Function) {\r\n        var obj = new this(buildStreamFunc);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _buildStreamFunc: Function = null;\r\n\r\n    constructor(buildStreamFunc: Function) {\r\n        super(null);\r\n\r\n        this._buildStreamFunc = buildStreamFunc;\r\n    }\r\n\r\n    public subscribeCore(observer: IObserver) {\r\n        var group = GroupDisposable.create();\r\n\r\n        group.add(this._buildStreamFunc().buildStream(observer));\r\n\r\n        return group;\r\n    }\r\n}","/*!\r\nto avoid cycle dependence problem and avoid user who use wonder-frp need mannully import stream:\r\nmanually import stream which need be imported in Stream.ts here!\r\n */\r\nimport \"../stream/DoStream\";\r\nimport \"../stream/ConcatStream\";\r\nimport \"../stream/MapStream\";\r\nimport \"../stream/MergeAllStream\";\r\nimport \"../stream/SkipUntilStream\";\r\nimport \"../stream/TakeUntilStream\";\r\nimport \"../stream/FilterStream\";\r\nimport \"../stream/FilterWithStateStream\";\r\nimport \"../stream/MergeStream\";\r\nimport \"../stream/RepeatStream\";\r\nimport \"../stream/IgnoreElementsStream\";\r\n/*!\r\n to avoid user who use wonder-frp need mannully import root:\r\n manually import root here!\r\n */\r\nimport \"../extend/root\";\r\nimport { AnonymousStream } from \"../stream/AnonymousStream\";\r\nimport { Scheduler } from \"../core/Scheduler\";\r\nimport { FromArrayStream } from \"../stream/FromArrayStream\";\r\nimport { FromPromiseStream } from \"../stream/FromPromiseStream\";\r\nimport { FromEventPatternStream } from \"../stream/FromEventPatternStream\";\r\nimport { IntervalStream } from \"../stream/IntervalStream\";\r\nimport { IntervalRequestStream } from \"../stream/IntervalRequestStream\";\r\nimport { TimeoutStream } from \"../stream/TimeoutStream\";\r\nimport { IObserver } from \"../observer/IObserver\";\r\nimport { root } from \"./Variable\";\r\nimport { DeferStream } from \"../stream/DeferStream\";\r\nimport { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { EventUtils } from \"wonder-commonlib/dist/es2015/utils/EventUtils\";\r\n\r\n@registerClass(\"Operator\")\r\nexport class Operator {\r\n    public static empty() {\r\n        return Operator.createStream((observer: IObserver) => {\r\n            observer.completed();\r\n        });\r\n    }\r\n\r\n    public static createStream(subscribeFunc) {\r\n        return AnonymousStream.create(subscribeFunc);\r\n    }\r\n\r\n    public static fromArray(array: Array<any>, scheduler = Scheduler.create()) {\r\n        return FromArrayStream.create(array, scheduler);\r\n    }\r\n}\r\n\r\nexport var createStream = Operator.createStream;\r\n\r\nexport var empty = Operator.empty;\r\n\r\nexport var fromArray = Operator.fromArray;\r\n\r\nexport var fromPromise = (promise: any, scheduler = Scheduler.create()) => {\r\n    return FromPromiseStream.create(promise, scheduler);\r\n};\r\n\r\nexport var fromEvent = (dom: HTMLElement, eventName: string) => {\r\n    return fromEventPattern((handler) => {\r\n        EventUtils.addEvent(dom, eventName, handler);\r\n    }, (handler) => {\r\n        EventUtils.removeEvent(dom, eventName, handler);\r\n    });\r\n};\r\n\r\nexport var fromEventPattern = (addHandler: Function, removeHandler: Function) => {\r\n    return FromEventPatternStream.create(addHandler, removeHandler);\r\n};\r\n\r\nexport var interval = (interval, scheduler = Scheduler.create()) => {\r\n    return IntervalStream.create(interval, scheduler);\r\n};\r\n\r\nexport var intervalRequest = (scheduler = Scheduler.create()) => {\r\n    return IntervalRequestStream.create(scheduler);\r\n};\r\n\r\nexport var timeout = (time, scheduler = Scheduler.create()) => {\r\n    return TimeoutStream.create(time, scheduler);\r\n};\r\nexport var callFunc = (func: Function, context = root) => {\r\n    return createStream((observer: IObserver) => {\r\n        try {\r\n            observer.next(func.call(context, null));\r\n        }\r\n        catch (e) {\r\n            observer.error(e);\r\n        }\r\n\r\n        observer.completed();\r\n    });\r\n};\r\n\r\nexport var judge = (condition: Function, thenSource: Function, elseSource: Function) => {\r\n    return condition() ? thenSource() : elseSource();\r\n};\r\n\r\nexport var defer = (buildStreamFunc: Function) => {\r\n    return DeferStream.create(buildStreamFunc);\r\n};\r\n\r\nexport var just = (returnValue: any) => {\r\n    return createStream((observer: IObserver) => {\r\n        observer.next(returnValue);\r\n        observer.completed();\r\n    });\r\n}\r\n","import { JudgeUtils } from \"../utils/JudgeUtils\";\r\nimport { Log } from \"../utils/Log\";\r\n\r\ndeclare var global: NodeJS.Global, window: Window;\r\nexport var root: any;\r\n\r\nif (JudgeUtils.isNodeJs() && typeof global != \"undefined\") {\r\n    root = global;\r\n}\r\nelse if (typeof window != \"undefined\") {\r\n    root = window;\r\n}\r\nelse if (typeof self != \"undefined\") {\r\n    /*!\r\n    in web worker\r\n     */\r\n    root = self;\r\n}\r\nelse {\r\n    Log.error(\"no avaliable root!\");\r\n}","export enum ETextureFormat {\r\n    RGB = \"RGB\",\r\n    RGBA = \"RGBA\",\r\n    ALPHA = \"ALPHA\",\r\n    LUMINANCE = \"LUMINANCE\",\r\n    LUMINANCE_ALPHA = \"LUMINANCE_ALPHA\",\r\n\r\n    RGB_S3TC_DXT1 = \"RGB_S3TC_DXT1\",\r\n    RGBA_S3TC_DXT1 = \"RGBA_S3TC_DXT1\",\r\n    RGBA_S3TC_DXT3 = \"RGBA_S3TC_DXT3\",\r\n    RGBA_S3TC_DXT5 = \"RGBA_S3TC_DXT5\"\r\n}\r\n\r\n","export enum ETextureType {\r\n    UNSIGNED_BYTE = \"UNSIGNED_BYTE\",\r\n    UNSIGNED_SHORT_5_6_5 = \"UNSIGNED_SHORT_5_6_5\",\r\n    UNSIGNED_SHORT_4_4_4_4 = \"UNSIGNED_SHORT_4_4_4_4\",\r\n    UNSIGNED_SHORT_5_5_5_1 = \"UNSIGNED_SHORT_5_5_5_1\"\r\n}\r\n\r\n","export const CompileConfig = {\r\n    isCompileTest: true,\r\n    closeContractTest: false\r\n};","export class InitConfigData {\r\n    public static isTest: boolean = null;\r\n}","export class InitConfigWorkerData {\r\n    public static isTest: boolean = null;\r\n}\r\n","import { List } from \"./List\";\r\n\r\nexport class Queue<T> extends List<T>{\r\n    public static create<T>(children = []) {\r\n        var obj = new this(<Array<T>>children);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(children: Array<T> = []) {\r\n        super();\r\n\r\n        this.children = children;\r\n    }\r\n\r\n    get front() {\r\n        return this.children[this.children.length - 1];\r\n    }\r\n\r\n    get rear() {\r\n        return this.children[0];\r\n    }\r\n\r\n    public push(element: T) {\r\n        this.children.unshift(element);\r\n    }\r\n\r\n    public pop() {\r\n        return this.children.pop();\r\n    }\r\n\r\n    public clear() {\r\n        this.removeAllChildren();\r\n    }\r\n}","import { List } from \"./List\";\r\nimport { JudgeUtils } from \"./utils/JudgeUtils\";\r\nimport { ExtendUtils } from \"./utils/ExtendUtils\";\r\nimport { Collection } from \"./Collection\";\r\nimport { $BREAK, $REMOVE } from \"./global/Const\";\r\n\r\nexport class Stack<T> extends List<T>{\r\n    public static create<T>(children = []) {\r\n        var obj = new this(<Array<T>>children);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(children: Array<T> = []) {\r\n        super();\r\n\r\n        this.children = children;\r\n    }\r\n\r\n    get top() {\r\n        return this.children[this.children.length - 1];\r\n    }\r\n\r\n    public push(element: T) {\r\n        this.children.push(element);\r\n    }\r\n\r\n    public pop() {\r\n        return this.children.pop();\r\n    }\r\n\r\n    public clear() {\r\n        this.removeAllChildren();\r\n    }\r\n\r\n    public clone();\r\n    public clone(isDeep: boolean);\r\n    public clone(target: Stack<T>);\r\n    public clone(target: Stack<T>, isDeep: boolean);\r\n\r\n    public clone(...args) {\r\n        var target: Stack<T> = null,\r\n            isDeep: boolean = null;\r\n\r\n        if (args.length === 0) {\r\n            isDeep = false;\r\n            target = Stack.create<T>();\r\n        }\r\n        else if (args.length === 1) {\r\n            if (JudgeUtils.isBoolean(args[0])) {\r\n                target = Stack.create<T>();\r\n                isDeep = args[0];\r\n            }\r\n            else {\r\n                target = args[0];\r\n                isDeep = false;\r\n            }\r\n        }\r\n        else {\r\n            target = args[0];\r\n            isDeep = args[1];\r\n        }\r\n\r\n        if (isDeep === true) {\r\n            target.setChildren(ExtendUtils.extendDeep(this.children));\r\n        }\r\n        else {\r\n            target.setChildren(ExtendUtils.extend([], this.children));\r\n        }\r\n\r\n        return target;\r\n    }\r\n\r\n    public filter(func: (value: T, index: number) => boolean): Collection<T> {\r\n        var children = this.children,\r\n            result = [],\r\n            value = null;\r\n\r\n        for (let i = 0, len = children.length; i < len; i++) {\r\n            value = children[i];\r\n\r\n            if (func.call(children, value, i)) {\r\n                result.push(value);\r\n            }\r\n        }\r\n\r\n        return Collection.create<T>(result);\r\n    }\r\n\r\n    public findOne(func: (value: T, index: number) => boolean) {\r\n        var scope = this.children,\r\n            result: T = null;\r\n\r\n        this.forEach((value: T, index) => {\r\n            if (!func.call(scope, value, index)) {\r\n                return;\r\n            }\r\n\r\n            result = value;\r\n            return $BREAK;\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    public reverse() {\r\n        return Collection.create<T>(this.copyChildren().reverse());\r\n    }\r\n\r\n    public removeChild(arg: any) {\r\n        return Collection.create<T>(this.removeChildHelper(arg));\r\n    }\r\n\r\n    public sort(func: (a: T, b: T) => any, isSortSelf = false): Collection<T> {\r\n        if (isSortSelf) {\r\n            this.children.sort(func);\r\n\r\n            return this;\r\n        }\r\n\r\n        return Collection.create<T>(this.copyChildren().sort(func));\r\n    }\r\n\r\n    public map(func: (value: T, index: number) => any) {\r\n        var resultArr = [];\r\n\r\n        this.forEach((e, index) => {\r\n            var result = func(e, index);\r\n\r\n            if (result !== $REMOVE) {\r\n                resultArr.push(result);\r\n            }\r\n            //e && e[handlerName] && e[handlerName].apply(context || e, valueArr);\r\n        });\r\n\r\n        return Collection.create<any>(resultArr);\r\n    }\r\n\r\n    public removeRepeatItems() {\r\n        var noRepeatList = Collection.create<T>();\r\n\r\n        this.forEach((item: T) => {\r\n            if (noRepeatList.hasChild(item)) {\r\n                return;\r\n            }\r\n\r\n            noRepeatList.addChild(item);\r\n        });\r\n\r\n        return noRepeatList;\r\n    }\r\n\r\n    public hasRepeatItems() {\r\n        var noRepeatList = Collection.create<T>(),\r\n            hasRepeat: boolean = false;\r\n\r\n        this.forEach((item: T) => {\r\n            if (noRepeatList.hasChild(item)) {\r\n                hasRepeat = true;\r\n\r\n                return $BREAK;\r\n            }\r\n\r\n            noRepeatList.addChild(item);\r\n        });\r\n\r\n        return hasRepeat;\r\n    }\r\n}","import { JudgeUtils } from \"./JudgeUtils\";\r\n\r\ndeclare var document: any;\r\n\r\nexport class DomQuery {\r\n    public static create(eleStr: string);\r\n    public static create(dom: HTMLElement);\r\n\r\n    public static create(...args) {\r\n        var obj = new this(args[0]);\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _doms: Array<HTMLElement> = null;\r\n\r\n    constructor(eleStr: string);\r\n    constructor(dom: HTMLElement);\r\n\r\n    constructor(...args) {\r\n        if (JudgeUtils.isDom(args[0])) {\r\n            this._doms = [args[0]];\r\n        }\r\n        else if (this._isDomEleStr(args[0])) {\r\n            this._doms = [this._buildDom(args[0])];\r\n        }\r\n        else {\r\n            this._doms = document.querySelectorAll(args[0]);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public get(index) {\r\n        return this._doms[index];\r\n    }\r\n\r\n\r\n    public prepend(eleStr: string);\r\n    public prepend(dom: HTMLElement);\r\n\r\n    public prepend(...args) {\r\n        var targetDom: HTMLElement = null;\r\n\r\n        targetDom = this._buildDom(args[0]);\r\n\r\n        for (let dom of this._doms) {\r\n            if (dom.nodeType === 1) {\r\n                dom.insertBefore(targetDom, dom.firstChild);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public prependTo(eleStr: string) {\r\n        var targetDom: DomQuery = null;\r\n\r\n        targetDom = DomQuery.create(eleStr);\r\n\r\n        for (let dom of this._doms) {\r\n            if (dom.nodeType === 1) {\r\n                targetDom.prepend(dom);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public remove() {\r\n        for (let dom of this._doms) {\r\n            if (dom && dom.parentNode && dom.tagName != 'BODY') {\r\n                dom.parentNode.removeChild(dom);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public css(property: string, value: string) {\r\n        for (let dom of this._doms) {\r\n            dom.style[property] = value;\r\n        }\r\n    }\r\n\r\n    public attr(name: string);\r\n    public attr(name: string, value: string);\r\n\r\n    public attr(...args) {\r\n        if (args.length === 1) {\r\n            let name = args[0];\r\n\r\n            return this.get(0).getAttribute(name);\r\n        }\r\n        else {\r\n            let name = args[0],\r\n                value = args[1];\r\n\r\n            for (let dom of this._doms) {\r\n                dom.setAttribute(name, value);\r\n            }\r\n        }\r\n    }\r\n\r\n    public text(str?: string) {\r\n        var dom = this.get(0);\r\n\r\n        if (str !== void 0) {\r\n            if (dom.textContent !== void 0) {\r\n                dom.textContent = str;\r\n            }\r\n            else {\r\n                dom.innerText = str;\r\n            }\r\n        }\r\n        else {\r\n            return dom.textContent !== void 0 ? dom.textContent : dom.innerText;\r\n        }\r\n    }\r\n\r\n    private _isDomEleStr(eleStr: string) {\r\n        return eleStr.match(/<(\\w+)[^>]*><\\/\\1>/) !== null;\r\n    }\r\n\r\n    private _buildDom(eleStr: string): HTMLElement;\r\n    private _buildDom(dom: HTMLHtmlElement): HTMLElement;\r\n\r\n    private _buildDom(...args): HTMLElement {\r\n        if (JudgeUtils.isString(args[0])) {\r\n            let div = this._createElement(\"div\"),\r\n                eleStr: string = args[0];\r\n\r\n            div.innerHTML = eleStr;\r\n\r\n            return div.firstChild;\r\n        }\r\n\r\n        return args[0];\r\n    }\r\n\r\n    private _createElement(eleStr) {\r\n        return document.createElement(eleStr);\r\n    }\r\n}","import { Log } from \"../../\";\r\n\r\nvar _describeContext = null;\r\n\r\nexport function assert(cond: boolean, message: string = \"contract error\") {\r\n    Log.error(!cond, message);\r\n}\r\n\r\nexport function describe(message: string, func: Function, preCondition: Function = () => true, context: any = this) {\r\n    if (preCondition.call(context, null)) {\r\n        _describeContext = context;\r\n\r\n        try {\r\n            func.call(context, null);\r\n        }\r\n        catch (e) {\r\n            assert(false, `${message}->${e.message}`);\r\n        }\r\n        finally {\r\n            _describeContext = null;\r\n        }\r\n    }\r\n}\r\n\r\nexport function it(message: string, func: Function, context?: any) {\r\n    try {\r\n        if (arguments.length === 3) {\r\n            func.call(context, null);\r\n        }\r\n        else {\r\n            if (_describeContext) {\r\n                func.call(_describeContext, null);\r\n            }\r\n            else {\r\n                func();\r\n            }\r\n        }\r\n    }\r\n    catch (e) {\r\n        assert(false, `${message}->${e.message}`);\r\n    }\r\n}\r\n\r\nexport function requireFunc(checkFunc: Function, bodyFunc: Function, compileIsTest: boolean, runtimeIsTestFunc: Function) {\r\n    if (!compileIsTest) {\r\n        return bodyFunc;\r\n    }\r\n\r\n    return (...paramArr) => {\r\n        if (!runtimeIsTestFunc()) {\r\n            return bodyFunc.apply(null, paramArr);\r\n        }\r\n\r\n        checkFunc.apply(null, paramArr);\r\n\r\n        return bodyFunc.apply(null, paramArr);\r\n    }\r\n}\r\n\r\nexport function ensureFunc(checkFunc: Function, bodyFunc: Function, compileIsTest: boolean, runtimeIsTestFunc: Function) {\r\n    if (!compileIsTest) {\r\n        return bodyFunc;\r\n    }\r\n\r\n    return (...paramArr) => {\r\n        if (!runtimeIsTestFunc()) {\r\n            return bodyFunc.apply(null, paramArr);\r\n        }\r\n\r\n        let result = bodyFunc.apply(null, paramArr);\r\n\r\n        checkFunc.apply(null, [result].concat(paramArr));\r\n\r\n        return result;\r\n    }\r\n}\r\n","import { CompileConfig } from \"../../../config/CompileConfig\";\r\nimport { InitConfigData } from \"../../../renderer/config/InitConfigData\";\r\nimport { InitConfigWorkerData } from \"../../../renderer/worker/render_file/config/InitConfigWorkerData\";\r\nimport {\r\n    describe as describeCommonLib,\r\n    it as itCommonLib,\r\n    ensureFunc as ensureFuncCommonLib,\r\n    requireFunc as requireFuncCommonLib\r\n} from \"wonder-commonlib/dist/es2015/typescript/decorator/contract\";\r\n\r\nconst _getCompileIsTest =() => CompileConfig.isCompileTest;\r\n\r\nconst _getRunTimeIsTest =() => {\r\n    if (InitConfigData.isTest === true || InitConfigWorkerData.isTest === true) {\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nexport const describe = describeCommonLib;\r\n\r\nexport const it = itCommonLib;\r\n\r\nexport function requireCheck(inFunc) {\r\n    return function(target, name, descriptor) {\r\n        if (_getCompileIsTest()) {\r\n            let value = descriptor.value;\r\n\r\n            descriptor.value = function(args) {\r\n                if (_getRunTimeIsTest()) {\r\n                    inFunc.apply(this, arguments);\r\n                }\r\n\r\n                return value.apply(this, arguments);\r\n            };\r\n        }\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function requireCheckFunc(checkFunc: Function, bodyFunc: Function) {\r\n    return requireFuncCommonLib(checkFunc, bodyFunc, _getCompileIsTest(), _getRunTimeIsTest);\r\n}\r\n\r\nexport function ensure(outFunc) {\r\n    return function(target, name, descriptor) {\r\n        if (CompileConfig.isCompileTest) {\r\n            let value = descriptor.value;\r\n\r\n            descriptor.value = function(args) {\r\n                var result = value.apply(this, arguments);\r\n\r\n                if (_getRunTimeIsTest()) {\r\n\r\n                    var params = [result];\r\n\r\n                    for (let i = 0, len = arguments.length; i < len; i++) {\r\n                        params[i + 1] = arguments[i];\r\n                    }\r\n\r\n                    outFunc.apply(this, params);\r\n                }\r\n\r\n                return result;\r\n            }\r\n        }\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n\r\nexport function ensureFunc(checkFunc: Function, bodyFunc: Function) {\r\n    return ensureFuncCommonLib(checkFunc, bodyFunc, _getCompileIsTest(), _getRunTimeIsTest);\r\n}\r\n\r\nexport function ensureGetter(outFunc) {\r\n    return function(target, name, descriptor) {\r\n        if (CompileConfig.isCompileTest) {\r\n            let getter = descriptor.get;\r\n\r\n            descriptor.get = function() {\r\n                var result = getter.call(this);\r\n\r\n                if (_getRunTimeIsTest()) {\r\n                    outFunc.call(this, result);\r\n                }\r\n\r\n                return result;\r\n            };\r\n        }\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.wdet = {})));\n}(this, (function (exports) { 'use strict';\n\n\tfunction __extends(d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t}\n\n\tvar ExpectData = (function () {\n\t    function ExpectData() {\n\t    }\n\t    return ExpectData;\n\t}());\n\tExpectData.assertion = null;\n\tExpectData.source = null;\n\tExpectData.isNot = null;\n\n\tvar JudgeUtils = (function () {\n\t    function JudgeUtils() {\n\t    }\n\t    JudgeUtils.isArray = function (arr) {\n\t        var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n\t        var length = arr && arr.length;\n\t        return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\n\t    };\n\t    JudgeUtils.isArrayExactly = function (arr) {\n\t        return Object.prototype.toString.call(arr) === \"[object Array]\";\n\t    };\n\t    JudgeUtils.isNumber = function (num) {\n\t        return typeof num == \"number\";\n\t    };\n\t    JudgeUtils.isNumberExactly = function (num) {\n\t        return Object.prototype.toString.call(num) === \"[object Number]\";\n\t    };\n\t    JudgeUtils.isString = function (str) {\n\t        return typeof str == \"string\";\n\t    };\n\t    JudgeUtils.isStringExactly = function (str) {\n\t        return Object.prototype.toString.call(str) === \"[object String]\";\n\t    };\n\t    JudgeUtils.isBoolean = function (bool) {\n\t        return bool === true || bool === false || toString.call(bool) === '[boolect Boolean]';\n\t    };\n\t    JudgeUtils.isDom = function (obj) {\n\t        return !!(obj && obj.nodeType === 1);\n\t    };\n\t    JudgeUtils.isObject = function (obj) {\n\t        var type = typeof obj;\n\t        return type === 'function' || type === 'object' && !!obj;\n\t    };\n\t    JudgeUtils.isDirectObject = function (obj) {\n\t        return Object.prototype.toString.call(obj) === \"[object Object]\";\n\t    };\n\t    JudgeUtils.isHostMethod = function (object, property) {\n\t        var type = typeof object[property];\n\t        return type === \"function\" ||\n\t            (type === \"object\" && !!object[property]);\n\t    };\n\t    JudgeUtils.isNodeJs = function () {\n\t        return ((typeof global != \"undefined\" && global.module) || (typeof module != \"undefined\")) && typeof module.exports != \"undefined\";\n\t    };\n\t    JudgeUtils.isFunction = function (func) {\n\t        return true;\n\t    };\n\t    return JudgeUtils;\n\t}());\n\tif (typeof /./ != 'function' && typeof Int8Array != 'object') {\n\t    JudgeUtils.isFunction = function (func) {\n\t        return typeof func == 'function';\n\t    };\n\t}\n\telse {\n\t    JudgeUtils.isFunction = function (func) {\n\t        return Object.prototype.toString.call(func) === \"[object Function]\";\n\t    };\n\t}\n\n\tvar $BREAK = {\n\t    break: true\n\t};\n\tvar $REMOVE = void 0;\n\n\tvar List = (function () {\n\t    function List() {\n\t        this.children = null;\n\t    }\n\t    List.prototype.getCount = function () {\n\t        return this.children.length;\n\t    };\n\t    List.prototype.hasChild = function (child) {\n\t        var c = null, children = this.children;\n\t        for (var i = 0, len = children.length; i < len; i++) {\n\t            c = children[i];\n\t            if (child.uid && c.uid && child.uid == c.uid) {\n\t                return true;\n\t            }\n\t            else if (child === c) {\n\t                return true;\n\t            }\n\t        }\n\t        return false;\n\t    };\n\t    List.prototype.hasChildWithFunc = function (func) {\n\t        for (var i = 0, len = this.children.length; i < len; i++) {\n\t            if (func(this.children[i], i)) {\n\t                return true;\n\t            }\n\t        }\n\t        return false;\n\t    };\n\t    List.prototype.getChildren = function () {\n\t        return this.children;\n\t    };\n\t    List.prototype.getChild = function (index) {\n\t        return this.children[index];\n\t    };\n\t    List.prototype.addChild = function (child) {\n\t        this.children.push(child);\n\t        return this;\n\t    };\n\t    List.prototype.addChildren = function (arg) {\n\t        if (JudgeUtils.isArray(arg)) {\n\t            var children = arg;\n\t            this.children = this.children.concat(children);\n\t        }\n\t        else if (arg instanceof List) {\n\t            var children = arg;\n\t            this.children = this.children.concat(children.getChildren());\n\t        }\n\t        else {\n\t            var child = arg;\n\t            this.addChild(child);\n\t        }\n\t        return this;\n\t    };\n\t    List.prototype.setChildren = function (children) {\n\t        this.children = children;\n\t        return this;\n\t    };\n\t    List.prototype.unShiftChild = function (child) {\n\t        this.children.unshift(child);\n\t    };\n\t    List.prototype.removeAllChildren = function () {\n\t        this.children = [];\n\t        return this;\n\t    };\n\t    List.prototype.forEach = function (func, context) {\n\t        this._forEach(this.children, func, context);\n\t        return this;\n\t    };\n\t    List.prototype.toArray = function () {\n\t        return this.children;\n\t    };\n\t    List.prototype.copyChildren = function () {\n\t        return this.children.slice(0);\n\t    };\n\t    List.prototype.removeChildHelper = function (arg) {\n\t        var result = null;\n\t        if (JudgeUtils.isFunction(arg)) {\n\t            var func = arg;\n\t            result = this._removeChild(this.children, func);\n\t        }\n\t        else if (arg.uid) {\n\t            result = this._removeChild(this.children, function (e) {\n\t                if (!e.uid) {\n\t                    return false;\n\t                }\n\t                return e.uid === arg.uid;\n\t            });\n\t        }\n\t        else {\n\t            result = this._removeChild(this.children, function (e) {\n\t                return e === arg;\n\t            });\n\t        }\n\t        return result;\n\t    };\n\t    List.prototype._forEach = function (arr, func, context) {\n\t        var scope = context, i = 0, len = arr.length;\n\t        for (i = 0; i < len; i++) {\n\t            if (func.call(scope, arr[i], i) === $BREAK) {\n\t                break;\n\t            }\n\t        }\n\t    };\n\t    List.prototype._removeChild = function (arr, func) {\n\t        var self = this, removedElementArr = [], remainElementArr = [];\n\t        this._forEach(arr, function (e, index) {\n\t            if (!!func.call(self, e)) {\n\t                removedElementArr.push(e);\n\t            }\n\t            else {\n\t                remainElementArr.push(e);\n\t            }\n\t        });\n\t        this.children = remainElementArr;\n\t        return removedElementArr;\n\t    };\n\t    return List;\n\t}());\n\n\tvar ExtendUtils = (function () {\n\t    function ExtendUtils() {\n\t    }\n\t    ExtendUtils.extendDeep = function (parent, child, filter) {\n\t        if (filter === void 0) { filter = function (val, i) { return true; }; }\n\t        var i = null, len = 0, toStr = Object.prototype.toString, sArr = \"[object Array]\", sOb = \"[object Object]\", type = \"\", _child = null;\n\t        if (toStr.call(parent) === sArr) {\n\t            _child = child || [];\n\t            for (i = 0, len = parent.length; i < len; i++) {\n\t                var member = parent[i];\n\t                if (!filter(member, i)) {\n\t                    continue;\n\t                }\n\t                if (member.clone) {\n\t                    _child[i] = member.clone();\n\t                    continue;\n\t                }\n\t                type = toStr.call(member);\n\t                if (type === sArr || type === sOb) {\n\t                    _child[i] = type === sArr ? [] : {};\n\t                    ExtendUtils.extendDeep(member, _child[i]);\n\t                }\n\t                else {\n\t                    _child[i] = member;\n\t                }\n\t            }\n\t        }\n\t        else if (toStr.call(parent) === sOb) {\n\t            _child = child || {};\n\t            for (i in parent) {\n\t                var member = parent[i];\n\t                if (!filter(member, i)) {\n\t                    continue;\n\t                }\n\t                if (member.clone) {\n\t                    _child[i] = member.clone();\n\t                    continue;\n\t                }\n\t                type = toStr.call(member);\n\t                if (type === sArr || type === sOb) {\n\t                    _child[i] = type === sArr ? [] : {};\n\t                    ExtendUtils.extendDeep(member, _child[i]);\n\t                }\n\t                else {\n\t                    _child[i] = member;\n\t                }\n\t            }\n\t        }\n\t        else {\n\t            _child = parent;\n\t        }\n\t        return _child;\n\t    };\n\t    ExtendUtils.extend = function (destination, source) {\n\t        var property = \"\";\n\t        for (property in source) {\n\t            destination[property] = source[property];\n\t        }\n\t        return destination;\n\t    };\n\t    ExtendUtils.copyPublicAttri = function (source) {\n\t        var property = null, destination = {};\n\t        this.extendDeep(source, destination, function (item, property) {\n\t            return property.slice(0, 1) !== \"_\"\n\t                && !JudgeUtils.isFunction(item);\n\t        });\n\t        return destination;\n\t    };\n\t    return ExtendUtils;\n\t}());\n\n\tvar Collection = (function (_super) {\n\t    __extends(Collection, _super);\n\t    function Collection(children) {\n\t        if (children === void 0) { children = []; }\n\t        var _this = _super.call(this) || this;\n\t        _this.children = children;\n\t        return _this;\n\t    }\n\t    Collection.create = function (children) {\n\t        if (children === void 0) { children = []; }\n\t        var obj = new this(children);\n\t        return obj;\n\t    };\n\t    Collection.prototype.clone = function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        var target = null, isDeep = null;\n\t        if (args.length === 0) {\n\t            isDeep = false;\n\t            target = Collection.create();\n\t        }\n\t        else if (args.length === 1) {\n\t            if (JudgeUtils.isBoolean(args[0])) {\n\t                target = Collection.create();\n\t                isDeep = args[0];\n\t            }\n\t            else {\n\t                target = args[0];\n\t                isDeep = false;\n\t            }\n\t        }\n\t        else {\n\t            target = args[0];\n\t            isDeep = args[1];\n\t        }\n\t        if (isDeep === true) {\n\t            target.setChildren(ExtendUtils.extendDeep(this.children));\n\t        }\n\t        else {\n\t            target.setChildren(ExtendUtils.extend([], this.children));\n\t        }\n\t        return target;\n\t    };\n\t    Collection.prototype.filter = function (func) {\n\t        var children = this.children, result = [], value = null;\n\t        for (var i = 0, len = children.length; i < len; i++) {\n\t            value = children[i];\n\t            if (func.call(children, value, i)) {\n\t                result.push(value);\n\t            }\n\t        }\n\t        return Collection.create(result);\n\t    };\n\t    Collection.prototype.findOne = function (func) {\n\t        var scope = this.children, result = null;\n\t        this.forEach(function (value, index) {\n\t            if (!func.call(scope, value, index)) {\n\t                return;\n\t            }\n\t            result = value;\n\t            return $BREAK;\n\t        });\n\t        return result;\n\t    };\n\t    Collection.prototype.reverse = function () {\n\t        return Collection.create(this.copyChildren().reverse());\n\t    };\n\t    Collection.prototype.removeChild = function (arg) {\n\t        return Collection.create(this.removeChildHelper(arg));\n\t    };\n\t    Collection.prototype.sort = function (func, isSortSelf) {\n\t        if (isSortSelf === void 0) { isSortSelf = false; }\n\t        if (isSortSelf) {\n\t            this.children.sort(func);\n\t            return this;\n\t        }\n\t        return Collection.create(this.copyChildren().sort(func));\n\t    };\n\t    Collection.prototype.map = function (func) {\n\t        var resultArr = [];\n\t        this.forEach(function (e, index) {\n\t            var result = func(e, index);\n\t            if (result !== $REMOVE) {\n\t                resultArr.push(result);\n\t            }\n\t        });\n\t        return Collection.create(resultArr);\n\t    };\n\t    Collection.prototype.removeRepeatItems = function () {\n\t        var noRepeatList = Collection.create();\n\t        this.forEach(function (item) {\n\t            if (noRepeatList.hasChild(item)) {\n\t                return;\n\t            }\n\t            noRepeatList.addChild(item);\n\t        });\n\t        return noRepeatList;\n\t    };\n\t    Collection.prototype.hasRepeatItems = function () {\n\t        var noRepeatList = Collection.create(), hasRepeat = false;\n\t        this.forEach(function (item) {\n\t            if (noRepeatList.hasChild(item)) {\n\t                hasRepeat = true;\n\t                return $BREAK;\n\t            }\n\t            noRepeatList.addChild(item);\n\t        });\n\t        return hasRepeat;\n\t    };\n\t    return Collection;\n\t}(List));\n\n\tvar Log = (function () {\n\t    function Log() {\n\t    }\n\t    Log.log = function () {\n\t        var messages = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            messages[_i] = arguments[_i];\n\t        }\n\t        if (!this._exec(\"log\", messages)) {\n\t            root.alert(messages.join(\",\"));\n\t        }\n\t        this._exec(\"trace\", messages);\n\t    };\n\t    Log.assert = function (cond) {\n\t        if (cond) {\n\t            if (!this._exec(\"assert\", arguments, 1)) {\n\t                this.log.apply(this, Array.prototype.slice.call(arguments, 1));\n\t            }\n\t        }\n\t    };\n\t    Log.error = function (cond) {\n\t        if (cond) {\n\t            throw new Error(Array.prototype.slice.call(arguments, 1).join(\"\\n\"));\n\t        }\n\t    };\n\t    Log.warn = function () {\n\t        var result = this._exec(\"warn\", arguments);\n\t        if (!result) {\n\t            this.log.apply(this, arguments);\n\t        }\n\t        else {\n\t            this._exec(\"trace\", [\"warn trace\"]);\n\t        }\n\t    };\n\t    Log._exec = function (consoleMethod, args, sliceBegin) {\n\t        if (sliceBegin === void 0) { sliceBegin = 0; }\n\t        if (root.console && root.console[consoleMethod]) {\n\t            root.console[consoleMethod].apply(root.console, Array.prototype.slice.call(args, sliceBegin));\n\t            return true;\n\t        }\n\t        return false;\n\t    };\n\t    return Log;\n\t}());\n\tLog.info = {\n\t    INVALID_PARAM: \"invalid parameter\",\n\t    helperFunc: function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        var result = \"\";\n\t        args.forEach(function (val) {\n\t            result += String(val) + \" \";\n\t        });\n\t        return result.slice(0, -1);\n\t    },\n\t    assertion: function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        if (args.length === 2) {\n\t            return this.helperFunc(args[0], args[1]);\n\t        }\n\t        else if (args.length === 3) {\n\t            return this.helperFunc(args[1], args[0], args[2]);\n\t        }\n\t        else {\n\t            throw new Error(\"args.length must <= 3\");\n\t        }\n\t    },\n\t    FUNC_INVALID: function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        args.unshift(\"invalid\");\n\t        return this.assertion.apply(this, args);\n\t    },\n\t    FUNC_MUST: function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        args.unshift(\"must\");\n\t        return this.assertion.apply(this, args);\n\t    },\n\t    FUNC_MUST_BE: function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        args.unshift(\"must be\");\n\t        return this.assertion.apply(this, args);\n\t    },\n\t    FUNC_MUST_NOT_BE: function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        args.unshift(\"must not be\");\n\t        return this.assertion.apply(this, args);\n\t    },\n\t    FUNC_SHOULD: function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        args.unshift(\"should\");\n\t        return this.assertion.apply(this, args);\n\t    },\n\t    FUNC_SHOULD_NOT: function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        args.unshift(\"should not\");\n\t        return this.assertion.apply(this, args);\n\t    },\n\t    FUNC_SUPPORT: function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        args.unshift(\"support\");\n\t        return this.assertion.apply(this, args);\n\t    },\n\t    FUNC_NOT_SUPPORT: function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        args.unshift(\"not support\");\n\t        return this.assertion.apply(this, args);\n\t    },\n\t    FUNC_MUST_DEFINE: function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        args.unshift(\"must define\");\n\t        return this.assertion.apply(this, args);\n\t    },\n\t    FUNC_MUST_NOT_DEFINE: function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        args.unshift(\"must not define\");\n\t        return this.assertion.apply(this, args);\n\t    },\n\t    FUNC_UNKNOW: function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        args.unshift(\"unknow\");\n\t        return this.assertion.apply(this, args);\n\t    },\n\t    FUNC_EXPECT: function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        args.unshift(\"expect\");\n\t        return this.assertion.apply(this, args);\n\t    },\n\t    FUNC_UNEXPECT: function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        args.unshift(\"unexpect\");\n\t        return this.assertion.apply(this, args);\n\t    },\n\t    FUNC_EXIST: function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        args.unshift(\"exist\");\n\t        return this.assertion.apply(this, args);\n\t    },\n\t    FUNC_NOT_EXIST: function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        args.unshift(\"not exist\");\n\t        return this.assertion.apply(this, args);\n\t    },\n\t    FUNC_ONLY: function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        args.unshift(\"only\");\n\t        return this.assertion.apply(this, args);\n\t    },\n\t    FUNC_CAN_NOT: function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        args.unshift(\"can't\");\n\t        return this.assertion.apply(this, args);\n\t    }\n\t};\n\n\tvar root;\n\tif (JudgeUtils.isNodeJs() && typeof global != \"undefined\") {\n\t    root = global;\n\t}\n\telse if (typeof window != \"undefined\") {\n\t    root = window;\n\t}\n\telse if (typeof self != \"undefined\") {\n\t    root = self;\n\t}\n\telse {\n\t    Log.error(\"no avaliable root!\");\n\t}\n\n\tvar Hash = (function () {\n\t    function Hash(children) {\n\t        if (children === void 0) { children = {}; }\n\t        this._children = null;\n\t        this._children = children;\n\t    }\n\t    Hash.create = function (children) {\n\t        if (children === void 0) { children = {}; }\n\t        var obj = new this(children);\n\t        return obj;\n\t    };\n\t    Hash.prototype.getChildren = function () {\n\t        return this._children;\n\t    };\n\t    Hash.prototype.getCount = function () {\n\t        var result = 0, children = this._children, key = null;\n\t        for (key in children) {\n\t            if (children.hasOwnProperty(key)) {\n\t                result++;\n\t            }\n\t        }\n\t        return result;\n\t    };\n\t    Hash.prototype.getKeys = function () {\n\t        var result = Collection.create(), children = this._children, key = null;\n\t        for (key in children) {\n\t            if (children.hasOwnProperty(key)) {\n\t                result.addChild(key);\n\t            }\n\t        }\n\t        return result;\n\t    };\n\t    Hash.prototype.getValues = function () {\n\t        var result = Collection.create(), children = this._children, key = null;\n\t        for (key in children) {\n\t            if (children.hasOwnProperty(key)) {\n\t                result.addChild(children[key]);\n\t            }\n\t        }\n\t        return result;\n\t    };\n\t    Hash.prototype.getChild = function (key) {\n\t        return this._children[key];\n\t    };\n\t    Hash.prototype.setValue = function (key, value) {\n\t        this._children[key] = value;\n\t        return this;\n\t    };\n\t    Hash.prototype.addChild = function (key, value) {\n\t        this._children[key] = value;\n\t        return this;\n\t    };\n\t    Hash.prototype.addChildren = function (arg) {\n\t        var i = null, children = null;\n\t        if (arg instanceof Hash) {\n\t            children = arg.getChildren();\n\t        }\n\t        else {\n\t            children = arg;\n\t        }\n\t        for (i in children) {\n\t            if (children.hasOwnProperty(i)) {\n\t                this.addChild(i, children[i]);\n\t            }\n\t        }\n\t        return this;\n\t    };\n\t    Hash.prototype.appendChild = function (key, value) {\n\t        if (this._children[key] instanceof Collection) {\n\t            var c = (this._children[key]);\n\t            c.addChild(value);\n\t        }\n\t        else {\n\t            this._children[key] = (Collection.create().addChild(value));\n\t        }\n\t        return this;\n\t    };\n\t    Hash.prototype.setChildren = function (children) {\n\t        this._children = children;\n\t    };\n\t    Hash.prototype.removeChild = function (arg) {\n\t        var result = [];\n\t        if (JudgeUtils.isString(arg)) {\n\t            var key = arg;\n\t            result.push(this._children[key]);\n\t            this._children[key] = void 0;\n\t            delete this._children[key];\n\t        }\n\t        else if (JudgeUtils.isFunction(arg)) {\n\t            var func_1 = arg, self_1 = this;\n\t            this.forEach(function (val, key) {\n\t                if (func_1(val, key)) {\n\t                    result.push(self_1._children[key]);\n\t                    self_1._children[key] = void 0;\n\t                    delete self_1._children[key];\n\t                }\n\t            });\n\t        }\n\t        return Collection.create(result);\n\t    };\n\t    Hash.prototype.removeAllChildren = function () {\n\t        this._children = {};\n\t    };\n\t    Hash.prototype.hasChild = function (key) {\n\t        return this._children[key] !== void 0;\n\t    };\n\t    Hash.prototype.hasChildWithFunc = function (func) {\n\t        var result = false;\n\t        this.forEach(function (val, key) {\n\t            if (func(val, key)) {\n\t                result = true;\n\t                return $BREAK;\n\t            }\n\t        });\n\t        return result;\n\t    };\n\t    Hash.prototype.forEach = function (func, context) {\n\t        var children = this._children;\n\t        for (var i in children) {\n\t            if (children.hasOwnProperty(i)) {\n\t                if (func.call(context, children[i], i) === $BREAK) {\n\t                    break;\n\t                }\n\t            }\n\t        }\n\t        return this;\n\t    };\n\t    Hash.prototype.filter = function (func) {\n\t        var result = {}, children = this._children, value = null;\n\t        for (var key in children) {\n\t            if (children.hasOwnProperty(key)) {\n\t                value = children[key];\n\t                if (func.call(children, value, key)) {\n\t                    result[key] = value;\n\t                }\n\t            }\n\t        }\n\t        return Hash.create(result);\n\t    };\n\t    Hash.prototype.findOne = function (func) {\n\t        var result = [], self = this, scope = this._children;\n\t        this.forEach(function (val, key) {\n\t            if (!func.call(scope, val, key)) {\n\t                return;\n\t            }\n\t            result = [key, self.getChild(key)];\n\t            return $BREAK;\n\t        });\n\t        return result;\n\t    };\n\t    Hash.prototype.map = function (func) {\n\t        var resultMap = {};\n\t        this.forEach(function (val, key) {\n\t            var result = func(val, key);\n\t            if (result !== $REMOVE) {\n\t                Log.error(!JudgeUtils.isArray(result) || result.length !== 2, Log.info.FUNC_MUST_BE(\"iterator\", \"[key, value]\"));\n\t                resultMap[result[0]] = result[1];\n\t            }\n\t        });\n\t        return Hash.create(resultMap);\n\t    };\n\t    Hash.prototype.toCollection = function () {\n\t        var result = Collection.create();\n\t        this.forEach(function (val, key) {\n\t            if (val instanceof Collection) {\n\t                result.addChildren(val);\n\t            }\n\t            else {\n\t                result.addChild(val);\n\t            }\n\t        });\n\t        return result;\n\t    };\n\t    Hash.prototype.toArray = function () {\n\t        var result = [];\n\t        this.forEach(function (val, key) {\n\t            if (val instanceof Collection) {\n\t                result = result.concat(val.getChildren());\n\t            }\n\t            else {\n\t                result.push(val);\n\t            }\n\t        });\n\t        return result;\n\t    };\n\t    Hash.prototype.clone = function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        var target = null, isDeep = null;\n\t        if (args.length === 0) {\n\t            isDeep = false;\n\t            target = Hash.create();\n\t        }\n\t        else if (args.length === 1) {\n\t            if (JudgeUtils.isBoolean(args[0])) {\n\t                target = Hash.create();\n\t                isDeep = args[0];\n\t            }\n\t            else {\n\t                target = args[0];\n\t                isDeep = false;\n\t            }\n\t        }\n\t        else {\n\t            target = args[0];\n\t            isDeep = args[1];\n\t        }\n\t        if (isDeep === true) {\n\t            target.setChildren(ExtendUtils.extendDeep(this._children));\n\t        }\n\t        else {\n\t            target.setChildren(ExtendUtils.extend({}, this._children));\n\t        }\n\t        return target;\n\t    };\n\t    return Hash;\n\t}());\n\n\tvar Queue = (function (_super) {\n\t    __extends(Queue, _super);\n\t    function Queue(children) {\n\t        if (children === void 0) { children = []; }\n\t        var _this = _super.call(this) || this;\n\t        _this.children = children;\n\t        return _this;\n\t    }\n\t    Queue.create = function (children) {\n\t        if (children === void 0) { children = []; }\n\t        var obj = new this(children);\n\t        return obj;\n\t    };\n\t    Object.defineProperty(Queue.prototype, \"front\", {\n\t        get: function () {\n\t            return this.children[this.children.length - 1];\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Queue.prototype, \"rear\", {\n\t        get: function () {\n\t            return this.children[0];\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Queue.prototype.push = function (element) {\n\t        this.children.unshift(element);\n\t    };\n\t    Queue.prototype.pop = function () {\n\t        return this.children.pop();\n\t    };\n\t    Queue.prototype.clear = function () {\n\t        this.removeAllChildren();\n\t    };\n\t    return Queue;\n\t}(List));\n\n\tvar Stack = (function (_super) {\n\t    __extends(Stack, _super);\n\t    function Stack(children) {\n\t        if (children === void 0) { children = []; }\n\t        var _this = _super.call(this) || this;\n\t        _this.children = children;\n\t        return _this;\n\t    }\n\t    Stack.create = function (children) {\n\t        if (children === void 0) { children = []; }\n\t        var obj = new this(children);\n\t        return obj;\n\t    };\n\t    Object.defineProperty(Stack.prototype, \"top\", {\n\t        get: function () {\n\t            return this.children[this.children.length - 1];\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Stack.prototype.push = function (element) {\n\t        this.children.push(element);\n\t    };\n\t    Stack.prototype.pop = function () {\n\t        return this.children.pop();\n\t    };\n\t    Stack.prototype.clear = function () {\n\t        this.removeAllChildren();\n\t    };\n\t    Stack.prototype.clone = function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        var target = null, isDeep = null;\n\t        if (args.length === 0) {\n\t            isDeep = false;\n\t            target = Stack.create();\n\t        }\n\t        else if (args.length === 1) {\n\t            if (JudgeUtils.isBoolean(args[0])) {\n\t                target = Stack.create();\n\t                isDeep = args[0];\n\t            }\n\t            else {\n\t                target = args[0];\n\t                isDeep = false;\n\t            }\n\t        }\n\t        else {\n\t            target = args[0];\n\t            isDeep = args[1];\n\t        }\n\t        if (isDeep === true) {\n\t            target.setChildren(ExtendUtils.extendDeep(this.children));\n\t        }\n\t        else {\n\t            target.setChildren(ExtendUtils.extend([], this.children));\n\t        }\n\t        return target;\n\t    };\n\t    Stack.prototype.filter = function (func) {\n\t        var children = this.children, result = [], value = null;\n\t        for (var i = 0, len = children.length; i < len; i++) {\n\t            value = children[i];\n\t            if (func.call(children, value, i)) {\n\t                result.push(value);\n\t            }\n\t        }\n\t        return Collection.create(result);\n\t    };\n\t    Stack.prototype.findOne = function (func) {\n\t        var scope = this.children, result = null;\n\t        this.forEach(function (value, index) {\n\t            if (!func.call(scope, value, index)) {\n\t                return;\n\t            }\n\t            result = value;\n\t            return $BREAK;\n\t        });\n\t        return result;\n\t    };\n\t    Stack.prototype.reverse = function () {\n\t        return Collection.create(this.copyChildren().reverse());\n\t    };\n\t    Stack.prototype.removeChild = function (arg) {\n\t        return Collection.create(this.removeChildHelper(arg));\n\t    };\n\t    Stack.prototype.sort = function (func, isSortSelf) {\n\t        if (isSortSelf === void 0) { isSortSelf = false; }\n\t        if (isSortSelf) {\n\t            this.children.sort(func);\n\t            return this;\n\t        }\n\t        return Collection.create(this.copyChildren().sort(func));\n\t    };\n\t    Stack.prototype.map = function (func) {\n\t        var resultArr = [];\n\t        this.forEach(function (e, index) {\n\t            var result = func(e, index);\n\t            if (result !== $REMOVE) {\n\t                resultArr.push(result);\n\t            }\n\t        });\n\t        return Collection.create(resultArr);\n\t    };\n\t    Stack.prototype.removeRepeatItems = function () {\n\t        var noRepeatList = Collection.create();\n\t        this.forEach(function (item) {\n\t            if (noRepeatList.hasChild(item)) {\n\t                return;\n\t            }\n\t            noRepeatList.addChild(item);\n\t        });\n\t        return noRepeatList;\n\t    };\n\t    Stack.prototype.hasRepeatItems = function () {\n\t        var noRepeatList = Collection.create(), hasRepeat = false;\n\t        this.forEach(function (item) {\n\t            if (noRepeatList.hasChild(item)) {\n\t                hasRepeat = true;\n\t                return $BREAK;\n\t            }\n\t            noRepeatList.addChild(item);\n\t        });\n\t        return hasRepeat;\n\t    };\n\t    return Stack;\n\t}(List));\n\n\tvar DomQuery = (function () {\n\t    function DomQuery() {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        this._doms = null;\n\t        if (JudgeUtils.isDom(args[0])) {\n\t            this._doms = [args[0]];\n\t        }\n\t        else if (this._isDomEleStr(args[0])) {\n\t            this._doms = [this._buildDom(args[0])];\n\t        }\n\t        else {\n\t            this._doms = document.querySelectorAll(args[0]);\n\t        }\n\t        return this;\n\t    }\n\t    DomQuery.create = function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        var obj = new this(args[0]);\n\t        return obj;\n\t    };\n\t    DomQuery.prototype.get = function (index) {\n\t        return this._doms[index];\n\t    };\n\t    DomQuery.prototype.prepend = function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        var targetDom = null;\n\t        targetDom = this._buildDom(args[0]);\n\t        for (var _a = 0, _b = this._doms; _a < _b.length; _a++) {\n\t            var dom = _b[_a];\n\t            if (dom.nodeType === 1) {\n\t                dom.insertBefore(targetDom, dom.firstChild);\n\t            }\n\t        }\n\t        return this;\n\t    };\n\t    DomQuery.prototype.prependTo = function (eleStr) {\n\t        var targetDom = null;\n\t        targetDom = DomQuery.create(eleStr);\n\t        for (var _i = 0, _a = this._doms; _i < _a.length; _i++) {\n\t            var dom = _a[_i];\n\t            if (dom.nodeType === 1) {\n\t                targetDom.prepend(dom);\n\t            }\n\t        }\n\t        return this;\n\t    };\n\t    DomQuery.prototype.remove = function () {\n\t        for (var _i = 0, _a = this._doms; _i < _a.length; _i++) {\n\t            var dom = _a[_i];\n\t            if (dom && dom.parentNode && dom.tagName != 'BODY') {\n\t                dom.parentNode.removeChild(dom);\n\t            }\n\t        }\n\t        return this;\n\t    };\n\t    DomQuery.prototype.css = function (property, value) {\n\t        for (var _i = 0, _a = this._doms; _i < _a.length; _i++) {\n\t            var dom = _a[_i];\n\t            dom.style[property] = value;\n\t        }\n\t    };\n\t    DomQuery.prototype.attr = function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        if (args.length === 1) {\n\t            var name = args[0];\n\t            return this.get(0).getAttribute(name);\n\t        }\n\t        else {\n\t            var name = args[0], value = args[1];\n\t            for (var _a = 0, _b = this._doms; _a < _b.length; _a++) {\n\t                var dom = _b[_a];\n\t                dom.setAttribute(name, value);\n\t            }\n\t        }\n\t    };\n\t    DomQuery.prototype.text = function (str) {\n\t        var dom = this.get(0);\n\t        if (str !== void 0) {\n\t            if (dom.textContent !== void 0) {\n\t                dom.textContent = str;\n\t            }\n\t            else {\n\t                dom.innerText = str;\n\t            }\n\t        }\n\t        else {\n\t            return dom.textContent !== void 0 ? dom.textContent : dom.innerText;\n\t        }\n\t    };\n\t    DomQuery.prototype._isDomEleStr = function (eleStr) {\n\t        return eleStr.match(/<(\\w+)[^>]*><\\/\\1>/) !== null;\n\t    };\n\t    DomQuery.prototype._buildDom = function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i] = arguments[_i];\n\t        }\n\t        if (JudgeUtils.isString(args[0])) {\n\t            var div = this._createElement(\"div\"), eleStr = args[0];\n\t            div.innerHTML = eleStr;\n\t            return div.firstChild;\n\t        }\n\t        return args[0];\n\t    };\n\t    DomQuery.prototype._createElement = function (eleStr) {\n\t        return document.createElement(eleStr);\n\t    };\n\t    return DomQuery;\n\t}());\n\n\tvar Assertion = (function () {\n\t    function Assertion() {\n\t    }\n\t    Assertion.create = function () {\n\t        var obj = new this();\n\t        return obj;\n\t    };\n\t    Object.defineProperty(Assertion.prototype, \"not\", {\n\t        get: function () {\n\t            ExpectData.isNot = true;\n\t            return this;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Assertion.prototype, \"be\", {\n\t        get: function () {\n\t            return this;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Assertion.prototype, \"true\", {\n\t        get: function () {\n\t            var source = ExpectData.source;\n\t            this._assert(!!source === true, \"true\");\n\t            return this;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Assertion.prototype, \"false\", {\n\t        get: function () {\n\t            var source = ExpectData.source;\n\t            this._assert(!!source === false, \"false\");\n\t            return this;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Assertion.prototype, \"exist\", {\n\t        get: function () {\n\t            var source = ExpectData.source;\n\t            this._assert(source !== null && source !== void 0, \"exist\");\n\t            return this;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Assertion.prototype, \"null\", {\n\t        get: function () {\n\t            var source = ExpectData.source;\n\t            this._assert(source === null, \"null\");\n\t            return this;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Assertion.prototype, \"undefined\", {\n\t        get: function () {\n\t            var source = ExpectData.source;\n\t            this._assert(source === void 0, \"undefined\");\n\t            return this;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Assertion.prototype.equal = function (n) {\n\t        var source = ExpectData.source;\n\t        this._assert(source === n, \"equal\", n);\n\t        return this;\n\t    };\n\t    Assertion.prototype.gt = function (n) {\n\t        var source = ExpectData.source;\n\t        this._assert(source > n, \">\", n);\n\t        return this;\n\t    };\n\t    Assertion.prototype.gte = function (n) {\n\t        var source = ExpectData.source;\n\t        this._assert(source >= n, \">=\", n);\n\t        return this;\n\t    };\n\t    Assertion.prototype.lt = function (n) {\n\t        var source = ExpectData.source;\n\t        this._assert(source < n, \"<\", n);\n\t        return this;\n\t    };\n\t    Assertion.prototype.lte = function (n) {\n\t        var source = ExpectData.source;\n\t        this._assert(source <= n, \"<=\", n);\n\t        return this;\n\t    };\n\t    Assertion.prototype.a = function (type) {\n\t        var source = ExpectData.source;\n\t        switch (type) {\n\t            case \"number\":\n\t                this._assert(JudgeUtils.isNumber(source), \"number\");\n\t                break;\n\t            case \"array\":\n\t                this._assert(JudgeUtils.isArrayExactly(source), \"array\");\n\t                break;\n\t            case \"boolean\":\n\t                this._assert(JudgeUtils.isBoolean(source), \"boolean\");\n\t                break;\n\t            case \"string\":\n\t                this._assert(JudgeUtils.isStringExactly(source), \"string\");\n\t                break;\n\t            default:\n\t                break;\n\t        }\n\t    };\n\t    Assertion.prototype._buildFailMsg = function (operationStr, target) {\n\t        if (!!target) {\n\t            return \"expected \" + this._format(ExpectData.source) + \" to be \" + operationStr + \" \" + target;\n\t        }\n\t        return \"expected \" + this._format(ExpectData.source) + \" to be \" + operationStr;\n\t    };\n\t    Assertion.prototype._assert = function (passCondition, failMsg, target) {\n\t        var pass = null, failMessage = null;\n\t        if (ExpectData.isNot) {\n\t            pass = !passCondition;\n\t        }\n\t        else {\n\t            pass = passCondition;\n\t        }\n\t        if (pass) {\n\t            ExpectData.isNot = false;\n\t            return;\n\t        }\n\t        failMessage = this._buildFailMsg(failMsg, target);\n\t        if (ExpectData.isNot) {\n\t            ExpectData.isNot = false;\n\t            failMessage = failMessage.replace(\"to be\", \"not to be\");\n\t        }\n\t        throw new Error(failMessage);\n\t    };\n\t    Assertion.prototype._format = function (source) {\n\t        return source;\n\t    };\n\t    return Assertion;\n\t}());\n\n\tvar expect = function (source) {\n\t    var assertion = ExpectData.assertion;\n\t    ExpectData.source = source;\n\t    return assertion;\n\t};\n\tvar _initData = function () {\n\t    ExpectData.assertion = Assertion.create();\n\t    ExpectData.isNot = false;\n\t};\n\t_initData();\n\n\texports.Assertion = Assertion;\n\texports.ExpectData = ExpectData;\n\texports.expect = expect;\n\n\tObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=wdet.js.map\n","export enum EGPUPrecision {\r\n    HIGHP,\r\n    MEDIUMP,\r\n    LOWP\r\n}\r\n\r\n","import { Map } from \"immutable\";\r\nimport { Log } from \"../../../utils/Log\";\r\nimport { EGPUPrecision } from \"../../enum/EGPUPrecision\";\r\n\r\nexport const detectExtension = (state: Map<any, any>, gl: any, GPUDetectDataFromSystem: any) => {\r\n    GPUDetectDataFromSystem.extensionCompressedTextureS3TC = getExtension(\"WEBGL_compressed_texture_s3tc\", state, gl);\r\n    GPUDetectDataFromSystem.extensionTextureFilterAnisotropic = getExtension(\"EXT_texture_filter_anisotropic\", state, gl);\r\n    GPUDetectDataFromSystem.extensionInstancedArrays = getExtension(\"ANGLE_instanced_arrays\", state, gl);\r\n    GPUDetectDataFromSystem.extensionUintIndices = getExtension(\"element_index_uint\", state, gl);\r\n    GPUDetectDataFromSystem.extensionDepthTexture = getExtension(\"depth_texture\", state, gl);\r\n    GPUDetectDataFromSystem.extensionVao = getExtension(\"vao\", state, gl);\r\n    GPUDetectDataFromSystem.extensionStandardDerivatives = getExtension(\"standard_derivatives\", state, gl);\r\n}\r\n\r\nexport const detectCapabilty = (state: Map<any, any>, gl: any, GPUDetectDataFromSystem: any) => {\r\n    GPUDetectDataFromSystem.maxTextureUnit = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\r\n    GPUDetectDataFromSystem.maxTextureSize = gl.getParameter(gl.MAX_TEXTURE_SIZE);\r\n    GPUDetectDataFromSystem.maxCubemapTextureSize = gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE);\r\n    GPUDetectDataFromSystem.maxAnisotropy = _getMaxAnisotropy(state, gl, GPUDetectDataFromSystem);\r\n\r\n    GPUDetectDataFromSystem.maxBoneCount = _getMaxBoneCount(state, gl);\r\n\r\n    //todo use map instead\r\n    // alert(\"maxBoneCount:\" + GPUDetectDataFromSystem.maxBoneCount);\r\n\r\n    _detectPrecision(state, gl, GPUDetectDataFromSystem);\r\n}\r\n\r\nconst _getMaxBoneCount =(state: Map<any, any>, gl: any) => {\r\n    var numUniforms: number = null,\r\n        maxBoneCount: number = null;\r\n\r\n    // Calculate a estimate of the maximum number of bones that can be uploaded to the GPU\r\n    // based on the number of available uniforms and the number of uniforms required for non-\r\n    // bone data.  This is based off of the Standard shader.  A user defined shader may have\r\n    // even less space available for bones so this calculated value can be overridden via\r\n    numUniforms = gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS);\r\n    numUniforms -= 4 * 4; // Model, view, projection and shadow matrices\r\n    // numUniforms -= 8;     // 8 lights max, each specifying a position vector\r\n    numUniforms -= 1;     // Eye position\r\n    numUniforms -= 4 * 4; // Up to 4 texture transforms\r\n\r\n    maxBoneCount = Math.floor(numUniforms / 4);\r\n\r\n    // Put a limit on the number of supported bones before skin partitioning must be performed\r\n    // Some GPUs have demonstrated performance issues if the number of vectors allocated to the\r\n    // skin matrix palette is left unbounded\r\n    return Math.min(maxBoneCount, 128);\r\n}\r\n\r\nconst _getMaxAnisotropy =(state: Map<any, any>, gl: any, GPUDetectDataFromSystem: any) => {\r\n    var extension = GPUDetectDataFromSystem.extensionTextureFilterAnisotropic;\r\n\r\n    return extension !== null ? gl.getParameter(extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0;\r\n}\r\n\r\nconst _detectPrecision =(state: Map<any, any>, gl: any, GPUDetectDataFromSystem: any) => {\r\n    if (!gl.getShaderPrecisionFormat) {\r\n        GPUDetectDataFromSystem.precision = EGPUPrecision.HIGHP;\r\n\r\n        return;\r\n    }\r\n\r\n    let vertexShaderPrecisionHighpFloat = gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_FLOAT),\r\n        vertexShaderPrecisionMediumpFloat = gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_FLOAT),\r\n        //vertexShaderPrecisionLowpFloat = gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.LOW_FLOAT),\r\n        fragmentShaderPrecisionHighpFloat = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT),\r\n        fragmentShaderPrecisionMediumpFloat = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT),\r\n        //fragmentShaderPrecisionLowpFloat = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.LOW_FLOAT),\r\n        highpAvailable = vertexShaderPrecisionHighpFloat.precision > 0 && fragmentShaderPrecisionHighpFloat.precision > 0,\r\n        mediumpAvailable = vertexShaderPrecisionMediumpFloat.precision > 0 && fragmentShaderPrecisionMediumpFloat.precision > 0;\r\n\r\n    if (!highpAvailable) {\r\n        if (mediumpAvailable) {\r\n            GPUDetectDataFromSystem.precision = EGPUPrecision.MEDIUMP;\r\n            Log.warn(Log.info.FUNC_NOT_SUPPORT(\"gpu\", \"highp, using mediump\"));\r\n        }\r\n        else {\r\n            GPUDetectDataFromSystem.precision = EGPUPrecision.LOWP;\r\n            Log.warn(Log.info.FUNC_NOT_SUPPORT(\"gpu\", \"highp and mediump, using lowp\"));\r\n        }\r\n    }\r\n    else {\r\n        GPUDetectDataFromSystem.precision = EGPUPrecision.HIGHP;\r\n    }\r\n}\r\n\r\nexport const getExtension = (name: string, state: Map<any, any>, gl: any) => {\r\n    var extension: any = null;\r\n\r\n    switch (name) {\r\n        case \"EXT_texture_filter_anisotropic\":\r\n            extension = gl.getExtension(\"EXT_texture_filter_anisotropic\") || gl.getExtension(\"MOZ_EXT_texture_filter_anisotropic\") || gl.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\");\r\n            break;\r\n        case \"WEBGL_compressed_texture_s3tc\":\r\n            extension = gl.getExtension(\"WEBGL_compressed_texture_s3tc\") || gl.getExtension(\"MOZ_WEBGL_compressed_texture_s3tc\") || gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_s3tc\");\r\n            break;\r\n        case \"WEBGL_compressed_texture_pvrtc\":\r\n            extension = gl.getExtension(\"WEBGL_compressed_texture_pvrtc\") || gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\");\r\n            break;\r\n        case \"ANGLE_instanced_arrays\":\r\n            extension = gl.getExtension(\"ANGLE_instanced_arrays\");\r\n            break;\r\n        case \"element_index_uint\":\r\n            extension = gl.getExtension(\"OES_element_index_uint\") !== null;\r\n            break;\r\n        case \"depth_texture\":\r\n            extension = gl.getExtension(\"WEBKIT_WEBGL_depth_texture\") !== null || gl.getExtension(\"WEBGL_depth_texture\") !== null;\r\n            break;\r\n        case \"vao\":\r\n            extension = gl.getExtension(\"OES_vertex_array_object\");\r\n            break;\r\n        case \"standard_derivatives\":\r\n            extension = gl.getExtension(\"OES_standard_derivatives\");\r\n            break;\r\n        default:\r\n            extension = gl.getExtension(name);\r\n            break;\r\n    }\r\n\r\n    return extension;\r\n}\r\n\r\nexport const hasExtensionUintIndices = (GPUDetectDataFromSystem: any) => GPUDetectDataFromSystem.extensionUintIndices === true;\r\n\r\nexport const getMaxTextureUnit = (GPUDetectDataFromSystem: any) => GPUDetectDataFromSystem.maxTextureUnit;\r\n\r\nexport const getPrecision = (GPUDetectDataFromSystem: any) => GPUDetectDataFromSystem.precision;\r\n\r\nexport const hasExtension = (extension: any) => !!extension;\r\n","import { expect } from \"wonder-expect.js\";\r\nimport { it, requireCheckFunc } from \"../../../../../definition/typescript/decorator/contract\";\r\nimport { getMaxTextureUnit } from \"../../../device/gpuDetectUtils\";\r\n\r\nexport const isCached = (unitIndex: number, textureIndex: number, TextureCacheDataFromSystem: any, GPUDetectDataFromSystem: any) => {\r\n    return _getActiveTexture(unitIndex, TextureCacheDataFromSystem, GPUDetectDataFromSystem) === textureIndex;\r\n}\r\n\r\nconst _getActiveTexture =requireCheckFunc((unitIndex: number, TextureCacheDataFromSystem: any, GPUDetectDataFromSystem: any) => {\r\n    _checkUnit(unitIndex, GPUDetectDataFromSystem);\r\n}, (unitIndex: number, TextureCacheDataFromSystem: any, GPUDetectDataFromSystem: any) => {\r\n    return TextureCacheDataFromSystem.bindTextureUnitCache[unitIndex];\r\n})\r\n\r\nexport const addActiveTexture = requireCheckFunc((unitIndex: number, textureIndex: number, TextureCacheDataFromSystem: any, GPUDetectDataFromSystem: any) => {\r\n    _checkUnit(unitIndex, GPUDetectDataFromSystem);\r\n}, (unitIndex: number, textureIndex: number, TextureCacheDataFromSystem: any, GPUDetectDataFromSystem: any) => {\r\n    TextureCacheDataFromSystem.bindTextureUnitCache[unitIndex] = textureIndex;\r\n})\r\n\r\nconst _checkUnit =(unitIndex: number, GPUDetectDataFromSystem: any) => {\r\n    var maxTextureUnit = getMaxTextureUnit(GPUDetectDataFromSystem);\r\n\r\n    it(`texture unitIndex should >= 0, but actual is ${unitIndex}`, () => {\r\n        expect(unitIndex).gte(0);\r\n    });\r\n    it(`trying to cache ${unitIndex} texture unitIndexs, but GPU only supports ${maxTextureUnit} unitIndexs`, () => {\r\n        expect(unitIndex).lt(maxTextureUnit);\r\n    });\r\n}\r\n\r\nexport const clearAllBindTextureUnitCache = (TextureCacheDataFromSystem: any) => {\r\n    TextureCacheDataFromSystem.bindTextureUnitCache = [];\r\n}\r\n\r\nexport const initData = (TextureCacheDataFromSystem: any) => {\r\n    TextureCacheDataFromSystem.bindTextureUnitCache = [];\r\n}\r\n","import {\r\n    addActiveTexture as addActiveTextureUtils, clearAllBindTextureUnitCache as clearAllBindTextureUnitCacheUtils, initData as initDataUtils,\r\n    isCached as isCachedUtils\r\n} from \"../utils/worker/render_file/texture/textureCacheUtils\";\r\n\r\nexport const isCached = isCachedUtils;\r\n\r\nexport const addActiveTexture = addActiveTextureUtils;\r\n\r\nexport const clearAllBindTextureUnitCache = clearAllBindTextureUnitCacheUtils;\r\n\r\nexport const initData = initDataUtils;\r\n\r\n","import { isNotUndefined, isUndefined } from \"./JudgeUtils\";\r\n\r\nexport const deleteVal = (key: number, arr: Array<any>) => arr[key] = void 0;\r\n\r\nexport const isNotValidVal = (val: any) => isUndefined(val);\r\n\r\nexport const isValidVal = (val: any) => isNotUndefined(val);\r\n\r\nexport const deleteBySwap = (index: number, lastIndex: number, array: Array<any>) => {\r\n    if (lastIndex === -1) {\r\n        return null;\r\n    }\r\n\r\n    array[index] = array[lastIndex];\r\n\r\n    array.pop();\r\n}\r\n\r\nexport const hasDuplicateItems = (arr: Array<any>) => {\r\n    var noRepeatArr = [],\r\n        hasRepeat: boolean = false;\r\n\r\n    for (let item of arr) {\r\n        if (!item) {\r\n            continue;\r\n        }\r\n\r\n        if (_contain(noRepeatArr, item)) {\r\n            hasRepeat = true;\r\n\r\n            break;\r\n        }\r\n\r\n        noRepeatArr.push(item);\r\n    }\r\n\r\n    return hasRepeat;\r\n}\r\n\r\nconst _contain =(arr: Array<any>, item: any): boolean => {\r\n    var c: any = null;\r\n\r\n    for (let i = 0, len = arr.length; i < len; i++) {\r\n        c = arr[i];\r\n\r\n        // if (item.uid && c.uid && item.uid == c.uid) {\r\n        //     return true;\r\n        // }\r\n        // else if (item === c) {\r\n        if (item === c) {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nexport const removeDuplicateItems = (arr: Array<any>) => {\r\n    var resultArr = [];\r\n\r\n    for (let ele of arr) {\r\n        // if (_contain(resultArr, function(val) {\r\n        //         return isEqual(val, ele);\r\n        //     })) {\r\n        if (_contain(resultArr, ele)) {\r\n            continue;\r\n        }\r\n\r\n        resultArr.push(ele);\r\n    };\r\n\r\n    return resultArr;\r\n}\r\n\r\nexport const removeItem = (arr: Array<any>, item: any) => {\r\n    return filter(arr, (ele) => {\r\n        return ele !== item;\r\n    });\r\n}\r\n\r\nexport const replaceItem = (arr: Array<any>, oldItem: any, newItem:any) => {\r\n    for(let i = 0, len = arr.length; i < len; i++){\r\n        let val = arr[i];\r\n\r\n        if(val === oldItem){\r\n            arr[i] = newItem;\r\n        }\r\n    }\r\n\r\n    return arr;\r\n}\r\n\r\nexport const filter = (arr: Array<any>, func: (item: any) => boolean) => {\r\n    let result = [];\r\n\r\n    if (isUndefined(arr)) {\r\n        return result;\r\n    }\r\n\r\n    for (let ele of arr) {\r\n        if (func(ele)) {\r\n            result.push(ele);\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nexport const forEach = (arr: Array<any>, func: (item: any, index: number) => void) => {\r\n    if (isUndefined(arr)) {\r\n        return;\r\n    }\r\n\r\n    for (let i = 0, len = arr.length; i < len; i++) {\r\n        func(arr[i], i);\r\n    }\r\n}\r\n","import { DisposedTextureDataMap } from \"../type/dataType\";\r\nimport { ITexture } from \"../interface/ITexture\";\r\n\r\nexport class TextureData {\r\n    public static index: number = null;\r\n\r\n    public static glTextures: Array<WebGLTexture> = null;\r\n\r\n    public static sourceMap: Array<HTMLImageElement> = null;\r\n    public static textureMap: Array<ITexture> = null;\r\n\r\n    public static uniformSamplerNameMap: Array<string> = null;\r\n\r\n    public static buffer: SharedArrayBuffer = null;\r\n\r\n    public static widths: Float32Array = null;\r\n    public static heights: Float32Array = null;\r\n    public static isNeedUpdates: Uint8Array = null;\r\n    //todo add more: wrapS, ....\r\n\r\n    public static defaultWidth: number = null;\r\n    public static defaultHeight: number = null;\r\n    public static defaultIsNeedUpdate: number = null;\r\n\r\n    public static disposedTextureDataMap: DisposedTextureDataMap = null;\r\n    public static needInitedTextureIndexArr:Array<number> = null;\r\n    public static needAddedSourceArr:Array<HTMLImageElement> = null;\r\n}\r\n\r\n","import { Component } from \"./Component\";\r\nimport { Map as MapImmutable } from \"immutable\";\r\nimport { IUIdEntity } from \"../core/entityObject/gameObject/IUIdEntity\";\r\n\r\nexport class ComponentData {\r\n    public static addComponentHandleMap: AddComponentHandleMap = {};\r\n    public static disposeHandleMap: DisposeHandleMap = {};\r\n    public static initHandleMap: InitHandleMap = {};\r\n}\r\n\r\nexport type AddComponentHandleMap = {\r\n    [typeId: string]: (component: Component, gameObject: IUIdEntity) => void;\r\n}\r\n\r\nexport type DisposeHandleMap = {\r\n    [typeId: string]: (component: Component) => void;\r\n}\r\n\r\nexport type InitHandleMap = {\r\n    [typeId: string]: (index: number, state: MapImmutable<any, any>) => void;\r\n}\r\n\r\nexport type ComponentGameObjectMap = {\r\n    [index: number]: IUIdEntity;\r\n}\r\n","import { ensure, it } from \"../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\n\r\nexport class ClassUtils {\r\n    private static _classMap: ClassMapData = {};\r\n\r\n    @ensure(function(className: string) {\r\n        it(\"should exist class name\", () => {\r\n            expect(className).exist;\r\n            expect(className !== \"\").true\r\n        });\r\n    })\r\n    public static getClassNameByInstance(obj: any) {\r\n        return obj.constructor[\"className\"];\r\n    }\r\n\r\n    @ensure(function(className: string) {\r\n        it(\"should exist class name\", () => {\r\n            expect(className).exist;\r\n            expect(className !== \"\").true\r\n        });\r\n    })\r\n    public static getClassNameByClass(_class: any) {\r\n        return _class[\"className\"];\r\n    }\r\n\r\n    public static addClass(className: string, _class: any) {\r\n        this._classMap[className] = _class;\r\n    }\r\n\r\n    public static addClassNameAttributeToClass(className: string, _class: any) {\r\n        _class[\"className\"] = className;\r\n    }\r\n\r\n    public static getClass(className: string) {\r\n        return this._classMap[className];\r\n    }\r\n}\r\n\r\ntype ClassMapData = {\r\n    [className: string]: any;\r\n}\r\n","import { ClassUtils } from \"../utils/ClassUtils\";\r\nimport { Component } from \"./Component\";\r\n\r\nconst _generateTypeId =() => {\r\n    var result = _typeId;\r\n\r\n    _typeId += 1;\r\n\r\n    return String(result);\r\n}\r\n\r\nexport const getTypeIdFromClass = (_class: any) => {\r\n    return _table[ClassUtils.getClassNameByClass(_class)];\r\n}\r\n\r\nexport const getTypeIdFromComponent = (component: Component) => {\r\n    return _table[ClassUtils.getClassNameByInstance(component)];\r\n}\r\n\r\nconst _addTypeId =(componentClassNameArr: Array<string>, table: object) => {\r\n    var id = _generateTypeId();\r\n\r\n    for (let className of componentClassNameArr) {\r\n        table[className] = id;\r\n    }\r\n}\r\n\r\nvar _typeId =1;\r\nvar _table = {};\r\n\r\n_addTypeId([\"ThreeDTransform\"], _table);\r\n_addTypeId([\"BoxGeometry\"], _table);\r\n_addTypeId([\"CustomGeometry\"], _table);\r\n_addTypeId([\"BasicMaterial\"], _table);\r\n_addTypeId([\"LightMaterial\"], _table);\r\n_addTypeId([\"MeshRenderer\"], _table);\r\n_addTypeId([\"Tag\"], _table);\r\n_addTypeId([\"CameraController\"], _table);\r\n_addTypeId([\"AmbientLight\"], _table);\r\n_addTypeId([\"DirectionLight\"], _table);\r\n_addTypeId([\"PointLight\"], _table);\r\n","import { isNotUndefined, isUndefined } from \"./JudgeUtils\";\r\n\r\nexport const deleteVal = (key: string | number, obj: object) => obj[key] = void 0;\r\n\r\nexport const deleteBySwap = (sourceIndex: number, targetIndex: number, obj: object) => {\r\n    obj[sourceIndex] = obj[targetIndex];\r\n    deleteVal(targetIndex, obj);\r\n}\r\n\r\n// export const swap = (sourceIndex:number, targetIndex:number, obj:object) => {\r\n//     var temp = obj[sourceIndex];\r\n//\r\n//     obj[sourceIndex] = obj[targetIndex];\r\n//     obj[targetIndex] = temp;\r\n// }\r\n\r\nexport const isValidMapValue = (val: any) => {\r\n    return isNotUndefined(val);\r\n}\r\n\r\nexport const isNotValidMapValue = (val: any) => {\r\n    return isUndefined(val);\r\n}\r\n\r\nexport const createMap = () => Object.create(null);\r\n","import { ComponentData, ComponentGameObjectMap } from \"./ComponentData\";\r\nimport { Component } from \"./Component\";\r\nimport { getTypeIdFromClass, getTypeIdFromComponent } from \"./ComponentTypeIdManager\";\r\nimport { GameObject } from \"../core/entityObject/gameObject/GameObject\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { it, requireCheckFunc } from \"../definition/typescript/decorator/contract\";\r\nimport { deleteBySwap, deleteVal, isNotValidMapValue } from \"../utils/objectUtils\";\r\nimport { Map as MapImmutable } from \"immutable\";\r\nimport { deleteBySwap as deleteBySwapArray } from \"../utils/arrayUtils\";\r\nimport { IUIdEntity } from \"../core/entityObject/gameObject/IUIdEntity\";\r\n\r\nconst _addHandle =(_class: any, handleMap: object, handle: Function) => {\r\n    var typeId = getTypeIdFromClass(_class);\r\n\r\n    handleMap[typeId] = handle;\r\n}\r\n\r\nexport const addAddComponentHandle = (_class: any, handle: Function) => {\r\n    _addHandle(_class, ComponentData.addComponentHandleMap, handle);\r\n}\r\n\r\nexport const addDisposeHandle = (_class: any, handle: Function) => {\r\n    _addHandle(_class, ComponentData.disposeHandleMap, handle);\r\n}\r\n\r\nexport const addInitHandle = (_class: any, handle: (index: number, state: MapImmutable<any, any>) => void) => {\r\n    _addHandle(_class, ComponentData.initHandleMap, handle);\r\n}\r\n\r\nexport const execHandle = (component: Component, handleMapName: string, args?: Array<any>) => {\r\n    var handle = ComponentData[handleMapName][getTypeIdFromComponent(component)];\r\n\r\n    if (_isHandleNotExist(handle)) {\r\n        return;\r\n    }\r\n\r\n    if (!!args) {\r\n        handle.apply(null, args);\r\n    }\r\n    else {\r\n        handle(component);\r\n    }\r\n}\r\n\r\nexport const execInitHandle = (typeId: string, index: number, state: MapImmutable<any, any>) => {\r\n    var handle = ComponentData.initHandleMap[typeId];\r\n\r\n    if (_isHandleNotExist(handle)) {\r\n        return;\r\n    }\r\n\r\n    handle(index, state);\r\n}\r\n\r\nconst _isHandleNotExist =(handle: Function) => isNotValidMapValue(handle);\r\n\r\nexport const checkComponentShouldAlive = (component: Component, data: any, isAlive: (component: Component, data: any) => boolean) => {\r\n    it(\"component should alive\", () => {\r\n        expect(isAlive(component, data)).true;\r\n    });\r\n}\r\n\r\nexport const addComponentToGameObjectMap = requireCheckFunc((gameObjectMap: ComponentGameObjectMap | Array<GameObject>, index: number, gameObject: GameObject) => {\r\n    // it(\"component should not exist in gameObject\", () => {\r\n    //     expect(gameObjectMap[index]).not.exist;\r\n    // });\r\n}, (gameObjectMap: ComponentGameObjectMap | Array<GameObject>, index: number, gameObject: GameObject) => {\r\n    gameObjectMap[index] = gameObject;\r\n})\r\n\r\nexport const getComponentGameObject = (gameObjectMap: ComponentGameObjectMap | Array<GameObject>, index: number) => {\r\n    return gameObjectMap[index];\r\n}\r\n\r\nexport const generateComponentIndex = (ComponentData: any) => {\r\n    return ComponentData.index++;\r\n}\r\n\r\nexport const deleteComponent = requireCheckFunc((index: number, componentMap: ComponentMap) => {\r\n    it(\"index should >= 0\", () => {\r\n        expect(index).gte(0);\r\n    });\r\n}, (index: number, componentMap: ComponentMap) => {\r\n    markComponentIndexRemoved(componentMap[index]);\r\n\r\n    deleteVal(index, componentMap);\r\n})\r\n//\r\n// export const deleteComponentBySwap = requireCheckFunc((sourceIndex: number, targetIndex: number | null, componentMap: ComponentMap) => {\r\n//     it(\"targetIndex should >= 0\", () => {\r\n//         expect(targetIndex).gte(0);\r\n//     });\r\n// }, (sourceIndex: number, targetIndex: number, componentMap: ComponentMap) => {\r\n//     componentMap[targetIndex].index = sourceIndex;\r\n//     markComponentIndexRemoved(componentMap[sourceIndex]);\r\n//\r\n//     deleteBySwap(sourceIndex, targetIndex, componentMap);\r\n// })\r\n\r\nexport const deleteComponentBySwapArray = requireCheckFunc((sourceIndex: number, targetIndex: number | null, componentMap: Array<Component>) => {\r\n    it(\"targetIndex should >= 0\", () => {\r\n        expect(targetIndex).gte(0);\r\n    });\r\n}, (sourceIndex: number, targetIndex: number, componentMap: Array<Component>) => {\r\n    componentMap[targetIndex].index = sourceIndex;\r\n    markComponentIndexRemoved(componentMap[sourceIndex]);\r\n\r\n    deleteBySwapArray(sourceIndex, targetIndex, componentMap);\r\n})\r\n\r\nexport const markComponentIndexRemoved = (component: Component) => {\r\n    component.index = -1;\r\n}\r\n\r\nexport const isComponentIndexNotRemoved = (component: Component) => {\r\n    return component.index !== -1;\r\n}\r\n\r\nexport type ComponentMap = {\r\n    [index: number]: Component;\r\n}\r\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isObject(value) {\n    var type = typeof value;\n    return value != null && (type == 'object' || type == 'function');\n}\nexports.default = isObject;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isObject_js_1 = require(\"./isObject.js\");\nvar objectCreate = Object.create;\nvar baseCreate = (function () {\n    function object() { }\n    return function (proto) {\n        if (!isObject_js_1.default(proto)) {\n            return {};\n        }\n        if (objectCreate) {\n            return objectCreate(proto);\n        }\n        object.prototype = proto;\n        var result = new object;\n        object.prototype = undefined;\n        return result;\n    };\n}());\nexports.default = baseCreate;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction baseLodash() {\n}\nexports.default = baseLodash;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _baseCreate_js_1 = require(\"./_baseCreate.js\");\nvar _baseLodash_js_1 = require(\"./_baseLodash.js\");\nfunction LodashWrapper(value, chainAll) {\n    this.__wrapped__ = value;\n    this.__actions__ = [];\n    this.__chain__ = !!chainAll;\n    this.__index__ = 0;\n    this.__values__ = undefined;\n}\nLodashWrapper.prototype = _baseCreate_js_1.default(_baseLodash_js_1.default.prototype);\nLodashWrapper.prototype.constructor = LodashWrapper;\nexports.default = LodashWrapper;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction arrayPush(array, values) {\n    var index = -1, length = values.length, offset = array.length;\n    while (++index < length) {\n        array[offset + index] = values[index];\n    }\n    return array;\n}\nexports.default = arrayPush;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\nexports.default = freeGlobal;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _freeGlobal_js_1 = require(\"./_freeGlobal.js\");\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\nvar root = _freeGlobal_js_1.default || freeSelf || Function('return this')();\nexports.default = root;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _root_js_1 = require(\"./_root.js\");\nvar Symbol = _root_js_1.default.Symbol;\nexports.default = Symbol;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _Symbol_js_1 = require(\"./_Symbol.js\");\nvar objectProto = Object.prototype;\nvar hasOwnProperty = objectProto.hasOwnProperty;\nvar nativeObjectToString = objectProto.toString;\nvar symToStringTag = _Symbol_js_1.default ? _Symbol_js_1.default.toStringTag : undefined;\nfunction getRawTag(value) {\n    var isOwn = hasOwnProperty.call(value, symToStringTag), tag = value[symToStringTag];\n    try {\n        value[symToStringTag] = undefined;\n        var unmasked = true;\n    }\n    catch (e) { }\n    var result = nativeObjectToString.call(value);\n    if (unmasked) {\n        if (isOwn) {\n            value[symToStringTag] = tag;\n        }\n        else {\n            delete value[symToStringTag];\n        }\n    }\n    return result;\n}\nexports.default = getRawTag;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar objectProto = Object.prototype;\nvar nativeObjectToString = objectProto.toString;\nfunction objectToString(value) {\n    return nativeObjectToString.call(value);\n}\nexports.default = objectToString;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _Symbol_js_1 = require(\"./_Symbol.js\");\nvar _getRawTag_js_1 = require(\"./_getRawTag.js\");\nvar _objectToString_js_1 = require(\"./_objectToString.js\");\nvar nullTag = '[object Null]', undefinedTag = '[object Undefined]';\nvar symToStringTag = _Symbol_js_1.default ? _Symbol_js_1.default.toStringTag : undefined;\nfunction baseGetTag(value) {\n    if (value == null) {\n        return value === undefined ? undefinedTag : nullTag;\n    }\n    return (symToStringTag && symToStringTag in Object(value))\n        ? _getRawTag_js_1.default(value)\n        : _objectToString_js_1.default(value);\n}\nexports.default = baseGetTag;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isObjectLike(value) {\n    return value != null && typeof value == 'object';\n}\nexports.default = isObjectLike;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _baseGetTag_js_1 = require(\"./_baseGetTag.js\");\nvar isObjectLike_js_1 = require(\"./isObjectLike.js\");\nvar argsTag = '[object Arguments]';\nfunction baseIsArguments(value) {\n    return isObjectLike_js_1.default(value) && _baseGetTag_js_1.default(value) == argsTag;\n}\nexports.default = baseIsArguments;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _baseIsArguments_js_1 = require(\"./_baseIsArguments.js\");\nvar isObjectLike_js_1 = require(\"./isObjectLike.js\");\nvar objectProto = Object.prototype;\nvar hasOwnProperty = objectProto.hasOwnProperty;\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\nvar isArguments = _baseIsArguments_js_1.default(function () { return arguments; }()) ? _baseIsArguments_js_1.default : function (value) {\n    return isObjectLike_js_1.default(value) && hasOwnProperty.call(value, 'callee') &&\n        !propertyIsEnumerable.call(value, 'callee');\n};\nexports.default = isArguments;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isArray = Array.isArray;\nexports.default = isArray;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _Symbol_js_1 = require(\"./_Symbol.js\");\nvar isArguments_js_1 = require(\"./isArguments.js\");\nvar isArray_js_1 = require(\"./isArray.js\");\nvar spreadableSymbol = _Symbol_js_1.default ? _Symbol_js_1.default.isConcatSpreadable : undefined;\nfunction isFlattenable(value) {\n    return isArray_js_1.default(value) || isArguments_js_1.default(value) ||\n        !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\nexports.default = isFlattenable;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _arrayPush_js_1 = require(\"./_arrayPush.js\");\nvar _isFlattenable_js_1 = require(\"./_isFlattenable.js\");\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n    var index = -1, length = array.length;\n    predicate || (predicate = _isFlattenable_js_1.default);\n    result || (result = []);\n    while (++index < length) {\n        var value = array[index];\n        if (depth > 0 && predicate(value)) {\n            if (depth > 1) {\n                baseFlatten(value, depth - 1, predicate, isStrict, result);\n            }\n            else {\n                _arrayPush_js_1.default(result, value);\n            }\n        }\n        else if (!isStrict) {\n            result[result.length] = value;\n        }\n    }\n    return result;\n}\nexports.default = baseFlatten;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _baseFlatten_js_1 = require(\"./_baseFlatten.js\");\nfunction flatten(array) {\n    var length = array == null ? 0 : array.length;\n    return length ? _baseFlatten_js_1.default(array, 1) : [];\n}\nexports.default = flatten;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction apply(func, thisArg, args) {\n    switch (args.length) {\n        case 0: return func.call(thisArg);\n        case 1: return func.call(thisArg, args[0]);\n        case 2: return func.call(thisArg, args[0], args[1]);\n        case 3: return func.call(thisArg, args[0], args[1], args[2]);\n    }\n    return func.apply(thisArg, args);\n}\nexports.default = apply;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _apply_js_1 = require(\"./_apply.js\");\nvar nativeMax = Math.max;\nfunction overRest(func, start, transform) {\n    start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n    return function () {\n        var args = arguments, index = -1, length = nativeMax(args.length - start, 0), array = Array(length);\n        while (++index < length) {\n            array[index] = args[start + index];\n        }\n        index = -1;\n        var otherArgs = Array(start + 1);\n        while (++index < start) {\n            otherArgs[index] = args[index];\n        }\n        otherArgs[start] = transform(array);\n        return _apply_js_1.default(func, this, otherArgs);\n    };\n}\nexports.default = overRest;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction constant(value) {\n    return function () {\n        return value;\n    };\n}\nexports.default = constant;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _baseGetTag_js_1 = require(\"./_baseGetTag.js\");\nvar isObject_js_1 = require(\"./isObject.js\");\nvar asyncTag = '[object AsyncFunction]', funcTag = '[object Function]', genTag = '[object GeneratorFunction]', proxyTag = '[object Proxy]';\nfunction isFunction(value) {\n    if (!isObject_js_1.default(value)) {\n        return false;\n    }\n    var tag = _baseGetTag_js_1.default(value);\n    return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\nexports.default = isFunction;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _root_js_1 = require(\"./_root.js\");\nvar coreJsData = _root_js_1.default['__core-js_shared__'];\nexports.default = coreJsData;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _coreJsData_js_1 = require(\"./_coreJsData.js\");\nvar maskSrcKey = (function () {\n    var uid = /[^.]+$/.exec(_coreJsData_js_1.default && _coreJsData_js_1.default.keys && _coreJsData_js_1.default.keys.IE_PROTO || '');\n    return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\nfunction isMasked(func) {\n    return !!maskSrcKey && (maskSrcKey in func);\n}\nexports.default = isMasked;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar funcProto = Function.prototype;\nvar funcToString = funcProto.toString;\nfunction toSource(func) {\n    if (func != null) {\n        try {\n            return funcToString.call(func);\n        }\n        catch (e) { }\n        try {\n            return (func + '');\n        }\n        catch (e) { }\n    }\n    return '';\n}\nexports.default = toSource;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isFunction_js_1 = require(\"./isFunction.js\");\nvar _isMasked_js_1 = require(\"./_isMasked.js\");\nvar isObject_js_1 = require(\"./isObject.js\");\nvar _toSource_js_1 = require(\"./_toSource.js\");\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\nvar funcProto = Function.prototype, objectProto = Object.prototype;\nvar funcToString = funcProto.toString;\nvar hasOwnProperty = objectProto.hasOwnProperty;\nvar reIsNative = RegExp('^' +\n    funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n        .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$');\nfunction baseIsNative(value) {\n    if (!isObject_js_1.default(value) || _isMasked_js_1.default(value)) {\n        return false;\n    }\n    var pattern = isFunction_js_1.default(value) ? reIsNative : reIsHostCtor;\n    return pattern.test(_toSource_js_1.default(value));\n}\nexports.default = baseIsNative;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getValue(object, key) {\n    return object == null ? undefined : object[key];\n}\nexports.default = getValue;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _baseIsNative_js_1 = require(\"./_baseIsNative.js\");\nvar _getValue_js_1 = require(\"./_getValue.js\");\nfunction getNative(object, key) {\n    var value = _getValue_js_1.default(object, key);\n    return _baseIsNative_js_1.default(value) ? value : undefined;\n}\nexports.default = getNative;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _getNative_js_1 = require(\"./_getNative.js\");\nvar defineProperty = (function () {\n    try {\n        var func = _getNative_js_1.default(Object, 'defineProperty');\n        func({}, '', {});\n        return func;\n    }\n    catch (e) { }\n}());\nexports.default = defineProperty;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction identity(value) {\n    return value;\n}\nexports.default = identity;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar constant_js_1 = require(\"./constant.js\");\nvar _defineProperty_js_1 = require(\"./_defineProperty.js\");\nvar identity_js_1 = require(\"./identity.js\");\nvar baseSetToString = !_defineProperty_js_1.default ? identity_js_1.default : function (func, string) {\n    return _defineProperty_js_1.default(func, 'toString', {\n        'configurable': true,\n        'enumerable': false,\n        'value': constant_js_1.default(string),\n        'writable': true\n    });\n};\nexports.default = baseSetToString;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar HOT_COUNT = 800, HOT_SPAN = 16;\nvar nativeNow = Date.now;\nfunction shortOut(func) {\n    var count = 0, lastCalled = 0;\n    return function () {\n        var stamp = nativeNow(), remaining = HOT_SPAN - (stamp - lastCalled);\n        lastCalled = stamp;\n        if (remaining > 0) {\n            if (++count >= HOT_COUNT) {\n                return arguments[0];\n            }\n        }\n        else {\n            count = 0;\n        }\n        return func.apply(undefined, arguments);\n    };\n}\nexports.default = shortOut;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _baseSetToString_js_1 = require(\"./_baseSetToString.js\");\nvar _shortOut_js_1 = require(\"./_shortOut.js\");\nvar setToString = _shortOut_js_1.default(_baseSetToString_js_1.default);\nexports.default = setToString;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar flatten_js_1 = require(\"./flatten.js\");\nvar _overRest_js_1 = require(\"./_overRest.js\");\nvar _setToString_js_1 = require(\"./_setToString.js\");\nfunction flatRest(func) {\n    return _setToString_js_1.default(_overRest_js_1.default(func, undefined, flatten_js_1.default), func + '');\n}\nexports.default = flatRest;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _getNative_js_1 = require(\"./_getNative.js\");\nvar _root_js_1 = require(\"./_root.js\");\nvar WeakMap = _getNative_js_1.default(_root_js_1.default, 'WeakMap');\nexports.default = WeakMap;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _WeakMap_js_1 = require(\"./_WeakMap.js\");\nvar metaMap = _WeakMap_js_1.default && new _WeakMap_js_1.default;\nexports.default = metaMap;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction noop() {\n}\nexports.default = noop;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _metaMap_js_1 = require(\"./_metaMap.js\");\nvar noop_js_1 = require(\"./noop.js\");\nvar getData = !_metaMap_js_1.default ? noop_js_1.default : function (func) {\n    return _metaMap_js_1.default.get(func);\n};\nexports.default = getData;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar realNames = {};\nexports.default = realNames;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _realNames_js_1 = require(\"./_realNames.js\");\nvar objectProto = Object.prototype;\nvar hasOwnProperty = objectProto.hasOwnProperty;\nfunction getFuncName(func) {\n    var result = (func.name + ''), array = _realNames_js_1.default[result], length = hasOwnProperty.call(_realNames_js_1.default, result) ? array.length : 0;\n    while (length--) {\n        var data = array[length], otherFunc = data.func;\n        if (otherFunc == null || otherFunc == func) {\n            return data.name;\n        }\n    }\n    return result;\n}\nexports.default = getFuncName;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _baseCreate_js_1 = require(\"./_baseCreate.js\");\nvar _baseLodash_js_1 = require(\"./_baseLodash.js\");\nvar MAX_ARRAY_LENGTH = 4294967295;\nfunction LazyWrapper(value) {\n    this.__wrapped__ = value;\n    this.__actions__ = [];\n    this.__dir__ = 1;\n    this.__filtered__ = false;\n    this.__iteratees__ = [];\n    this.__takeCount__ = MAX_ARRAY_LENGTH;\n    this.__views__ = [];\n}\nLazyWrapper.prototype = _baseCreate_js_1.default(_baseLodash_js_1.default.prototype);\nLazyWrapper.prototype.constructor = LazyWrapper;\nexports.default = LazyWrapper;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction copyArray(source, array) {\n    var index = -1, length = source.length;\n    array || (array = Array(length));\n    while (++index < length) {\n        array[index] = source[index];\n    }\n    return array;\n}\nexports.default = copyArray;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _LazyWrapper_js_1 = require(\"./_LazyWrapper.js\");\nvar _LodashWrapper_js_1 = require(\"./_LodashWrapper.js\");\nvar _copyArray_js_1 = require(\"./_copyArray.js\");\nfunction wrapperClone(wrapper) {\n    if (wrapper instanceof _LazyWrapper_js_1.default) {\n        return wrapper.clone();\n    }\n    var result = new _LodashWrapper_js_1.default(wrapper.__wrapped__, wrapper.__chain__);\n    result.__actions__ = _copyArray_js_1.default(wrapper.__actions__);\n    result.__index__ = wrapper.__index__;\n    result.__values__ = wrapper.__values__;\n    return result;\n}\nexports.default = wrapperClone;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _LazyWrapper_js_1 = require(\"./_LazyWrapper.js\");\nvar _LodashWrapper_js_1 = require(\"./_LodashWrapper.js\");\nvar _baseLodash_js_1 = require(\"./_baseLodash.js\");\nvar isArray_js_1 = require(\"./isArray.js\");\nvar isObjectLike_js_1 = require(\"./isObjectLike.js\");\nvar _wrapperClone_js_1 = require(\"./_wrapperClone.js\");\nvar objectProto = Object.prototype;\nvar hasOwnProperty = objectProto.hasOwnProperty;\nfunction lodash(value) {\n    if (isObjectLike_js_1.default(value) && !isArray_js_1.default(value) && !(value instanceof _LazyWrapper_js_1.default)) {\n        if (value instanceof _LodashWrapper_js_1.default) {\n            return value;\n        }\n        if (hasOwnProperty.call(value, '__wrapped__')) {\n            return _wrapperClone_js_1.default(value);\n        }\n    }\n    return new _LodashWrapper_js_1.default(value);\n}\nlodash.prototype = _baseLodash_js_1.default.prototype;\nlodash.prototype.constructor = lodash;\nexports.default = lodash;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _LazyWrapper_js_1 = require(\"./_LazyWrapper.js\");\nvar _getData_js_1 = require(\"./_getData.js\");\nvar _getFuncName_js_1 = require(\"./_getFuncName.js\");\nvar wrapperLodash_js_1 = require(\"./wrapperLodash.js\");\nfunction isLaziable(func) {\n    var funcName = _getFuncName_js_1.default(func), other = wrapperLodash_js_1.default[funcName];\n    if (typeof other != 'function' || !(funcName in _LazyWrapper_js_1.default.prototype)) {\n        return false;\n    }\n    if (func === other) {\n        return true;\n    }\n    var data = _getData_js_1.default(other);\n    return !!data && func === data[0];\n}\nexports.default = isLaziable;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _LodashWrapper_js_1 = require(\"./_LodashWrapper.js\");\nvar _flatRest_js_1 = require(\"./_flatRest.js\");\nvar _getData_js_1 = require(\"./_getData.js\");\nvar _getFuncName_js_1 = require(\"./_getFuncName.js\");\nvar isArray_js_1 = require(\"./isArray.js\");\nvar _isLaziable_js_1 = require(\"./_isLaziable.js\");\nvar FUNC_ERROR_TEXT = 'Expected a function';\nvar WRAP_CURRY_FLAG = 8, WRAP_PARTIAL_FLAG = 32, WRAP_ARY_FLAG = 128, WRAP_REARG_FLAG = 256;\nfunction createFlow(fromRight) {\n    return _flatRest_js_1.default(function (funcs) {\n        var length = funcs.length, index = length, prereq = _LodashWrapper_js_1.default.prototype.thru;\n        if (fromRight) {\n            funcs.reverse();\n        }\n        while (index--) {\n            var func = funcs[index];\n            if (typeof func != 'function') {\n                throw new TypeError(FUNC_ERROR_TEXT);\n            }\n            if (prereq && !wrapper && _getFuncName_js_1.default(func) == 'wrapper') {\n                var wrapper = new _LodashWrapper_js_1.default([], true);\n            }\n        }\n        index = wrapper ? index : length;\n        while (++index < length) {\n            func = funcs[index];\n            var funcName = _getFuncName_js_1.default(func), data = funcName == 'wrapper' ? _getData_js_1.default(func) : undefined;\n            if (data && _isLaziable_js_1.default(data[0]) &&\n                data[1] == (WRAP_ARY_FLAG | WRAP_CURRY_FLAG | WRAP_PARTIAL_FLAG | WRAP_REARG_FLAG) &&\n                !data[4].length && data[9] == 1) {\n                wrapper = wrapper[_getFuncName_js_1.default(data[0])].apply(wrapper, data[3]);\n            }\n            else {\n                wrapper = (func.length == 1 && _isLaziable_js_1.default(func))\n                    ? wrapper[funcName]()\n                    : wrapper.thru(func);\n            }\n        }\n        return function () {\n            var args = arguments, value = args[0];\n            if (wrapper && args.length == 1 && isArray_js_1.default(value)) {\n                return wrapper.plant(value).value();\n            }\n            var index = 0, result = length ? funcs[index].apply(this, args) : value;\n            while (++index < length) {\n                result = funcs[index].call(this, result);\n            }\n            return result;\n        };\n    });\n}\nexports.default = createFlow;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _createFlow_js_1 = require(\"./_createFlow.js\");\nvar flowRight = _createFlow_js_1.default(true);\nexports.default = flowRight;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction arrayMap(array, iteratee) {\n    var index = -1, length = array == null ? 0 : array.length, result = Array(length);\n    while (++index < length) {\n        result[index] = iteratee(array[index], index, array);\n    }\n    return result;\n}\nexports.default = arrayMap;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _baseGetTag_js_1 = require(\"./_baseGetTag.js\");\nvar isObjectLike_js_1 = require(\"./isObjectLike.js\");\nvar symbolTag = '[object Symbol]';\nfunction isSymbol(value) {\n    return typeof value == 'symbol' ||\n        (isObjectLike_js_1.default(value) && _baseGetTag_js_1.default(value) == symbolTag);\n}\nexports.default = isSymbol;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _Symbol_js_1 = require(\"./_Symbol.js\");\nvar _arrayMap_js_1 = require(\"./_arrayMap.js\");\nvar isArray_js_1 = require(\"./isArray.js\");\nvar isSymbol_js_1 = require(\"./isSymbol.js\");\nvar INFINITY = 1 / 0;\nvar symbolProto = _Symbol_js_1.default ? _Symbol_js_1.default.prototype : undefined, symbolToString = symbolProto ? symbolProto.toString : undefined;\nfunction baseToString(value) {\n    if (typeof value == 'string') {\n        return value;\n    }\n    if (isArray_js_1.default(value)) {\n        return _arrayMap_js_1.default(value, baseToString) + '';\n    }\n    if (isSymbol_js_1.default(value)) {\n        return symbolToString ? symbolToString.call(value) : '';\n    }\n    var result = (value + '');\n    return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\nexports.default = baseToString;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _baseToString_js_1 = require(\"./_baseToString.js\");\nfunction toString(value) {\n    return value == null ? '' : _baseToString_js_1.default(value);\n}\nexports.default = toString;\n","import flowRight from \"wonder-lodash/flowRight\";\r\nimport toString from \"wonder-lodash/toString\";\r\n\r\nexport class IO {\r\n    public static of(func: Function) {\r\n        var obj = new this(func);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public func: Function = null;\r\n\r\n    constructor(func: Function) {\r\n        this.func = func;\r\n    }\r\n\r\n    public chain(f: (...args) => IO) {\r\n        var io = this;\r\n\r\n        return IO.of(function() {\r\n            var next = f(io.func.apply(io, arguments));\r\n\r\n            return next.func.apply(next, arguments);\r\n        });\r\n    }\r\n\r\n    public map(f: Function) {\r\n        return IO.of(flowRight(f, this.func));\r\n    };\r\n\r\n    public ap(thatIO: IO) {\r\n        return this.chain(function(f) {\r\n            return thatIO.map(f);\r\n        });\r\n    };\r\n\r\n    public run(...args) {\r\n        return this.func.apply(this, arguments);\r\n    };\r\n\r\n    public toString() {\r\n        return `IO(${toString(this.run())})`;\r\n    }\r\n}\r\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar identity_js_1 = require(\"./identity.js\");\nvar _metaMap_js_1 = require(\"./_metaMap.js\");\nvar baseSetData = !_metaMap_js_1.default ? identity_js_1.default : function (func, data) {\n    _metaMap_js_1.default.set(func, data);\n    return func;\n};\nexports.default = baseSetData;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _baseCreate_js_1 = require(\"./_baseCreate.js\");\nvar isObject_js_1 = require(\"./isObject.js\");\nfunction createCtor(Ctor) {\n    return function () {\n        var args = arguments;\n        switch (args.length) {\n            case 0: return new Ctor;\n            case 1: return new Ctor(args[0]);\n            case 2: return new Ctor(args[0], args[1]);\n            case 3: return new Ctor(args[0], args[1], args[2]);\n            case 4: return new Ctor(args[0], args[1], args[2], args[3]);\n            case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);\n            case 6: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);\n            case 7: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);\n        }\n        var thisBinding = _baseCreate_js_1.default(Ctor.prototype), result = Ctor.apply(thisBinding, args);\n        return isObject_js_1.default(result) ? result : thisBinding;\n    };\n}\nexports.default = createCtor;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _createCtor_js_1 = require(\"./_createCtor.js\");\nvar _root_js_1 = require(\"./_root.js\");\nvar WRAP_BIND_FLAG = 1;\nfunction createBind(func, bitmask, thisArg) {\n    var isBind = bitmask & WRAP_BIND_FLAG, Ctor = _createCtor_js_1.default(func);\n    function wrapper() {\n        var fn = (this && this !== _root_js_1.default && this instanceof wrapper) ? Ctor : func;\n        return fn.apply(isBind ? thisArg : this, arguments);\n    }\n    return wrapper;\n}\nexports.default = createBind;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar nativeMax = Math.max;\nfunction composeArgs(args, partials, holders, isCurried) {\n    var argsIndex = -1, argsLength = args.length, holdersLength = holders.length, leftIndex = -1, leftLength = partials.length, rangeLength = nativeMax(argsLength - holdersLength, 0), result = Array(leftLength + rangeLength), isUncurried = !isCurried;\n    while (++leftIndex < leftLength) {\n        result[leftIndex] = partials[leftIndex];\n    }\n    while (++argsIndex < holdersLength) {\n        if (isUncurried || argsIndex < argsLength) {\n            result[holders[argsIndex]] = args[argsIndex];\n        }\n    }\n    while (rangeLength--) {\n        result[leftIndex++] = args[argsIndex++];\n    }\n    return result;\n}\nexports.default = composeArgs;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar nativeMax = Math.max;\nfunction composeArgsRight(args, partials, holders, isCurried) {\n    var argsIndex = -1, argsLength = args.length, holdersIndex = -1, holdersLength = holders.length, rightIndex = -1, rightLength = partials.length, rangeLength = nativeMax(argsLength - holdersLength, 0), result = Array(rangeLength + rightLength), isUncurried = !isCurried;\n    while (++argsIndex < rangeLength) {\n        result[argsIndex] = args[argsIndex];\n    }\n    var offset = argsIndex;\n    while (++rightIndex < rightLength) {\n        result[offset + rightIndex] = partials[rightIndex];\n    }\n    while (++holdersIndex < holdersLength) {\n        if (isUncurried || argsIndex < argsLength) {\n            result[offset + holders[holdersIndex]] = args[argsIndex++];\n        }\n    }\n    return result;\n}\nexports.default = composeArgsRight;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction countHolders(array, placeholder) {\n    var length = array.length, result = 0;\n    while (length--) {\n        if (array[length] === placeholder) {\n            ++result;\n        }\n    }\n    return result;\n}\nexports.default = countHolders;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _baseSetData_js_1 = require(\"./_baseSetData.js\");\nvar _shortOut_js_1 = require(\"./_shortOut.js\");\nvar setData = _shortOut_js_1.default(_baseSetData_js_1.default);\nexports.default = setData;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar reWrapDetails = /\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/, reSplitDetails = /,? & /;\nfunction getWrapDetails(source) {\n    var match = source.match(reWrapDetails);\n    return match ? match[1].split(reSplitDetails) : [];\n}\nexports.default = getWrapDetails;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar reWrapComment = /\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/;\nfunction insertWrapDetails(source, details) {\n    var length = details.length;\n    if (!length) {\n        return source;\n    }\n    var lastIndex = length - 1;\n    details[lastIndex] = (length > 1 ? '& ' : '') + details[lastIndex];\n    details = details.join(length > 2 ? ', ' : ' ');\n    return source.replace(reWrapComment, '{\\n/* [wrapped with ' + details + '] */\\n');\n}\nexports.default = insertWrapDetails;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction arrayEach(array, iteratee) {\n    var index = -1, length = array == null ? 0 : array.length;\n    while (++index < length) {\n        if (iteratee(array[index], index, array) === false) {\n            break;\n        }\n    }\n    return array;\n}\nexports.default = arrayEach;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n    var length = array.length, index = fromIndex + (fromRight ? 1 : -1);\n    while ((fromRight ? index-- : ++index < length)) {\n        if (predicate(array[index], index, array)) {\n            return index;\n        }\n    }\n    return -1;\n}\nexports.default = baseFindIndex;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction baseIsNaN(value) {\n    return value !== value;\n}\nexports.default = baseIsNaN;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction strictIndexOf(array, value, fromIndex) {\n    var index = fromIndex - 1, length = array.length;\n    while (++index < length) {\n        if (array[index] === value) {\n            return index;\n        }\n    }\n    return -1;\n}\nexports.default = strictIndexOf;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _baseFindIndex_js_1 = require(\"./_baseFindIndex.js\");\nvar _baseIsNaN_js_1 = require(\"./_baseIsNaN.js\");\nvar _strictIndexOf_js_1 = require(\"./_strictIndexOf.js\");\nfunction baseIndexOf(array, value, fromIndex) {\n    return value === value\n        ? _strictIndexOf_js_1.default(array, value, fromIndex)\n        : _baseFindIndex_js_1.default(array, _baseIsNaN_js_1.default, fromIndex);\n}\nexports.default = baseIndexOf;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _baseIndexOf_js_1 = require(\"./_baseIndexOf.js\");\nfunction arrayIncludes(array, value) {\n    var length = array == null ? 0 : array.length;\n    return !!length && _baseIndexOf_js_1.default(array, value, 0) > -1;\n}\nexports.default = arrayIncludes;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _arrayEach_js_1 = require(\"./_arrayEach.js\");\nvar _arrayIncludes_js_1 = require(\"./_arrayIncludes.js\");\nvar WRAP_BIND_FLAG = 1, WRAP_BIND_KEY_FLAG = 2, WRAP_CURRY_FLAG = 8, WRAP_CURRY_RIGHT_FLAG = 16, WRAP_PARTIAL_FLAG = 32, WRAP_PARTIAL_RIGHT_FLAG = 64, WRAP_ARY_FLAG = 128, WRAP_REARG_FLAG = 256, WRAP_FLIP_FLAG = 512;\nvar wrapFlags = [\n    ['ary', WRAP_ARY_FLAG],\n    ['bind', WRAP_BIND_FLAG],\n    ['bindKey', WRAP_BIND_KEY_FLAG],\n    ['curry', WRAP_CURRY_FLAG],\n    ['curryRight', WRAP_CURRY_RIGHT_FLAG],\n    ['flip', WRAP_FLIP_FLAG],\n    ['partial', WRAP_PARTIAL_FLAG],\n    ['partialRight', WRAP_PARTIAL_RIGHT_FLAG],\n    ['rearg', WRAP_REARG_FLAG]\n];\nfunction updateWrapDetails(details, bitmask) {\n    _arrayEach_js_1.default(wrapFlags, function (pair) {\n        var value = '_.' + pair[0];\n        if ((bitmask & pair[1]) && !_arrayIncludes_js_1.default(details, value)) {\n            details.push(value);\n        }\n    });\n    return details.sort();\n}\nexports.default = updateWrapDetails;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _getWrapDetails_js_1 = require(\"./_getWrapDetails.js\");\nvar _insertWrapDetails_js_1 = require(\"./_insertWrapDetails.js\");\nvar _setToString_js_1 = require(\"./_setToString.js\");\nvar _updateWrapDetails_js_1 = require(\"./_updateWrapDetails.js\");\nfunction setWrapToString(wrapper, reference, bitmask) {\n    var source = (reference + '');\n    return _setToString_js_1.default(wrapper, _insertWrapDetails_js_1.default(source, _updateWrapDetails_js_1.default(_getWrapDetails_js_1.default(source), bitmask)));\n}\nexports.default = setWrapToString;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _isLaziable_js_1 = require(\"./_isLaziable.js\");\nvar _setData_js_1 = require(\"./_setData.js\");\nvar _setWrapToString_js_1 = require(\"./_setWrapToString.js\");\nvar WRAP_BIND_FLAG = 1, WRAP_BIND_KEY_FLAG = 2, WRAP_CURRY_BOUND_FLAG = 4, WRAP_CURRY_FLAG = 8, WRAP_PARTIAL_FLAG = 32, WRAP_PARTIAL_RIGHT_FLAG = 64;\nfunction createRecurry(func, bitmask, wrapFunc, placeholder, thisArg, partials, holders, argPos, ary, arity) {\n    var isCurry = bitmask & WRAP_CURRY_FLAG, newHolders = isCurry ? holders : undefined, newHoldersRight = isCurry ? undefined : holders, newPartials = isCurry ? partials : undefined, newPartialsRight = isCurry ? undefined : partials;\n    bitmask |= (isCurry ? WRAP_PARTIAL_FLAG : WRAP_PARTIAL_RIGHT_FLAG);\n    bitmask &= ~(isCurry ? WRAP_PARTIAL_RIGHT_FLAG : WRAP_PARTIAL_FLAG);\n    if (!(bitmask & WRAP_CURRY_BOUND_FLAG)) {\n        bitmask &= ~(WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG);\n    }\n    var newData = [\n        func, bitmask, thisArg, newPartials, newHolders, newPartialsRight,\n        newHoldersRight, argPos, ary, arity\n    ];\n    var result = wrapFunc.apply(undefined, newData);\n    if (_isLaziable_js_1.default(func)) {\n        _setData_js_1.default(result, newData);\n    }\n    result.placeholder = placeholder;\n    return _setWrapToString_js_1.default(result, func, bitmask);\n}\nexports.default = createRecurry;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getHolder(func) {\n    var object = func;\n    return object.placeholder;\n}\nexports.default = getHolder;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MAX_SAFE_INTEGER = 9007199254740991;\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\nfunction isIndex(value, length) {\n    length = length == null ? MAX_SAFE_INTEGER : length;\n    return !!length &&\n        (typeof value == 'number' || reIsUint.test(value)) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\nexports.default = isIndex;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _copyArray_js_1 = require(\"./_copyArray.js\");\nvar _isIndex_js_1 = require(\"./_isIndex.js\");\nvar nativeMin = Math.min;\nfunction reorder(array, indexes) {\n    var arrLength = array.length, length = nativeMin(indexes.length, arrLength), oldArray = _copyArray_js_1.default(array);\n    while (length--) {\n        var index = indexes[length];\n        array[length] = _isIndex_js_1.default(index, arrLength) ? oldArray[index] : undefined;\n    }\n    return array;\n}\nexports.default = reorder;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PLACEHOLDER = '__lodash_placeholder__';\nfunction replaceHolders(array, placeholder) {\n    var index = -1, length = array.length, resIndex = 0, result = [];\n    while (++index < length) {\n        var value = array[index];\n        if (value === placeholder || value === PLACEHOLDER) {\n            array[index] = PLACEHOLDER;\n            result[resIndex++] = index;\n        }\n    }\n    return result;\n}\nexports.default = replaceHolders;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _composeArgs_js_1 = require(\"./_composeArgs.js\");\nvar _composeArgsRight_js_1 = require(\"./_composeArgsRight.js\");\nvar _countHolders_js_1 = require(\"./_countHolders.js\");\nvar _createCtor_js_1 = require(\"./_createCtor.js\");\nvar _createRecurry_js_1 = require(\"./_createRecurry.js\");\nvar _getHolder_js_1 = require(\"./_getHolder.js\");\nvar _reorder_js_1 = require(\"./_reorder.js\");\nvar _replaceHolders_js_1 = require(\"./_replaceHolders.js\");\nvar _root_js_1 = require(\"./_root.js\");\nvar WRAP_BIND_FLAG = 1, WRAP_BIND_KEY_FLAG = 2, WRAP_CURRY_FLAG = 8, WRAP_CURRY_RIGHT_FLAG = 16, WRAP_ARY_FLAG = 128, WRAP_FLIP_FLAG = 512;\nfunction createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {\n    var isAry = bitmask & WRAP_ARY_FLAG, isBind = bitmask & WRAP_BIND_FLAG, isBindKey = bitmask & WRAP_BIND_KEY_FLAG, isCurried = bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG), isFlip = bitmask & WRAP_FLIP_FLAG, Ctor = isBindKey ? undefined : _createCtor_js_1.default(func);\n    function wrapper() {\n        var length = arguments.length, args = Array(length), index = length;\n        while (index--) {\n            args[index] = arguments[index];\n        }\n        if (isCurried) {\n            var placeholder = _getHolder_js_1.default(wrapper), holdersCount = _countHolders_js_1.default(args, placeholder);\n        }\n        if (partials) {\n            args = _composeArgs_js_1.default(args, partials, holders, isCurried);\n        }\n        if (partialsRight) {\n            args = _composeArgsRight_js_1.default(args, partialsRight, holdersRight, isCurried);\n        }\n        length -= holdersCount;\n        if (isCurried && length < arity) {\n            var newHolders = _replaceHolders_js_1.default(args, placeholder);\n            return _createRecurry_js_1.default(func, bitmask, createHybrid, wrapper.placeholder, thisArg, args, newHolders, argPos, ary, arity - length);\n        }\n        var thisBinding = isBind ? thisArg : this, fn = isBindKey ? thisBinding[func] : func;\n        length = args.length;\n        if (argPos) {\n            args = _reorder_js_1.default(args, argPos);\n        }\n        else if (isFlip && length > 1) {\n            args.reverse();\n        }\n        if (isAry && ary < length) {\n            args.length = ary;\n        }\n        if (this && this !== _root_js_1.default && this instanceof wrapper) {\n            fn = Ctor || _createCtor_js_1.default(fn);\n        }\n        return fn.apply(thisBinding, args);\n    }\n    return wrapper;\n}\nexports.default = createHybrid;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _apply_js_1 = require(\"./_apply.js\");\nvar _createCtor_js_1 = require(\"./_createCtor.js\");\nvar _createHybrid_js_1 = require(\"./_createHybrid.js\");\nvar _createRecurry_js_1 = require(\"./_createRecurry.js\");\nvar _getHolder_js_1 = require(\"./_getHolder.js\");\nvar _replaceHolders_js_1 = require(\"./_replaceHolders.js\");\nvar _root_js_1 = require(\"./_root.js\");\nfunction createCurry(func, bitmask, arity) {\n    var Ctor = _createCtor_js_1.default(func);\n    function wrapper() {\n        var length = arguments.length, args = Array(length), index = length, placeholder = _getHolder_js_1.default(wrapper);\n        while (index--) {\n            args[index] = arguments[index];\n        }\n        var holders = (length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder)\n            ? []\n            : _replaceHolders_js_1.default(args, placeholder);\n        length -= holders.length;\n        if (length < arity) {\n            return _createRecurry_js_1.default(func, bitmask, _createHybrid_js_1.default, wrapper.placeholder, undefined, args, holders, undefined, undefined, arity - length);\n        }\n        var fn = (this && this !== _root_js_1.default && this instanceof wrapper) ? Ctor : func;\n        return _apply_js_1.default(fn, this, args);\n    }\n    return wrapper;\n}\nexports.default = createCurry;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _apply_js_1 = require(\"./_apply.js\");\nvar _createCtor_js_1 = require(\"./_createCtor.js\");\nvar _root_js_1 = require(\"./_root.js\");\nvar WRAP_BIND_FLAG = 1;\nfunction createPartial(func, bitmask, thisArg, partials) {\n    var isBind = bitmask & WRAP_BIND_FLAG, Ctor = _createCtor_js_1.default(func);\n    function wrapper() {\n        var argsIndex = -1, argsLength = arguments.length, leftIndex = -1, leftLength = partials.length, args = Array(leftLength + argsLength), fn = (this && this !== _root_js_1.default && this instanceof wrapper) ? Ctor : func;\n        while (++leftIndex < leftLength) {\n            args[leftIndex] = partials[leftIndex];\n        }\n        while (argsLength--) {\n            args[leftIndex++] = arguments[++argsIndex];\n        }\n        return _apply_js_1.default(fn, isBind ? thisArg : this, args);\n    }\n    return wrapper;\n}\nexports.default = createPartial;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _composeArgs_js_1 = require(\"./_composeArgs.js\");\nvar _composeArgsRight_js_1 = require(\"./_composeArgsRight.js\");\nvar _replaceHolders_js_1 = require(\"./_replaceHolders.js\");\nvar PLACEHOLDER = '__lodash_placeholder__';\nvar WRAP_BIND_FLAG = 1, WRAP_BIND_KEY_FLAG = 2, WRAP_CURRY_BOUND_FLAG = 4, WRAP_CURRY_FLAG = 8, WRAP_ARY_FLAG = 128, WRAP_REARG_FLAG = 256;\nvar nativeMin = Math.min;\nfunction mergeData(data, source) {\n    var bitmask = data[1], srcBitmask = source[1], newBitmask = bitmask | srcBitmask, isCommon = newBitmask < (WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG | WRAP_ARY_FLAG);\n    var isCombo = ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_CURRY_FLAG)) ||\n        ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_REARG_FLAG) && (data[7].length <= source[8])) ||\n        ((srcBitmask == (WRAP_ARY_FLAG | WRAP_REARG_FLAG)) && (source[7].length <= source[8]) && (bitmask == WRAP_CURRY_FLAG));\n    if (!(isCommon || isCombo)) {\n        return data;\n    }\n    if (srcBitmask & WRAP_BIND_FLAG) {\n        data[2] = source[2];\n        newBitmask |= bitmask & WRAP_BIND_FLAG ? 0 : WRAP_CURRY_BOUND_FLAG;\n    }\n    var value = source[3];\n    if (value) {\n        var partials = data[3];\n        data[3] = partials ? _composeArgs_js_1.default(partials, value, source[4]) : value;\n        data[4] = partials ? _replaceHolders_js_1.default(data[3], PLACEHOLDER) : source[4];\n    }\n    value = source[5];\n    if (value) {\n        partials = data[5];\n        data[5] = partials ? _composeArgsRight_js_1.default(partials, value, source[6]) : value;\n        data[6] = partials ? _replaceHolders_js_1.default(data[5], PLACEHOLDER) : source[6];\n    }\n    value = source[7];\n    if (value) {\n        data[7] = value;\n    }\n    if (srcBitmask & WRAP_ARY_FLAG) {\n        data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);\n    }\n    if (data[9] == null) {\n        data[9] = source[9];\n    }\n    data[0] = source[0];\n    data[1] = newBitmask;\n    return data;\n}\nexports.default = mergeData;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isObject_js_1 = require(\"./isObject.js\");\nvar isSymbol_js_1 = require(\"./isSymbol.js\");\nvar NAN = 0 / 0;\nvar reTrim = /^\\s+|\\s+$/g;\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\nvar reIsBinary = /^0b[01]+$/i;\nvar reIsOctal = /^0o[0-7]+$/i;\nvar freeParseInt = parseInt;\nfunction toNumber(value) {\n    if (typeof value == 'number') {\n        return value;\n    }\n    if (isSymbol_js_1.default(value)) {\n        return NAN;\n    }\n    if (isObject_js_1.default(value)) {\n        var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n        value = isObject_js_1.default(other) ? (other + '') : other;\n    }\n    if (typeof value != 'string') {\n        return value === 0 ? value : +value;\n    }\n    value = value.replace(reTrim, '');\n    var isBinary = reIsBinary.test(value);\n    return (isBinary || reIsOctal.test(value))\n        ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n        : (reIsBadHex.test(value) ? NAN : +value);\n}\nexports.default = toNumber;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar toNumber_js_1 = require(\"./toNumber.js\");\nvar INFINITY = 1 / 0, MAX_INTEGER = 1.7976931348623157e+308;\nfunction toFinite(value) {\n    if (!value) {\n        return value === 0 ? value : 0;\n    }\n    value = toNumber_js_1.default(value);\n    if (value === INFINITY || value === -INFINITY) {\n        var sign = (value < 0 ? -1 : 1);\n        return sign * MAX_INTEGER;\n    }\n    return value === value ? value : 0;\n}\nexports.default = toFinite;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar toFinite_js_1 = require(\"./toFinite.js\");\nfunction toInteger(value) {\n    var result = toFinite_js_1.default(value), remainder = result % 1;\n    return result === result ? (remainder ? result - remainder : result) : 0;\n}\nexports.default = toInteger;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _baseSetData_js_1 = require(\"./_baseSetData.js\");\nvar _createBind_js_1 = require(\"./_createBind.js\");\nvar _createCurry_js_1 = require(\"./_createCurry.js\");\nvar _createHybrid_js_1 = require(\"./_createHybrid.js\");\nvar _createPartial_js_1 = require(\"./_createPartial.js\");\nvar _getData_js_1 = require(\"./_getData.js\");\nvar _mergeData_js_1 = require(\"./_mergeData.js\");\nvar _setData_js_1 = require(\"./_setData.js\");\nvar _setWrapToString_js_1 = require(\"./_setWrapToString.js\");\nvar toInteger_js_1 = require(\"./toInteger.js\");\nvar FUNC_ERROR_TEXT = 'Expected a function';\nvar WRAP_BIND_FLAG = 1, WRAP_BIND_KEY_FLAG = 2, WRAP_CURRY_FLAG = 8, WRAP_CURRY_RIGHT_FLAG = 16, WRAP_PARTIAL_FLAG = 32, WRAP_PARTIAL_RIGHT_FLAG = 64;\nvar nativeMax = Math.max;\nfunction createWrap(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {\n    var isBindKey = bitmask & WRAP_BIND_KEY_FLAG;\n    if (!isBindKey && typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n    }\n    var length = partials ? partials.length : 0;\n    if (!length) {\n        bitmask &= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);\n        partials = holders = undefined;\n    }\n    ary = ary === undefined ? ary : nativeMax(toInteger_js_1.default(ary), 0);\n    arity = arity === undefined ? arity : toInteger_js_1.default(arity);\n    length -= holders ? holders.length : 0;\n    if (bitmask & WRAP_PARTIAL_RIGHT_FLAG) {\n        var partialsRight = partials, holdersRight = holders;\n        partials = holders = undefined;\n    }\n    var data = isBindKey ? undefined : _getData_js_1.default(func);\n    var newData = [\n        func, bitmask, thisArg, partials, holders, partialsRight, holdersRight,\n        argPos, ary, arity\n    ];\n    if (data) {\n        _mergeData_js_1.default(newData, data);\n    }\n    func = newData[0];\n    bitmask = newData[1];\n    thisArg = newData[2];\n    partials = newData[3];\n    holders = newData[4];\n    arity = newData[9] = newData[9] === undefined\n        ? (isBindKey ? 0 : func.length)\n        : nativeMax(newData[9] - length, 0);\n    if (!arity && bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG)) {\n        bitmask &= ~(WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG);\n    }\n    if (!bitmask || bitmask == WRAP_BIND_FLAG) {\n        var result = _createBind_js_1.default(func, bitmask, thisArg);\n    }\n    else if (bitmask == WRAP_CURRY_FLAG || bitmask == WRAP_CURRY_RIGHT_FLAG) {\n        result = _createCurry_js_1.default(func, bitmask, arity);\n    }\n    else if ((bitmask == WRAP_PARTIAL_FLAG || bitmask == (WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG)) && !holders.length) {\n        result = _createPartial_js_1.default(func, bitmask, thisArg, partials);\n    }\n    else {\n        result = _createHybrid_js_1.default.apply(undefined, newData);\n    }\n    var setter = data ? _baseSetData_js_1.default : _setData_js_1.default;\n    return _setWrapToString_js_1.default(setter(result, newData), func, bitmask);\n}\nexports.default = createWrap;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _createWrap_js_1 = require(\"./_createWrap.js\");\nvar WRAP_CURRY_FLAG = 8;\nfunction curry(func, arity, guard) {\n    arity = guard ? undefined : arity;\n    var result = _createWrap_js_1.default(func, WRAP_CURRY_FLAG, undefined, undefined, undefined, undefined, undefined, arity);\n    result.placeholder = curry.placeholder;\n    return result;\n}\ncurry.placeholder = {};\nexports.default = curry;\n","import { IO } from \"wonder-fantasy-land/dist/es2015/types/IO\";\r\nimport curry from \"wonder-lodash/curry\";\r\nimport { Map } from \"immutable\";\r\nimport { ContextConfigOptionsData } from \"../renderer/type/dataType\";\r\n\r\nexport const getCanvas = (state: Map<any, any>): HTMLCanvasElement => {\r\n    return state.getIn([\"View\", \"dom\"]);\r\n}\r\n\r\nexport const setCanvas = curry((dom: HTMLCanvasElement, state: Map<any, any>) => {\r\n    return state.setIn([\"View\", \"dom\"], dom);\r\n});\r\n\r\nexport const getX = curry((dom: HTMLCanvasElement) => {\r\n    return Number(dom.style.left.slice(0, -2));\r\n})\r\n\r\nexport const setX = curry((x: number, dom: HTMLCanvasElement) => {\r\n    return IO.of(() => {\r\n        dom.style.left = `${x}px`;\r\n\r\n        return dom;\r\n    });\r\n})\r\n\r\nexport const getY = curry((dom: HTMLCanvasElement) => {\r\n    return Number(dom.style.top.slice(0, -2));\r\n})\r\n\r\nexport const setY = curry((y: number, dom: HTMLCanvasElement) => {\r\n    return IO.of(() => {\r\n        dom.style.top = `${y}px`;\r\n\r\n        return dom;\r\n    });\r\n})\r\n\r\nexport const getWidth = curry((dom: HTMLCanvasElement) => {\r\n    return dom.clientWidth;\r\n})\r\n\r\nexport const setWidth = curry((width: number, dom: HTMLCanvasElement) => {\r\n    return IO.of(() => {\r\n        dom.width = width;\r\n\r\n        return dom;\r\n    });\r\n})\r\n\r\nexport const getHeight = curry((dom: HTMLCanvasElement) => {\r\n    return dom.clientHeight;\r\n})\r\n\r\nexport const setHeight = curry((height: number, dom: HTMLCanvasElement) => {\r\n    return IO.of(() => {\r\n        dom.height = height;\r\n\r\n        return dom;\r\n    });\r\n})\r\n\r\nexport const getStyleWidth = curry((dom: HTMLCanvasElement) => {\r\n    return dom.style.width;\r\n})\r\n\r\nexport const setStyleWidth = curry((width: string, dom: HTMLCanvasElement) => {\r\n    return IO.of(() => {\r\n        dom.style.width = width;\r\n\r\n        return dom;\r\n    });\r\n})\r\n\r\nexport const getStyleHeight = curry((dom: HTMLCanvasElement) => {\r\n    return dom.style.height;\r\n})\r\n\r\nexport const setStyleHeight = curry((height: string, dom: HTMLCanvasElement) => {\r\n    return IO.of(() => {\r\n        dom.style.height = height;\r\n\r\n        return dom;\r\n    });\r\n})\r\n\r\nexport const initCanvas = (dom: HTMLCanvasElement) => {\r\n    return IO.of(() => {\r\n        dom.style.cssText = \"position:absolute;left:0;top:0;\";\r\n\r\n        return dom;\r\n    });\r\n}\r\n\r\nexport const getWebgl1Context = (options: ContextConfigOptionsData, dom: HTMLCanvasElement) => {\r\n    return getOnlyWebgl1Context(options, dom);\r\n}\r\n\r\nexport const getWebgl2Context = (options: ContextConfigOptionsData, dom: HTMLCanvasElement) => {\r\n    return getOnlyWebgl2Context(options, dom);\r\n}\r\n\r\nexport const getOnlyWebgl1Context = (options: ContextConfigOptionsData, dom: HTMLCanvasElement) => {\r\n    return dom.getContext(\"webgl\", options) || dom.getContext(\"experimental-webgl\", options);\r\n}\r\n\r\nexport const getOnlyWebgl2Context = (options: ContextConfigOptionsData, dom: HTMLCanvasElement) => {\r\n    return dom.getContext(\"webgl2\", options);\r\n}\r\n\r\n","import curry from \"wonder-lodash/curry\";\r\nimport flowRight from \"wonder-lodash/flowRight\";\r\nimport { filter, forEach } from \"./arrayUtils\";\r\n\r\nexport const compose = flowRight;\r\n\r\nexport const chain = curry((f: Function, m: any) => {\r\n    return m.chain(f);\r\n})\r\n\r\nexport const map = curry((f: Function, m: any) => {\r\n    return m.map(f);\r\n})\r\n\r\nexport const filterArray = curry((f: (item: any) => boolean, arr: Array<any>) => {\r\n    return filter(arr, f);\r\n})\r\n\r\nexport const forEachArray = curry((f: (item: any, index: number) => void, arr: Array<any>) => {\r\n    return forEach(arr, f);\r\n})\r\n","export enum EScreenSize {\r\n    FULL\r\n}","import { ClassUtils } from \"../../../utils/ClassUtils\";\r\n\r\nexport function registerClass(className: string) {\r\n    return function(_class) {\r\n        ClassUtils.addClassNameAttributeToClass(className, _class);\r\n        ClassUtils.addClass(className, _class);\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Vector4 } from \"./Vector4\";\r\nimport { Matrix3 } from \"./Matrix3\";\r\nimport { Matrix4 } from \"./Matrix4\";\r\n\r\ndeclare var Math: any;\r\n\r\n@registerClass(\"Vector3\")\r\nexport class Vector3 {\r\n    public static up = null;\r\n    public static forward = null;\r\n    public static right = null;\r\n\r\n    public static create(x: number, y: number, z: number): Vector3;\r\n    public static create(): Vector3;\r\n\r\n    public static create(...args): Vector3 {\r\n        var m = null;\r\n\r\n        if (args.length === 0) {\r\n            m = new this();\r\n        }\r\n        else {\r\n            m = new this(args[0], args[1], args[2]);\r\n        }\r\n\r\n        return m;\r\n    }\r\n\r\n    constructor(x: number, y: number, z: number);\r\n    constructor();\r\n\r\n    constructor(...args) {\r\n        this.values = new Float32Array(3);\r\n\r\n        if (args.length > 0) {\r\n            this.values[0] = args[0];\r\n            this.values[1] = args[1];\r\n            this.values[2] = args[2];\r\n        }\r\n    }\r\n\r\n    get x() {\r\n        return this.values[0];\r\n    }\r\n    set x(x: number) {\r\n        this.values[0] = x;\r\n    }\r\n\r\n    get y() {\r\n        return this.values[1];\r\n    }\r\n    set y(y: number) {\r\n        this.values[1] = y;\r\n    }\r\n\r\n    get z() {\r\n        return this.values[2];\r\n    }\r\n    set z(z: number) {\r\n        this.values[2] = z;\r\n    }\r\n\r\n    public values: Float32Array = null;\r\n\r\n    public normalize(): Vector3 {\r\n        var v = this.values;\r\n        var d = Math.sqrt(\r\n            v[0] * v[0] + v[1] * v[1] + v[2] * v[2]\r\n        );\r\n\r\n        if (d === 0) {\r\n            v[0] = 0;\r\n            v[1] = 0;\r\n            v[2] = 0;\r\n            return this;\r\n        }\r\n\r\n        v[0] = v[0] / d;\r\n        v[1] = v[1] / d;\r\n        v[2] = v[2] / d;\r\n\r\n        // for jasmine test:\r\n        // -0.isEqual(0);//not pass, so here change -0 to 0\r\n        if (v[0] === -0) {\r\n            v[0] = 0;\r\n        }\r\n        if (v[1] === -0) {\r\n            v[1] = 0;\r\n        }\r\n        if (v[2] === -0) {\r\n            v[2] = 0;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public isZero() {\r\n        var v = this.values;\r\n\r\n        return v[0] === 0 && v[1] === 0 && v[2] === 0;\r\n    }\r\n\r\n    public scale(scalar: number);\r\n    public scale(x: number, y: number, z: number);\r\n\r\n    public scale(...args) {\r\n        var v = this.values;\r\n\r\n        if (args.length === 1) {\r\n            let scalar = args[0];\r\n\r\n            v[0] *= scalar;\r\n            v[1] *= scalar;\r\n            v[2] *= scalar;\r\n        }\r\n        else if (args.length === 3) {\r\n            let x = args[0],\r\n                y = args[1],\r\n                z = args[2];\r\n\r\n            v[0] *= x;\r\n            v[1] *= y;\r\n            v[2] *= z;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public set(v: Vector3);\r\n    public set(x: number, y: number, z: number);\r\n\r\n    public set(...args) {\r\n        if (args.length === 3) {\r\n            this.x = args[0];\r\n            this.y = args[1];\r\n            this.z = args[2];\r\n        }\r\n        else {\r\n            let v: Vector3 = args[0];\r\n\r\n            this.x = v.x;\r\n            this.y = v.y;\r\n            this.z = v.z;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public sub(v: Vector3): Vector3 {\r\n        this.values[0] = this.values[0] - v.values[0];\r\n        this.values[1] = this.values[1] - v.values[1];\r\n        this.values[2] = this.values[2] - v.values[2];\r\n\r\n        return this;\r\n    }\r\n\r\n    public sub2(v1: Vector3, v2: Vector3) {\r\n        this.values[0] = v1.values[0] - v2.values[0];\r\n        this.values[1] = v1.values[1] - v2.values[1];\r\n        this.values[2] = v1.values[2] - v2.values[2];\r\n\r\n        return this;\r\n    }\r\n\r\n    public add(v: Vector3) {\r\n        this.values[0] = this.values[0] + v.values[0];\r\n        this.values[1] = this.values[1] + v.values[1];\r\n        this.values[2] = this.values[2] + v.values[2];\r\n\r\n        return this;\r\n    }\r\n\r\n    public add2(v1: Vector3, v2: Vector3) {\r\n        this.values[0] = v1.values[0] + v2.values[0];\r\n        this.values[1] = v1.values[1] + v2.values[1];\r\n        this.values[2] = v1.values[2] + v2.values[2];\r\n\r\n        return this;\r\n    }\r\n\r\n    public mul(v: Vector3) {\r\n        this.values[0] = this.values[0] * v.values[0];\r\n        this.values[1] = this.values[1] * v.values[1];\r\n        this.values[2] = this.values[2] * v.values[2];\r\n\r\n        return this;\r\n    }\r\n\r\n    public mul2(v1: Vector3, v2: Vector3) {\r\n        this.values[0] = v1.values[0] * v2.values[0];\r\n        this.values[1] = v1.values[1] * v2.values[1];\r\n        this.values[2] = v1.values[2] * v2.values[2];\r\n\r\n        return this;\r\n    }\r\n\r\n    public reverse(): Vector3 {\r\n        this.values[0] = -this.values[0];\r\n        this.values[1] = -this.values[1];\r\n        this.values[2] = -this.values[2];\r\n\r\n        return this;\r\n    }\r\n\r\n    public clone(): Vector3 {\r\n        var result = Vector3.create(),\r\n            i = 0,\r\n            len = this.values.length;\r\n\r\n        for (i = 0; i < len; i++) {\r\n            result.values[i] = this.values[i];\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public toVector4(): Vector4 {\r\n        return Vector4.create(this.values[0], this.values[1], this.values[2], 1.0);\r\n    }\r\n\r\n    public length() {\r\n        var v = this.values;\r\n\r\n        return Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]);\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name cross\r\n     * @description Returns the result of a cross product operation performed on the two specified 3-dimensional vectors.\r\n     * @param {Vec3} lhs The first 3-dimensional vector operand of the cross product.\r\n     * @param {Vec3} rhs The second 3-dimensional vector operand of the cross product.\r\n     * @returns {Vec3} Self for chaining.\r\n     * @example\r\n     * var back = new Vec3().cross(Vec3.RIGHT, Vec3.UP);\r\n     *\r\n     * // Should print the Z axis (i.e. [0, 0, 1])\r\n     * console.log(\"The result of the cross product is: \" + back.toString());\r\n     */\r\n    public cross(lhs: Vector3, rhs: Vector3) {\r\n        var a, b, r, ax, ay, az, bx, by, bz;\r\n\r\n        a = lhs.values;\r\n        b = rhs.values;\r\n        r = this.values;\r\n\r\n        ax = a[0];\r\n        ay = a[1];\r\n        az = a[2];\r\n        bx = b[0];\r\n        by = b[1];\r\n        bz = b[2];\r\n\r\n        r[0] = ay * bz - by * az;\r\n        r[1] = az * bx - bz * ax;\r\n        r[2] = ax * by - bx * ay;\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name lerp\r\n     * @description Returns the result of a linear interpolation between two specified 3-dimensional vectors.\r\n     * @param {Vec3} lhs The 3-dimensional to interpolate from.\r\n     * @param {Vec3} rhs The 3-dimensional to interpolate to.\r\n     * @param {Number} alpha The value controlling the point of interpolation. Between 0 and 1, the linear interpolant\r\n     * will occur on a straight line between lhs and rhs. Outside of this range, the linear interpolant will occur on\r\n     * a ray extrapolated from this line.\r\n     * @returns {Vec3} Self for chaining.\r\n     * @example\r\n     * var a = new Vec3(0, 0, 0);\r\n     * var b = new Vec3(10, 10, 10);\r\n     * var r = new Vec3();\r\n     *\r\n     * r.lerp(a, b, 0);   // r is equal to a\r\n     * r.lerp(a, b, 0.5); // r is 5, 5, 5\r\n     * r.lerp(a, b, 1);   // r is equal to b\r\n     */\r\n    public lerp(lhs: Vector3, rhs: Vector3, alpha: number) {\r\n        var a = lhs.values,\r\n            b = rhs.values,\r\n            r = this.values;\r\n\r\n        r[0] = a[0] + alpha * (b[0] - a[0]);\r\n        r[1] = a[1] + alpha * (b[1] - a[1]);\r\n        r[2] = a[2] + alpha * (b[2] - a[2]);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name dot\r\n     * @description Returns the result of a dot product operation performed on the two specified 3-dimensional vectors.\r\n     * @param {Vec3} rhs The second 3-dimensional vector operand of the dot product.\r\n     * @returns {Number} The result of the dot product operation.\r\n     * @example\r\n     * var v1 = new Vec3(5, 10, 20);\r\n     * var v2 = new Vec3(10, 20, 40);\r\n     * var v1dotv2 = v1.dot(v2);\r\n     * console.log(\"The result of the dot product is: \" + v1dotv2);\r\n     */\r\n    public dot(rhs) {\r\n        var a = this.values,\r\n            b = rhs.values;\r\n\r\n        return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\r\n    }\r\n\r\n    public calAngleCos(v1: Vector3) {\r\n        var l = this.length() * v1.length();\r\n\r\n        if (l === 0) {\r\n            return NaN;\r\n        }\r\n\r\n        return this.dot(v1) / l;\r\n    }\r\n\r\n    public min(v: Vector3) {\r\n        if (this.x > v.x) {\r\n            this.x = v.x;\r\n        }\r\n        if (this.y > v.y) {\r\n            this.y = v.y;\r\n        }\r\n        if (this.z > v.z) {\r\n            this.z = v.z;\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public max(v: Vector3) {\r\n        if (this.x < v.x) {\r\n            this.x = v.x;\r\n        }\r\n        if (this.y < v.y) {\r\n            this.y = v.y;\r\n        }\r\n        if (this.z < v.z) {\r\n            this.z = v.z;\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public isEqual(v: Vector3) {\r\n        return this.x === v.x && this.y === v.y && this.z === v.z;\r\n    }\r\n\r\n    public toArray() {\r\n        return [this.x, this.y, this.z];\r\n    }\r\n\r\n    public applyMatrix3(m: Matrix3) {\r\n        var x = this.x,\r\n            y = this.y,\r\n            z = this.z,\r\n            e = m.values;\r\n\r\n        this.x = e[0] * x + e[3] * y + e[6] * z;\r\n        this.y = e[1] * x + e[4] * y + e[7] * z;\r\n        this.z = e[2] * x + e[5] * y + e[8] * z;\r\n\r\n        return this;\r\n    }\r\n\r\n    public applyMatrix4(m: Matrix4) {\r\n        var x = this.x,\r\n            y = this.y,\r\n            z = this.z,\r\n            e = m.values;\r\n\r\n        this.x = e[0] * x + e[4] * y + e[8] * z + e[12];\r\n        this.y = e[1] * x + e[5] * y + e[9] * z + e[13];\r\n        this.z = e[2] * x + e[6] * y + e[10] * z + e[14];\r\n\r\n        return this;\r\n    }\r\n\r\n    public distanceTo(v: Vector3) {\r\n        return Math.sqrt(this.distanceToSquared(v));\r\n    }\r\n\r\n    public distanceToSquared(v: Vector3) {\r\n        var dx = this.x - v.x,\r\n            dy = this.y - v.y,\r\n            dz = this.z - v.z;\r\n\r\n        return dx ** 2 + dy ** 2 + dz ** 2;\r\n    }\r\n}\r\n\r\n\r\nVector3.up = Vector3.create(0, 1, 0);\r\nVector3.forward = Vector3.create(0, 0, 1);\r\nVector3.right = Vector3.create(1, 0, 0);","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Vector3 } from \"./Vector3\";\r\n\r\ndeclare var Math: any;\r\n\r\n@registerClass(\"Vector4\")\r\nexport class Vector4 {\r\n    public static create(x, y, z, w);\r\n    public static create();\r\n\r\n    public static create(...args) {\r\n        var m = null;\r\n\r\n        if (args.length === 0) {\r\n            m = new this();\r\n        }\r\n        else {\r\n            m = new this(args[0], args[1], args[2], args[3]);\r\n        }\r\n\r\n        return m;\r\n    }\r\n\r\n    constructor(x, y, z, w);\r\n    constructor();\r\n\r\n    constructor(...args) {\r\n        this.values = new Float32Array(4);\r\n\r\n        if (args.length > 0) {\r\n            this.values[0] = args[0];\r\n            this.values[1] = args[1];\r\n            this.values[2] = args[2];\r\n            this.values[3] = args[3];\r\n        }\r\n    }\r\n\r\n    get x() {\r\n        return this.values[0];\r\n    }\r\n    set x(x: number) {\r\n        this.values[0] = x;\r\n    }\r\n\r\n    get y() {\r\n        return this.values[1];\r\n    }\r\n    set y(y: number) {\r\n        this.values[1] = y;\r\n    }\r\n\r\n    get z() {\r\n        return this.values[2];\r\n    }\r\n    set z(z: number) {\r\n        this.values[2] = z;\r\n    }\r\n\r\n    get w() {\r\n        return this.values[3];\r\n    }\r\n    set w(w: number) {\r\n        this.values[3] = w;\r\n    }\r\n\r\n    public values: Float32Array;\r\n\r\n    public normalize(): Vector4 {\r\n        var v = this.values;\r\n        var d = Math.sqrt(\r\n            v[0] * v[0] + v[1] * v[1] + v[2] * v[2] + v[3] * v[3]\r\n        );\r\n\r\n        if (d === 0) {\r\n            return Vector4.create(0, 0, 0, 0);\r\n        }\r\n\r\n        v[0] = v[0] / d;\r\n        v[1] = v[1] / d;\r\n        v[2] = v[2] / d;\r\n        v[3] = v[3] / d;\r\n\r\n        return this;\r\n    }\r\n\r\n    public isEqual(v: Vector4) {\r\n        return this.x === v.x && this.y === v.y && this.z === v.z && this.w === v.w;\r\n    }\r\n\r\n    public clone(): Vector4 {\r\n        return this.copyHelper(Vector4.create());\r\n    }\r\n\r\n    public toVector3(): Vector3 {\r\n        return Vector3.create(this.values[0], this.values[1], this.values[2]);\r\n    }\r\n\r\n    public lengthManhattan() {\r\n        return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w);\r\n    }\r\n\r\n    public multiplyScalar(scalar: number) {\r\n        this.x *= scalar;\r\n        this.y *= scalar;\r\n        this.z *= scalar;\r\n        this.w *= scalar;\r\n\r\n        return this;\r\n    }\r\n\r\n    public divideScalar(scalar: number) {\r\n        this.multiplyScalar(1 / scalar);\r\n\r\n        return this;\r\n    }\r\n\r\n    public dot(v: Vector4) {\r\n        return this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\r\n    }\r\n\r\n    public set(x: number, y: number, z: number, w: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        this.w = w;\r\n    }\r\n\r\n    public applyMatrix4(mat4Values: Float32Array, isChangeSelf: boolean = false): Vector4 {\r\n        var vec4 = this.values,\r\n            x: number = null,\r\n            y: number = null,\r\n            z: number = null,\r\n            w: number = null;\r\n\r\n        x = vec4[0] * mat4Values[0] + vec4[1] * mat4Values[4] + vec4[2] * mat4Values[8] + vec4[3] * mat4Values[12];\r\n        y = vec4[0] * mat4Values[1] + vec4[1] * mat4Values[5] + vec4[2] * mat4Values[9] + vec4[3] * mat4Values[13];\r\n        z = vec4[0] * mat4Values[2] + vec4[1] * mat4Values[6] + vec4[2] * mat4Values[10] + vec4[3] * mat4Values[14];\r\n        w = vec4[0] * mat4Values[3] + vec4[1] * mat4Values[7] + vec4[2] * mat4Values[11] + vec4[3] * mat4Values[15];\r\n\r\n        if (isChangeSelf) {\r\n            this.set(x, y, z, w);\r\n\r\n            return this;\r\n        }\r\n\r\n        return Vector4.create(x, y, z, w);\r\n    }\r\n\r\n\r\n    protected copyHelper(vector4: Vector4): any {\r\n        var result = vector4,\r\n            i = 0,\r\n            len = this.values.length;\r\n\r\n        for (i = 0; i < len; i++) {\r\n            result.values[i] = this.values[i];\r\n        }\r\n\r\n        return result;\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Vector4 } from \"../math/Vector4\";\r\n\r\n@registerClass(\"RectRegion\")\r\nexport class RectRegion extends Vector4 {\r\n    get width() {\r\n        return this.z;\r\n    }\r\n    set width(width: number) {\r\n        this.z = width;\r\n    }\r\n\r\n    get height() {\r\n        return this.w;\r\n    }\r\n    set height(height: number) {\r\n        this.w = height;\r\n    }\r\n\r\n    public clone(): RectRegion {\r\n        return this.copyHelper(RectRegion.create());\r\n    }\r\n\r\n    public isNotEmpty() {\r\n        return this.x !== 0\r\n            || this.y !== 0\r\n            || this.width !== 0\r\n            || this.height !== 0;\r\n    }\r\n}","import { root } from \"../definition/Variable\";\r\nimport { IO } from \"wonder-fantasy-land/dist/es2015/types/IO\";\r\n\r\nexport const getRootProperty = (propertyName: string) => {\r\n    return IO.of(() => {\r\n        return root[propertyName];\r\n    });\r\n}\r\n","/**\n *  Copyright (c) 2014-2015, Facebook, Inc.\n *  All rights reserved.\n *\n *  This source code is licensed under the BSD-style license found in the\n *  LICENSE file in the root directory of this source tree. An additional grant\n *  of patent rights can be found in the PATENTS file in the same directory.\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.Immutable = factory());\n}(this, function () { 'use strict';var SLICE$0 = Array.prototype.slice;\n\n  function createClass(ctor, superClass) {\n    if (superClass) {\n      ctor.prototype = Object.create(superClass.prototype);\n    }\n    ctor.prototype.constructor = ctor;\n  }\n\n  function Iterable(value) {\n      return isIterable(value) ? value : Seq(value);\n    }\n\n\n  createClass(KeyedIterable, Iterable);\n    function KeyedIterable(value) {\n      return isKeyed(value) ? value : KeyedSeq(value);\n    }\n\n\n  createClass(IndexedIterable, Iterable);\n    function IndexedIterable(value) {\n      return isIndexed(value) ? value : IndexedSeq(value);\n    }\n\n\n  createClass(SetIterable, Iterable);\n    function SetIterable(value) {\n      return isIterable(value) && !isAssociative(value) ? value : SetSeq(value);\n    }\n\n\n\n  function isIterable(maybeIterable) {\n    return !!(maybeIterable && maybeIterable[IS_ITERABLE_SENTINEL]);\n  }\n\n  function isKeyed(maybeKeyed) {\n    return !!(maybeKeyed && maybeKeyed[IS_KEYED_SENTINEL]);\n  }\n\n  function isIndexed(maybeIndexed) {\n    return !!(maybeIndexed && maybeIndexed[IS_INDEXED_SENTINEL]);\n  }\n\n  function isAssociative(maybeAssociative) {\n    return isKeyed(maybeAssociative) || isIndexed(maybeAssociative);\n  }\n\n  function isOrdered(maybeOrdered) {\n    return !!(maybeOrdered && maybeOrdered[IS_ORDERED_SENTINEL]);\n  }\n\n  Iterable.isIterable = isIterable;\n  Iterable.isKeyed = isKeyed;\n  Iterable.isIndexed = isIndexed;\n  Iterable.isAssociative = isAssociative;\n  Iterable.isOrdered = isOrdered;\n\n  Iterable.Keyed = KeyedIterable;\n  Iterable.Indexed = IndexedIterable;\n  Iterable.Set = SetIterable;\n\n\n  var IS_ITERABLE_SENTINEL = '@@__IMMUTABLE_ITERABLE__@@';\n  var IS_KEYED_SENTINEL = '@@__IMMUTABLE_KEYED__@@';\n  var IS_INDEXED_SENTINEL = '@@__IMMUTABLE_INDEXED__@@';\n  var IS_ORDERED_SENTINEL = '@@__IMMUTABLE_ORDERED__@@';\n\n  // Used for setting prototype methods that IE8 chokes on.\n  var DELETE = 'delete';\n\n  // Constants describing the size of trie nodes.\n  var SHIFT = 5; // Resulted in best performance after ______?\n  var SIZE = 1 << SHIFT;\n  var MASK = SIZE - 1;\n\n  // A consistent shared value representing \"not set\" which equals nothing other\n  // than itself, and nothing that could be provided externally.\n  var NOT_SET = {};\n\n  // Boolean references, Rough equivalent of `bool &`.\n  var CHANGE_LENGTH = { value: false };\n  var DID_ALTER = { value: false };\n\n  function MakeRef(ref) {\n    ref.value = false;\n    return ref;\n  }\n\n  function SetRef(ref) {\n    ref && (ref.value = true);\n  }\n\n  // A function which returns a value representing an \"owner\" for transient writes\n  // to tries. The return value will only ever equal itself, and will not equal\n  // the return of any subsequent call of this function.\n  function OwnerID() {}\n\n  // http://jsperf.com/copy-array-inline\n  function arrCopy(arr, offset) {\n    offset = offset || 0;\n    var len = Math.max(0, arr.length - offset);\n    var newArr = new Array(len);\n    for (var ii = 0; ii < len; ii++) {\n      newArr[ii] = arr[ii + offset];\n    }\n    return newArr;\n  }\n\n  function ensureSize(iter) {\n    if (iter.size === undefined) {\n      iter.size = iter.__iterate(returnTrue);\n    }\n    return iter.size;\n  }\n\n  function wrapIndex(iter, index) {\n    // This implements \"is array index\" which the ECMAString spec defines as:\n    //\n    //     A String property name P is an array index if and only if\n    //     ToString(ToUint32(P)) is equal to P and ToUint32(P) is not equal\n    //     to 2^32−1.\n    //\n    // http://www.ecma-international.org/ecma-262/6.0/#sec-array-exotic-objects\n    if (typeof index !== 'number') {\n      var uint32Index = index >>> 0; // N >>> 0 is shorthand for ToUint32\n      if ('' + uint32Index !== index || uint32Index === 4294967295) {\n        return NaN;\n      }\n      index = uint32Index;\n    }\n    return index < 0 ? ensureSize(iter) + index : index;\n  }\n\n  function returnTrue() {\n    return true;\n  }\n\n  function wholeSlice(begin, end, size) {\n    return (begin === 0 || (size !== undefined && begin <= -size)) &&\n      (end === undefined || (size !== undefined && end >= size));\n  }\n\n  function resolveBegin(begin, size) {\n    return resolveIndex(begin, size, 0);\n  }\n\n  function resolveEnd(end, size) {\n    return resolveIndex(end, size, size);\n  }\n\n  function resolveIndex(index, size, defaultIndex) {\n    return index === undefined ?\n      defaultIndex :\n      index < 0 ?\n        Math.max(0, size + index) :\n        size === undefined ?\n          index :\n          Math.min(size, index);\n  }\n\n  /* global Symbol */\n\n  var ITERATE_KEYS = 0;\n  var ITERATE_VALUES = 1;\n  var ITERATE_ENTRIES = 2;\n\n  var REAL_ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator';\n\n  var ITERATOR_SYMBOL = REAL_ITERATOR_SYMBOL || FAUX_ITERATOR_SYMBOL;\n\n\n  function Iterator(next) {\n      this.next = next;\n    }\n\n    Iterator.prototype.toString = function() {\n      return '[Iterator]';\n    };\n\n\n  Iterator.KEYS = ITERATE_KEYS;\n  Iterator.VALUES = ITERATE_VALUES;\n  Iterator.ENTRIES = ITERATE_ENTRIES;\n\n  Iterator.prototype.inspect =\n  Iterator.prototype.toSource = function () { return this.toString(); }\n  Iterator.prototype[ITERATOR_SYMBOL] = function () {\n    return this;\n  };\n\n\n  function iteratorValue(type, k, v, iteratorResult) {\n    var value = type === 0 ? k : type === 1 ? v : [k, v];\n    iteratorResult ? (iteratorResult.value = value) : (iteratorResult = {\n      value: value, done: false\n    });\n    return iteratorResult;\n  }\n\n  function iteratorDone() {\n    return { value: undefined, done: true };\n  }\n\n  function hasIterator(maybeIterable) {\n    return !!getIteratorFn(maybeIterable);\n  }\n\n  function isIterator(maybeIterator) {\n    return maybeIterator && typeof maybeIterator.next === 'function';\n  }\n\n  function getIterator(iterable) {\n    var iteratorFn = getIteratorFn(iterable);\n    return iteratorFn && iteratorFn.call(iterable);\n  }\n\n  function getIteratorFn(iterable) {\n    var iteratorFn = iterable && (\n      (REAL_ITERATOR_SYMBOL && iterable[REAL_ITERATOR_SYMBOL]) ||\n      iterable[FAUX_ITERATOR_SYMBOL]\n    );\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  function isArrayLike(value) {\n    return value && typeof value.length === 'number';\n  }\n\n  createClass(Seq, Iterable);\n    function Seq(value) {\n      return value === null || value === undefined ? emptySequence() :\n        isIterable(value) ? value.toSeq() : seqFromValue(value);\n    }\n\n    Seq.of = function(/*...values*/) {\n      return Seq(arguments);\n    };\n\n    Seq.prototype.toSeq = function() {\n      return this;\n    };\n\n    Seq.prototype.toString = function() {\n      return this.__toString('Seq {', '}');\n    };\n\n    Seq.prototype.cacheResult = function() {\n      if (!this._cache && this.__iterateUncached) {\n        this._cache = this.entrySeq().toArray();\n        this.size = this._cache.length;\n      }\n      return this;\n    };\n\n    // abstract __iterateUncached(fn, reverse)\n\n    Seq.prototype.__iterate = function(fn, reverse) {\n      return seqIterate(this, fn, reverse, true);\n    };\n\n    // abstract __iteratorUncached(type, reverse)\n\n    Seq.prototype.__iterator = function(type, reverse) {\n      return seqIterator(this, type, reverse, true);\n    };\n\n\n\n  createClass(KeyedSeq, Seq);\n    function KeyedSeq(value) {\n      return value === null || value === undefined ?\n        emptySequence().toKeyedSeq() :\n        isIterable(value) ?\n          (isKeyed(value) ? value.toSeq() : value.fromEntrySeq()) :\n          keyedSeqFromValue(value);\n    }\n\n    KeyedSeq.prototype.toKeyedSeq = function() {\n      return this;\n    };\n\n\n\n  createClass(IndexedSeq, Seq);\n    function IndexedSeq(value) {\n      return value === null || value === undefined ? emptySequence() :\n        !isIterable(value) ? indexedSeqFromValue(value) :\n        isKeyed(value) ? value.entrySeq() : value.toIndexedSeq();\n    }\n\n    IndexedSeq.of = function(/*...values*/) {\n      return IndexedSeq(arguments);\n    };\n\n    IndexedSeq.prototype.toIndexedSeq = function() {\n      return this;\n    };\n\n    IndexedSeq.prototype.toString = function() {\n      return this.__toString('Seq [', ']');\n    };\n\n    IndexedSeq.prototype.__iterate = function(fn, reverse) {\n      return seqIterate(this, fn, reverse, false);\n    };\n\n    IndexedSeq.prototype.__iterator = function(type, reverse) {\n      return seqIterator(this, type, reverse, false);\n    };\n\n\n\n  createClass(SetSeq, Seq);\n    function SetSeq(value) {\n      return (\n        value === null || value === undefined ? emptySequence() :\n        !isIterable(value) ? indexedSeqFromValue(value) :\n        isKeyed(value) ? value.entrySeq() : value\n      ).toSetSeq();\n    }\n\n    SetSeq.of = function(/*...values*/) {\n      return SetSeq(arguments);\n    };\n\n    SetSeq.prototype.toSetSeq = function() {\n      return this;\n    };\n\n\n\n  Seq.isSeq = isSeq;\n  Seq.Keyed = KeyedSeq;\n  Seq.Set = SetSeq;\n  Seq.Indexed = IndexedSeq;\n\n  var IS_SEQ_SENTINEL = '@@__IMMUTABLE_SEQ__@@';\n\n  Seq.prototype[IS_SEQ_SENTINEL] = true;\n\n\n\n  createClass(ArraySeq, IndexedSeq);\n    function ArraySeq(array) {\n      this._array = array;\n      this.size = array.length;\n    }\n\n    ArraySeq.prototype.get = function(index, notSetValue) {\n      return this.has(index) ? this._array[wrapIndex(this, index)] : notSetValue;\n    };\n\n    ArraySeq.prototype.__iterate = function(fn, reverse) {\n      var array = this._array;\n      var maxIndex = array.length - 1;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        if (fn(array[reverse ? maxIndex - ii : ii], ii, this) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    };\n\n    ArraySeq.prototype.__iterator = function(type, reverse) {\n      var array = this._array;\n      var maxIndex = array.length - 1;\n      var ii = 0;\n      return new Iterator(function() \n        {return ii > maxIndex ?\n          iteratorDone() :\n          iteratorValue(type, ii, array[reverse ? maxIndex - ii++ : ii++])}\n      );\n    };\n\n\n\n  createClass(ObjectSeq, KeyedSeq);\n    function ObjectSeq(object) {\n      var keys = Object.keys(object);\n      this._object = object;\n      this._keys = keys;\n      this.size = keys.length;\n    }\n\n    ObjectSeq.prototype.get = function(key, notSetValue) {\n      if (notSetValue !== undefined && !this.has(key)) {\n        return notSetValue;\n      }\n      return this._object[key];\n    };\n\n    ObjectSeq.prototype.has = function(key) {\n      return this._object.hasOwnProperty(key);\n    };\n\n    ObjectSeq.prototype.__iterate = function(fn, reverse) {\n      var object = this._object;\n      var keys = this._keys;\n      var maxIndex = keys.length - 1;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        var key = keys[reverse ? maxIndex - ii : ii];\n        if (fn(object[key], key, this) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    };\n\n    ObjectSeq.prototype.__iterator = function(type, reverse) {\n      var object = this._object;\n      var keys = this._keys;\n      var maxIndex = keys.length - 1;\n      var ii = 0;\n      return new Iterator(function()  {\n        var key = keys[reverse ? maxIndex - ii : ii];\n        return ii++ > maxIndex ?\n          iteratorDone() :\n          iteratorValue(type, key, object[key]);\n      });\n    };\n\n  ObjectSeq.prototype[IS_ORDERED_SENTINEL] = true;\n\n\n  createClass(IterableSeq, IndexedSeq);\n    function IterableSeq(iterable) {\n      this._iterable = iterable;\n      this.size = iterable.length || iterable.size;\n    }\n\n    IterableSeq.prototype.__iterateUncached = function(fn, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var iterable = this._iterable;\n      var iterator = getIterator(iterable);\n      var iterations = 0;\n      if (isIterator(iterator)) {\n        var step;\n        while (!(step = iterator.next()).done) {\n          if (fn(step.value, iterations++, this) === false) {\n            break;\n          }\n        }\n      }\n      return iterations;\n    };\n\n    IterableSeq.prototype.__iteratorUncached = function(type, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterable = this._iterable;\n      var iterator = getIterator(iterable);\n      if (!isIterator(iterator)) {\n        return new Iterator(iteratorDone);\n      }\n      var iterations = 0;\n      return new Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step : iteratorValue(type, iterations++, step.value);\n      });\n    };\n\n\n\n  createClass(IteratorSeq, IndexedSeq);\n    function IteratorSeq(iterator) {\n      this._iterator = iterator;\n      this._iteratorCache = [];\n    }\n\n    IteratorSeq.prototype.__iterateUncached = function(fn, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var iterator = this._iterator;\n      var cache = this._iteratorCache;\n      var iterations = 0;\n      while (iterations < cache.length) {\n        if (fn(cache[iterations], iterations++, this) === false) {\n          return iterations;\n        }\n      }\n      var step;\n      while (!(step = iterator.next()).done) {\n        var val = step.value;\n        cache[iterations] = val;\n        if (fn(val, iterations++, this) === false) {\n          break;\n        }\n      }\n      return iterations;\n    };\n\n    IteratorSeq.prototype.__iteratorUncached = function(type, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterator = this._iterator;\n      var cache = this._iteratorCache;\n      var iterations = 0;\n      return new Iterator(function()  {\n        if (iterations >= cache.length) {\n          var step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n          cache[iterations] = step.value;\n        }\n        return iteratorValue(type, iterations, cache[iterations++]);\n      });\n    };\n\n\n\n\n  // # pragma Helper functions\n\n  function isSeq(maybeSeq) {\n    return !!(maybeSeq && maybeSeq[IS_SEQ_SENTINEL]);\n  }\n\n  var EMPTY_SEQ;\n\n  function emptySequence() {\n    return EMPTY_SEQ || (EMPTY_SEQ = new ArraySeq([]));\n  }\n\n  function keyedSeqFromValue(value) {\n    var seq =\n      Array.isArray(value) ? new ArraySeq(value).fromEntrySeq() :\n      isIterator(value) ? new IteratorSeq(value).fromEntrySeq() :\n      hasIterator(value) ? new IterableSeq(value).fromEntrySeq() :\n      typeof value === 'object' ? new ObjectSeq(value) :\n      undefined;\n    if (!seq) {\n      throw new TypeError(\n        'Expected Array or iterable object of [k, v] entries, '+\n        'or keyed object: ' + value\n      );\n    }\n    return seq;\n  }\n\n  function indexedSeqFromValue(value) {\n    var seq = maybeIndexedSeqFromValue(value);\n    if (!seq) {\n      throw new TypeError(\n        'Expected Array or iterable object of values: ' + value\n      );\n    }\n    return seq;\n  }\n\n  function seqFromValue(value) {\n    var seq = maybeIndexedSeqFromValue(value) ||\n      (typeof value === 'object' && new ObjectSeq(value));\n    if (!seq) {\n      throw new TypeError(\n        'Expected Array or iterable object of values, or keyed object: ' + value\n      );\n    }\n    return seq;\n  }\n\n  function maybeIndexedSeqFromValue(value) {\n    return (\n      isArrayLike(value) ? new ArraySeq(value) :\n      isIterator(value) ? new IteratorSeq(value) :\n      hasIterator(value) ? new IterableSeq(value) :\n      undefined\n    );\n  }\n\n  function seqIterate(seq, fn, reverse, useKeys) {\n    var cache = seq._cache;\n    if (cache) {\n      var maxIndex = cache.length - 1;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        var entry = cache[reverse ? maxIndex - ii : ii];\n        if (fn(entry[1], useKeys ? entry[0] : ii, seq) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    }\n    return seq.__iterateUncached(fn, reverse);\n  }\n\n  function seqIterator(seq, type, reverse, useKeys) {\n    var cache = seq._cache;\n    if (cache) {\n      var maxIndex = cache.length - 1;\n      var ii = 0;\n      return new Iterator(function()  {\n        var entry = cache[reverse ? maxIndex - ii : ii];\n        return ii++ > maxIndex ?\n          iteratorDone() :\n          iteratorValue(type, useKeys ? entry[0] : ii - 1, entry[1]);\n      });\n    }\n    return seq.__iteratorUncached(type, reverse);\n  }\n\n  function fromJS(json, converter) {\n    return converter ?\n      fromJSWith(converter, json, '', {'': json}) :\n      fromJSDefault(json);\n  }\n\n  function fromJSWith(converter, json, key, parentJSON) {\n    if (Array.isArray(json)) {\n      return converter.call(parentJSON, key, IndexedSeq(json).map(function(v, k)  {return fromJSWith(converter, v, k, json)}));\n    }\n    if (isPlainObj(json)) {\n      return converter.call(parentJSON, key, KeyedSeq(json).map(function(v, k)  {return fromJSWith(converter, v, k, json)}));\n    }\n    return json;\n  }\n\n  function fromJSDefault(json) {\n    if (Array.isArray(json)) {\n      return IndexedSeq(json).map(fromJSDefault).toList();\n    }\n    if (isPlainObj(json)) {\n      return KeyedSeq(json).map(fromJSDefault).toMap();\n    }\n    return json;\n  }\n\n  function isPlainObj(value) {\n    return value && (value.constructor === Object || value.constructor === undefined);\n  }\n\n  /**\n   * An extension of the \"same-value\" algorithm as [described for use by ES6 Map\n   * and Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map#Key_equality)\n   *\n   * NaN is considered the same as NaN, however -0 and 0 are considered the same\n   * value, which is different from the algorithm described by\n   * [`Object.is`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is).\n   *\n   * This is extended further to allow Objects to describe the values they\n   * represent, by way of `valueOf` or `equals` (and `hashCode`).\n   *\n   * Note: because of this extension, the key equality of Immutable.Map and the\n   * value equality of Immutable.Set will differ from ES6 Map and Set.\n   *\n   * ### Defining custom values\n   *\n   * The easiest way to describe the value an object represents is by implementing\n   * `valueOf`. For example, `Date` represents a value by returning a unix\n   * timestamp for `valueOf`:\n   *\n   *     var date1 = new Date(1234567890000); // Fri Feb 13 2009 ...\n   *     var date2 = new Date(1234567890000);\n   *     date1.valueOf(); // 1234567890000\n   *     assert( date1 !== date2 );\n   *     assert( Immutable.is( date1, date2 ) );\n   *\n   * Note: overriding `valueOf` may have other implications if you use this object\n   * where JavaScript expects a primitive, such as implicit string coercion.\n   *\n   * For more complex types, especially collections, implementing `valueOf` may\n   * not be performant. An alternative is to implement `equals` and `hashCode`.\n   *\n   * `equals` takes another object, presumably of similar type, and returns true\n   * if the it is equal. Equality is symmetrical, so the same result should be\n   * returned if this and the argument are flipped.\n   *\n   *     assert( a.equals(b) === b.equals(a) );\n   *\n   * `hashCode` returns a 32bit integer number representing the object which will\n   * be used to determine how to store the value object in a Map or Set. You must\n   * provide both or neither methods, one must not exist without the other.\n   *\n   * Also, an important relationship between these methods must be upheld: if two\n   * values are equal, they *must* return the same hashCode. If the values are not\n   * equal, they might have the same hashCode; this is called a hash collision,\n   * and while undesirable for performance reasons, it is acceptable.\n   *\n   *     if (a.equals(b)) {\n   *       assert( a.hashCode() === b.hashCode() );\n   *     }\n   *\n   * All Immutable collections implement `equals` and `hashCode`.\n   *\n   */\n  function is(valueA, valueB) {\n    if (valueA === valueB || (valueA !== valueA && valueB !== valueB)) {\n      return true;\n    }\n    if (!valueA || !valueB) {\n      return false;\n    }\n    if (typeof valueA.valueOf === 'function' &&\n        typeof valueB.valueOf === 'function') {\n      valueA = valueA.valueOf();\n      valueB = valueB.valueOf();\n      if (valueA === valueB || (valueA !== valueA && valueB !== valueB)) {\n        return true;\n      }\n      if (!valueA || !valueB) {\n        return false;\n      }\n    }\n    if (typeof valueA.equals === 'function' &&\n        typeof valueB.equals === 'function' &&\n        valueA.equals(valueB)) {\n      return true;\n    }\n    return false;\n  }\n\n  function deepEqual(a, b) {\n    if (a === b) {\n      return true;\n    }\n\n    if (\n      !isIterable(b) ||\n      a.size !== undefined && b.size !== undefined && a.size !== b.size ||\n      a.__hash !== undefined && b.__hash !== undefined && a.__hash !== b.__hash ||\n      isKeyed(a) !== isKeyed(b) ||\n      isIndexed(a) !== isIndexed(b) ||\n      isOrdered(a) !== isOrdered(b)\n    ) {\n      return false;\n    }\n\n    if (a.size === 0 && b.size === 0) {\n      return true;\n    }\n\n    var notAssociative = !isAssociative(a);\n\n    if (isOrdered(a)) {\n      var entries = a.entries();\n      return b.every(function(v, k)  {\n        var entry = entries.next().value;\n        return entry && is(entry[1], v) && (notAssociative || is(entry[0], k));\n      }) && entries.next().done;\n    }\n\n    var flipped = false;\n\n    if (a.size === undefined) {\n      if (b.size === undefined) {\n        if (typeof a.cacheResult === 'function') {\n          a.cacheResult();\n        }\n      } else {\n        flipped = true;\n        var _ = a;\n        a = b;\n        b = _;\n      }\n    }\n\n    var allEqual = true;\n    var bSize = b.__iterate(function(v, k)  {\n      if (notAssociative ? !a.has(v) :\n          flipped ? !is(v, a.get(k, NOT_SET)) : !is(a.get(k, NOT_SET), v)) {\n        allEqual = false;\n        return false;\n      }\n    });\n\n    return allEqual && a.size === bSize;\n  }\n\n  createClass(Repeat, IndexedSeq);\n\n    function Repeat(value, times) {\n      if (!(this instanceof Repeat)) {\n        return new Repeat(value, times);\n      }\n      this._value = value;\n      this.size = times === undefined ? Infinity : Math.max(0, times);\n      if (this.size === 0) {\n        if (EMPTY_REPEAT) {\n          return EMPTY_REPEAT;\n        }\n        EMPTY_REPEAT = this;\n      }\n    }\n\n    Repeat.prototype.toString = function() {\n      if (this.size === 0) {\n        return 'Repeat []';\n      }\n      return 'Repeat [ ' + this._value + ' ' + this.size + ' times ]';\n    };\n\n    Repeat.prototype.get = function(index, notSetValue) {\n      return this.has(index) ? this._value : notSetValue;\n    };\n\n    Repeat.prototype.includes = function(searchValue) {\n      return is(this._value, searchValue);\n    };\n\n    Repeat.prototype.slice = function(begin, end) {\n      var size = this.size;\n      return wholeSlice(begin, end, size) ? this :\n        new Repeat(this._value, resolveEnd(end, size) - resolveBegin(begin, size));\n    };\n\n    Repeat.prototype.reverse = function() {\n      return this;\n    };\n\n    Repeat.prototype.indexOf = function(searchValue) {\n      if (is(this._value, searchValue)) {\n        return 0;\n      }\n      return -1;\n    };\n\n    Repeat.prototype.lastIndexOf = function(searchValue) {\n      if (is(this._value, searchValue)) {\n        return this.size;\n      }\n      return -1;\n    };\n\n    Repeat.prototype.__iterate = function(fn, reverse) {\n      for (var ii = 0; ii < this.size; ii++) {\n        if (fn(this._value, ii, this) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    };\n\n    Repeat.prototype.__iterator = function(type, reverse) {var this$0 = this;\n      var ii = 0;\n      return new Iterator(function() \n        {return ii < this$0.size ? iteratorValue(type, ii++, this$0._value) : iteratorDone()}\n      );\n    };\n\n    Repeat.prototype.equals = function(other) {\n      return other instanceof Repeat ?\n        is(this._value, other._value) :\n        deepEqual(other);\n    };\n\n\n  var EMPTY_REPEAT;\n\n  function invariant(condition, error) {\n    if (!condition) throw new Error(error);\n  }\n\n  createClass(Range, IndexedSeq);\n\n    function Range(start, end, step) {\n      if (!(this instanceof Range)) {\n        return new Range(start, end, step);\n      }\n      invariant(step !== 0, 'Cannot step a Range by 0');\n      start = start || 0;\n      if (end === undefined) {\n        end = Infinity;\n      }\n      step = step === undefined ? 1 : Math.abs(step);\n      if (end < start) {\n        step = -step;\n      }\n      this._start = start;\n      this._end = end;\n      this._step = step;\n      this.size = Math.max(0, Math.ceil((end - start) / step - 1) + 1);\n      if (this.size === 0) {\n        if (EMPTY_RANGE) {\n          return EMPTY_RANGE;\n        }\n        EMPTY_RANGE = this;\n      }\n    }\n\n    Range.prototype.toString = function() {\n      if (this.size === 0) {\n        return 'Range []';\n      }\n      return 'Range [ ' +\n        this._start + '...' + this._end +\n        (this._step !== 1 ? ' by ' + this._step : '') +\n      ' ]';\n    };\n\n    Range.prototype.get = function(index, notSetValue) {\n      return this.has(index) ?\n        this._start + wrapIndex(this, index) * this._step :\n        notSetValue;\n    };\n\n    Range.prototype.includes = function(searchValue) {\n      var possibleIndex = (searchValue - this._start) / this._step;\n      return possibleIndex >= 0 &&\n        possibleIndex < this.size &&\n        possibleIndex === Math.floor(possibleIndex);\n    };\n\n    Range.prototype.slice = function(begin, end) {\n      if (wholeSlice(begin, end, this.size)) {\n        return this;\n      }\n      begin = resolveBegin(begin, this.size);\n      end = resolveEnd(end, this.size);\n      if (end <= begin) {\n        return new Range(0, 0);\n      }\n      return new Range(this.get(begin, this._end), this.get(end, this._end), this._step);\n    };\n\n    Range.prototype.indexOf = function(searchValue) {\n      var offsetValue = searchValue - this._start;\n      if (offsetValue % this._step === 0) {\n        var index = offsetValue / this._step;\n        if (index >= 0 && index < this.size) {\n          return index\n        }\n      }\n      return -1;\n    };\n\n    Range.prototype.lastIndexOf = function(searchValue) {\n      return this.indexOf(searchValue);\n    };\n\n    Range.prototype.__iterate = function(fn, reverse) {\n      var maxIndex = this.size - 1;\n      var step = this._step;\n      var value = reverse ? this._start + maxIndex * step : this._start;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        if (fn(value, ii, this) === false) {\n          return ii + 1;\n        }\n        value += reverse ? -step : step;\n      }\n      return ii;\n    };\n\n    Range.prototype.__iterator = function(type, reverse) {\n      var maxIndex = this.size - 1;\n      var step = this._step;\n      var value = reverse ? this._start + maxIndex * step : this._start;\n      var ii = 0;\n      return new Iterator(function()  {\n        var v = value;\n        value += reverse ? -step : step;\n        return ii > maxIndex ? iteratorDone() : iteratorValue(type, ii++, v);\n      });\n    };\n\n    Range.prototype.equals = function(other) {\n      return other instanceof Range ?\n        this._start === other._start &&\n        this._end === other._end &&\n        this._step === other._step :\n        deepEqual(this, other);\n    };\n\n\n  var EMPTY_RANGE;\n\n  createClass(Collection, Iterable);\n    function Collection() {\n      throw TypeError('Abstract');\n    }\n\n\n  createClass(KeyedCollection, Collection);function KeyedCollection() {}\n\n  createClass(IndexedCollection, Collection);function IndexedCollection() {}\n\n  createClass(SetCollection, Collection);function SetCollection() {}\n\n\n  Collection.Keyed = KeyedCollection;\n  Collection.Indexed = IndexedCollection;\n  Collection.Set = SetCollection;\n\n  var imul =\n    typeof Math.imul === 'function' && Math.imul(0xffffffff, 2) === -2 ?\n    Math.imul :\n    function imul(a, b) {\n      a = a | 0; // int\n      b = b | 0; // int\n      var c = a & 0xffff;\n      var d = b & 0xffff;\n      // Shift by 0 fixes the sign on the high part.\n      return (c * d) + ((((a >>> 16) * d + c * (b >>> 16)) << 16) >>> 0) | 0; // int\n    };\n\n  // v8 has an optimization for storing 31-bit signed numbers.\n  // Values which have either 00 or 11 as the high order bits qualify.\n  // This function drops the highest order bit in a signed number, maintaining\n  // the sign bit.\n  function smi(i32) {\n    return ((i32 >>> 1) & 0x40000000) | (i32 & 0xBFFFFFFF);\n  }\n\n  function hash(o) {\n    if (o === false || o === null || o === undefined) {\n      return 0;\n    }\n    if (typeof o.valueOf === 'function') {\n      o = o.valueOf();\n      if (o === false || o === null || o === undefined) {\n        return 0;\n      }\n    }\n    if (o === true) {\n      return 1;\n    }\n    var type = typeof o;\n    if (type === 'number') {\n      if (o !== o || o === Infinity) {\n        return 0;\n      }\n      var h = o | 0;\n      if (h !== o) {\n        h ^= o * 0xFFFFFFFF;\n      }\n      while (o > 0xFFFFFFFF) {\n        o /= 0xFFFFFFFF;\n        h ^= o;\n      }\n      return smi(h);\n    }\n    if (type === 'string') {\n      return o.length > STRING_HASH_CACHE_MIN_STRLEN ? cachedHashString(o) : hashString(o);\n    }\n    if (typeof o.hashCode === 'function') {\n      return o.hashCode();\n    }\n    if (type === 'object') {\n      return hashJSObj(o);\n    }\n    if (typeof o.toString === 'function') {\n      return hashString(o.toString());\n    }\n    throw new Error('Value type ' + type + ' cannot be hashed.');\n  }\n\n  function cachedHashString(string) {\n    var hash = stringHashCache[string];\n    if (hash === undefined) {\n      hash = hashString(string);\n      if (STRING_HASH_CACHE_SIZE === STRING_HASH_CACHE_MAX_SIZE) {\n        STRING_HASH_CACHE_SIZE = 0;\n        stringHashCache = {};\n      }\n      STRING_HASH_CACHE_SIZE++;\n      stringHashCache[string] = hash;\n    }\n    return hash;\n  }\n\n  // http://jsperf.com/hashing-strings\n  function hashString(string) {\n    // This is the hash from JVM\n    // The hash code for a string is computed as\n    // s[0] * 31 ^ (n - 1) + s[1] * 31 ^ (n - 2) + ... + s[n - 1],\n    // where s[i] is the ith character of the string and n is the length of\n    // the string. We \"mod\" the result to make it between 0 (inclusive) and 2^31\n    // (exclusive) by dropping high bits.\n    var hash = 0;\n    for (var ii = 0; ii < string.length; ii++) {\n      hash = 31 * hash + string.charCodeAt(ii) | 0;\n    }\n    return smi(hash);\n  }\n\n  function hashJSObj(obj) {\n    var hash;\n    if (usingWeakMap) {\n      hash = weakMap.get(obj);\n      if (hash !== undefined) {\n        return hash;\n      }\n    }\n\n    hash = obj[UID_HASH_KEY];\n    if (hash !== undefined) {\n      return hash;\n    }\n\n    if (!canDefineProperty) {\n      hash = obj.propertyIsEnumerable && obj.propertyIsEnumerable[UID_HASH_KEY];\n      if (hash !== undefined) {\n        return hash;\n      }\n\n      hash = getIENodeHash(obj);\n      if (hash !== undefined) {\n        return hash;\n      }\n    }\n\n    hash = ++objHashUID;\n    if (objHashUID & 0x40000000) {\n      objHashUID = 0;\n    }\n\n    if (usingWeakMap) {\n      weakMap.set(obj, hash);\n    } else if (isExtensible !== undefined && isExtensible(obj) === false) {\n      throw new Error('Non-extensible objects are not allowed as keys.');\n    } else if (canDefineProperty) {\n      Object.defineProperty(obj, UID_HASH_KEY, {\n        'enumerable': false,\n        'configurable': false,\n        'writable': false,\n        'value': hash\n      });\n    } else if (obj.propertyIsEnumerable !== undefined &&\n               obj.propertyIsEnumerable === obj.constructor.prototype.propertyIsEnumerable) {\n      // Since we can't define a non-enumerable property on the object\n      // we'll hijack one of the less-used non-enumerable properties to\n      // save our hash on it. Since this is a function it will not show up in\n      // `JSON.stringify` which is what we want.\n      obj.propertyIsEnumerable = function() {\n        return this.constructor.prototype.propertyIsEnumerable.apply(this, arguments);\n      };\n      obj.propertyIsEnumerable[UID_HASH_KEY] = hash;\n    } else if (obj.nodeType !== undefined) {\n      // At this point we couldn't get the IE `uniqueID` to use as a hash\n      // and we couldn't use a non-enumerable property to exploit the\n      // dontEnum bug so we simply add the `UID_HASH_KEY` on the node\n      // itself.\n      obj[UID_HASH_KEY] = hash;\n    } else {\n      throw new Error('Unable to set a non-enumerable property on object.');\n    }\n\n    return hash;\n  }\n\n  // Get references to ES5 object methods.\n  var isExtensible = Object.isExtensible;\n\n  // True if Object.defineProperty works as expected. IE8 fails this test.\n  var canDefineProperty = (function() {\n    try {\n      Object.defineProperty({}, '@', {});\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }());\n\n  // IE has a `uniqueID` property on DOM nodes. We can construct the hash from it\n  // and avoid memory leaks from the IE cloneNode bug.\n  function getIENodeHash(node) {\n    if (node && node.nodeType > 0) {\n      switch (node.nodeType) {\n        case 1: // Element\n          return node.uniqueID;\n        case 9: // Document\n          return node.documentElement && node.documentElement.uniqueID;\n      }\n    }\n  }\n\n  // If possible, use a WeakMap.\n  var usingWeakMap = typeof WeakMap === 'function';\n  var weakMap;\n  if (usingWeakMap) {\n    weakMap = new WeakMap();\n  }\n\n  var objHashUID = 0;\n\n  var UID_HASH_KEY = '__immutablehash__';\n  if (typeof Symbol === 'function') {\n    UID_HASH_KEY = Symbol(UID_HASH_KEY);\n  }\n\n  var STRING_HASH_CACHE_MIN_STRLEN = 16;\n  var STRING_HASH_CACHE_MAX_SIZE = 255;\n  var STRING_HASH_CACHE_SIZE = 0;\n  var stringHashCache = {};\n\n  function assertNotInfinite(size) {\n    invariant(\n      size !== Infinity,\n      'Cannot perform this action with an infinite size.'\n    );\n  }\n\n  createClass(Map, KeyedCollection);\n\n    // @pragma Construction\n\n    function Map(value) {\n      return value === null || value === undefined ? emptyMap() :\n        isMap(value) && !isOrdered(value) ? value :\n        emptyMap().withMutations(function(map ) {\n          var iter = KeyedIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v, k)  {return map.set(k, v)});\n        });\n    }\n\n    Map.of = function() {var keyValues = SLICE$0.call(arguments, 0);\n      return emptyMap().withMutations(function(map ) {\n        for (var i = 0; i < keyValues.length; i += 2) {\n          if (i + 1 >= keyValues.length) {\n            throw new Error('Missing value for key: ' + keyValues[i]);\n          }\n          map.set(keyValues[i], keyValues[i + 1]);\n        }\n      });\n    };\n\n    Map.prototype.toString = function() {\n      return this.__toString('Map {', '}');\n    };\n\n    // @pragma Access\n\n    Map.prototype.get = function(k, notSetValue) {\n      return this._root ?\n        this._root.get(0, undefined, k, notSetValue) :\n        notSetValue;\n    };\n\n    // @pragma Modification\n\n    Map.prototype.set = function(k, v) {\n      return updateMap(this, k, v);\n    };\n\n    Map.prototype.setIn = function(keyPath, v) {\n      return this.updateIn(keyPath, NOT_SET, function()  {return v});\n    };\n\n    Map.prototype.remove = function(k) {\n      return updateMap(this, k, NOT_SET);\n    };\n\n    Map.prototype.deleteIn = function(keyPath) {\n      return this.updateIn(keyPath, function()  {return NOT_SET});\n    };\n\n    Map.prototype.update = function(k, notSetValue, updater) {\n      return arguments.length === 1 ?\n        k(this) :\n        this.updateIn([k], notSetValue, updater);\n    };\n\n    Map.prototype.updateIn = function(keyPath, notSetValue, updater) {\n      if (!updater) {\n        updater = notSetValue;\n        notSetValue = undefined;\n      }\n      var updatedValue = updateInDeepMap(\n        this,\n        forceIterator(keyPath),\n        notSetValue,\n        updater\n      );\n      return updatedValue === NOT_SET ? undefined : updatedValue;\n    };\n\n    Map.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = 0;\n        this._root = null;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return emptyMap();\n    };\n\n    // @pragma Composition\n\n    Map.prototype.merge = function(/*...iters*/) {\n      return mergeIntoMapWith(this, undefined, arguments);\n    };\n\n    Map.prototype.mergeWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoMapWith(this, merger, iters);\n    };\n\n    Map.prototype.mergeIn = function(keyPath) {var iters = SLICE$0.call(arguments, 1);\n      return this.updateIn(\n        keyPath,\n        emptyMap(),\n        function(m ) {return typeof m.merge === 'function' ?\n          m.merge.apply(m, iters) :\n          iters[iters.length - 1]}\n      );\n    };\n\n    Map.prototype.mergeDeep = function(/*...iters*/) {\n      return mergeIntoMapWith(this, deepMerger, arguments);\n    };\n\n    Map.prototype.mergeDeepWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoMapWith(this, deepMergerWith(merger), iters);\n    };\n\n    Map.prototype.mergeDeepIn = function(keyPath) {var iters = SLICE$0.call(arguments, 1);\n      return this.updateIn(\n        keyPath,\n        emptyMap(),\n        function(m ) {return typeof m.mergeDeep === 'function' ?\n          m.mergeDeep.apply(m, iters) :\n          iters[iters.length - 1]}\n      );\n    };\n\n    Map.prototype.sort = function(comparator) {\n      // Late binding\n      return OrderedMap(sortFactory(this, comparator));\n    };\n\n    Map.prototype.sortBy = function(mapper, comparator) {\n      // Late binding\n      return OrderedMap(sortFactory(this, comparator, mapper));\n    };\n\n    // @pragma Mutability\n\n    Map.prototype.withMutations = function(fn) {\n      var mutable = this.asMutable();\n      fn(mutable);\n      return mutable.wasAltered() ? mutable.__ensureOwner(this.__ownerID) : this;\n    };\n\n    Map.prototype.asMutable = function() {\n      return this.__ownerID ? this : this.__ensureOwner(new OwnerID());\n    };\n\n    Map.prototype.asImmutable = function() {\n      return this.__ensureOwner();\n    };\n\n    Map.prototype.wasAltered = function() {\n      return this.__altered;\n    };\n\n    Map.prototype.__iterator = function(type, reverse) {\n      return new MapIterator(this, type, reverse);\n    };\n\n    Map.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      this._root && this._root.iterate(function(entry ) {\n        iterations++;\n        return fn(entry[1], entry[0], this$0);\n      }, reverse);\n      return iterations;\n    };\n\n    Map.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this.__altered = false;\n        return this;\n      }\n      return makeMap(this.size, this._root, ownerID, this.__hash);\n    };\n\n\n  function isMap(maybeMap) {\n    return !!(maybeMap && maybeMap[IS_MAP_SENTINEL]);\n  }\n\n  Map.isMap = isMap;\n\n  var IS_MAP_SENTINEL = '@@__IMMUTABLE_MAP__@@';\n\n  var MapPrototype = Map.prototype;\n  MapPrototype[IS_MAP_SENTINEL] = true;\n  MapPrototype[DELETE] = MapPrototype.remove;\n  MapPrototype.removeIn = MapPrototype.deleteIn;\n\n\n  // #pragma Trie Nodes\n\n\n\n    function ArrayMapNode(ownerID, entries) {\n      this.ownerID = ownerID;\n      this.entries = entries;\n    }\n\n    ArrayMapNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      var entries = this.entries;\n      for (var ii = 0, len = entries.length; ii < len; ii++) {\n        if (is(key, entries[ii][0])) {\n          return entries[ii][1];\n        }\n      }\n      return notSetValue;\n    };\n\n    ArrayMapNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      var removed = value === NOT_SET;\n\n      var entries = this.entries;\n      var idx = 0;\n      for (var len = entries.length; idx < len; idx++) {\n        if (is(key, entries[idx][0])) {\n          break;\n        }\n      }\n      var exists = idx < len;\n\n      if (exists ? entries[idx][1] === value : removed) {\n        return this;\n      }\n\n      SetRef(didAlter);\n      (removed || !exists) && SetRef(didChangeSize);\n\n      if (removed && entries.length === 1) {\n        return; // undefined\n      }\n\n      if (!exists && !removed && entries.length >= MAX_ARRAY_MAP_SIZE) {\n        return createNodes(ownerID, entries, key, value);\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newEntries = isEditable ? entries : arrCopy(entries);\n\n      if (exists) {\n        if (removed) {\n          idx === len - 1 ? newEntries.pop() : (newEntries[idx] = newEntries.pop());\n        } else {\n          newEntries[idx] = [key, value];\n        }\n      } else {\n        newEntries.push([key, value]);\n      }\n\n      if (isEditable) {\n        this.entries = newEntries;\n        return this;\n      }\n\n      return new ArrayMapNode(ownerID, newEntries);\n    };\n\n\n\n\n    function BitmapIndexedNode(ownerID, bitmap, nodes) {\n      this.ownerID = ownerID;\n      this.bitmap = bitmap;\n      this.nodes = nodes;\n    }\n\n    BitmapIndexedNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var bit = (1 << ((shift === 0 ? keyHash : keyHash >>> shift) & MASK));\n      var bitmap = this.bitmap;\n      return (bitmap & bit) === 0 ? notSetValue :\n        this.nodes[popCount(bitmap & (bit - 1))].get(shift + SHIFT, keyHash, key, notSetValue);\n    };\n\n    BitmapIndexedNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var keyHashFrag = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n      var bit = 1 << keyHashFrag;\n      var bitmap = this.bitmap;\n      var exists = (bitmap & bit) !== 0;\n\n      if (!exists && value === NOT_SET) {\n        return this;\n      }\n\n      var idx = popCount(bitmap & (bit - 1));\n      var nodes = this.nodes;\n      var node = exists ? nodes[idx] : undefined;\n      var newNode = updateNode(node, ownerID, shift + SHIFT, keyHash, key, value, didChangeSize, didAlter);\n\n      if (newNode === node) {\n        return this;\n      }\n\n      if (!exists && newNode && nodes.length >= MAX_BITMAP_INDEXED_SIZE) {\n        return expandNodes(ownerID, nodes, bitmap, keyHashFrag, newNode);\n      }\n\n      if (exists && !newNode && nodes.length === 2 && isLeafNode(nodes[idx ^ 1])) {\n        return nodes[idx ^ 1];\n      }\n\n      if (exists && newNode && nodes.length === 1 && isLeafNode(newNode)) {\n        return newNode;\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newBitmap = exists ? newNode ? bitmap : bitmap ^ bit : bitmap | bit;\n      var newNodes = exists ? newNode ?\n        setIn(nodes, idx, newNode, isEditable) :\n        spliceOut(nodes, idx, isEditable) :\n        spliceIn(nodes, idx, newNode, isEditable);\n\n      if (isEditable) {\n        this.bitmap = newBitmap;\n        this.nodes = newNodes;\n        return this;\n      }\n\n      return new BitmapIndexedNode(ownerID, newBitmap, newNodes);\n    };\n\n\n\n\n    function HashArrayMapNode(ownerID, count, nodes) {\n      this.ownerID = ownerID;\n      this.count = count;\n      this.nodes = nodes;\n    }\n\n    HashArrayMapNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n      var node = this.nodes[idx];\n      return node ? node.get(shift + SHIFT, keyHash, key, notSetValue) : notSetValue;\n    };\n\n    HashArrayMapNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n      var removed = value === NOT_SET;\n      var nodes = this.nodes;\n      var node = nodes[idx];\n\n      if (removed && !node) {\n        return this;\n      }\n\n      var newNode = updateNode(node, ownerID, shift + SHIFT, keyHash, key, value, didChangeSize, didAlter);\n      if (newNode === node) {\n        return this;\n      }\n\n      var newCount = this.count;\n      if (!node) {\n        newCount++;\n      } else if (!newNode) {\n        newCount--;\n        if (newCount < MIN_HASH_ARRAY_MAP_SIZE) {\n          return packNodes(ownerID, nodes, newCount, idx);\n        }\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newNodes = setIn(nodes, idx, newNode, isEditable);\n\n      if (isEditable) {\n        this.count = newCount;\n        this.nodes = newNodes;\n        return this;\n      }\n\n      return new HashArrayMapNode(ownerID, newCount, newNodes);\n    };\n\n\n\n\n    function HashCollisionNode(ownerID, keyHash, entries) {\n      this.ownerID = ownerID;\n      this.keyHash = keyHash;\n      this.entries = entries;\n    }\n\n    HashCollisionNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      var entries = this.entries;\n      for (var ii = 0, len = entries.length; ii < len; ii++) {\n        if (is(key, entries[ii][0])) {\n          return entries[ii][1];\n        }\n      }\n      return notSetValue;\n    };\n\n    HashCollisionNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n\n      var removed = value === NOT_SET;\n\n      if (keyHash !== this.keyHash) {\n        if (removed) {\n          return this;\n        }\n        SetRef(didAlter);\n        SetRef(didChangeSize);\n        return mergeIntoNode(this, ownerID, shift, keyHash, [key, value]);\n      }\n\n      var entries = this.entries;\n      var idx = 0;\n      for (var len = entries.length; idx < len; idx++) {\n        if (is(key, entries[idx][0])) {\n          break;\n        }\n      }\n      var exists = idx < len;\n\n      if (exists ? entries[idx][1] === value : removed) {\n        return this;\n      }\n\n      SetRef(didAlter);\n      (removed || !exists) && SetRef(didChangeSize);\n\n      if (removed && len === 2) {\n        return new ValueNode(ownerID, this.keyHash, entries[idx ^ 1]);\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newEntries = isEditable ? entries : arrCopy(entries);\n\n      if (exists) {\n        if (removed) {\n          idx === len - 1 ? newEntries.pop() : (newEntries[idx] = newEntries.pop());\n        } else {\n          newEntries[idx] = [key, value];\n        }\n      } else {\n        newEntries.push([key, value]);\n      }\n\n      if (isEditable) {\n        this.entries = newEntries;\n        return this;\n      }\n\n      return new HashCollisionNode(ownerID, this.keyHash, newEntries);\n    };\n\n\n\n\n    function ValueNode(ownerID, keyHash, entry) {\n      this.ownerID = ownerID;\n      this.keyHash = keyHash;\n      this.entry = entry;\n    }\n\n    ValueNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      return is(key, this.entry[0]) ? this.entry[1] : notSetValue;\n    };\n\n    ValueNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      var removed = value === NOT_SET;\n      var keyMatch = is(key, this.entry[0]);\n      if (keyMatch ? value === this.entry[1] : removed) {\n        return this;\n      }\n\n      SetRef(didAlter);\n\n      if (removed) {\n        SetRef(didChangeSize);\n        return; // undefined\n      }\n\n      if (keyMatch) {\n        if (ownerID && ownerID === this.ownerID) {\n          this.entry[1] = value;\n          return this;\n        }\n        return new ValueNode(ownerID, this.keyHash, [key, value]);\n      }\n\n      SetRef(didChangeSize);\n      return mergeIntoNode(this, ownerID, shift, hash(key), [key, value]);\n    };\n\n\n\n  // #pragma Iterators\n\n  ArrayMapNode.prototype.iterate =\n  HashCollisionNode.prototype.iterate = function (fn, reverse) {\n    var entries = this.entries;\n    for (var ii = 0, maxIndex = entries.length - 1; ii <= maxIndex; ii++) {\n      if (fn(entries[reverse ? maxIndex - ii : ii]) === false) {\n        return false;\n      }\n    }\n  }\n\n  BitmapIndexedNode.prototype.iterate =\n  HashArrayMapNode.prototype.iterate = function (fn, reverse) {\n    var nodes = this.nodes;\n    for (var ii = 0, maxIndex = nodes.length - 1; ii <= maxIndex; ii++) {\n      var node = nodes[reverse ? maxIndex - ii : ii];\n      if (node && node.iterate(fn, reverse) === false) {\n        return false;\n      }\n    }\n  }\n\n  ValueNode.prototype.iterate = function (fn, reverse) {\n    return fn(this.entry);\n  }\n\n  createClass(MapIterator, Iterator);\n\n    function MapIterator(map, type, reverse) {\n      this._type = type;\n      this._reverse = reverse;\n      this._stack = map._root && mapIteratorFrame(map._root);\n    }\n\n    MapIterator.prototype.next = function() {\n      var type = this._type;\n      var stack = this._stack;\n      while (stack) {\n        var node = stack.node;\n        var index = stack.index++;\n        var maxIndex;\n        if (node.entry) {\n          if (index === 0) {\n            return mapIteratorValue(type, node.entry);\n          }\n        } else if (node.entries) {\n          maxIndex = node.entries.length - 1;\n          if (index <= maxIndex) {\n            return mapIteratorValue(type, node.entries[this._reverse ? maxIndex - index : index]);\n          }\n        } else {\n          maxIndex = node.nodes.length - 1;\n          if (index <= maxIndex) {\n            var subNode = node.nodes[this._reverse ? maxIndex - index : index];\n            if (subNode) {\n              if (subNode.entry) {\n                return mapIteratorValue(type, subNode.entry);\n              }\n              stack = this._stack = mapIteratorFrame(subNode, stack);\n            }\n            continue;\n          }\n        }\n        stack = this._stack = this._stack.__prev;\n      }\n      return iteratorDone();\n    };\n\n\n  function mapIteratorValue(type, entry) {\n    return iteratorValue(type, entry[0], entry[1]);\n  }\n\n  function mapIteratorFrame(node, prev) {\n    return {\n      node: node,\n      index: 0,\n      __prev: prev\n    };\n  }\n\n  function makeMap(size, root, ownerID, hash) {\n    var map = Object.create(MapPrototype);\n    map.size = size;\n    map._root = root;\n    map.__ownerID = ownerID;\n    map.__hash = hash;\n    map.__altered = false;\n    return map;\n  }\n\n  var EMPTY_MAP;\n  function emptyMap() {\n    return EMPTY_MAP || (EMPTY_MAP = makeMap(0));\n  }\n\n  function updateMap(map, k, v) {\n    var newRoot;\n    var newSize;\n    if (!map._root) {\n      if (v === NOT_SET) {\n        return map;\n      }\n      newSize = 1;\n      newRoot = new ArrayMapNode(map.__ownerID, [[k, v]]);\n    } else {\n      var didChangeSize = MakeRef(CHANGE_LENGTH);\n      var didAlter = MakeRef(DID_ALTER);\n      newRoot = updateNode(map._root, map.__ownerID, 0, undefined, k, v, didChangeSize, didAlter);\n      if (!didAlter.value) {\n        return map;\n      }\n      newSize = map.size + (didChangeSize.value ? v === NOT_SET ? -1 : 1 : 0);\n    }\n    if (map.__ownerID) {\n      map.size = newSize;\n      map._root = newRoot;\n      map.__hash = undefined;\n      map.__altered = true;\n      return map;\n    }\n    return newRoot ? makeMap(newSize, newRoot) : emptyMap();\n  }\n\n  function updateNode(node, ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n    if (!node) {\n      if (value === NOT_SET) {\n        return node;\n      }\n      SetRef(didAlter);\n      SetRef(didChangeSize);\n      return new ValueNode(ownerID, keyHash, [key, value]);\n    }\n    return node.update(ownerID, shift, keyHash, key, value, didChangeSize, didAlter);\n  }\n\n  function isLeafNode(node) {\n    return node.constructor === ValueNode || node.constructor === HashCollisionNode;\n  }\n\n  function mergeIntoNode(node, ownerID, shift, keyHash, entry) {\n    if (node.keyHash === keyHash) {\n      return new HashCollisionNode(ownerID, keyHash, [node.entry, entry]);\n    }\n\n    var idx1 = (shift === 0 ? node.keyHash : node.keyHash >>> shift) & MASK;\n    var idx2 = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n\n    var newNode;\n    var nodes = idx1 === idx2 ?\n      [mergeIntoNode(node, ownerID, shift + SHIFT, keyHash, entry)] :\n      ((newNode = new ValueNode(ownerID, keyHash, entry)), idx1 < idx2 ? [node, newNode] : [newNode, node]);\n\n    return new BitmapIndexedNode(ownerID, (1 << idx1) | (1 << idx2), nodes);\n  }\n\n  function createNodes(ownerID, entries, key, value) {\n    if (!ownerID) {\n      ownerID = new OwnerID();\n    }\n    var node = new ValueNode(ownerID, hash(key), [key, value]);\n    for (var ii = 0; ii < entries.length; ii++) {\n      var entry = entries[ii];\n      node = node.update(ownerID, 0, undefined, entry[0], entry[1]);\n    }\n    return node;\n  }\n\n  function packNodes(ownerID, nodes, count, excluding) {\n    var bitmap = 0;\n    var packedII = 0;\n    var packedNodes = new Array(count);\n    for (var ii = 0, bit = 1, len = nodes.length; ii < len; ii++, bit <<= 1) {\n      var node = nodes[ii];\n      if (node !== undefined && ii !== excluding) {\n        bitmap |= bit;\n        packedNodes[packedII++] = node;\n      }\n    }\n    return new BitmapIndexedNode(ownerID, bitmap, packedNodes);\n  }\n\n  function expandNodes(ownerID, nodes, bitmap, including, node) {\n    var count = 0;\n    var expandedNodes = new Array(SIZE);\n    for (var ii = 0; bitmap !== 0; ii++, bitmap >>>= 1) {\n      expandedNodes[ii] = bitmap & 1 ? nodes[count++] : undefined;\n    }\n    expandedNodes[including] = node;\n    return new HashArrayMapNode(ownerID, count + 1, expandedNodes);\n  }\n\n  function mergeIntoMapWith(map, merger, iterables) {\n    var iters = [];\n    for (var ii = 0; ii < iterables.length; ii++) {\n      var value = iterables[ii];\n      var iter = KeyedIterable(value);\n      if (!isIterable(value)) {\n        iter = iter.map(function(v ) {return fromJS(v)});\n      }\n      iters.push(iter);\n    }\n    return mergeIntoCollectionWith(map, merger, iters);\n  }\n\n  function deepMerger(existing, value, key) {\n    return existing && existing.mergeDeep && isIterable(value) ?\n      existing.mergeDeep(value) :\n      is(existing, value) ? existing : value;\n  }\n\n  function deepMergerWith(merger) {\n    return function(existing, value, key)  {\n      if (existing && existing.mergeDeepWith && isIterable(value)) {\n        return existing.mergeDeepWith(merger, value);\n      }\n      var nextValue = merger(existing, value, key);\n      return is(existing, nextValue) ? existing : nextValue;\n    };\n  }\n\n  function mergeIntoCollectionWith(collection, merger, iters) {\n    iters = iters.filter(function(x ) {return x.size !== 0});\n    if (iters.length === 0) {\n      return collection;\n    }\n    if (collection.size === 0 && !collection.__ownerID && iters.length === 1) {\n      return collection.constructor(iters[0]);\n    }\n    return collection.withMutations(function(collection ) {\n      var mergeIntoMap = merger ?\n        function(value, key)  {\n          collection.update(key, NOT_SET, function(existing )\n            {return existing === NOT_SET ? value : merger(existing, value, key)}\n          );\n        } :\n        function(value, key)  {\n          collection.set(key, value);\n        }\n      for (var ii = 0; ii < iters.length; ii++) {\n        iters[ii].forEach(mergeIntoMap);\n      }\n    });\n  }\n\n  function updateInDeepMap(existing, keyPathIter, notSetValue, updater) {\n    var isNotSet = existing === NOT_SET;\n    var step = keyPathIter.next();\n    if (step.done) {\n      var existingValue = isNotSet ? notSetValue : existing;\n      var newValue = updater(existingValue);\n      return newValue === existingValue ? existing : newValue;\n    }\n    invariant(\n      isNotSet || (existing && existing.set),\n      'invalid keyPath'\n    );\n    var key = step.value;\n    var nextExisting = isNotSet ? NOT_SET : existing.get(key, NOT_SET);\n    var nextUpdated = updateInDeepMap(\n      nextExisting,\n      keyPathIter,\n      notSetValue,\n      updater\n    );\n    return nextUpdated === nextExisting ? existing :\n      nextUpdated === NOT_SET ? existing.remove(key) :\n      (isNotSet ? emptyMap() : existing).set(key, nextUpdated);\n  }\n\n  function popCount(x) {\n    x = x - ((x >> 1) & 0x55555555);\n    x = (x & 0x33333333) + ((x >> 2) & 0x33333333);\n    x = (x + (x >> 4)) & 0x0f0f0f0f;\n    x = x + (x >> 8);\n    x = x + (x >> 16);\n    return x & 0x7f;\n  }\n\n  function setIn(array, idx, val, canEdit) {\n    var newArray = canEdit ? array : arrCopy(array);\n    newArray[idx] = val;\n    return newArray;\n  }\n\n  function spliceIn(array, idx, val, canEdit) {\n    var newLen = array.length + 1;\n    if (canEdit && idx + 1 === newLen) {\n      array[idx] = val;\n      return array;\n    }\n    var newArray = new Array(newLen);\n    var after = 0;\n    for (var ii = 0; ii < newLen; ii++) {\n      if (ii === idx) {\n        newArray[ii] = val;\n        after = -1;\n      } else {\n        newArray[ii] = array[ii + after];\n      }\n    }\n    return newArray;\n  }\n\n  function spliceOut(array, idx, canEdit) {\n    var newLen = array.length - 1;\n    if (canEdit && idx === newLen) {\n      array.pop();\n      return array;\n    }\n    var newArray = new Array(newLen);\n    var after = 0;\n    for (var ii = 0; ii < newLen; ii++) {\n      if (ii === idx) {\n        after = 1;\n      }\n      newArray[ii] = array[ii + after];\n    }\n    return newArray;\n  }\n\n  var MAX_ARRAY_MAP_SIZE = SIZE / 4;\n  var MAX_BITMAP_INDEXED_SIZE = SIZE / 2;\n  var MIN_HASH_ARRAY_MAP_SIZE = SIZE / 4;\n\n  createClass(List, IndexedCollection);\n\n    // @pragma Construction\n\n    function List(value) {\n      var empty = emptyList();\n      if (value === null || value === undefined) {\n        return empty;\n      }\n      if (isList(value)) {\n        return value;\n      }\n      var iter = IndexedIterable(value);\n      var size = iter.size;\n      if (size === 0) {\n        return empty;\n      }\n      assertNotInfinite(size);\n      if (size > 0 && size < SIZE) {\n        return makeList(0, size, SHIFT, null, new VNode(iter.toArray()));\n      }\n      return empty.withMutations(function(list ) {\n        list.setSize(size);\n        iter.forEach(function(v, i)  {return list.set(i, v)});\n      });\n    }\n\n    List.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    List.prototype.toString = function() {\n      return this.__toString('List [', ']');\n    };\n\n    // @pragma Access\n\n    List.prototype.get = function(index, notSetValue) {\n      index = wrapIndex(this, index);\n      if (index >= 0 && index < this.size) {\n        index += this._origin;\n        var node = listNodeFor(this, index);\n        return node && node.array[index & MASK];\n      }\n      return notSetValue;\n    };\n\n    // @pragma Modification\n\n    List.prototype.set = function(index, value) {\n      return updateList(this, index, value);\n    };\n\n    List.prototype.remove = function(index) {\n      return !this.has(index) ? this :\n        index === 0 ? this.shift() :\n        index === this.size - 1 ? this.pop() :\n        this.splice(index, 1);\n    };\n\n    List.prototype.insert = function(index, value) {\n      return this.splice(index, 0, value);\n    };\n\n    List.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = this._origin = this._capacity = 0;\n        this._level = SHIFT;\n        this._root = this._tail = null;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return emptyList();\n    };\n\n    List.prototype.push = function(/*...values*/) {\n      var values = arguments;\n      var oldSize = this.size;\n      return this.withMutations(function(list ) {\n        setListBounds(list, 0, oldSize + values.length);\n        for (var ii = 0; ii < values.length; ii++) {\n          list.set(oldSize + ii, values[ii]);\n        }\n      });\n    };\n\n    List.prototype.pop = function() {\n      return setListBounds(this, 0, -1);\n    };\n\n    List.prototype.unshift = function(/*...values*/) {\n      var values = arguments;\n      return this.withMutations(function(list ) {\n        setListBounds(list, -values.length);\n        for (var ii = 0; ii < values.length; ii++) {\n          list.set(ii, values[ii]);\n        }\n      });\n    };\n\n    List.prototype.shift = function() {\n      return setListBounds(this, 1);\n    };\n\n    // @pragma Composition\n\n    List.prototype.merge = function(/*...iters*/) {\n      return mergeIntoListWith(this, undefined, arguments);\n    };\n\n    List.prototype.mergeWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoListWith(this, merger, iters);\n    };\n\n    List.prototype.mergeDeep = function(/*...iters*/) {\n      return mergeIntoListWith(this, deepMerger, arguments);\n    };\n\n    List.prototype.mergeDeepWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoListWith(this, deepMergerWith(merger), iters);\n    };\n\n    List.prototype.setSize = function(size) {\n      return setListBounds(this, 0, size);\n    };\n\n    // @pragma Iteration\n\n    List.prototype.slice = function(begin, end) {\n      var size = this.size;\n      if (wholeSlice(begin, end, size)) {\n        return this;\n      }\n      return setListBounds(\n        this,\n        resolveBegin(begin, size),\n        resolveEnd(end, size)\n      );\n    };\n\n    List.prototype.__iterator = function(type, reverse) {\n      var index = 0;\n      var values = iterateList(this, reverse);\n      return new Iterator(function()  {\n        var value = values();\n        return value === DONE ?\n          iteratorDone() :\n          iteratorValue(type, index++, value);\n      });\n    };\n\n    List.prototype.__iterate = function(fn, reverse) {\n      var index = 0;\n      var values = iterateList(this, reverse);\n      var value;\n      while ((value = values()) !== DONE) {\n        if (fn(value, index++, this) === false) {\n          break;\n        }\n      }\n      return index;\n    };\n\n    List.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        return this;\n      }\n      return makeList(this._origin, this._capacity, this._level, this._root, this._tail, ownerID, this.__hash);\n    };\n\n\n  function isList(maybeList) {\n    return !!(maybeList && maybeList[IS_LIST_SENTINEL]);\n  }\n\n  List.isList = isList;\n\n  var IS_LIST_SENTINEL = '@@__IMMUTABLE_LIST__@@';\n\n  var ListPrototype = List.prototype;\n  ListPrototype[IS_LIST_SENTINEL] = true;\n  ListPrototype[DELETE] = ListPrototype.remove;\n  ListPrototype.setIn = MapPrototype.setIn;\n  ListPrototype.deleteIn =\n  ListPrototype.removeIn = MapPrototype.removeIn;\n  ListPrototype.update = MapPrototype.update;\n  ListPrototype.updateIn = MapPrototype.updateIn;\n  ListPrototype.mergeIn = MapPrototype.mergeIn;\n  ListPrototype.mergeDeepIn = MapPrototype.mergeDeepIn;\n  ListPrototype.withMutations = MapPrototype.withMutations;\n  ListPrototype.asMutable = MapPrototype.asMutable;\n  ListPrototype.asImmutable = MapPrototype.asImmutable;\n  ListPrototype.wasAltered = MapPrototype.wasAltered;\n\n\n\n    function VNode(array, ownerID) {\n      this.array = array;\n      this.ownerID = ownerID;\n    }\n\n    // TODO: seems like these methods are very similar\n\n    VNode.prototype.removeBefore = function(ownerID, level, index) {\n      if (index === level ? 1 << level : 0 || this.array.length === 0) {\n        return this;\n      }\n      var originIndex = (index >>> level) & MASK;\n      if (originIndex >= this.array.length) {\n        return new VNode([], ownerID);\n      }\n      var removingFirst = originIndex === 0;\n      var newChild;\n      if (level > 0) {\n        var oldChild = this.array[originIndex];\n        newChild = oldChild && oldChild.removeBefore(ownerID, level - SHIFT, index);\n        if (newChild === oldChild && removingFirst) {\n          return this;\n        }\n      }\n      if (removingFirst && !newChild) {\n        return this;\n      }\n      var editable = editableVNode(this, ownerID);\n      if (!removingFirst) {\n        for (var ii = 0; ii < originIndex; ii++) {\n          editable.array[ii] = undefined;\n        }\n      }\n      if (newChild) {\n        editable.array[originIndex] = newChild;\n      }\n      return editable;\n    };\n\n    VNode.prototype.removeAfter = function(ownerID, level, index) {\n      if (index === (level ? 1 << level : 0) || this.array.length === 0) {\n        return this;\n      }\n      var sizeIndex = ((index - 1) >>> level) & MASK;\n      if (sizeIndex >= this.array.length) {\n        return this;\n      }\n\n      var newChild;\n      if (level > 0) {\n        var oldChild = this.array[sizeIndex];\n        newChild = oldChild && oldChild.removeAfter(ownerID, level - SHIFT, index);\n        if (newChild === oldChild && sizeIndex === this.array.length - 1) {\n          return this;\n        }\n      }\n\n      var editable = editableVNode(this, ownerID);\n      editable.array.splice(sizeIndex + 1);\n      if (newChild) {\n        editable.array[sizeIndex] = newChild;\n      }\n      return editable;\n    };\n\n\n\n  var DONE = {};\n\n  function iterateList(list, reverse) {\n    var left = list._origin;\n    var right = list._capacity;\n    var tailPos = getTailOffset(right);\n    var tail = list._tail;\n\n    return iterateNodeOrLeaf(list._root, list._level, 0);\n\n    function iterateNodeOrLeaf(node, level, offset) {\n      return level === 0 ?\n        iterateLeaf(node, offset) :\n        iterateNode(node, level, offset);\n    }\n\n    function iterateLeaf(node, offset) {\n      var array = offset === tailPos ? tail && tail.array : node && node.array;\n      var from = offset > left ? 0 : left - offset;\n      var to = right - offset;\n      if (to > SIZE) {\n        to = SIZE;\n      }\n      return function()  {\n        if (from === to) {\n          return DONE;\n        }\n        var idx = reverse ? --to : from++;\n        return array && array[idx];\n      };\n    }\n\n    function iterateNode(node, level, offset) {\n      var values;\n      var array = node && node.array;\n      var from = offset > left ? 0 : (left - offset) >> level;\n      var to = ((right - offset) >> level) + 1;\n      if (to > SIZE) {\n        to = SIZE;\n      }\n      return function()  {\n        do {\n          if (values) {\n            var value = values();\n            if (value !== DONE) {\n              return value;\n            }\n            values = null;\n          }\n          if (from === to) {\n            return DONE;\n          }\n          var idx = reverse ? --to : from++;\n          values = iterateNodeOrLeaf(\n            array && array[idx], level - SHIFT, offset + (idx << level)\n          );\n        } while (true);\n      };\n    }\n  }\n\n  function makeList(origin, capacity, level, root, tail, ownerID, hash) {\n    var list = Object.create(ListPrototype);\n    list.size = capacity - origin;\n    list._origin = origin;\n    list._capacity = capacity;\n    list._level = level;\n    list._root = root;\n    list._tail = tail;\n    list.__ownerID = ownerID;\n    list.__hash = hash;\n    list.__altered = false;\n    return list;\n  }\n\n  var EMPTY_LIST;\n  function emptyList() {\n    return EMPTY_LIST || (EMPTY_LIST = makeList(0, 0, SHIFT));\n  }\n\n  function updateList(list, index, value) {\n    index = wrapIndex(list, index);\n\n    if (index !== index) {\n      return list;\n    }\n\n    if (index >= list.size || index < 0) {\n      return list.withMutations(function(list ) {\n        index < 0 ?\n          setListBounds(list, index).set(0, value) :\n          setListBounds(list, 0, index + 1).set(index, value)\n      });\n    }\n\n    index += list._origin;\n\n    var newTail = list._tail;\n    var newRoot = list._root;\n    var didAlter = MakeRef(DID_ALTER);\n    if (index >= getTailOffset(list._capacity)) {\n      newTail = updateVNode(newTail, list.__ownerID, 0, index, value, didAlter);\n    } else {\n      newRoot = updateVNode(newRoot, list.__ownerID, list._level, index, value, didAlter);\n    }\n\n    if (!didAlter.value) {\n      return list;\n    }\n\n    if (list.__ownerID) {\n      list._root = newRoot;\n      list._tail = newTail;\n      list.__hash = undefined;\n      list.__altered = true;\n      return list;\n    }\n    return makeList(list._origin, list._capacity, list._level, newRoot, newTail);\n  }\n\n  function updateVNode(node, ownerID, level, index, value, didAlter) {\n    var idx = (index >>> level) & MASK;\n    var nodeHas = node && idx < node.array.length;\n    if (!nodeHas && value === undefined) {\n      return node;\n    }\n\n    var newNode;\n\n    if (level > 0) {\n      var lowerNode = node && node.array[idx];\n      var newLowerNode = updateVNode(lowerNode, ownerID, level - SHIFT, index, value, didAlter);\n      if (newLowerNode === lowerNode) {\n        return node;\n      }\n      newNode = editableVNode(node, ownerID);\n      newNode.array[idx] = newLowerNode;\n      return newNode;\n    }\n\n    if (nodeHas && node.array[idx] === value) {\n      return node;\n    }\n\n    SetRef(didAlter);\n\n    newNode = editableVNode(node, ownerID);\n    if (value === undefined && idx === newNode.array.length - 1) {\n      newNode.array.pop();\n    } else {\n      newNode.array[idx] = value;\n    }\n    return newNode;\n  }\n\n  function editableVNode(node, ownerID) {\n    if (ownerID && node && ownerID === node.ownerID) {\n      return node;\n    }\n    return new VNode(node ? node.array.slice() : [], ownerID);\n  }\n\n  function listNodeFor(list, rawIndex) {\n    if (rawIndex >= getTailOffset(list._capacity)) {\n      return list._tail;\n    }\n    if (rawIndex < 1 << (list._level + SHIFT)) {\n      var node = list._root;\n      var level = list._level;\n      while (node && level > 0) {\n        node = node.array[(rawIndex >>> level) & MASK];\n        level -= SHIFT;\n      }\n      return node;\n    }\n  }\n\n  function setListBounds(list, begin, end) {\n    // Sanitize begin & end using this shorthand for ToInt32(argument)\n    // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n    if (begin !== undefined) {\n      begin = begin | 0;\n    }\n    if (end !== undefined) {\n      end = end | 0;\n    }\n    var owner = list.__ownerID || new OwnerID();\n    var oldOrigin = list._origin;\n    var oldCapacity = list._capacity;\n    var newOrigin = oldOrigin + begin;\n    var newCapacity = end === undefined ? oldCapacity : end < 0 ? oldCapacity + end : oldOrigin + end;\n    if (newOrigin === oldOrigin && newCapacity === oldCapacity) {\n      return list;\n    }\n\n    // If it's going to end after it starts, it's empty.\n    if (newOrigin >= newCapacity) {\n      return list.clear();\n    }\n\n    var newLevel = list._level;\n    var newRoot = list._root;\n\n    // New origin might need creating a higher root.\n    var offsetShift = 0;\n    while (newOrigin + offsetShift < 0) {\n      newRoot = new VNode(newRoot && newRoot.array.length ? [undefined, newRoot] : [], owner);\n      newLevel += SHIFT;\n      offsetShift += 1 << newLevel;\n    }\n    if (offsetShift) {\n      newOrigin += offsetShift;\n      oldOrigin += offsetShift;\n      newCapacity += offsetShift;\n      oldCapacity += offsetShift;\n    }\n\n    var oldTailOffset = getTailOffset(oldCapacity);\n    var newTailOffset = getTailOffset(newCapacity);\n\n    // New size might need creating a higher root.\n    while (newTailOffset >= 1 << (newLevel + SHIFT)) {\n      newRoot = new VNode(newRoot && newRoot.array.length ? [newRoot] : [], owner);\n      newLevel += SHIFT;\n    }\n\n    // Locate or create the new tail.\n    var oldTail = list._tail;\n    var newTail = newTailOffset < oldTailOffset ?\n      listNodeFor(list, newCapacity - 1) :\n      newTailOffset > oldTailOffset ? new VNode([], owner) : oldTail;\n\n    // Merge Tail into tree.\n    if (oldTail && newTailOffset > oldTailOffset && newOrigin < oldCapacity && oldTail.array.length) {\n      newRoot = editableVNode(newRoot, owner);\n      var node = newRoot;\n      for (var level = newLevel; level > SHIFT; level -= SHIFT) {\n        var idx = (oldTailOffset >>> level) & MASK;\n        node = node.array[idx] = editableVNode(node.array[idx], owner);\n      }\n      node.array[(oldTailOffset >>> SHIFT) & MASK] = oldTail;\n    }\n\n    // If the size has been reduced, there's a chance the tail needs to be trimmed.\n    if (newCapacity < oldCapacity) {\n      newTail = newTail && newTail.removeAfter(owner, 0, newCapacity);\n    }\n\n    // If the new origin is within the tail, then we do not need a root.\n    if (newOrigin >= newTailOffset) {\n      newOrigin -= newTailOffset;\n      newCapacity -= newTailOffset;\n      newLevel = SHIFT;\n      newRoot = null;\n      newTail = newTail && newTail.removeBefore(owner, 0, newOrigin);\n\n    // Otherwise, if the root has been trimmed, garbage collect.\n    } else if (newOrigin > oldOrigin || newTailOffset < oldTailOffset) {\n      offsetShift = 0;\n\n      // Identify the new top root node of the subtree of the old root.\n      while (newRoot) {\n        var beginIndex = (newOrigin >>> newLevel) & MASK;\n        if (beginIndex !== (newTailOffset >>> newLevel) & MASK) {\n          break;\n        }\n        if (beginIndex) {\n          offsetShift += (1 << newLevel) * beginIndex;\n        }\n        newLevel -= SHIFT;\n        newRoot = newRoot.array[beginIndex];\n      }\n\n      // Trim the new sides of the new root.\n      if (newRoot && newOrigin > oldOrigin) {\n        newRoot = newRoot.removeBefore(owner, newLevel, newOrigin - offsetShift);\n      }\n      if (newRoot && newTailOffset < oldTailOffset) {\n        newRoot = newRoot.removeAfter(owner, newLevel, newTailOffset - offsetShift);\n      }\n      if (offsetShift) {\n        newOrigin -= offsetShift;\n        newCapacity -= offsetShift;\n      }\n    }\n\n    if (list.__ownerID) {\n      list.size = newCapacity - newOrigin;\n      list._origin = newOrigin;\n      list._capacity = newCapacity;\n      list._level = newLevel;\n      list._root = newRoot;\n      list._tail = newTail;\n      list.__hash = undefined;\n      list.__altered = true;\n      return list;\n    }\n    return makeList(newOrigin, newCapacity, newLevel, newRoot, newTail);\n  }\n\n  function mergeIntoListWith(list, merger, iterables) {\n    var iters = [];\n    var maxSize = 0;\n    for (var ii = 0; ii < iterables.length; ii++) {\n      var value = iterables[ii];\n      var iter = IndexedIterable(value);\n      if (iter.size > maxSize) {\n        maxSize = iter.size;\n      }\n      if (!isIterable(value)) {\n        iter = iter.map(function(v ) {return fromJS(v)});\n      }\n      iters.push(iter);\n    }\n    if (maxSize > list.size) {\n      list = list.setSize(maxSize);\n    }\n    return mergeIntoCollectionWith(list, merger, iters);\n  }\n\n  function getTailOffset(size) {\n    return size < SIZE ? 0 : (((size - 1) >>> SHIFT) << SHIFT);\n  }\n\n  createClass(OrderedMap, Map);\n\n    // @pragma Construction\n\n    function OrderedMap(value) {\n      return value === null || value === undefined ? emptyOrderedMap() :\n        isOrderedMap(value) ? value :\n        emptyOrderedMap().withMutations(function(map ) {\n          var iter = KeyedIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v, k)  {return map.set(k, v)});\n        });\n    }\n\n    OrderedMap.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    OrderedMap.prototype.toString = function() {\n      return this.__toString('OrderedMap {', '}');\n    };\n\n    // @pragma Access\n\n    OrderedMap.prototype.get = function(k, notSetValue) {\n      var index = this._map.get(k);\n      return index !== undefined ? this._list.get(index)[1] : notSetValue;\n    };\n\n    // @pragma Modification\n\n    OrderedMap.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = 0;\n        this._map.clear();\n        this._list.clear();\n        return this;\n      }\n      return emptyOrderedMap();\n    };\n\n    OrderedMap.prototype.set = function(k, v) {\n      return updateOrderedMap(this, k, v);\n    };\n\n    OrderedMap.prototype.remove = function(k) {\n      return updateOrderedMap(this, k, NOT_SET);\n    };\n\n    OrderedMap.prototype.wasAltered = function() {\n      return this._map.wasAltered() || this._list.wasAltered();\n    };\n\n    OrderedMap.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._list.__iterate(\n        function(entry ) {return entry && fn(entry[1], entry[0], this$0)},\n        reverse\n      );\n    };\n\n    OrderedMap.prototype.__iterator = function(type, reverse) {\n      return this._list.fromEntrySeq().__iterator(type, reverse);\n    };\n\n    OrderedMap.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      var newMap = this._map.__ensureOwner(ownerID);\n      var newList = this._list.__ensureOwner(ownerID);\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this._map = newMap;\n        this._list = newList;\n        return this;\n      }\n      return makeOrderedMap(newMap, newList, ownerID, this.__hash);\n    };\n\n\n  function isOrderedMap(maybeOrderedMap) {\n    return isMap(maybeOrderedMap) && isOrdered(maybeOrderedMap);\n  }\n\n  OrderedMap.isOrderedMap = isOrderedMap;\n\n  OrderedMap.prototype[IS_ORDERED_SENTINEL] = true;\n  OrderedMap.prototype[DELETE] = OrderedMap.prototype.remove;\n\n\n\n  function makeOrderedMap(map, list, ownerID, hash) {\n    var omap = Object.create(OrderedMap.prototype);\n    omap.size = map ? map.size : 0;\n    omap._map = map;\n    omap._list = list;\n    omap.__ownerID = ownerID;\n    omap.__hash = hash;\n    return omap;\n  }\n\n  var EMPTY_ORDERED_MAP;\n  function emptyOrderedMap() {\n    return EMPTY_ORDERED_MAP || (EMPTY_ORDERED_MAP = makeOrderedMap(emptyMap(), emptyList()));\n  }\n\n  function updateOrderedMap(omap, k, v) {\n    var map = omap._map;\n    var list = omap._list;\n    var i = map.get(k);\n    var has = i !== undefined;\n    var newMap;\n    var newList;\n    if (v === NOT_SET) { // removed\n      if (!has) {\n        return omap;\n      }\n      if (list.size >= SIZE && list.size >= map.size * 2) {\n        newList = list.filter(function(entry, idx)  {return entry !== undefined && i !== idx});\n        newMap = newList.toKeyedSeq().map(function(entry ) {return entry[0]}).flip().toMap();\n        if (omap.__ownerID) {\n          newMap.__ownerID = newList.__ownerID = omap.__ownerID;\n        }\n      } else {\n        newMap = map.remove(k);\n        newList = i === list.size - 1 ? list.pop() : list.set(i, undefined);\n      }\n    } else {\n      if (has) {\n        if (v === list.get(i)[1]) {\n          return omap;\n        }\n        newMap = map;\n        newList = list.set(i, [k, v]);\n      } else {\n        newMap = map.set(k, list.size);\n        newList = list.set(list.size, [k, v]);\n      }\n    }\n    if (omap.__ownerID) {\n      omap.size = newMap.size;\n      omap._map = newMap;\n      omap._list = newList;\n      omap.__hash = undefined;\n      return omap;\n    }\n    return makeOrderedMap(newMap, newList);\n  }\n\n  createClass(ToKeyedSequence, KeyedSeq);\n    function ToKeyedSequence(indexed, useKeys) {\n      this._iter = indexed;\n      this._useKeys = useKeys;\n      this.size = indexed.size;\n    }\n\n    ToKeyedSequence.prototype.get = function(key, notSetValue) {\n      return this._iter.get(key, notSetValue);\n    };\n\n    ToKeyedSequence.prototype.has = function(key) {\n      return this._iter.has(key);\n    };\n\n    ToKeyedSequence.prototype.valueSeq = function() {\n      return this._iter.valueSeq();\n    };\n\n    ToKeyedSequence.prototype.reverse = function() {var this$0 = this;\n      var reversedSequence = reverseFactory(this, true);\n      if (!this._useKeys) {\n        reversedSequence.valueSeq = function()  {return this$0._iter.toSeq().reverse()};\n      }\n      return reversedSequence;\n    };\n\n    ToKeyedSequence.prototype.map = function(mapper, context) {var this$0 = this;\n      var mappedSequence = mapFactory(this, mapper, context);\n      if (!this._useKeys) {\n        mappedSequence.valueSeq = function()  {return this$0._iter.toSeq().map(mapper, context)};\n      }\n      return mappedSequence;\n    };\n\n    ToKeyedSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      var ii;\n      return this._iter.__iterate(\n        this._useKeys ?\n          function(v, k)  {return fn(v, k, this$0)} :\n          ((ii = reverse ? resolveSize(this) : 0),\n            function(v ) {return fn(v, reverse ? --ii : ii++, this$0)}),\n        reverse\n      );\n    };\n\n    ToKeyedSequence.prototype.__iterator = function(type, reverse) {\n      if (this._useKeys) {\n        return this._iter.__iterator(type, reverse);\n      }\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      var ii = reverse ? resolveSize(this) : 0;\n      return new Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step :\n          iteratorValue(type, reverse ? --ii : ii++, step.value, step);\n      });\n    };\n\n  ToKeyedSequence.prototype[IS_ORDERED_SENTINEL] = true;\n\n\n  createClass(ToIndexedSequence, IndexedSeq);\n    function ToIndexedSequence(iter) {\n      this._iter = iter;\n      this.size = iter.size;\n    }\n\n    ToIndexedSequence.prototype.includes = function(value) {\n      return this._iter.includes(value);\n    };\n\n    ToIndexedSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      return this._iter.__iterate(function(v ) {return fn(v, iterations++, this$0)}, reverse);\n    };\n\n    ToIndexedSequence.prototype.__iterator = function(type, reverse) {\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      var iterations = 0;\n      return new Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step :\n          iteratorValue(type, iterations++, step.value, step)\n      });\n    };\n\n\n\n  createClass(ToSetSequence, SetSeq);\n    function ToSetSequence(iter) {\n      this._iter = iter;\n      this.size = iter.size;\n    }\n\n    ToSetSequence.prototype.has = function(key) {\n      return this._iter.includes(key);\n    };\n\n    ToSetSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._iter.__iterate(function(v ) {return fn(v, v, this$0)}, reverse);\n    };\n\n    ToSetSequence.prototype.__iterator = function(type, reverse) {\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      return new Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step :\n          iteratorValue(type, step.value, step.value, step);\n      });\n    };\n\n\n\n  createClass(FromEntriesSequence, KeyedSeq);\n    function FromEntriesSequence(entries) {\n      this._iter = entries;\n      this.size = entries.size;\n    }\n\n    FromEntriesSequence.prototype.entrySeq = function() {\n      return this._iter.toSeq();\n    };\n\n    FromEntriesSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._iter.__iterate(function(entry ) {\n        // Check if entry exists first so array access doesn't throw for holes\n        // in the parent iteration.\n        if (entry) {\n          validateEntry(entry);\n          var indexedIterable = isIterable(entry);\n          return fn(\n            indexedIterable ? entry.get(1) : entry[1],\n            indexedIterable ? entry.get(0) : entry[0],\n            this$0\n          );\n        }\n      }, reverse);\n    };\n\n    FromEntriesSequence.prototype.__iterator = function(type, reverse) {\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      return new Iterator(function()  {\n        while (true) {\n          var step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n          var entry = step.value;\n          // Check if entry exists first so array access doesn't throw for holes\n          // in the parent iteration.\n          if (entry) {\n            validateEntry(entry);\n            var indexedIterable = isIterable(entry);\n            return iteratorValue(\n              type,\n              indexedIterable ? entry.get(0) : entry[0],\n              indexedIterable ? entry.get(1) : entry[1],\n              step\n            );\n          }\n        }\n      });\n    };\n\n\n  ToIndexedSequence.prototype.cacheResult =\n  ToKeyedSequence.prototype.cacheResult =\n  ToSetSequence.prototype.cacheResult =\n  FromEntriesSequence.prototype.cacheResult =\n    cacheResultThrough;\n\n\n  function flipFactory(iterable) {\n    var flipSequence = makeSequence(iterable);\n    flipSequence._iter = iterable;\n    flipSequence.size = iterable.size;\n    flipSequence.flip = function()  {return iterable};\n    flipSequence.reverse = function () {\n      var reversedSequence = iterable.reverse.apply(this); // super.reverse()\n      reversedSequence.flip = function()  {return iterable.reverse()};\n      return reversedSequence;\n    };\n    flipSequence.has = function(key ) {return iterable.includes(key)};\n    flipSequence.includes = function(key ) {return iterable.has(key)};\n    flipSequence.cacheResult = cacheResultThrough;\n    flipSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      return iterable.__iterate(function(v, k)  {return fn(k, v, this$0) !== false}, reverse);\n    }\n    flipSequence.__iteratorUncached = function(type, reverse) {\n      if (type === ITERATE_ENTRIES) {\n        var iterator = iterable.__iterator(type, reverse);\n        return new Iterator(function()  {\n          var step = iterator.next();\n          if (!step.done) {\n            var k = step.value[0];\n            step.value[0] = step.value[1];\n            step.value[1] = k;\n          }\n          return step;\n        });\n      }\n      return iterable.__iterator(\n        type === ITERATE_VALUES ? ITERATE_KEYS : ITERATE_VALUES,\n        reverse\n      );\n    }\n    return flipSequence;\n  }\n\n\n  function mapFactory(iterable, mapper, context) {\n    var mappedSequence = makeSequence(iterable);\n    mappedSequence.size = iterable.size;\n    mappedSequence.has = function(key ) {return iterable.has(key)};\n    mappedSequence.get = function(key, notSetValue)  {\n      var v = iterable.get(key, NOT_SET);\n      return v === NOT_SET ?\n        notSetValue :\n        mapper.call(context, v, key, iterable);\n    };\n    mappedSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      return iterable.__iterate(\n        function(v, k, c)  {return fn(mapper.call(context, v, k, c), k, this$0) !== false},\n        reverse\n      );\n    }\n    mappedSequence.__iteratorUncached = function (type, reverse) {\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      return new Iterator(function()  {\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        var key = entry[0];\n        return iteratorValue(\n          type,\n          key,\n          mapper.call(context, entry[1], key, iterable),\n          step\n        );\n      });\n    }\n    return mappedSequence;\n  }\n\n\n  function reverseFactory(iterable, useKeys) {\n    var reversedSequence = makeSequence(iterable);\n    reversedSequence._iter = iterable;\n    reversedSequence.size = iterable.size;\n    reversedSequence.reverse = function()  {return iterable};\n    if (iterable.flip) {\n      reversedSequence.flip = function () {\n        var flipSequence = flipFactory(iterable);\n        flipSequence.reverse = function()  {return iterable.flip()};\n        return flipSequence;\n      };\n    }\n    reversedSequence.get = function(key, notSetValue) \n      {return iterable.get(useKeys ? key : -1 - key, notSetValue)};\n    reversedSequence.has = function(key )\n      {return iterable.has(useKeys ? key : -1 - key)};\n    reversedSequence.includes = function(value ) {return iterable.includes(value)};\n    reversedSequence.cacheResult = cacheResultThrough;\n    reversedSequence.__iterate = function (fn, reverse) {var this$0 = this;\n      return iterable.__iterate(function(v, k)  {return fn(v, k, this$0)}, !reverse);\n    };\n    reversedSequence.__iterator =\n      function(type, reverse)  {return iterable.__iterator(type, !reverse)};\n    return reversedSequence;\n  }\n\n\n  function filterFactory(iterable, predicate, context, useKeys) {\n    var filterSequence = makeSequence(iterable);\n    if (useKeys) {\n      filterSequence.has = function(key ) {\n        var v = iterable.get(key, NOT_SET);\n        return v !== NOT_SET && !!predicate.call(context, v, key, iterable);\n      };\n      filterSequence.get = function(key, notSetValue)  {\n        var v = iterable.get(key, NOT_SET);\n        return v !== NOT_SET && predicate.call(context, v, key, iterable) ?\n          v : notSetValue;\n      };\n    }\n    filterSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      iterable.__iterate(function(v, k, c)  {\n        if (predicate.call(context, v, k, c)) {\n          iterations++;\n          return fn(v, useKeys ? k : iterations - 1, this$0);\n        }\n      }, reverse);\n      return iterations;\n    };\n    filterSequence.__iteratorUncached = function (type, reverse) {\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      var iterations = 0;\n      return new Iterator(function()  {\n        while (true) {\n          var step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n          var entry = step.value;\n          var key = entry[0];\n          var value = entry[1];\n          if (predicate.call(context, value, key, iterable)) {\n            return iteratorValue(type, useKeys ? key : iterations++, value, step);\n          }\n        }\n      });\n    }\n    return filterSequence;\n  }\n\n\n  function countByFactory(iterable, grouper, context) {\n    var groups = Map().asMutable();\n    iterable.__iterate(function(v, k)  {\n      groups.update(\n        grouper.call(context, v, k, iterable),\n        0,\n        function(a ) {return a + 1}\n      );\n    });\n    return groups.asImmutable();\n  }\n\n\n  function groupByFactory(iterable, grouper, context) {\n    var isKeyedIter = isKeyed(iterable);\n    var groups = (isOrdered(iterable) ? OrderedMap() : Map()).asMutable();\n    iterable.__iterate(function(v, k)  {\n      groups.update(\n        grouper.call(context, v, k, iterable),\n        function(a ) {return (a = a || [], a.push(isKeyedIter ? [k, v] : v), a)}\n      );\n    });\n    var coerce = iterableClass(iterable);\n    return groups.map(function(arr ) {return reify(iterable, coerce(arr))});\n  }\n\n\n  function sliceFactory(iterable, begin, end, useKeys) {\n    var originalSize = iterable.size;\n\n    // Sanitize begin & end using this shorthand for ToInt32(argument)\n    // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n    if (begin !== undefined) {\n      begin = begin | 0;\n    }\n    if (end !== undefined) {\n      if (end === Infinity) {\n        end = originalSize;\n      } else {\n        end = end | 0;\n      }\n    }\n\n    if (wholeSlice(begin, end, originalSize)) {\n      return iterable;\n    }\n\n    var resolvedBegin = resolveBegin(begin, originalSize);\n    var resolvedEnd = resolveEnd(end, originalSize);\n\n    // begin or end will be NaN if they were provided as negative numbers and\n    // this iterable's size is unknown. In that case, cache first so there is\n    // a known size and these do not resolve to NaN.\n    if (resolvedBegin !== resolvedBegin || resolvedEnd !== resolvedEnd) {\n      return sliceFactory(iterable.toSeq().cacheResult(), begin, end, useKeys);\n    }\n\n    // Note: resolvedEnd is undefined when the original sequence's length is\n    // unknown and this slice did not supply an end and should contain all\n    // elements after resolvedBegin.\n    // In that case, resolvedSize will be NaN and sliceSize will remain undefined.\n    var resolvedSize = resolvedEnd - resolvedBegin;\n    var sliceSize;\n    if (resolvedSize === resolvedSize) {\n      sliceSize = resolvedSize < 0 ? 0 : resolvedSize;\n    }\n\n    var sliceSeq = makeSequence(iterable);\n\n    // If iterable.size is undefined, the size of the realized sliceSeq is\n    // unknown at this point unless the number of items to slice is 0\n    sliceSeq.size = sliceSize === 0 ? sliceSize : iterable.size && sliceSize || undefined;\n\n    if (!useKeys && isSeq(iterable) && sliceSize >= 0) {\n      sliceSeq.get = function (index, notSetValue) {\n        index = wrapIndex(this, index);\n        return index >= 0 && index < sliceSize ?\n          iterable.get(index + resolvedBegin, notSetValue) :\n          notSetValue;\n      }\n    }\n\n    sliceSeq.__iterateUncached = function(fn, reverse) {var this$0 = this;\n      if (sliceSize === 0) {\n        return 0;\n      }\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var skipped = 0;\n      var isSkipping = true;\n      var iterations = 0;\n      iterable.__iterate(function(v, k)  {\n        if (!(isSkipping && (isSkipping = skipped++ < resolvedBegin))) {\n          iterations++;\n          return fn(v, useKeys ? k : iterations - 1, this$0) !== false &&\n                 iterations !== sliceSize;\n        }\n      });\n      return iterations;\n    };\n\n    sliceSeq.__iteratorUncached = function(type, reverse) {\n      if (sliceSize !== 0 && reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      // Don't bother instantiating parent iterator if taking 0.\n      var iterator = sliceSize !== 0 && iterable.__iterator(type, reverse);\n      var skipped = 0;\n      var iterations = 0;\n      return new Iterator(function()  {\n        while (skipped++ < resolvedBegin) {\n          iterator.next();\n        }\n        if (++iterations > sliceSize) {\n          return iteratorDone();\n        }\n        var step = iterator.next();\n        if (useKeys || type === ITERATE_VALUES) {\n          return step;\n        } else if (type === ITERATE_KEYS) {\n          return iteratorValue(type, iterations - 1, undefined, step);\n        } else {\n          return iteratorValue(type, iterations - 1, step.value[1], step);\n        }\n      });\n    }\n\n    return sliceSeq;\n  }\n\n\n  function takeWhileFactory(iterable, predicate, context) {\n    var takeSequence = makeSequence(iterable);\n    takeSequence.__iterateUncached = function(fn, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var iterations = 0;\n      iterable.__iterate(function(v, k, c) \n        {return predicate.call(context, v, k, c) && ++iterations && fn(v, k, this$0)}\n      );\n      return iterations;\n    };\n    takeSequence.__iteratorUncached = function(type, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      var iterating = true;\n      return new Iterator(function()  {\n        if (!iterating) {\n          return iteratorDone();\n        }\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        var k = entry[0];\n        var v = entry[1];\n        if (!predicate.call(context, v, k, this$0)) {\n          iterating = false;\n          return iteratorDone();\n        }\n        return type === ITERATE_ENTRIES ? step :\n          iteratorValue(type, k, v, step);\n      });\n    };\n    return takeSequence;\n  }\n\n\n  function skipWhileFactory(iterable, predicate, context, useKeys) {\n    var skipSequence = makeSequence(iterable);\n    skipSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var isSkipping = true;\n      var iterations = 0;\n      iterable.__iterate(function(v, k, c)  {\n        if (!(isSkipping && (isSkipping = predicate.call(context, v, k, c)))) {\n          iterations++;\n          return fn(v, useKeys ? k : iterations - 1, this$0);\n        }\n      });\n      return iterations;\n    };\n    skipSequence.__iteratorUncached = function(type, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      var skipping = true;\n      var iterations = 0;\n      return new Iterator(function()  {\n        var step, k, v;\n        do {\n          step = iterator.next();\n          if (step.done) {\n            if (useKeys || type === ITERATE_VALUES) {\n              return step;\n            } else if (type === ITERATE_KEYS) {\n              return iteratorValue(type, iterations++, undefined, step);\n            } else {\n              return iteratorValue(type, iterations++, step.value[1], step);\n            }\n          }\n          var entry = step.value;\n          k = entry[0];\n          v = entry[1];\n          skipping && (skipping = predicate.call(context, v, k, this$0));\n        } while (skipping);\n        return type === ITERATE_ENTRIES ? step :\n          iteratorValue(type, k, v, step);\n      });\n    };\n    return skipSequence;\n  }\n\n\n  function concatFactory(iterable, values) {\n    var isKeyedIterable = isKeyed(iterable);\n    var iters = [iterable].concat(values).map(function(v ) {\n      if (!isIterable(v)) {\n        v = isKeyedIterable ?\n          keyedSeqFromValue(v) :\n          indexedSeqFromValue(Array.isArray(v) ? v : [v]);\n      } else if (isKeyedIterable) {\n        v = KeyedIterable(v);\n      }\n      return v;\n    }).filter(function(v ) {return v.size !== 0});\n\n    if (iters.length === 0) {\n      return iterable;\n    }\n\n    if (iters.length === 1) {\n      var singleton = iters[0];\n      if (singleton === iterable ||\n          isKeyedIterable && isKeyed(singleton) ||\n          isIndexed(iterable) && isIndexed(singleton)) {\n        return singleton;\n      }\n    }\n\n    var concatSeq = new ArraySeq(iters);\n    if (isKeyedIterable) {\n      concatSeq = concatSeq.toKeyedSeq();\n    } else if (!isIndexed(iterable)) {\n      concatSeq = concatSeq.toSetSeq();\n    }\n    concatSeq = concatSeq.flatten(true);\n    concatSeq.size = iters.reduce(\n      function(sum, seq)  {\n        if (sum !== undefined) {\n          var size = seq.size;\n          if (size !== undefined) {\n            return sum + size;\n          }\n        }\n      },\n      0\n    );\n    return concatSeq;\n  }\n\n\n  function flattenFactory(iterable, depth, useKeys) {\n    var flatSequence = makeSequence(iterable);\n    flatSequence.__iterateUncached = function(fn, reverse) {\n      var iterations = 0;\n      var stopped = false;\n      function flatDeep(iter, currentDepth) {var this$0 = this;\n        iter.__iterate(function(v, k)  {\n          if ((!depth || currentDepth < depth) && isIterable(v)) {\n            flatDeep(v, currentDepth + 1);\n          } else if (fn(v, useKeys ? k : iterations++, this$0) === false) {\n            stopped = true;\n          }\n          return !stopped;\n        }, reverse);\n      }\n      flatDeep(iterable, 0);\n      return iterations;\n    }\n    flatSequence.__iteratorUncached = function(type, reverse) {\n      var iterator = iterable.__iterator(type, reverse);\n      var stack = [];\n      var iterations = 0;\n      return new Iterator(function()  {\n        while (iterator) {\n          var step = iterator.next();\n          if (step.done !== false) {\n            iterator = stack.pop();\n            continue;\n          }\n          var v = step.value;\n          if (type === ITERATE_ENTRIES) {\n            v = v[1];\n          }\n          if ((!depth || stack.length < depth) && isIterable(v)) {\n            stack.push(iterator);\n            iterator = v.__iterator(type, reverse);\n          } else {\n            return useKeys ? step : iteratorValue(type, iterations++, v, step);\n          }\n        }\n        return iteratorDone();\n      });\n    }\n    return flatSequence;\n  }\n\n\n  function flatMapFactory(iterable, mapper, context) {\n    var coerce = iterableClass(iterable);\n    return iterable.toSeq().map(\n      function(v, k)  {return coerce(mapper.call(context, v, k, iterable))}\n    ).flatten(true);\n  }\n\n\n  function interposeFactory(iterable, separator) {\n    var interposedSequence = makeSequence(iterable);\n    interposedSequence.size = iterable.size && iterable.size * 2 -1;\n    interposedSequence.__iterateUncached = function(fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      iterable.__iterate(function(v, k) \n        {return (!iterations || fn(separator, iterations++, this$0) !== false) &&\n        fn(v, iterations++, this$0) !== false},\n        reverse\n      );\n      return iterations;\n    };\n    interposedSequence.__iteratorUncached = function(type, reverse) {\n      var iterator = iterable.__iterator(ITERATE_VALUES, reverse);\n      var iterations = 0;\n      var step;\n      return new Iterator(function()  {\n        if (!step || iterations % 2) {\n          step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n        }\n        return iterations % 2 ?\n          iteratorValue(type, iterations++, separator) :\n          iteratorValue(type, iterations++, step.value, step);\n      });\n    };\n    return interposedSequence;\n  }\n\n\n  function sortFactory(iterable, comparator, mapper) {\n    if (!comparator) {\n      comparator = defaultComparator;\n    }\n    var isKeyedIterable = isKeyed(iterable);\n    var index = 0;\n    var entries = iterable.toSeq().map(\n      function(v, k)  {return [k, v, index++, mapper ? mapper(v, k, iterable) : v]}\n    ).toArray();\n    entries.sort(function(a, b)  {return comparator(a[3], b[3]) || a[2] - b[2]}).forEach(\n      isKeyedIterable ?\n      function(v, i)  { entries[i].length = 2; } :\n      function(v, i)  { entries[i] = v[1]; }\n    );\n    return isKeyedIterable ? KeyedSeq(entries) :\n      isIndexed(iterable) ? IndexedSeq(entries) :\n      SetSeq(entries);\n  }\n\n\n  function maxFactory(iterable, comparator, mapper) {\n    if (!comparator) {\n      comparator = defaultComparator;\n    }\n    if (mapper) {\n      var entry = iterable.toSeq()\n        .map(function(v, k)  {return [v, mapper(v, k, iterable)]})\n        .reduce(function(a, b)  {return maxCompare(comparator, a[1], b[1]) ? b : a});\n      return entry && entry[0];\n    } else {\n      return iterable.reduce(function(a, b)  {return maxCompare(comparator, a, b) ? b : a});\n    }\n  }\n\n  function maxCompare(comparator, a, b) {\n    var comp = comparator(b, a);\n    // b is considered the new max if the comparator declares them equal, but\n    // they are not equal and b is in fact a nullish value.\n    return (comp === 0 && b !== a && (b === undefined || b === null || b !== b)) || comp > 0;\n  }\n\n\n  function zipWithFactory(keyIter, zipper, iters) {\n    var zipSequence = makeSequence(keyIter);\n    zipSequence.size = new ArraySeq(iters).map(function(i ) {return i.size}).min();\n    // Note: this a generic base implementation of __iterate in terms of\n    // __iterator which may be more generically useful in the future.\n    zipSequence.__iterate = function(fn, reverse) {\n      /* generic:\n      var iterator = this.__iterator(ITERATE_ENTRIES, reverse);\n      var step;\n      var iterations = 0;\n      while (!(step = iterator.next()).done) {\n        iterations++;\n        if (fn(step.value[1], step.value[0], this) === false) {\n          break;\n        }\n      }\n      return iterations;\n      */\n      // indexed:\n      var iterator = this.__iterator(ITERATE_VALUES, reverse);\n      var step;\n      var iterations = 0;\n      while (!(step = iterator.next()).done) {\n        if (fn(step.value, iterations++, this) === false) {\n          break;\n        }\n      }\n      return iterations;\n    };\n    zipSequence.__iteratorUncached = function(type, reverse) {\n      var iterators = iters.map(function(i )\n        {return (i = Iterable(i), getIterator(reverse ? i.reverse() : i))}\n      );\n      var iterations = 0;\n      var isDone = false;\n      return new Iterator(function()  {\n        var steps;\n        if (!isDone) {\n          steps = iterators.map(function(i ) {return i.next()});\n          isDone = steps.some(function(s ) {return s.done});\n        }\n        if (isDone) {\n          return iteratorDone();\n        }\n        return iteratorValue(\n          type,\n          iterations++,\n          zipper.apply(null, steps.map(function(s ) {return s.value}))\n        );\n      });\n    };\n    return zipSequence\n  }\n\n\n  // #pragma Helper Functions\n\n  function reify(iter, seq) {\n    return isSeq(iter) ? seq : iter.constructor(seq);\n  }\n\n  function validateEntry(entry) {\n    if (entry !== Object(entry)) {\n      throw new TypeError('Expected [K, V] tuple: ' + entry);\n    }\n  }\n\n  function resolveSize(iter) {\n    assertNotInfinite(iter.size);\n    return ensureSize(iter);\n  }\n\n  function iterableClass(iterable) {\n    return isKeyed(iterable) ? KeyedIterable :\n      isIndexed(iterable) ? IndexedIterable :\n      SetIterable;\n  }\n\n  function makeSequence(iterable) {\n    return Object.create(\n      (\n        isKeyed(iterable) ? KeyedSeq :\n        isIndexed(iterable) ? IndexedSeq :\n        SetSeq\n      ).prototype\n    );\n  }\n\n  function cacheResultThrough() {\n    if (this._iter.cacheResult) {\n      this._iter.cacheResult();\n      this.size = this._iter.size;\n      return this;\n    } else {\n      return Seq.prototype.cacheResult.call(this);\n    }\n  }\n\n  function defaultComparator(a, b) {\n    return a > b ? 1 : a < b ? -1 : 0;\n  }\n\n  function forceIterator(keyPath) {\n    var iter = getIterator(keyPath);\n    if (!iter) {\n      // Array might not be iterable in this environment, so we need a fallback\n      // to our wrapped type.\n      if (!isArrayLike(keyPath)) {\n        throw new TypeError('Expected iterable or array-like: ' + keyPath);\n      }\n      iter = getIterator(Iterable(keyPath));\n    }\n    return iter;\n  }\n\n  createClass(Record, KeyedCollection);\n\n    function Record(defaultValues, name) {\n      var hasInitialized;\n\n      var RecordType = function Record(values) {\n        if (values instanceof RecordType) {\n          return values;\n        }\n        if (!(this instanceof RecordType)) {\n          return new RecordType(values);\n        }\n        if (!hasInitialized) {\n          hasInitialized = true;\n          var keys = Object.keys(defaultValues);\n          setProps(RecordTypePrototype, keys);\n          RecordTypePrototype.size = keys.length;\n          RecordTypePrototype._name = name;\n          RecordTypePrototype._keys = keys;\n          RecordTypePrototype._defaultValues = defaultValues;\n        }\n        this._map = Map(values);\n      };\n\n      var RecordTypePrototype = RecordType.prototype = Object.create(RecordPrototype);\n      RecordTypePrototype.constructor = RecordType;\n\n      return RecordType;\n    }\n\n    Record.prototype.toString = function() {\n      return this.__toString(recordName(this) + ' {', '}');\n    };\n\n    // @pragma Access\n\n    Record.prototype.has = function(k) {\n      return this._defaultValues.hasOwnProperty(k);\n    };\n\n    Record.prototype.get = function(k, notSetValue) {\n      if (!this.has(k)) {\n        return notSetValue;\n      }\n      var defaultVal = this._defaultValues[k];\n      return this._map ? this._map.get(k, defaultVal) : defaultVal;\n    };\n\n    // @pragma Modification\n\n    Record.prototype.clear = function() {\n      if (this.__ownerID) {\n        this._map && this._map.clear();\n        return this;\n      }\n      var RecordType = this.constructor;\n      return RecordType._empty || (RecordType._empty = makeRecord(this, emptyMap()));\n    };\n\n    Record.prototype.set = function(k, v) {\n      if (!this.has(k)) {\n        throw new Error('Cannot set unknown key \"' + k + '\" on ' + recordName(this));\n      }\n      if (this._map && !this._map.has(k)) {\n        var defaultVal = this._defaultValues[k];\n        if (v === defaultVal) {\n          return this;\n        }\n      }\n      var newMap = this._map && this._map.set(k, v);\n      if (this.__ownerID || newMap === this._map) {\n        return this;\n      }\n      return makeRecord(this, newMap);\n    };\n\n    Record.prototype.remove = function(k) {\n      if (!this.has(k)) {\n        return this;\n      }\n      var newMap = this._map && this._map.remove(k);\n      if (this.__ownerID || newMap === this._map) {\n        return this;\n      }\n      return makeRecord(this, newMap);\n    };\n\n    Record.prototype.wasAltered = function() {\n      return this._map.wasAltered();\n    };\n\n    Record.prototype.__iterator = function(type, reverse) {var this$0 = this;\n      return KeyedIterable(this._defaultValues).map(function(_, k)  {return this$0.get(k)}).__iterator(type, reverse);\n    };\n\n    Record.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return KeyedIterable(this._defaultValues).map(function(_, k)  {return this$0.get(k)}).__iterate(fn, reverse);\n    };\n\n    Record.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      var newMap = this._map && this._map.__ensureOwner(ownerID);\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this._map = newMap;\n        return this;\n      }\n      return makeRecord(this, newMap, ownerID);\n    };\n\n\n  var RecordPrototype = Record.prototype;\n  RecordPrototype[DELETE] = RecordPrototype.remove;\n  RecordPrototype.deleteIn =\n  RecordPrototype.removeIn = MapPrototype.removeIn;\n  RecordPrototype.merge = MapPrototype.merge;\n  RecordPrototype.mergeWith = MapPrototype.mergeWith;\n  RecordPrototype.mergeIn = MapPrototype.mergeIn;\n  RecordPrototype.mergeDeep = MapPrototype.mergeDeep;\n  RecordPrototype.mergeDeepWith = MapPrototype.mergeDeepWith;\n  RecordPrototype.mergeDeepIn = MapPrototype.mergeDeepIn;\n  RecordPrototype.setIn = MapPrototype.setIn;\n  RecordPrototype.update = MapPrototype.update;\n  RecordPrototype.updateIn = MapPrototype.updateIn;\n  RecordPrototype.withMutations = MapPrototype.withMutations;\n  RecordPrototype.asMutable = MapPrototype.asMutable;\n  RecordPrototype.asImmutable = MapPrototype.asImmutable;\n\n\n  function makeRecord(likeRecord, map, ownerID) {\n    var record = Object.create(Object.getPrototypeOf(likeRecord));\n    record._map = map;\n    record.__ownerID = ownerID;\n    return record;\n  }\n\n  function recordName(record) {\n    return record._name || record.constructor.name || 'Record';\n  }\n\n  function setProps(prototype, names) {\n    try {\n      names.forEach(setProp.bind(undefined, prototype));\n    } catch (error) {\n      // Object.defineProperty failed. Probably IE8.\n    }\n  }\n\n  function setProp(prototype, name) {\n    Object.defineProperty(prototype, name, {\n      get: function() {\n        return this.get(name);\n      },\n      set: function(value) {\n        invariant(this.__ownerID, 'Cannot set on an immutable record.');\n        this.set(name, value);\n      }\n    });\n  }\n\n  createClass(Set, SetCollection);\n\n    // @pragma Construction\n\n    function Set(value) {\n      return value === null || value === undefined ? emptySet() :\n        isSet(value) && !isOrdered(value) ? value :\n        emptySet().withMutations(function(set ) {\n          var iter = SetIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v ) {return set.add(v)});\n        });\n    }\n\n    Set.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    Set.fromKeys = function(value) {\n      return this(KeyedIterable(value).keySeq());\n    };\n\n    Set.prototype.toString = function() {\n      return this.__toString('Set {', '}');\n    };\n\n    // @pragma Access\n\n    Set.prototype.has = function(value) {\n      return this._map.has(value);\n    };\n\n    // @pragma Modification\n\n    Set.prototype.add = function(value) {\n      return updateSet(this, this._map.set(value, true));\n    };\n\n    Set.prototype.remove = function(value) {\n      return updateSet(this, this._map.remove(value));\n    };\n\n    Set.prototype.clear = function() {\n      return updateSet(this, this._map.clear());\n    };\n\n    // @pragma Composition\n\n    Set.prototype.union = function() {var iters = SLICE$0.call(arguments, 0);\n      iters = iters.filter(function(x ) {return x.size !== 0});\n      if (iters.length === 0) {\n        return this;\n      }\n      if (this.size === 0 && !this.__ownerID && iters.length === 1) {\n        return this.constructor(iters[0]);\n      }\n      return this.withMutations(function(set ) {\n        for (var ii = 0; ii < iters.length; ii++) {\n          SetIterable(iters[ii]).forEach(function(value ) {return set.add(value)});\n        }\n      });\n    };\n\n    Set.prototype.intersect = function() {var iters = SLICE$0.call(arguments, 0);\n      if (iters.length === 0) {\n        return this;\n      }\n      iters = iters.map(function(iter ) {return SetIterable(iter)});\n      var originalSet = this;\n      return this.withMutations(function(set ) {\n        originalSet.forEach(function(value ) {\n          if (!iters.every(function(iter ) {return iter.includes(value)})) {\n            set.remove(value);\n          }\n        });\n      });\n    };\n\n    Set.prototype.subtract = function() {var iters = SLICE$0.call(arguments, 0);\n      if (iters.length === 0) {\n        return this;\n      }\n      iters = iters.map(function(iter ) {return SetIterable(iter)});\n      var originalSet = this;\n      return this.withMutations(function(set ) {\n        originalSet.forEach(function(value ) {\n          if (iters.some(function(iter ) {return iter.includes(value)})) {\n            set.remove(value);\n          }\n        });\n      });\n    };\n\n    Set.prototype.merge = function() {\n      return this.union.apply(this, arguments);\n    };\n\n    Set.prototype.mergeWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return this.union.apply(this, iters);\n    };\n\n    Set.prototype.sort = function(comparator) {\n      // Late binding\n      return OrderedSet(sortFactory(this, comparator));\n    };\n\n    Set.prototype.sortBy = function(mapper, comparator) {\n      // Late binding\n      return OrderedSet(sortFactory(this, comparator, mapper));\n    };\n\n    Set.prototype.wasAltered = function() {\n      return this._map.wasAltered();\n    };\n\n    Set.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._map.__iterate(function(_, k)  {return fn(k, k, this$0)}, reverse);\n    };\n\n    Set.prototype.__iterator = function(type, reverse) {\n      return this._map.map(function(_, k)  {return k}).__iterator(type, reverse);\n    };\n\n    Set.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      var newMap = this._map.__ensureOwner(ownerID);\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this._map = newMap;\n        return this;\n      }\n      return this.__make(newMap, ownerID);\n    };\n\n\n  function isSet(maybeSet) {\n    return !!(maybeSet && maybeSet[IS_SET_SENTINEL]);\n  }\n\n  Set.isSet = isSet;\n\n  var IS_SET_SENTINEL = '@@__IMMUTABLE_SET__@@';\n\n  var SetPrototype = Set.prototype;\n  SetPrototype[IS_SET_SENTINEL] = true;\n  SetPrototype[DELETE] = SetPrototype.remove;\n  SetPrototype.mergeDeep = SetPrototype.merge;\n  SetPrototype.mergeDeepWith = SetPrototype.mergeWith;\n  SetPrototype.withMutations = MapPrototype.withMutations;\n  SetPrototype.asMutable = MapPrototype.asMutable;\n  SetPrototype.asImmutable = MapPrototype.asImmutable;\n\n  SetPrototype.__empty = emptySet;\n  SetPrototype.__make = makeSet;\n\n  function updateSet(set, newMap) {\n    if (set.__ownerID) {\n      set.size = newMap.size;\n      set._map = newMap;\n      return set;\n    }\n    return newMap === set._map ? set :\n      newMap.size === 0 ? set.__empty() :\n      set.__make(newMap);\n  }\n\n  function makeSet(map, ownerID) {\n    var set = Object.create(SetPrototype);\n    set.size = map ? map.size : 0;\n    set._map = map;\n    set.__ownerID = ownerID;\n    return set;\n  }\n\n  var EMPTY_SET;\n  function emptySet() {\n    return EMPTY_SET || (EMPTY_SET = makeSet(emptyMap()));\n  }\n\n  createClass(OrderedSet, Set);\n\n    // @pragma Construction\n\n    function OrderedSet(value) {\n      return value === null || value === undefined ? emptyOrderedSet() :\n        isOrderedSet(value) ? value :\n        emptyOrderedSet().withMutations(function(set ) {\n          var iter = SetIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v ) {return set.add(v)});\n        });\n    }\n\n    OrderedSet.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    OrderedSet.fromKeys = function(value) {\n      return this(KeyedIterable(value).keySeq());\n    };\n\n    OrderedSet.prototype.toString = function() {\n      return this.__toString('OrderedSet {', '}');\n    };\n\n\n  function isOrderedSet(maybeOrderedSet) {\n    return isSet(maybeOrderedSet) && isOrdered(maybeOrderedSet);\n  }\n\n  OrderedSet.isOrderedSet = isOrderedSet;\n\n  var OrderedSetPrototype = OrderedSet.prototype;\n  OrderedSetPrototype[IS_ORDERED_SENTINEL] = true;\n\n  OrderedSetPrototype.__empty = emptyOrderedSet;\n  OrderedSetPrototype.__make = makeOrderedSet;\n\n  function makeOrderedSet(map, ownerID) {\n    var set = Object.create(OrderedSetPrototype);\n    set.size = map ? map.size : 0;\n    set._map = map;\n    set.__ownerID = ownerID;\n    return set;\n  }\n\n  var EMPTY_ORDERED_SET;\n  function emptyOrderedSet() {\n    return EMPTY_ORDERED_SET || (EMPTY_ORDERED_SET = makeOrderedSet(emptyOrderedMap()));\n  }\n\n  createClass(Stack, IndexedCollection);\n\n    // @pragma Construction\n\n    function Stack(value) {\n      return value === null || value === undefined ? emptyStack() :\n        isStack(value) ? value :\n        emptyStack().unshiftAll(value);\n    }\n\n    Stack.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    Stack.prototype.toString = function() {\n      return this.__toString('Stack [', ']');\n    };\n\n    // @pragma Access\n\n    Stack.prototype.get = function(index, notSetValue) {\n      var head = this._head;\n      index = wrapIndex(this, index);\n      while (head && index--) {\n        head = head.next;\n      }\n      return head ? head.value : notSetValue;\n    };\n\n    Stack.prototype.peek = function() {\n      return this._head && this._head.value;\n    };\n\n    // @pragma Modification\n\n    Stack.prototype.push = function(/*...values*/) {\n      if (arguments.length === 0) {\n        return this;\n      }\n      var newSize = this.size + arguments.length;\n      var head = this._head;\n      for (var ii = arguments.length - 1; ii >= 0; ii--) {\n        head = {\n          value: arguments[ii],\n          next: head\n        };\n      }\n      if (this.__ownerID) {\n        this.size = newSize;\n        this._head = head;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return makeStack(newSize, head);\n    };\n\n    Stack.prototype.pushAll = function(iter) {\n      iter = IndexedIterable(iter);\n      if (iter.size === 0) {\n        return this;\n      }\n      assertNotInfinite(iter.size);\n      var newSize = this.size;\n      var head = this._head;\n      iter.reverse().forEach(function(value ) {\n        newSize++;\n        head = {\n          value: value,\n          next: head\n        };\n      });\n      if (this.__ownerID) {\n        this.size = newSize;\n        this._head = head;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return makeStack(newSize, head);\n    };\n\n    Stack.prototype.pop = function() {\n      return this.slice(1);\n    };\n\n    Stack.prototype.unshift = function(/*...values*/) {\n      return this.push.apply(this, arguments);\n    };\n\n    Stack.prototype.unshiftAll = function(iter) {\n      return this.pushAll(iter);\n    };\n\n    Stack.prototype.shift = function() {\n      return this.pop.apply(this, arguments);\n    };\n\n    Stack.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = 0;\n        this._head = undefined;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return emptyStack();\n    };\n\n    Stack.prototype.slice = function(begin, end) {\n      if (wholeSlice(begin, end, this.size)) {\n        return this;\n      }\n      var resolvedBegin = resolveBegin(begin, this.size);\n      var resolvedEnd = resolveEnd(end, this.size);\n      if (resolvedEnd !== this.size) {\n        // super.slice(begin, end);\n        return IndexedCollection.prototype.slice.call(this, begin, end);\n      }\n      var newSize = this.size - resolvedBegin;\n      var head = this._head;\n      while (resolvedBegin--) {\n        head = head.next;\n      }\n      if (this.__ownerID) {\n        this.size = newSize;\n        this._head = head;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return makeStack(newSize, head);\n    };\n\n    // @pragma Mutability\n\n    Stack.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this.__altered = false;\n        return this;\n      }\n      return makeStack(this.size, this._head, ownerID, this.__hash);\n    };\n\n    // @pragma Iteration\n\n    Stack.prototype.__iterate = function(fn, reverse) {\n      if (reverse) {\n        return this.reverse().__iterate(fn);\n      }\n      var iterations = 0;\n      var node = this._head;\n      while (node) {\n        if (fn(node.value, iterations++, this) === false) {\n          break;\n        }\n        node = node.next;\n      }\n      return iterations;\n    };\n\n    Stack.prototype.__iterator = function(type, reverse) {\n      if (reverse) {\n        return this.reverse().__iterator(type);\n      }\n      var iterations = 0;\n      var node = this._head;\n      return new Iterator(function()  {\n        if (node) {\n          var value = node.value;\n          node = node.next;\n          return iteratorValue(type, iterations++, value);\n        }\n        return iteratorDone();\n      });\n    };\n\n\n  function isStack(maybeStack) {\n    return !!(maybeStack && maybeStack[IS_STACK_SENTINEL]);\n  }\n\n  Stack.isStack = isStack;\n\n  var IS_STACK_SENTINEL = '@@__IMMUTABLE_STACK__@@';\n\n  var StackPrototype = Stack.prototype;\n  StackPrototype[IS_STACK_SENTINEL] = true;\n  StackPrototype.withMutations = MapPrototype.withMutations;\n  StackPrototype.asMutable = MapPrototype.asMutable;\n  StackPrototype.asImmutable = MapPrototype.asImmutable;\n  StackPrototype.wasAltered = MapPrototype.wasAltered;\n\n\n  function makeStack(size, head, ownerID, hash) {\n    var map = Object.create(StackPrototype);\n    map.size = size;\n    map._head = head;\n    map.__ownerID = ownerID;\n    map.__hash = hash;\n    map.__altered = false;\n    return map;\n  }\n\n  var EMPTY_STACK;\n  function emptyStack() {\n    return EMPTY_STACK || (EMPTY_STACK = makeStack(0));\n  }\n\n  /**\n   * Contributes additional methods to a constructor\n   */\n  function mixin(ctor, methods) {\n    var keyCopier = function(key ) { ctor.prototype[key] = methods[key]; };\n    Object.keys(methods).forEach(keyCopier);\n    Object.getOwnPropertySymbols &&\n      Object.getOwnPropertySymbols(methods).forEach(keyCopier);\n    return ctor;\n  }\n\n  Iterable.Iterator = Iterator;\n\n  mixin(Iterable, {\n\n    // ### Conversion to other types\n\n    toArray: function() {\n      assertNotInfinite(this.size);\n      var array = new Array(this.size || 0);\n      this.valueSeq().__iterate(function(v, i)  { array[i] = v; });\n      return array;\n    },\n\n    toIndexedSeq: function() {\n      return new ToIndexedSequence(this);\n    },\n\n    toJS: function() {\n      return this.toSeq().map(\n        function(value ) {return value && typeof value.toJS === 'function' ? value.toJS() : value}\n      ).__toJS();\n    },\n\n    toJSON: function() {\n      return this.toSeq().map(\n        function(value ) {return value && typeof value.toJSON === 'function' ? value.toJSON() : value}\n      ).__toJS();\n    },\n\n    toKeyedSeq: function() {\n      return new ToKeyedSequence(this, true);\n    },\n\n    toMap: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return Map(this.toKeyedSeq());\n    },\n\n    toObject: function() {\n      assertNotInfinite(this.size);\n      var object = {};\n      this.__iterate(function(v, k)  { object[k] = v; });\n      return object;\n    },\n\n    toOrderedMap: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return OrderedMap(this.toKeyedSeq());\n    },\n\n    toOrderedSet: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return OrderedSet(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n    toSet: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return Set(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n    toSetSeq: function() {\n      return new ToSetSequence(this);\n    },\n\n    toSeq: function() {\n      return isIndexed(this) ? this.toIndexedSeq() :\n        isKeyed(this) ? this.toKeyedSeq() :\n        this.toSetSeq();\n    },\n\n    toStack: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return Stack(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n    toList: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return List(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n\n    // ### Common JavaScript methods and properties\n\n    toString: function() {\n      return '[Iterable]';\n    },\n\n    __toString: function(head, tail) {\n      if (this.size === 0) {\n        return head + tail;\n      }\n      return head + ' ' + this.toSeq().map(this.__toStringMapper).join(', ') + ' ' + tail;\n    },\n\n\n    // ### ES6 Collection methods (ES6 Array and Map)\n\n    concat: function() {var values = SLICE$0.call(arguments, 0);\n      return reify(this, concatFactory(this, values));\n    },\n\n    includes: function(searchValue) {\n      return this.some(function(value ) {return is(value, searchValue)});\n    },\n\n    entries: function() {\n      return this.__iterator(ITERATE_ENTRIES);\n    },\n\n    every: function(predicate, context) {\n      assertNotInfinite(this.size);\n      var returnValue = true;\n      this.__iterate(function(v, k, c)  {\n        if (!predicate.call(context, v, k, c)) {\n          returnValue = false;\n          return false;\n        }\n      });\n      return returnValue;\n    },\n\n    filter: function(predicate, context) {\n      return reify(this, filterFactory(this, predicate, context, true));\n    },\n\n    find: function(predicate, context, notSetValue) {\n      var entry = this.findEntry(predicate, context);\n      return entry ? entry[1] : notSetValue;\n    },\n\n    forEach: function(sideEffect, context) {\n      assertNotInfinite(this.size);\n      return this.__iterate(context ? sideEffect.bind(context) : sideEffect);\n    },\n\n    join: function(separator) {\n      assertNotInfinite(this.size);\n      separator = separator !== undefined ? '' + separator : ',';\n      var joined = '';\n      var isFirst = true;\n      this.__iterate(function(v ) {\n        isFirst ? (isFirst = false) : (joined += separator);\n        joined += v !== null && v !== undefined ? v.toString() : '';\n      });\n      return joined;\n    },\n\n    keys: function() {\n      return this.__iterator(ITERATE_KEYS);\n    },\n\n    map: function(mapper, context) {\n      return reify(this, mapFactory(this, mapper, context));\n    },\n\n    reduce: function(reducer, initialReduction, context) {\n      assertNotInfinite(this.size);\n      var reduction;\n      var useFirst;\n      if (arguments.length < 2) {\n        useFirst = true;\n      } else {\n        reduction = initialReduction;\n      }\n      this.__iterate(function(v, k, c)  {\n        if (useFirst) {\n          useFirst = false;\n          reduction = v;\n        } else {\n          reduction = reducer.call(context, reduction, v, k, c);\n        }\n      });\n      return reduction;\n    },\n\n    reduceRight: function(reducer, initialReduction, context) {\n      var reversed = this.toKeyedSeq().reverse();\n      return reversed.reduce.apply(reversed, arguments);\n    },\n\n    reverse: function() {\n      return reify(this, reverseFactory(this, true));\n    },\n\n    slice: function(begin, end) {\n      return reify(this, sliceFactory(this, begin, end, true));\n    },\n\n    some: function(predicate, context) {\n      return !this.every(not(predicate), context);\n    },\n\n    sort: function(comparator) {\n      return reify(this, sortFactory(this, comparator));\n    },\n\n    values: function() {\n      return this.__iterator(ITERATE_VALUES);\n    },\n\n\n    // ### More sequential methods\n\n    butLast: function() {\n      return this.slice(0, -1);\n    },\n\n    isEmpty: function() {\n      return this.size !== undefined ? this.size === 0 : !this.some(function()  {return true});\n    },\n\n    count: function(predicate, context) {\n      return ensureSize(\n        predicate ? this.toSeq().filter(predicate, context) : this\n      );\n    },\n\n    countBy: function(grouper, context) {\n      return countByFactory(this, grouper, context);\n    },\n\n    equals: function(other) {\n      return deepEqual(this, other);\n    },\n\n    entrySeq: function() {\n      var iterable = this;\n      if (iterable._cache) {\n        // We cache as an entries array, so we can just return the cache!\n        return new ArraySeq(iterable._cache);\n      }\n      var entriesSequence = iterable.toSeq().map(entryMapper).toIndexedSeq();\n      entriesSequence.fromEntrySeq = function()  {return iterable.toSeq()};\n      return entriesSequence;\n    },\n\n    filterNot: function(predicate, context) {\n      return this.filter(not(predicate), context);\n    },\n\n    findEntry: function(predicate, context, notSetValue) {\n      var found = notSetValue;\n      this.__iterate(function(v, k, c)  {\n        if (predicate.call(context, v, k, c)) {\n          found = [k, v];\n          return false;\n        }\n      });\n      return found;\n    },\n\n    findKey: function(predicate, context) {\n      var entry = this.findEntry(predicate, context);\n      return entry && entry[0];\n    },\n\n    findLast: function(predicate, context, notSetValue) {\n      return this.toKeyedSeq().reverse().find(predicate, context, notSetValue);\n    },\n\n    findLastEntry: function(predicate, context, notSetValue) {\n      return this.toKeyedSeq().reverse().findEntry(predicate, context, notSetValue);\n    },\n\n    findLastKey: function(predicate, context) {\n      return this.toKeyedSeq().reverse().findKey(predicate, context);\n    },\n\n    first: function() {\n      return this.find(returnTrue);\n    },\n\n    flatMap: function(mapper, context) {\n      return reify(this, flatMapFactory(this, mapper, context));\n    },\n\n    flatten: function(depth) {\n      return reify(this, flattenFactory(this, depth, true));\n    },\n\n    fromEntrySeq: function() {\n      return new FromEntriesSequence(this);\n    },\n\n    get: function(searchKey, notSetValue) {\n      return this.find(function(_, key)  {return is(key, searchKey)}, undefined, notSetValue);\n    },\n\n    getIn: function(searchKeyPath, notSetValue) {\n      var nested = this;\n      // Note: in an ES6 environment, we would prefer:\n      // for (var key of searchKeyPath) {\n      var iter = forceIterator(searchKeyPath);\n      var step;\n      while (!(step = iter.next()).done) {\n        var key = step.value;\n        nested = nested && nested.get ? nested.get(key, NOT_SET) : NOT_SET;\n        if (nested === NOT_SET) {\n          return notSetValue;\n        }\n      }\n      return nested;\n    },\n\n    groupBy: function(grouper, context) {\n      return groupByFactory(this, grouper, context);\n    },\n\n    has: function(searchKey) {\n      return this.get(searchKey, NOT_SET) !== NOT_SET;\n    },\n\n    hasIn: function(searchKeyPath) {\n      return this.getIn(searchKeyPath, NOT_SET) !== NOT_SET;\n    },\n\n    isSubset: function(iter) {\n      iter = typeof iter.includes === 'function' ? iter : Iterable(iter);\n      return this.every(function(value ) {return iter.includes(value)});\n    },\n\n    isSuperset: function(iter) {\n      iter = typeof iter.isSubset === 'function' ? iter : Iterable(iter);\n      return iter.isSubset(this);\n    },\n\n    keyOf: function(searchValue) {\n      return this.findKey(function(value ) {return is(value, searchValue)});\n    },\n\n    keySeq: function() {\n      return this.toSeq().map(keyMapper).toIndexedSeq();\n    },\n\n    last: function() {\n      return this.toSeq().reverse().first();\n    },\n\n    lastKeyOf: function(searchValue) {\n      return this.toKeyedSeq().reverse().keyOf(searchValue);\n    },\n\n    max: function(comparator) {\n      return maxFactory(this, comparator);\n    },\n\n    maxBy: function(mapper, comparator) {\n      return maxFactory(this, comparator, mapper);\n    },\n\n    min: function(comparator) {\n      return maxFactory(this, comparator ? neg(comparator) : defaultNegComparator);\n    },\n\n    minBy: function(mapper, comparator) {\n      return maxFactory(this, comparator ? neg(comparator) : defaultNegComparator, mapper);\n    },\n\n    rest: function() {\n      return this.slice(1);\n    },\n\n    skip: function(amount) {\n      return this.slice(Math.max(0, amount));\n    },\n\n    skipLast: function(amount) {\n      return reify(this, this.toSeq().reverse().skip(amount).reverse());\n    },\n\n    skipWhile: function(predicate, context) {\n      return reify(this, skipWhileFactory(this, predicate, context, true));\n    },\n\n    skipUntil: function(predicate, context) {\n      return this.skipWhile(not(predicate), context);\n    },\n\n    sortBy: function(mapper, comparator) {\n      return reify(this, sortFactory(this, comparator, mapper));\n    },\n\n    take: function(amount) {\n      return this.slice(0, Math.max(0, amount));\n    },\n\n    takeLast: function(amount) {\n      return reify(this, this.toSeq().reverse().take(amount).reverse());\n    },\n\n    takeWhile: function(predicate, context) {\n      return reify(this, takeWhileFactory(this, predicate, context));\n    },\n\n    takeUntil: function(predicate, context) {\n      return this.takeWhile(not(predicate), context);\n    },\n\n    valueSeq: function() {\n      return this.toIndexedSeq();\n    },\n\n\n    // ### Hashable Object\n\n    hashCode: function() {\n      return this.__hash || (this.__hash = hashIterable(this));\n    }\n\n\n    // ### Internal\n\n    // abstract __iterate(fn, reverse)\n\n    // abstract __iterator(type, reverse)\n  });\n\n  // var IS_ITERABLE_SENTINEL = '@@__IMMUTABLE_ITERABLE__@@';\n  // var IS_KEYED_SENTINEL = '@@__IMMUTABLE_KEYED__@@';\n  // var IS_INDEXED_SENTINEL = '@@__IMMUTABLE_INDEXED__@@';\n  // var IS_ORDERED_SENTINEL = '@@__IMMUTABLE_ORDERED__@@';\n\n  var IterablePrototype = Iterable.prototype;\n  IterablePrototype[IS_ITERABLE_SENTINEL] = true;\n  IterablePrototype[ITERATOR_SYMBOL] = IterablePrototype.values;\n  IterablePrototype.__toJS = IterablePrototype.toArray;\n  IterablePrototype.__toStringMapper = quoteString;\n  IterablePrototype.inspect =\n  IterablePrototype.toSource = function() { return this.toString(); };\n  IterablePrototype.chain = IterablePrototype.flatMap;\n  IterablePrototype.contains = IterablePrototype.includes;\n\n  mixin(KeyedIterable, {\n\n    // ### More sequential methods\n\n    flip: function() {\n      return reify(this, flipFactory(this));\n    },\n\n    mapEntries: function(mapper, context) {var this$0 = this;\n      var iterations = 0;\n      return reify(this,\n        this.toSeq().map(\n          function(v, k)  {return mapper.call(context, [k, v], iterations++, this$0)}\n        ).fromEntrySeq()\n      );\n    },\n\n    mapKeys: function(mapper, context) {var this$0 = this;\n      return reify(this,\n        this.toSeq().flip().map(\n          function(k, v)  {return mapper.call(context, k, v, this$0)}\n        ).flip()\n      );\n    }\n\n  });\n\n  var KeyedIterablePrototype = KeyedIterable.prototype;\n  KeyedIterablePrototype[IS_KEYED_SENTINEL] = true;\n  KeyedIterablePrototype[ITERATOR_SYMBOL] = IterablePrototype.entries;\n  KeyedIterablePrototype.__toJS = IterablePrototype.toObject;\n  KeyedIterablePrototype.__toStringMapper = function(v, k)  {return JSON.stringify(k) + ': ' + quoteString(v)};\n\n\n\n  mixin(IndexedIterable, {\n\n    // ### Conversion to other types\n\n    toKeyedSeq: function() {\n      return new ToKeyedSequence(this, false);\n    },\n\n\n    // ### ES6 Collection methods (ES6 Array and Map)\n\n    filter: function(predicate, context) {\n      return reify(this, filterFactory(this, predicate, context, false));\n    },\n\n    findIndex: function(predicate, context) {\n      var entry = this.findEntry(predicate, context);\n      return entry ? entry[0] : -1;\n    },\n\n    indexOf: function(searchValue) {\n      var key = this.keyOf(searchValue);\n      return key === undefined ? -1 : key;\n    },\n\n    lastIndexOf: function(searchValue) {\n      var key = this.lastKeyOf(searchValue);\n      return key === undefined ? -1 : key;\n    },\n\n    reverse: function() {\n      return reify(this, reverseFactory(this, false));\n    },\n\n    slice: function(begin, end) {\n      return reify(this, sliceFactory(this, begin, end, false));\n    },\n\n    splice: function(index, removeNum /*, ...values*/) {\n      var numArgs = arguments.length;\n      removeNum = Math.max(removeNum | 0, 0);\n      if (numArgs === 0 || (numArgs === 2 && !removeNum)) {\n        return this;\n      }\n      // If index is negative, it should resolve relative to the size of the\n      // collection. However size may be expensive to compute if not cached, so\n      // only call count() if the number is in fact negative.\n      index = resolveBegin(index, index < 0 ? this.count() : this.size);\n      var spliced = this.slice(0, index);\n      return reify(\n        this,\n        numArgs === 1 ?\n          spliced :\n          spliced.concat(arrCopy(arguments, 2), this.slice(index + removeNum))\n      );\n    },\n\n\n    // ### More collection methods\n\n    findLastIndex: function(predicate, context) {\n      var entry = this.findLastEntry(predicate, context);\n      return entry ? entry[0] : -1;\n    },\n\n    first: function() {\n      return this.get(0);\n    },\n\n    flatten: function(depth) {\n      return reify(this, flattenFactory(this, depth, false));\n    },\n\n    get: function(index, notSetValue) {\n      index = wrapIndex(this, index);\n      return (index < 0 || (this.size === Infinity ||\n          (this.size !== undefined && index > this.size))) ?\n        notSetValue :\n        this.find(function(_, key)  {return key === index}, undefined, notSetValue);\n    },\n\n    has: function(index) {\n      index = wrapIndex(this, index);\n      return index >= 0 && (this.size !== undefined ?\n        this.size === Infinity || index < this.size :\n        this.indexOf(index) !== -1\n      );\n    },\n\n    interpose: function(separator) {\n      return reify(this, interposeFactory(this, separator));\n    },\n\n    interleave: function(/*...iterables*/) {\n      var iterables = [this].concat(arrCopy(arguments));\n      var zipped = zipWithFactory(this.toSeq(), IndexedSeq.of, iterables);\n      var interleaved = zipped.flatten(true);\n      if (zipped.size) {\n        interleaved.size = zipped.size * iterables.length;\n      }\n      return reify(this, interleaved);\n    },\n\n    keySeq: function() {\n      return Range(0, this.size);\n    },\n\n    last: function() {\n      return this.get(-1);\n    },\n\n    skipWhile: function(predicate, context) {\n      return reify(this, skipWhileFactory(this, predicate, context, false));\n    },\n\n    zip: function(/*, ...iterables */) {\n      var iterables = [this].concat(arrCopy(arguments));\n      return reify(this, zipWithFactory(this, defaultZipper, iterables));\n    },\n\n    zipWith: function(zipper/*, ...iterables */) {\n      var iterables = arrCopy(arguments);\n      iterables[0] = this;\n      return reify(this, zipWithFactory(this, zipper, iterables));\n    }\n\n  });\n\n  IndexedIterable.prototype[IS_INDEXED_SENTINEL] = true;\n  IndexedIterable.prototype[IS_ORDERED_SENTINEL] = true;\n\n\n\n  mixin(SetIterable, {\n\n    // ### ES6 Collection methods (ES6 Array and Map)\n\n    get: function(value, notSetValue) {\n      return this.has(value) ? value : notSetValue;\n    },\n\n    includes: function(value) {\n      return this.has(value);\n    },\n\n\n    // ### More sequential methods\n\n    keySeq: function() {\n      return this.valueSeq();\n    }\n\n  });\n\n  SetIterable.prototype.has = IterablePrototype.includes;\n  SetIterable.prototype.contains = SetIterable.prototype.includes;\n\n\n  // Mixin subclasses\n\n  mixin(KeyedSeq, KeyedIterable.prototype);\n  mixin(IndexedSeq, IndexedIterable.prototype);\n  mixin(SetSeq, SetIterable.prototype);\n\n  mixin(KeyedCollection, KeyedIterable.prototype);\n  mixin(IndexedCollection, IndexedIterable.prototype);\n  mixin(SetCollection, SetIterable.prototype);\n\n\n  // #pragma Helper functions\n\n  function keyMapper(v, k) {\n    return k;\n  }\n\n  function entryMapper(v, k) {\n    return [k, v];\n  }\n\n  function not(predicate) {\n    return function() {\n      return !predicate.apply(this, arguments);\n    }\n  }\n\n  function neg(predicate) {\n    return function() {\n      return -predicate.apply(this, arguments);\n    }\n  }\n\n  function quoteString(value) {\n    return typeof value === 'string' ? JSON.stringify(value) : String(value);\n  }\n\n  function defaultZipper() {\n    return arrCopy(arguments);\n  }\n\n  function defaultNegComparator(a, b) {\n    return a < b ? 1 : a > b ? -1 : 0;\n  }\n\n  function hashIterable(iterable) {\n    if (iterable.size === Infinity) {\n      return 0;\n    }\n    var ordered = isOrdered(iterable);\n    var keyed = isKeyed(iterable);\n    var h = ordered ? 1 : 0;\n    var size = iterable.__iterate(\n      keyed ?\n        ordered ?\n          function(v, k)  { h = 31 * h + hashMerge(hash(v), hash(k)) | 0; } :\n          function(v, k)  { h = h + hashMerge(hash(v), hash(k)) | 0; } :\n        ordered ?\n          function(v ) { h = 31 * h + hash(v) | 0; } :\n          function(v ) { h = h + hash(v) | 0; }\n    );\n    return murmurHashOfSize(size, h);\n  }\n\n  function murmurHashOfSize(size, h) {\n    h = imul(h, 0xCC9E2D51);\n    h = imul(h << 15 | h >>> -15, 0x1B873593);\n    h = imul(h << 13 | h >>> -13, 5);\n    h = (h + 0xE6546B64 | 0) ^ size;\n    h = imul(h ^ h >>> 16, 0x85EBCA6B);\n    h = imul(h ^ h >>> 13, 0xC2B2AE35);\n    h = smi(h ^ h >>> 16);\n    return h;\n  }\n\n  function hashMerge(a, b) {\n    return a ^ b + 0x9E3779B9 + (a << 6) + (a >> 2) | 0; // int\n  }\n\n  var Immutable = {\n\n    Iterable: Iterable,\n\n    Seq: Seq,\n    Collection: Collection,\n    Map: Map,\n    OrderedMap: OrderedMap,\n    List: List,\n    Stack: Stack,\n    Set: Set,\n    OrderedSet: OrderedSet,\n\n    Record: Record,\n    Range: Range,\n    Repeat: Repeat,\n\n    is: is,\n    fromJS: fromJS\n\n  };\n\n  return Immutable;\n\n}));","import { Map } from \"immutable\";\r\n\r\nexport const createState = () => {\r\n    return Map();\r\n}\r\n\r\nexport const isValueExist = (val: any) => {\r\n    return val !== void 0;\r\n}\r\n\r\n\r\n","export enum ESide {\r\n    NONE,\r\n    BOTH,\r\n    //CCW\r\n    BACK,\r\n    //CW\r\n    FRONT\r\n}\r\n\r\n","export enum EWebGLVersion {\r\n    WEBGL1,\r\n    WEBGL2\r\n}\r\n","import { EWebGLVersion } from \"../../../../enum/EWebGLVersion\";\r\n\r\nexport const isWebgl1 = (WebGLDetectData: any) => WebGLDetectData.version === EWebGLVersion.WEBGL1;\r\n\r\nexport const isWebgl2 = (WebGLDetectData: any) => WebGLDetectData.version === EWebGLVersion.WEBGL2;\r\n\r\n","import { ensureFunc, it, requireCheckFunc } from \"../../../../../definition/typescript/decorator/contract\";\r\nimport {\r\n    initCanvas, setX, setY, setStyleWidth, setStyleHeight,\r\n    setWidth, setHeight, setCanvas, getCanvas, getWebgl1Context, getWebgl2Context\r\n} from \"../../../../../structure/ViewSystem\";\r\nimport { IO } from \"wonder-fantasy-land/dist/es2015/types/IO\";\r\nimport curry from \"wonder-lodash/curry\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { EScreenSize } from \"../../../../device/EScreenSize\";\r\nimport { RectRegion } from \"../../../../../structure/RectRegion\";\r\nimport { chain, compose } from \"../../../../../utils/functionalUtils\";\r\nimport { getRootProperty } from \"../../../../../utils/rootUtils\";\r\nimport { Map } from \"immutable\";\r\nimport { trace } from \"../../../../../utils/debugUtils\";\r\nimport { isValueExist } from \"../../../../../utils/stateUtils\";\r\nimport { Color } from \"../../../../../structure/Color\";\r\nimport { ESide } from \"../../../../enum/ESide\";\r\nimport { Log } from \"../../../../../utils/Log\";\r\nimport { ContextConfigOptionsData } from \"../../../../type/dataType\";\r\nimport { isWebgl1, isWebgl2 } from \"../../render_file/device/webglDetectUtils\";\r\nimport { EBlendFunc } from \"../../../../enum/EBlendFunc\";\r\nimport { EBlendEquation } from \"../../../../enum/EBlendEquation\";\r\n\r\nexport const getGL = (DeviceManagerDataFromSystem: any, state?: Map<any, any>): WebGLRenderingContext => {\r\n    // return state.getIn([\"DeviceManager\", \"gl\"]);\r\n    return DeviceManagerDataFromSystem.gl;\r\n}\r\n\r\nexport const setGL = curry((gl: WebGLRenderingContext, DeviceManagerDataFromSystem: any, state: Map<any, any>) => {\r\n    // return state.setIn([\"DeviceManager\", \"gl\"], gl);\r\n    DeviceManagerDataFromSystem.gl = gl;\r\n\r\n    return state;\r\n})\r\n\r\nexport const setContextConfig = curry((contextConfig: Map<string, any>, state: Map<any, any>) => {\r\n    return state.setIn([\"DeviceManager\", \"contextConfig\"], contextConfig);\r\n})\r\n\r\nexport const setPixelRatio = curry((pixelRatio: number | null, state: Map<any, any>) => {\r\n    if (pixelRatio === null) {\r\n        return state;\r\n    }\r\n\r\n    return state.setIn([\"DeviceManager\", \"pixelRatio\"], pixelRatio);\r\n})\r\n\r\nexport const getViewport = (state: Map<any, any>) => {\r\n    return state.getIn([\"DeviceManager\", \"viewport\"]);\r\n}\r\n\r\nexport const setViewportToState = (x: number, y: number, width: number, height: number, state: Map<any, any>) => {\r\n    return state.setIn([\"DeviceManager\", \"viewport\"], RectRegion.create(x, y, width, height));\r\n}\r\n\r\nexport const setCanvasPixelRatio = curry((useDevicePixelRatio: boolean, canvas: HTMLCanvasElement) => {\r\n    return IO.of(() => {\r\n        var pixelRatio: number = getRootProperty(\"devicePixelRatio\").run();\r\n\r\n        canvas.width = Math.round(canvas.width * pixelRatio);\r\n        canvas.height = Math.round(canvas.height * pixelRatio);\r\n\r\n        return pixelRatio;\r\n    });\r\n})\r\n\r\nexport const setViewportOfGL = curry((DeviceManagerDataFromSystem: any, state: Map<any, any>, {\r\n    x,\r\n    y,\r\n    width,\r\n    height\r\n}) => {\r\n    return IO.of(() => {\r\n        var gl = getGL(DeviceManagerDataFromSystem, state),\r\n            viewport = getViewport(state);\r\n\r\n        if (isValueExist(viewport) && viewport.x === x && viewport.y === y && viewport.width === width && viewport.height === height) {\r\n            return state;\r\n        }\r\n\r\n        gl.viewport(x, y, width, height);\r\n\r\n        return setViewportToState(x, y, width, height, state);\r\n    });\r\n})\r\n\r\nconst _setBodyByScreenSize =(screenSize: EScreenSize, DomQuery: any) => {\r\n    return IO.of(() => {\r\n        if (screenSize === EScreenSize.FULL) {\r\n            DomQuery.create(\"body\").css(\"margin\", \"0\");\r\n        }\r\n\r\n        return screenSize;\r\n    });\r\n}\r\n\r\nconst _getScreenData =(screenSize: EScreenSize | RectRegion) => {\r\n    return IO.of(() => {\r\n        var x = null,\r\n            y = null,\r\n            width = null,\r\n            height = null,\r\n            styleWidth = null,\r\n            styleHeight = null;\r\n\r\n        if (screenSize === EScreenSize.FULL) {\r\n            x = 0;\r\n            y = 0;\r\n            width = getRootProperty(\"innerWidth\").run();\r\n            height = getRootProperty(\"innerHeight\").run();\r\n            styleWidth = \"100%\";\r\n            styleHeight = \"100%\";\r\n        }\r\n        else {\r\n            x = (screenSize as RectRegion).x || 0;\r\n            y = (screenSize as RectRegion).y || 0;\r\n            width = (screenSize as RectRegion).width || getRootProperty(\"innerWidth\").run();\r\n            height = (screenSize as RectRegion).height || getRootProperty(\"innerHeight\").run();\r\n            styleWidth = `${width}px`;\r\n            styleHeight = `${height}px`;\r\n        }\r\n\r\n        return {\r\n            x: x,\r\n            y: y,\r\n            width: width,\r\n            height: height,\r\n            styleWidth: styleWidth,\r\n            styleHeight: styleHeight\r\n        };\r\n    });\r\n}\r\n\r\nexport const getScreenSize = (state: Map<any, any>) => {\r\n    return state.getIn([\"Main\", \"screenSize\"]);\r\n}\r\n\r\nexport const setScreen = (canvas: HTMLCanvasElement, setScreenData: Function, DeviceManagerDataFromSystem: any, state: Map<any, any>, DomQuery: any) => {\r\n    return IO.of(requireCheckFunc(() => {\r\n        it(\"should exist MainData.screenSize\", () => {\r\n            expect(getScreenSize(state)).exist;\r\n        });\r\n    }, () => {\r\n        initCanvas(canvas).run();\r\n\r\n        return compose(\r\n            chain(setScreenData(DeviceManagerDataFromSystem, canvas, state)),\r\n            chain(_getScreenData),\r\n            _setBodyByScreenSize\r\n        )(getScreenSize(state), DomQuery).run();\r\n    }));\r\n};\r\n\r\nexport const clear = (gl: WebGLRenderingContext, DeviceManagerDataFromSystem: any) => {\r\n    setColorWrite(gl, true, true, true, true, DeviceManagerDataFromSystem);\r\n\r\n    /*! optimize in ANGLE:\r\n     (need more verify:set color mask all false before clear?\r\n     so here not do the recommendation)\r\n\r\n\r\n     Recommendation: Do Not Perform Clears with Scissors or Masks Enabled\r\n     (<<WebGL Insights>> -> chapter 1)\r\n\r\n     One of the subtle differences between the Direct3D APIs and the GL APIs is that in the former, clear calls ignore scissors and masks, while the latter applies both to clears [Koch 12]. This means that if a clear is performed with the scissors test enabled, or with a color or stencil mask in use, ANGLE must draw a quad with the requested clear values, rather than using clear. This introduces some state management overhead, as ANGLE must switch out all the cached state such as shaders, sampler and texture bindings, and vertex data related to the draw call stream. It then must set up all the appropriate state for the clear, perform the clear itself, and then reset all of the affected state back to its prior settings once the clear is complete. If multiple draw buffers are currently in use, using WEBGL_draw_ buffers, then the performance implications of this emulated clear are com- pounded, as the draw must be performed once for each target. Clearing buffers without scissors or masks enabled avoids this overhead.\r\n     */\r\n\r\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT | gl.STENCIL_BUFFER_BIT);\r\n}\r\n\r\n\r\nexport const clearColorBuffer = (gl: WebGLRenderingContext) => {\r\n    gl.clear(gl.COLOR_BUFFER_BIT);\r\n}\r\n\r\nexport const setClearColor = (gl: WebGLRenderingContext, color: Color, DeviceManagerDataFromSystem: any) => {\r\n    var clearColor = DeviceManagerDataFromSystem.clearColor;\r\n\r\n    if (clearColor && clearColor.isEqual(color)) {\r\n        return;\r\n    }\r\n\r\n    gl.clearColor(color.r, color.g, color.b, color.a);\r\n\r\n    setClearColorData(color, DeviceManagerDataFromSystem);\r\n}\r\n\r\nexport const setClearColorData = (color: Color, DeviceManagerDataFromSystem: any) => {\r\n    DeviceManagerDataFromSystem.clearColor = color;\r\n}\r\n\r\nexport const setColorWrite = (gl: WebGLRenderingContext, writeRed: boolean, writeGreen: boolean, writeBlue: boolean, writeAlpha: boolean, DeviceManagerDataFromSystem: any) => {\r\n    if (DeviceManagerDataFromSystem.writeRed !== writeRed\r\n        || DeviceManagerDataFromSystem.writeGreen !== writeGreen\r\n        || DeviceManagerDataFromSystem.writeBlue !== writeBlue\r\n        || DeviceManagerDataFromSystem.writeAlpha !== writeAlpha) {\r\n        gl.colorMask(writeRed, writeGreen, writeBlue, writeAlpha);\r\n\r\n        DeviceManagerDataFromSystem.writeRed = writeRed;\r\n        DeviceManagerDataFromSystem.writeGreen = writeGreen;\r\n        DeviceManagerDataFromSystem.writeBlue = writeBlue;\r\n        DeviceManagerDataFromSystem.writeAlpha = writeAlpha;\r\n    }\r\n}\r\n\r\nexport const setSide = (gl: WebGLRenderingContext, side: ESide, DeviceManagerDataFromSystem: any) => {\r\n    if (DeviceManagerDataFromSystem.side !== side) {\r\n        switch (side) {\r\n            case ESide.NONE:\r\n                gl.enable(gl.CULL_FACE);\r\n                gl.cullFace(gl.FRONT_AND_BACK);\r\n                break;\r\n            case ESide.BOTH:\r\n                gl.disable(gl.CULL_FACE);\r\n                break;\r\n            case ESide.FRONT:\r\n                gl.enable(gl.CULL_FACE);\r\n                gl.cullFace(gl.BACK);\r\n                break;\r\n            case ESide.BACK:\r\n                gl.enable(gl.CULL_FACE);\r\n                gl.cullFace(gl.FRONT);\r\n                break;\r\n            default:\r\n                Log.error(true, Log.info.FUNC_UNEXPECT(\"side\", side));\r\n                break;\r\n        }\r\n\r\n        DeviceManagerDataFromSystem.side = side;\r\n    }\r\n}\r\n\r\nexport const setDepthWrite = (gl: any, value: boolean, DeviceManagerDataFromSystem: any) => {\r\n    if (DeviceManagerDataFromSystem.depthWrite !== value) {\r\n        gl.depthMask(value);\r\n\r\n        DeviceManagerDataFromSystem.depthWrite = value;\r\n    }\r\n}\r\n\r\nexport const setBlend = (gl: any, value: boolean, DeviceManagerDataFromSystem: any) => {\r\n    if (DeviceManagerDataFromSystem.blend !== value) {\r\n        if (value) {\r\n            gl.enable(gl.BLEND);\r\n        }\r\n        else {\r\n            gl.disable(gl.BLEND);\r\n        }\r\n\r\n        DeviceManagerDataFromSystem.blend = value;\r\n    }\r\n}\r\n\r\nexport const setBlendFunc = (gl: any, blendSrc: EBlendFunc, blendDst: EBlendFunc, DeviceManagerDataFromSystem: any) => {\r\n    if (DeviceManagerDataFromSystem.blendSrc !== blendSrc || DeviceManagerDataFromSystem.blendDst !== blendDst) {\r\n        if (DeviceManagerDataFromSystem.blend) {\r\n            gl.blendFunc(gl[blendSrc], gl[blendDst]);\r\n        }\r\n\r\n        DeviceManagerDataFromSystem.blendSrc = blendSrc;\r\n        DeviceManagerDataFromSystem.blendDst = blendDst;\r\n    }\r\n}\r\n\r\nexport const setBlendEquation = (gl: any, blendEquation: EBlendEquation, DeviceManagerDataFromSystem: any) => {\r\n    if (DeviceManagerDataFromSystem.blendEquation !== blendEquation) {\r\n        if (DeviceManagerDataFromSystem.blend) {\r\n            gl.blendEquation(gl[blendEquation]);\r\n        }\r\n\r\n        DeviceManagerDataFromSystem.blendEquation = blendEquation;\r\n    }\r\n}\r\n\r\nexport const setBlendSeparate = (gl: any, blendFuncSeparate: Array<EBlendFunc>, DeviceManagerDataFromSystem: any) => {\r\n    var blendFuncSeparateData = DeviceManagerDataFromSystem.blendFuncSeparate;\r\n\r\n    if (!blendFuncSeparateData || blendFuncSeparateData[0] !== blendFuncSeparate[0] || blendFuncSeparateData[1] !== blendFuncSeparate[1] || blendFuncSeparateData[2] !== blendFuncSeparate[2] || blendFuncSeparateData[3] !== blendFuncSeparate[3]) {\r\n        if (DeviceManagerDataFromSystem.blend) {\r\n            gl.blendFuncSeparate(gl[blendFuncSeparate[0]], gl[blendFuncSeparate[1]], gl[blendFuncSeparate[2]], gl[blendFuncSeparate[3]]);\r\n        }\r\n\r\n        DeviceManagerDataFromSystem.blendFuncSeparate = blendFuncSeparate;\r\n    }\r\n}\r\n\r\nexport const setDepthTest = (gl: any, value: boolean, DeviceManagerDataFromSystem: any) => {\r\n    if (DeviceManagerDataFromSystem.depthTest !== value) {\r\n        if (value) {\r\n            gl.enable(gl.DEPTH_TEST);\r\n        }\r\n        else {\r\n            gl.disable(gl.DEPTH_TEST);\r\n        }\r\n\r\n        DeviceManagerDataFromSystem.depthTest = value;\r\n    }\r\n}\r\n\r\nexport const setScissorTest = (gl: any, value: boolean, DeviceManagerDataFromSystem: any) => {\r\n    if (DeviceManagerDataFromSystem.scissorTest !== value) {\r\n        if (value) {\r\n            gl.enable(gl.SCISSOR_TEST);\r\n        }\r\n        else {\r\n            gl.disable(gl.SCISSOR_TEST);\r\n        }\r\n\r\n        DeviceManagerDataFromSystem.scissorTest = value;\r\n    }\r\n}\r\n\r\nexport const getOnlyGL = (canvas: HTMLCanvasElement, options: ContextConfigOptionsData, WebGLDetectDataFromSystem: any) => {\r\n    if (isWebgl1(WebGLDetectDataFromSystem)) {\r\n        Log.log(\"use webgl1\");\r\n\r\n        return getWebgl1Context(options, canvas);\r\n    }\r\n    else if (isWebgl2(WebGLDetectDataFromSystem)) {\r\n        Log.log(\"use webgl2\");\r\n\r\n        return getWebgl2Context(options, canvas);\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport const initData = (DeviceManagerDataFromSystem: any) => {\r\n    DeviceManagerDataFromSystem.gl = null;\r\n    DeviceManagerDataFromSystem.clearColor = null;\r\n\r\n    DeviceManagerDataFromSystem.writeRed = null;\r\n    DeviceManagerDataFromSystem.writeGreen = null;\r\n    DeviceManagerDataFromSystem.writeBlue = null;\r\n    DeviceManagerDataFromSystem.writeAlpha = null;\r\n\r\n    DeviceManagerDataFromSystem.side = null;\r\n    DeviceManagerDataFromSystem.depthWrite = null;\r\n    DeviceManagerDataFromSystem.blend = null;\r\n    DeviceManagerDataFromSystem.blendSrc = null;\r\n    DeviceManagerDataFromSystem.blendDst = null;\r\n    DeviceManagerDataFromSystem.depthTest = null;\r\n    DeviceManagerDataFromSystem.scissorTest = null;\r\n    DeviceManagerDataFromSystem.blendEquation = null;\r\n    DeviceManagerDataFromSystem.blendFuncSeparate = null;\r\n}\r\n","import {\r\n    setCanvas, setHeight, setStyleHeight, setStyleWidth, setWidth, setY, setX\r\n} from \"../../structure/ViewSystem\";\r\nimport { IO } from \"wonder-fantasy-land/dist/es2015/types/IO\";\r\nimport curry from \"wonder-lodash/curry\";\r\nimport { chain, compose } from \"../../utils/functionalUtils\";\r\nimport { Map } from \"immutable\";\r\nimport {\r\n    clear as clearUtils,\r\n    getGL as getGLUtils, getOnlyGL, getScreenSize as getScreenSizeUtils, getViewport as getViewportUtils,\r\n    initData as initDataUtils, setCanvasPixelRatio as setCanvasPixelRatioUtils, setClearColor as setClearColorUtils,\r\n    setColorWrite as setColorWriteUtils,\r\n    setContextConfig as setContextConfigUtils, setGL as setGLUtils, setPixelRatio as setPixelRatioUtils,\r\n    setScreen as setScreenUtils, setSide as setSideUtils,\r\n    setViewportToState as setViewportToStateUtils, setViewportOfGL as setViewportOfGLUtils\r\n} from \"../utils/worker/both_file/device/deviceManagerUtils\";\r\nimport { Log } from \"../../utils/Log\";\r\nimport { Color } from \"../../structure/Color\";\r\nimport { ESide } from \"../enum/ESide\";\r\nimport { DomQuery } from \"wonder-commonlib/dist/es2015/utils/DomQuery\";\r\n\r\nexport const createGL = curry((canvas: HTMLCanvasElement, contextConfig: Map<string, any>, WebGLDetectData: any, DeviceManagerData: any, state: Map<any, any>) => {\r\n    return IO.of(() => {\r\n        var gl = getOnlyGL(canvas, contextConfig.get(\"options\").toObject(), WebGLDetectData);\r\n\r\n        if (!gl) {\r\n            DomQuery.create(\"<p class='not-support-webgl'></p>\").prependTo(\"body\").text(\"Your device doesn't support WebGL\");\r\n        }\r\n\r\n        return compose(setCanvas(canvas), setContextConfig(contextConfig), setGL(gl, DeviceManagerData))(state);\r\n    });\r\n})\r\n\r\nexport const getGL = getGLUtils;\r\n\r\nexport const setGL = setGLUtils;\r\n\r\nexport const setContextConfig = setContextConfigUtils;\r\n\r\nexport const setPixelRatio = setPixelRatioUtils;\r\n\r\nexport const getViewport = getViewportUtils;\r\n\r\nexport const setViewportToState = setViewportToStateUtils;\r\n\r\nexport const setViewportOfGL = setViewportOfGLUtils;\r\n\r\nexport const setCanvasPixelRatio = curry((useDevicePixelRatio: boolean, canvas: HTMLCanvasElement, state: Map<any, any>) => {\r\n    return IO.of(() => {\r\n        if (!useDevicePixelRatio) {\r\n            return state;\r\n        }\r\n\r\n        let pixelRatio = setCanvasPixelRatioUtils(useDevicePixelRatio, canvas).run();\r\n\r\n        return setPixelRatio(pixelRatio, state);\r\n    });\r\n});\r\n\r\nexport const getScreenSize = getScreenSizeUtils;\r\n\r\nexport const setScreen = curry((canvas: HTMLCanvasElement, DeviceManagerData: any, DomQuery: any, state: Map<any, any>) => {\r\n    return setScreenUtils(canvas, _setScreenData, DeviceManagerData, state, DomQuery);\r\n});\r\n\r\nconst _setScreenData =curry((DeviceManagerData: any, canvas: HTMLCanvasElement, state: Map<any, any>, data: any) => {\r\n    var {\r\n        x,\r\n        y,\r\n        width,\r\n        height,\r\n        styleWidth,\r\n        styleHeight\r\n    } = data;\r\n\r\n    return IO.of(() => {\r\n        compose(chain(setStyleWidth(styleWidth)), chain(setStyleHeight(styleHeight)), chain(setHeight(height)), chain(setWidth(width)), chain(setY(y)), setX(x))(canvas).run();\r\n\r\n        return setViewportOfGL(DeviceManagerData, state, data).run();\r\n    });\r\n})\r\n\r\nexport const clear = clearUtils;\r\n\r\nexport const getClearColor = (DeviceManagerData:any) => {\r\n    return DeviceManagerData.clearColor;\r\n}\r\n\r\nexport const setClearColor = setClearColorUtils;\r\n\r\nexport const setColorWrite = setColorWriteUtils;\r\n\r\nexport const setSide = setSideUtils;\r\n\r\nexport const initData = initDataUtils;\r\n","import { Color } from \"../../../../../structure/Color\";\r\nimport { ESide } from \"../../../../enum/ESide\";\r\nimport { EBlendFunc } from \"../../../../enum/EBlendFunc\";\r\nimport { EBlendEquation } from \"../../../../enum/EBlendEquation\";\r\n\r\nexport class DeviceManagerDataCommon {\r\n    public static gl: any = null;\r\n\r\n    public static clearColor: Color = null;\r\n\r\n    public static writeRed: boolean = null;\r\n    public static writeGreen: boolean = null;\r\n    public static writeBlue: boolean = null;\r\n    public static writeAlpha: boolean = null;\r\n\r\n    public static side: ESide = null;\r\n    public static depthWrite: boolean = null;\r\n    public static blend: boolean = null;\r\n    public static depthTest: boolean = null;\r\n    public static scissorTest: boolean = null;\r\n    public static blendSrc: EBlendFunc = null;\r\n    public static blendDst: EBlendFunc = null;\r\n    public static blendEquation: EBlendEquation = null;\r\n    public static blendFuncSeparate: Array<EBlendFunc> = null;\r\n}\r\n\r\n","import { EWebGLVersion } from \"../enum/EWebGLVersion\";\r\nimport { DeviceManagerDataCommon } from \"../utils/worker/render_file/device/DeviceManagerDataCommon\";\r\n\r\nexport class DeviceManagerData extends DeviceManagerDataCommon {\r\n    public static webglVersion: EWebGLVersion = null;\r\n}\r\n","export class WorkerDetectData {\r\n    public static isSupportRenderWorkerAndSharedArrayBuffer: boolean = null;\r\n    public static isSupportSharedArrayBuffer: boolean = null;\r\n    public static renderWorkerFileDir: string = null;\r\n}","export const RenderWorkerConfig = {\r\n    useRenderWorker: true\r\n}\r\n","import curry from \"wonder-lodash/curry\";\r\nimport { DomQuery } from \"wonder-commonlib/dist/es2015/utils/DomQuery\";\r\nimport { WorkerDetectData } from \"./WorkerDetectData\";\r\nimport { root } from \"../definition/Variable\";\r\nimport { IO } from \"wonder-fantasy-land/dist/es2015/types/IO\";\r\nimport { WorkerConfigData } from \"../definition/type/mainType\";\r\nimport { RenderWorkerConfig } from \"../config/RenderWorkerConfig\";\r\n\r\nexport const detect = curry((WorkerDetectData: any) => {\r\n    /*!\r\n    for unit test\r\n     */\r\n    if (typeof root.isSupportSharedArrayBuffer_wonder !== \"undefined\" && typeof root.isSupportRenderWorkerAndSharedArrayBuffer_wonder !== \"undefined\") {\r\n        WorkerDetectData.isSupportSharedArrayBuffer = root.isSupportSharedArrayBuffer_wonder;\r\n        WorkerDetectData.isSupportRenderWorkerAndSharedArrayBuffer = root.isSupportRenderWorkerAndSharedArrayBuffer_wonder;\r\n\r\n        return;\r\n    }\r\n\r\n    let canvas = DomQuery.create(\"<canvas></canvas>\").get(0);\r\n\r\n    if (typeof SharedArrayBuffer !== \"undefined\") {\r\n        WorkerDetectData.isSupportSharedArrayBuffer = true;\r\n    }\r\n    else {\r\n        WorkerDetectData.isSupportSharedArrayBuffer = false;\r\n    }\r\n\r\n    if ((\"transferControlToOffscreen\" in canvas) && WorkerDetectData.isSupportSharedArrayBuffer) {\r\n        WorkerDetectData.isSupportRenderWorkerAndSharedArrayBuffer = true;\r\n    }\r\n    else {\r\n        WorkerDetectData.isSupportRenderWorkerAndSharedArrayBuffer = false;\r\n    }\r\n})\r\n\r\nexport const isSupportSharedArrayBuffer = () => {\r\n    return WorkerDetectData.isSupportSharedArrayBuffer;\r\n}\r\n\r\nexport const isSupportRenderWorkerAndSharedArrayBuffer = () => {\r\n    return RenderWorkerConfig.useRenderWorker && WorkerDetectData.isSupportRenderWorkerAndSharedArrayBuffer;\r\n}\r\n\r\nexport const setWorkerConfig = (config: WorkerConfigData, WorkerDetectData: any) => {\r\n    return IO.of(() => {\r\n        WorkerDetectData.renderWorkerFileDir = config.renderWorkerFileDir;\r\n    })\r\n}\r\n\r\nexport const getRenderWorkerFilePath = () => {\r\n    return `${_getValidFileDir(WorkerDetectData.renderWorkerFileDir)}wd.renderWorker.js`\r\n}\r\n\r\nconst _getValidFileDir =(dir: string) => {\r\n    if (dir.slice(-1) !== '/') {\r\n        return `${dir}/`;\r\n    }\r\n\r\n    return dir;\r\n}\r\n\r\ndetect(WorkerDetectData);\r\n","import { IUIdEntity } from \"../../core/entityObject/gameObject/IUIdEntity\";\r\nimport { Component } from \"../Component\";\r\n\r\nexport class MeshRendererData {\r\n    public static renderGameObjectArray: Array<IUIdEntity> = null;\r\n    public static gameObjectMap: Array<IUIdEntity> = null;\r\n    public static meshRendererMap: Array<Component> = null;\r\n\r\n    public static index: number = null;\r\n    public static count: number = null;\r\n}\r\n\r\n","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n\r\n@registerClass(\"Component\")\r\nexport class Component {\r\n    public index: number = null;\r\n}\r\n","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { create, getGameObject, getRenderList } from \"./MeshRendererSystem\";\r\nimport { MeshRendererData } from \"./MeshRendererData\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport { Component } from \"../Component\";\r\nimport { requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { checkComponentShouldAlive, isComponentIndexNotRemoved } from \"../ComponentSystem\";\r\n\r\n@registerClass(\"MeshRenderer\")\r\nexport class MeshRenderer extends Component {\r\n}\r\n\r\nexport const createMeshRenderer = () => {\r\n    return create(MeshRendererData);\r\n}\r\n\r\nexport const getMeshRendererGameObject = requireCheckFunc((component: MeshRenderer) => {\r\n    _checkShouldAlive(component, MeshRendererData);\r\n}, (component: MeshRenderer) => {\r\n    return getGameObject(component.index, MeshRendererData);\r\n})\r\n\r\nexport const getMeshRendererRenderList = () => {\r\n    return getRenderList(null, MeshRendererData);\r\n}\r\n\r\nconst _checkShouldAlive =(component: MeshRenderer, MeshRendererData: any) => {\r\n    checkComponentShouldAlive(component, MeshRendererData, (component: MeshRenderer, MeshRendererData: any) => {\r\n        return isComponentIndexNotRemoved(component);\r\n    })\r\n}\r\n","import { expect } from \"wonder-expect.js\";\r\nimport { it } from \"../../definition/typescript/decorator/contract\";\r\n\r\nexport const checkIndexShouldEqualCount = (ComponentData: any) => {\r\n    it(\"ComponentData.index should === ComponentData.count\", () => {\r\n        expect(ComponentData.index).equal(ComponentData.count);\r\n    });\r\n    it(\"ComponentData.index should >= 0\", () => {\r\n        expect(ComponentData.index).gte(0);\r\n    });\r\n    it(\"ComponentData.count should >= 0\", () => {\r\n        expect(ComponentData.count).gte(0);\r\n    });\r\n}\r\n","import { MeshRenderer } from \"./MeshRenderer\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport curry from \"wonder-lodash/curry\";\r\nimport { ensureFunc, it, requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { deleteBySwap } from \"../../utils/arrayUtils\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { Map } from \"immutable\";\r\nimport {\r\n    addAddComponentHandle as addAddComponentHandleToMap, addComponentToGameObjectMap,\r\n    addDisposeHandle as addDisposeHandleToMap, deleteComponentBySwapArray,\r\n    generateComponentIndex, getComponentGameObject\r\n} from \"../ComponentSystem\";\r\nimport { createMap, deleteBySwap as deleteObjectBySwap, deleteVal } from \"../../utils/objectUtils\";\r\nimport { checkIndexShouldEqualCount } from \"../utils/contractUtils\";\r\nimport { MeshRendererData } from \"./MeshRendererData\";\r\nimport { IUIdEntity } from \"../../core/entityObject/gameObject/IUIdEntity\";\r\n\r\nexport const addAddComponentHandle = (_class: any) => {\r\n    addAddComponentHandleToMap(_class, addComponent);\r\n}\r\n\r\nexport const addDisposeHandle = (_class: any) => {\r\n    addDisposeHandleToMap(_class, disposeComponent);\r\n}\r\n\r\nexport const create = requireCheckFunc((MeshRendererData: any) => {\r\n    checkIndexShouldEqualCount(MeshRendererData);\r\n}, (MeshRendererData: any) => {\r\n    var renderer = new MeshRenderer(),\r\n        index = generateComponentIndex(MeshRendererData);\r\n\r\n    renderer.index = index;\r\n\r\n    MeshRendererData.count += 1;\r\n\r\n    MeshRendererData.meshRendererMap[index] = renderer;\r\n\r\n    return renderer;\r\n})\r\n\r\nconst _setRenderGameObjectArray =requireCheckFunc((index: number, gameObject: GameObject, renderGameObjectArray: Array<GameObject>) => {\r\n    it(\"should not exist gameObject\", function() {\r\n        expect(renderGameObjectArray[index]).not.exist;\r\n    })\r\n}, (index: number, gameObject: GameObject, renderGameObjectArray: Array<GameObject>) => {\r\n    renderGameObjectArray[index] = gameObject;\r\n})\r\n\r\nexport const addComponent = (component: MeshRenderer, gameObject: GameObject) => {\r\n    _setRenderGameObjectArray(component.index, gameObject, MeshRendererData.renderGameObjectArray);\r\n\r\n    addComponentToGameObjectMap(MeshRendererData.gameObjectMap, component.index, gameObject);\r\n}\r\n\r\nexport const disposeComponent = ensureFunc((returnVal, component: MeshRenderer) => {\r\n    checkIndexShouldEqualCount(MeshRendererData);\r\n}, (component: MeshRenderer) => {\r\n    var sourceIndex = component.index,\r\n        lastComponentIndex = null;\r\n\r\n    MeshRendererData.count -= 1;\r\n    MeshRendererData.index -= 1;\r\n\r\n    lastComponentIndex = MeshRendererData.count;\r\n\r\n    deleteBySwap(sourceIndex, lastComponentIndex, MeshRendererData.renderGameObjectArray);\r\n\r\n    deleteBySwap(sourceIndex, lastComponentIndex, MeshRendererData.gameObjectMap);\r\n\r\n    deleteComponentBySwapArray(sourceIndex, lastComponentIndex, MeshRendererData.meshRendererMap);\r\n})\r\n\r\nexport const getGameObject = (index: number, Data: any) => {\r\n    return getComponentGameObject(Data.gameObjectMap, index);\r\n}\r\n\r\nexport const getRenderList = curry((state: Map<any, any>, MeshRendererData: any) => {\r\n    return MeshRendererData.renderGameObjectArray;\r\n})\r\n\r\nexport const initData = (MeshRendererData: any) => {\r\n    MeshRendererData.renderGameObjectArray = [];\r\n    MeshRendererData.gameObjectMap = [];\r\n    MeshRendererData.meshRendererMap = [];\r\n    MeshRendererData.index = 0;\r\n    MeshRendererData.count = 0;\r\n}\r\n","import { Component } from \"../../../component/Component\";\r\nimport { IUIdEntity } from \"./IUIdEntity\";\r\n\r\nexport class GameObjectData {\r\n    public static uid: number = null;\r\n    public static disposeCount: number = null;\r\n\r\n    // public static isAliveMap:GameObjectIsAliveMap = null;\r\n\r\n    public static componentMap: GameObjectComponentMap = null;\r\n    public static parentMap: GameObjectParentMap = null;\r\n    public static childrenMap: GameObjectChildrenMap = null;\r\n\r\n    public static aliveUIdArray: Array<number> = null;\r\n\r\n    //todo add name map\r\n}\r\n\r\n// export type GameObjectIsAliveMap = Map<number, boolean>;\r\n\r\nexport type GameObjectComponentMap = {\r\n    [uid: number]: GameObjectComponentData\r\n}\r\n\r\nexport type GameObjectComponentData = {\r\n    [componentId: number]: Component;\r\n}\r\n\r\nexport type GameObjectParentMap = {\r\n    [uid: number]: IUIdEntity\r\n}\r\n\r\nexport type GameObjectChildrenMap = {\r\n    [uid: number]: Array<IUIdEntity>\r\n}\r\n\r\nexport type GameObjectUIdMap = {\r\n    [uid: number]: boolean;\r\n}\r\n","export const DataBufferConfig = {\r\n    //20k\r\n    transformDataBufferCount: 20 * 1000,\r\n    //1000k vertices\r\n    geometryDataBufferCount: 1000 * 1000,\r\n\r\n    //20k\r\n    basicMaterialDataBufferCount: 20 * 1000,\r\n    lightMaterialDataBufferCount: 20 * 1000,\r\n\r\n\r\n    textureDataBufferCount: 20 * 1000,\r\n\r\n\r\n    ambientLightDataBufferCount: 1,\r\n    directionLightDataBufferCount: 10,\r\n    pointLightDataBufferCount: 1000,\r\n\r\n    frontAmbientLightCount: 1,\r\n    frontDirectionLightCount: 4,\r\n    frontPointLightCount: 4,\r\n\r\n    deferAmbientLightCount: 1,\r\n    deferDirectionLightCount: 10,\r\n    deferPointLightCount: 1000,\r\n\r\n\r\n\r\n    renderCommandBufferCount: 10 * 1024,\r\n\r\n\r\n    //16 or 32\r\n    geometryIndicesBufferBits: 16\r\n};\r\n\r\n","import { DataBufferConfig } from \"../../config/DataBufferConfig\";\r\n// import { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport { Vector3 } from \"../../math/Vector3\";\r\nimport { Matrix4 } from \"../../math/Matrix4\";\r\nimport { LinkList } from \"./LinkList\";\r\nimport { Quaternion } from \"../../math/Quaternion\";\r\nimport { Matrix3 } from \"../../math/Matrix3\";\r\nimport { Component } from \"../Component\";\r\nimport { IUIdEntity } from \"../../core/entityObject/gameObject/IUIdEntity\";\r\n\r\nexport class ThreeDTransformData {\r\n    static get maxCount() {\r\n        return DataBufferConfig.transformDataBufferCount;\r\n    }\r\n\r\n    public static localToWorldMatrices: Float32Array = null;\r\n    public static localPositions: Float32Array = null;\r\n    public static localRotations: Float32Array = null;\r\n    public static localScales: Float32Array = null;\r\n\r\n    public static defaultPosition: Vector3 = null;\r\n    public static defaultRotation: Quaternion = null;\r\n    public static defaultScale: Vector3 = null;\r\n    public static defaultLocalToWorldMatrice: Matrix4 = null;\r\n\r\n    public static firstDirtyIndex: number = null;\r\n    public static index: number = null;\r\n    public static notUsedIndexLinkList: LinkList<number> = null;\r\n\r\n    public static isTranslateMap = null;\r\n\r\n    public static parentMap: ThreeDTransformParentMap = null;\r\n    public static childrenMap: ThreeDTransformChildrenMap = null;\r\n\r\n    public static cacheMap: ThreeDTransformCacheMap = null;\r\n\r\n    public static tempMap: ThreeDTransformTempMap = null;\r\n\r\n    public static transformMap: TransformMap = null;\r\n\r\n    public static count: number = null;\r\n\r\n    public static uid: number = null;\r\n    public static disposeCount: number = null;\r\n    public static isClearCacheMap: boolean = null;\r\n\r\n    public static gameObjectMap: ThreeDTransformGameObjectMap = null;\r\n\r\n    public static aliveUIdArray: Array<number> = null;\r\n\r\n    public static buffer: ArrayBuffer = null;\r\n}\r\n\r\nexport class ThreeDTransformRelationData {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public index: number = null;\r\n    public parent: ThreeDTransformRelationData = null;\r\n    public children: Array<ThreeDTransformRelationData> = null;\r\n}\r\n\r\nexport type ThreeDTransformParentMap = {\r\n    [uid: number]: Component\r\n}\r\n\r\nexport type ThreeDTransformChildrenMap = {\r\n    [uid: number]: Array<Component>\r\n}\r\n\r\nexport type ThreeDTransformGameObjectMap = Map<number, IUIdEntity>\r\n\r\nexport type TransformMap = {\r\n    [index: number]: Component\r\n}\r\n\r\nexport type ThreeDTransformCacheMap = {\r\n    [uid: number]: ThreeDTransformCacheData\r\n}\r\n\r\nexport type ThreeDTransformCacheData = {\r\n    position: Vector3;\r\n    localPosition: Vector3;\r\n    localToWorldMatrix: Matrix4;\r\n    normalMatrix: Matrix3;\r\n}\r\n\r\nexport type ThreeDTransformTempMap = {\r\n    [uid: number]: ThreeDTransformTempData\r\n}\r\n\r\nexport type ThreeDTransformTempData = {\r\n    position: Vector3;\r\n    localPosition: Vector3;\r\n    localToWorldMatrix: Matrix4;\r\n}\r\n\r\nexport type ThreeDTransformPositionMap = {\r\n    [uid: number]: Vector3\r\n}\r\n\r\nexport type ThreeDTransformLocalPositionMap = {\r\n    [uid: number]: Vector3\r\n}\r\n\r\nexport type ThreeDTransformLocalToWorldMatrixMap = {\r\n    [uid: number]: Matrix4\r\n}\r\n","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\n@registerClass(\"Vector2\")\r\nexport class Vector2 {\r\n    public static create(x, y): Vector2;\r\n    public static create(): Vector2;\r\n\r\n    public static create(...args): Vector2 {\r\n        var m = null;\r\n\r\n        if (args.length === 0) {\r\n            m = new this();\r\n        }\r\n        else {\r\n            m = new this(args[0], args[1]);\r\n        }\r\n\r\n        return m;\r\n    }\r\n\r\n    constructor(x, y);\r\n    constructor();\r\n    constructor(...args) {\r\n        this.values = new Float32Array(2);\r\n\r\n        if (args.length > 0) {\r\n            this.values[0] = args[0];\r\n            this.values[1] = args[1];\r\n        }\r\n    }\r\n\r\n    get x() {\r\n        return this.values[0];\r\n    }\r\n    set x(x: number) {\r\n        this.values[0] = x;\r\n    }\r\n\r\n    get y() {\r\n        return this.values[1];\r\n    }\r\n    set y(y: number) {\r\n        this.values[1] = y;\r\n    }\r\n\r\n    public values: Float32Array;\r\n\r\n    public set(x: number, y: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    public add(v: Vector2) {\r\n        this.values[0] = this.values[0] + v.values[0];\r\n        this.values[1] = this.values[1] + v.values[1];\r\n\r\n        return this;\r\n    }\r\n\r\n    public addScalar(s: number) {\r\n        this.values[0] += s;\r\n        this.values[1] += s;\r\n\r\n        return this;\r\n    }\r\n\r\n    public multiplyScalar(s: number) {\r\n        this.values[0] *= s;\r\n        this.values[1] *= s;\r\n\r\n        return this;\r\n    }\r\n\r\n    public mul(v: Vector2) {\r\n        this.values[0] = this.values[0] * v.values[0];\r\n        this.values[1] = this.values[1] * v.values[1];\r\n\r\n        return this;\r\n    }\r\n\r\n    public isEqual(v: Vector2) {\r\n        return this.x === v.x && this.y === v.y;\r\n    }\r\n\r\n    public clone() {\r\n        return Vector2.create(this.x, this.y);\r\n    }\r\n}","declare var Math: any;\r\n\r\n/**\r\n * @name DEG_TO_RAD\r\n * @description Conversion factor between degrees and radians\r\n * @type Number\r\n * @example\r\n * // Convert 180 degrees to pi radians\r\n * var rad = 180 * DEG_TO_RAD;\r\n */\r\nexport const DEG_TO_RAD = Math.PI / 180;\r\n\r\n/**\r\n * @name RAD_TO_DEG\r\n * @description Conversion factor between degrees and radians\r\n * @type Number\r\n * @example\r\n * // Convert pi radians to 180 degrees\r\n * var deg = Math.PI * RAD_TO_DEG;\r\n */\r\nexport const RAD_TO_DEG = 180 / Math.PI;","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Vector2 } from \"./Vector2\";\r\nimport { DEG_TO_RAD } from \"./Global\";\r\n\r\n@registerClass(\"Matrix3\")\r\nexport class Matrix3 {\r\n    public static create(mat: Float32Array): Matrix3;\r\n    public static create(): Matrix3;\r\n\r\n    public static create(...args): Matrix3 {\r\n        var m = null;\r\n\r\n        if (args.length === 0) {\r\n            m = new this();\r\n        }\r\n        else {\r\n            m = new this(args[0]);\r\n        }\r\n\r\n        return m;\r\n    }\r\n\r\n    constructor(mat: Float32Array);\r\n    constructor();\r\n\r\n    constructor(...args) {\r\n        if (args.length === 1) {\r\n            this.values = args[0];\r\n        }\r\n        else {\r\n            this.values = new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]);\r\n        }\r\n    }\r\n\r\n    get a(): number {\r\n        return this.values[0];\r\n    }\r\n    set a(a: number) {\r\n        this.values[0] = a;\r\n    }\r\n\r\n    get c(): number {\r\n        return this.values[1];\r\n    }\r\n    set c(c: number) {\r\n        this.values[1] = c;\r\n    }\r\n\r\n    get b(): number {\r\n        return this.values[3];\r\n    }\r\n    set b(b: number) {\r\n        this.values[3] = b;\r\n    }\r\n\r\n    get d(): number {\r\n        return this.values[4];\r\n    }\r\n    set d(d: number) {\r\n        this.values[4] = d;\r\n    }\r\n\r\n    get tx(): number {\r\n        return this.values[6];\r\n    }\r\n    set tx(tx: number) {\r\n        this.values[6] = tx;\r\n    }\r\n\r\n    get ty(): number {\r\n        return this.values[7];\r\n    }\r\n    set ty(ty: number) {\r\n        this.values[7] = ty;\r\n    }\r\n\r\n    public values: Float32Array = null;\r\n\r\n    public setIdentity(): Matrix3 {\r\n        var e = this.values;\r\n\r\n        e[0] = 1;\r\n        e[3] = 0;\r\n        e[6] = 0;\r\n        e[1] = 0;\r\n        e[4] = 1;\r\n        e[7] = 0;\r\n        e[2] = 0;\r\n        e[5] = 0;\r\n        e[8] = 1;\r\n\r\n        return this;\r\n    }\r\n\r\n    public invert(): Matrix3 {\r\n        var a1 = this.values[0];\r\n        var b1 = this.values[1];\r\n        var c1 = this.values[3];\r\n        var d1 = this.values[4];\r\n        var tx1 = this.values[6];\r\n        var ty1 = this.values[7];\r\n        var n = a1 * d1 - b1 * c1;\r\n\r\n        this.values[0] = d1 / n;\r\n        this.values[1] = -b1 / n;\r\n        this.values[3] = -c1 / n;\r\n        this.values[4] = a1 / n;\r\n        this.values[6] = (c1 * ty1 - d1 * tx1) / n;\r\n        this.values[7] = -(a1 * ty1 - b1 * tx1) / n;\r\n\r\n        return this;\r\n    }\r\n\r\n    public multiplyScalar(s: number) {\r\n        var te = this.values;\r\n\r\n        te[0] *= s;\r\n        te[3] *= s;\r\n        te[6] *= s;\r\n        te[1] *= s;\r\n        te[4] *= s;\r\n        te[7] *= s;\r\n        te[2] *= s;\r\n        te[5] *= s;\r\n        te[8] *= s;\r\n\r\n        return this;\r\n    }\r\n\r\n    public multiplyVector2(vector: Vector2) {\r\n        var x = vector.x,\r\n            y = vector.y,\r\n            result = Vector2.create(),\r\n            e = this.values;\r\n\r\n        result.x = e[0] * x + e[3] * y;\r\n        result.y = e[1] * x + e[4] * y;\r\n\r\n        return result;\r\n    }\r\n\r\n    public multiplyPoint(vector: Vector2) {\r\n        var x = vector.x,\r\n            y = vector.y,\r\n            result = Vector2.create(),\r\n            e = this.values;\r\n\r\n        result.x = e[0] * x + e[3] * y + this.tx;\r\n        result.y = e[1] * x + e[4] * y + this.ty;\r\n\r\n        return result;\r\n    }\r\n\r\n    public multiply(matrix: Matrix3) {\r\n        var m11 = this.a * matrix.a + this.c * matrix.b;\r\n        var m12 = this.b * matrix.a + this.d * matrix.b;\r\n\r\n        var m21 = this.a * matrix.c + this.c * matrix.d;\r\n        var m22 = this.b * matrix.c + this.d * matrix.d;\r\n\r\n        var dx = this.a * matrix.tx + this.c * matrix.ty + this.tx;\r\n        var dy = this.b * matrix.tx + this.d * matrix.ty + this.ty;\r\n\r\n        this.a = m11;\r\n        this.b = m12;\r\n        this.c = m21;\r\n        this.d = m22;\r\n        this.tx = dx;\r\n        this.ty = dy;\r\n\r\n        return this;\r\n    }\r\n\r\n    public transpose(): Matrix3 {\r\n        var tmp, m = this.values;\r\n\r\n        tmp = m[1];\r\n        m[1] = m[3];\r\n        m[3] = tmp;\r\n        tmp = m[2];\r\n        m[2] = m[6];\r\n        m[6] = tmp;\r\n        tmp = m[5];\r\n        m[5] = m[7];\r\n        m[7] = tmp;\r\n\r\n        return this;\r\n    }\r\n\r\n    public clone() {\r\n        return Matrix3.create().set(this);\r\n    }\r\n\r\n    public cloneToArray(array: Float32Array, offset: number = 0): Matrix3 {\r\n        var values = this.values;\r\n\r\n        for (let index = 0; index < 9; index++) {\r\n            array[offset + index] = values[index];\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public set(matrix: Matrix3) {\r\n        var te = this.values,\r\n            values = matrix.values;\r\n\r\n        te[0] = values[0]; te[3] = values[3]; te[6] = values[6];\r\n        te[1] = values[1]; te[4] = values[4]; te[7] = values[7];\r\n        te[2] = values[2]; te[5] = values[5]; te[8] = values[8];\r\n\r\n        return this;\r\n    }\r\n\r\n    public setTS(t: Vector2, s: Vector2) {\r\n        this.setPosition(t.x, t.y);\r\n        this.setScale(s.x, s.y);\r\n    }\r\n\r\n    public rotate(angle: number) {\r\n        var rad = angle * DEG_TO_RAD;\r\n        var c = Math.cos(rad);\r\n        var s = Math.sin(rad);\r\n        var m11 = this.a * c + this.c * s;\r\n        var m12 = this.b * c + this.d * s;\r\n        var m21 = this.a * -s + this.c * c;\r\n        var m22 = this.b * -s + this.d * c;\r\n        this.a = m11;\r\n        this.b = m12;\r\n        this.c = m21;\r\n        this.d = m22;\r\n\r\n        //var rad = angle * DEG_TO_RAD;\r\n        //\r\n        //var cos_a = Math.cos(rad);\r\n        //var sin_a = Math.sin(rad);\r\n        //\r\n        //var values = this.values;\r\n        //\r\n        //\r\n        //var m00 = values[0];\r\n        //var m10 = values[1];\r\n        //var m20 = values[2];\r\n        //\r\n        //var m01 = values[3];\r\n        //var m11 = values[4];\r\n        //var m21 = values[5];\r\n        //\r\n        //var m02 = values[6];\r\n        //var m12 = values[7];\r\n        //var m22 = values[8];\r\n        //\r\n        //values[0] = cos_a * m00 - sin_a * m10;\r\n        //values[1] = sin_a * m00 + cos_a * m10;\r\n        //\r\n        //values[3] = cos_a * m01 - sin_a * m11;\r\n        //values[4] = sin_a * m01 + cos_a * m11;\r\n        //\r\n        //values[6] = cos_a * m02 - sin_a * m12;\r\n        //values[7] = sin_a * m02 + cos_a * m12;\r\n\r\n        return this;\r\n    }\r\n\r\n    public setRotation(angle: number) {\r\n        var rad = angle * DEG_TO_RAD;\r\n\r\n        var cos_a = Math.cos(rad);\r\n        var sin_a = Math.sin(rad);\r\n        var values = this.values;\r\n\r\n        //values[0] = cos_a;\r\n        //values[1] = sin_a;\r\n        //\r\n        //values[3] = -sin_a;\r\n        //values[4] = cos_a;\r\n        values[0] = cos_a;\r\n        values[1] = -sin_a;\r\n\r\n        values[3] = sin_a;\r\n        values[4] = cos_a;\r\n\r\n        return this;\r\n    }\r\n\r\n    public translate(x: number, y: number) {\r\n        this.tx += this.a * x + this.c * y;\r\n        this.ty += this.b * x + this.d * y;\r\n    }\r\n\r\n    public setPosition(x: number, y: number) {\r\n        this.tx = x;\r\n        this.ty = y;\r\n    }\r\n\r\n    public scale(x: number, y: number) {\r\n        this.a *= x;\r\n        this.b *= x;\r\n        this.c *= y;\r\n        this.d *= y;\r\n\r\n        //var values = this.values;\r\n        //\r\n        //values[0] *= x;\r\n        //values[1] *= x;\r\n        //values[2] *= x;\r\n        //\r\n        //values[3] *= y;\r\n        //values[4] *= y;\r\n        //values[5] *= y;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    public setScale(x: number, y: number) {\r\n        var values = this.values;\r\n\r\n        values[0] = x;\r\n        values[4] = y;\r\n\r\n        return this;\r\n    }\r\n\r\n    public getTranslation() {\r\n        return Vector2.create(this.tx, this.ty);\r\n    }\r\n\r\n    public getScale() {\r\n        return Vector2.create(\r\n            Math.sqrt(this.a * this.a + this.b * this.b),\r\n            Math.sqrt(this.c * this.c + this.d * this.d)\r\n        );\r\n    }\r\n\r\n    public getRotation() {\r\n        return this._getSkewX();\r\n    }\r\n\r\n    public getSkew() {\r\n        return Vector2.create(\r\n            this._getSkewX(),\r\n            this._getSkewY()\r\n        );\r\n    }\r\n\r\n    private _getDeltaTransformPoint(matrix: Matrix3, point: { x: number, y: number }) {\r\n        return {\r\n            x: point.x * matrix.a + point.y * matrix.c + 0,\r\n            y: point.x * matrix.b + point.y * matrix.d + 0\r\n        };\r\n    }\r\n\r\n    private _getSkewX() {\r\n        var px = this._getDeltaTransformPoint(this, { x: 0, y: 1 });\r\n\r\n        return ((180 / Math.PI) * Math.atan2(px.y, px.x) - 90);\r\n    }\r\n\r\n    private _getSkewY() {\r\n        var py = this._getDeltaTransformPoint(this, { x: 1, y: 0 });\r\n\r\n        return ((180 / Math.PI) * Math.atan2(py.y, py.x));\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Vector3 } from \"./Vector3\";\r\nimport { DEG_TO_RAD, RAD_TO_DEG } from \"./Global\";\r\nimport { Matrix4 } from \"./Matrix4\";\r\n\r\ndeclare var Math: any;\r\n\r\n@registerClass(\"Quaternion\")\r\nexport class Quaternion {\r\n    public static create(x?: number, y?: number, z?: number, w?: number) {\r\n        var obj = new this(x, y, z, w);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(x: number = 0, y: number = 0, z: number = 0, w: number = 1) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        this.w = w;\r\n    }\r\n\r\n    public x: number = null;\r\n    public y: number = null;\r\n    public z: number = null;\r\n    public w: number = null;\r\n\r\n    /**\r\n     * @function\r\n     * @name setFromEulerAngles\r\n     * @description Sets a quaternion from Euler angles specified in XYZ order.\r\n     * @param {Number} ex Angle to rotate around X axis in degrees.\r\n     * @param {Number} ey Angle to rotate around Y axis in degrees.\r\n     * @param {Number} ez Angle to rotate around Z axis in degrees.\r\n     * @returns {Quat} Self for chaining.\r\n     * @example\r\n     * var q = new Quat();\r\n     * q.setFromEulerAngles(45, 90, 180);\r\n     */\r\n    public setFromEulerAngles(eulerAngles: Vector3) {\r\n        var sx, cx, sy, cy, sz, cz, halfToRad,\r\n            ex = eulerAngles.x,\r\n            ey = eulerAngles.y,\r\n            ez = eulerAngles.z;\r\n\r\n        halfToRad = 0.5 * DEG_TO_RAD;\r\n        ex *= halfToRad;\r\n        ey *= halfToRad;\r\n        ez *= halfToRad;\r\n\r\n        sx = Math.sin(ex);\r\n        cx = Math.cos(ex);\r\n        sy = Math.sin(ey);\r\n        cy = Math.cos(ey);\r\n        sz = Math.sin(ez);\r\n        cz = Math.cos(ez);\r\n\r\n        this.x = sx * cy * cz - cx * sy * sz;\r\n        this.y = cx * sy * cz + sx * cy * sz;\r\n        this.z = cx * cy * sz - sx * sy * cz;\r\n        this.w = cx * cy * cz + sx * sy * sz;\r\n\r\n        return this;\r\n    }\r\n\r\n    public multiply(rhs: Quaternion);\r\n    public multiply(rhs1: Quaternion, rhs2: Quaternion);\r\n\r\n    public multiply(...args) {\r\n        var q1x, q1y, q1z, q1w, q2x, q2y, q2z, q2w,\r\n            rhs1, rhs2,\r\n            result = this;\r\n\r\n        if (args.length === 1) {\r\n            rhs1 = this;\r\n            rhs2 = args[0];\r\n        }\r\n        else if (args.length === 2) {\r\n            rhs1 = args[0];\r\n            rhs2 = args[1];\r\n        }\r\n\r\n        q1x = rhs1.x;\r\n        q1y = rhs1.y;\r\n        q1z = rhs1.z;\r\n        q1w = rhs1.w;\r\n\r\n        q2x = rhs2.x;\r\n        q2y = rhs2.y;\r\n        q2z = rhs2.z;\r\n        q2w = rhs2.w;\r\n\r\n        result.x = q1w * q2x + q1x * q2w + q1y * q2z - q1z * q2y;\r\n        result.y = q1w * q2y + q1y * q2w + q1z * q2x - q1x * q2z;\r\n        result.z = q1w * q2z + q1z * q2w + q1x * q2y - q1y * q2x;\r\n        result.w = q1w * q2w - q1x * q2x - q1y * q2y - q1z * q2z;\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name setFromMat4\r\n     * @description Converts the specified 4x4 matrix to a quaternion. Note that since\r\n     * a quaternion is purely a representation for orientation, only the translational part\r\n     * of the matrix is lost.\r\n     * @param {Mat4} m The 4x4 matrix to convert.\r\n     * @returns {Quat} Self for chaining.\r\n     * @example\r\n     * // Create a 4x4 rotation matrix of 180 degrees around the y-axis\r\n     * var rot = new Mat4().setFromAxisAngle(Vec3.UP, 180);\r\n     *\r\n     * // Convert to a quaternion\r\n     * var q = new Quat().setFromMat4(rot);\r\n     */\r\n    public setFromMatrix(matrix: Matrix4) {\r\n        var m00, m01, m02, m10, m11, m12, m20, m21, m22,\r\n            tr, s, rs, lx, ly, lz, m;\r\n\r\n        m = matrix.values;\r\n\r\n        // Cache matrix values for super-speed\r\n        m00 = m[0];\r\n        m01 = m[1];\r\n        m02 = m[2];\r\n        m10 = m[4];\r\n        m11 = m[5];\r\n        m12 = m[6];\r\n        m20 = m[8];\r\n        m21 = m[9];\r\n        m22 = m[10];\r\n\r\n        // Remove the scale from the matrix\r\n        lx = 1 / Math.sqrt(m00 * m00 + m01 * m01 + m02 * m02);\r\n        ly = 1 / Math.sqrt(m10 * m10 + m11 * m11 + m12 * m12);\r\n        lz = 1 / Math.sqrt(m20 * m20 + m21 * m21 + m22 * m22);\r\n\r\n        m00 *= lx;\r\n        m01 *= lx;\r\n        m02 *= lx;\r\n        m10 *= ly;\r\n        m11 *= ly;\r\n        m12 *= ly;\r\n        m20 *= lz;\r\n        m21 *= lz;\r\n        m22 *= lz;\r\n\r\n        // http://www.cs.ucr.edu/~vbz/resources/quatut.pdf\r\n\r\n        tr = m00 + m11 + m22;\r\n        if (tr >= 0) {\r\n            s = Math.sqrt(tr + 1);\r\n            this.w = s * 0.5;\r\n            s = 0.5 / s;\r\n            this.x = (m12 - m21) * s;\r\n            this.y = (m20 - m02) * s;\r\n            this.z = (m01 - m10) * s;\r\n        } else {\r\n            if (m00 > m11) {\r\n                if (m00 > m22) {\r\n                    // XDiagDomMatrix\r\n                    rs = (m00 - (m11 + m22)) + 1;\r\n                    rs = Math.sqrt(rs);\r\n\r\n                    this.x = rs * 0.5;\r\n                    rs = 0.5 / rs;\r\n                    this.w = (m12 - m21) * rs;\r\n                    this.y = (m01 + m10) * rs;\r\n                    this.z = (m02 + m20) * rs;\r\n                } else {\r\n                    // ZDiagDomMatrix\r\n                    rs = (m22 - (m00 + m11)) + 1;\r\n                    rs = Math.sqrt(rs);\r\n\r\n                    this.z = rs * 0.5;\r\n                    rs = 0.5 / rs;\r\n                    this.w = (m01 - m10) * rs;\r\n                    this.x = (m20 + m02) * rs;\r\n                    this.y = (m21 + m12) * rs;\r\n                }\r\n            } else if (m11 > m22) {\r\n                // YDiagDomMatrix\r\n                rs = (m11 - (m22 + m00)) + 1;\r\n                rs = Math.sqrt(rs);\r\n\r\n                this.y = rs * 0.5;\r\n                rs = 0.5 / rs;\r\n                this.w = (m20 - m02) * rs;\r\n                this.z = (m12 + m21) * rs;\r\n                this.x = (m10 + m01) * rs;\r\n            } else {\r\n                // ZDiagDomMatrix\r\n                rs = (m22 - (m00 + m11)) + 1;\r\n                rs = Math.sqrt(rs);\r\n\r\n                this.z = rs * 0.5;\r\n                rs = 0.5 / rs;\r\n                this.w = (m01 - m10) * rs;\r\n                this.x = (m20 + m02) * rs;\r\n                this.y = (m21 + m12) * rs;\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name setFromAxisAngle\r\n     * @description Sets a quaternion from an angular rotation around an axis.\r\n     * @param {Vec3} axis World space axis around which to rotate.\r\n     * @param {Number} angle Angle to rotate around the given axis in degrees.\r\n     * @returns {Quat} Self for chaining.\r\n     * @example\r\n     * var q = new Quat();\r\n     * q.setFromAxisAngle(Vec3.UP, 90);\r\n     */\r\n    public setFromAxisAngle(angle: number, axis: Vector3) {\r\n        var sa, ca;\r\n\r\n        axis = axis.normalize();\r\n\r\n        angle *= 0.5 * DEG_TO_RAD;\r\n\r\n        sa = Math.sin(angle);\r\n        ca = Math.cos(angle);\r\n\r\n        this.x = sa * axis.x;\r\n        this.y = sa * axis.y;\r\n        this.z = sa * axis.z;\r\n        this.w = ca;\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name invert\r\n     * @description Generates the inverse of the specified quaternion.\r\n     * @returns {Quat} Self for chaining.\r\n     * @example\r\n     * // Create a quaternion rotated 180 degrees around the y-axis\r\n     * var rot = new Quat().setFromEulerAngles(0, 180, 0);\r\n     *\r\n     * // Invert in place\r\n     * rot.invert();\r\n     */\r\n    public invert() {\r\n        return this.conjugate().normalize();\r\n    }\r\n\r\n    public conjugate() {\r\n        this.x *= -1;\r\n        this.y *= -1;\r\n        this.z *= -1;\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name clone\r\n     * @description Returns an identical clone of the specified quaternion.\r\n     * @returns {Quat} A quaternion containing the result of the cloning.\r\n     * @example\r\n     * var q = new Quat(-0.11, -0.15, -0.46, 0.87);\r\n     * var qclone = q.clone();\r\n     *\r\n     * console.log(\"The result of the cloning is: \" + q.toString());\r\n     */\r\n    public clone() {\r\n        return Quaternion.create(this.x, this.y, this.z, this.w);\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name normalize\r\n     * @description Returns the specified quaternion converted in place to a unit quaternion.\r\n     * @returns {Quat} The result of the normalization.\r\n     * @example\r\n     * var v = new Quat(0, 0, 0, 5);\r\n     *\r\n     * v.normalize();\r\n     *\r\n     * // Should output 0, 0, 0, 1\r\n     * console.log(\"The result of the vector normalization is: \" + v.toString());\r\n     */\r\n    public normalize() {\r\n        var len = this.length();\r\n        if (len === 0) {\r\n            this.x = this.y = this.z = 0;\r\n            this.w = 1;\r\n        } else {\r\n            len = 1 / len;\r\n            this.x *= len;\r\n            this.y *= len;\r\n            this.z *= len;\r\n            this.w *= len;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name length\r\n     * @description Returns the magnitude of the specified quaternion.\r\n     * @returns {Number} The magnitude of the specified quaternion.\r\n     * @example\r\n     * var q = new Quat(0, 0, 0, 5);\r\n     * var len = q.length();\r\n     * // Should output 5\r\n     * console.log(\"The length of the quaternion is: \" + len);\r\n     */\r\n    public length() {\r\n        var x, y, z, w;\r\n\r\n        x = this.x;\r\n        y = this.y;\r\n        z = this.z;\r\n        w = this.w;\r\n\r\n        return Math.sqrt(x * x + y * y + z * z + w * w);\r\n    }\r\n\r\n\r\n    public multiplyVector3(vector: Vector3) {\r\n        var q = this;\r\n        var x = vector.x;\r\n        var y = vector.y;\r\n        var z = vector.z;\r\n\r\n        var qx = q.x;\r\n        var qy = q.y;\r\n        var qz = q.z;\r\n        var qw = q.w;\r\n\r\n        // calculate quat * vector\r\n\r\n        var ix = qw * x + qy * z - qz * y;\r\n        var iy = qw * y + qz * x - qx * z;\r\n        var iz = qw * z + qx * y - qy * x;\r\n        var iw = - qx * x - qy * y - qz * z;\r\n\r\n        // calculate result * inverse quat\r\n\r\n        return Vector3.create(\r\n            ix * qw + iw * - qx + iy * - qz - iz * - qy,\r\n            iy * qw + iw * - qy + iz * - qx - ix * - qz,\r\n            iz * qw + iw * - qz + ix * - qy - iy * - qx\r\n        );\r\n    }\r\n\r\n    public set(x: number, y: number, z: number, w: number) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n        this.w = w;\r\n\r\n        return this;\r\n    }\r\n\r\n    public sub(quat: Quaternion) {\r\n        var result = quat.clone().invert().multiply(this);\r\n\r\n        this.set(result.x, result.y, result.z, result.w);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name getEulerAngles\r\n     * @description Converts the supplied quaternion to Euler angles.\r\n     * @param {Vec3} [eulers] The 3-dimensional vector to receive the Euler angles.\r\n     * @returns {Vec3} The 3-dimensional vector holding the Euler angles that\r\n     * correspond to the supplied quaternion.\r\n     */\r\n    public getEulerAngles() {\r\n        var x, y, z, qx, qy, qz, qw, a2;\r\n\r\n        qx = this.x;\r\n        qy = this.y;\r\n        qz = this.z;\r\n        qw = this.w;\r\n\r\n        a2 = 2 * (qw * qy - qx * qz);\r\n        if (a2 <= -0.99999) {\r\n            x = 2 * Math.atan2(qx, qw);\r\n            y = -Math.PI / 2;\r\n            z = 0;\r\n        } else if (a2 >= 0.99999) {\r\n            x = 2 * Math.atan2(qx, qw);\r\n            y = Math.PI / 2;\r\n            z = 0;\r\n        } else {\r\n            x = Math.atan2(2 * (qw * qx + qy * qz), 1 - 2 * (qx * qx + qy * qy));\r\n            y = Math.asin(a2);\r\n            z = Math.atan2(2 * (qw * qz + qx * qy), 1 - 2 * (qy * qy + qz * qz));\r\n        }\r\n\r\n        return Vector3.create(x, y, z).scale(RAD_TO_DEG);\r\n    }\r\n\r\n    public slerp(left: Quaternion, right: Quaternion, amount: number): Quaternion {\r\n        if (amount === 0) {\r\n            this.set(left.x, left.y, left.z, left.w);\r\n\r\n            return this;\r\n        }\r\n        else if (amount === 1) {\r\n            this.set(right.x, right.y, right.z, right.w);\r\n\r\n            return this;\r\n        }\r\n\r\n        var num2;\r\n        var num3;\r\n        var num = amount;\r\n        var num4 = (((left.x * right.x) + (left.y * right.y)) + (left.z * right.z)) + (left.w * right.w);\r\n        var flag = false;\r\n\r\n        if (num4 < 0) {\r\n            flag = true;\r\n            num4 = -num4;\r\n        }\r\n\r\n        if (num4 > 0.999999) {\r\n            num3 = 1 - num;\r\n            num2 = flag ? -num : num;\r\n        }\r\n        else {\r\n            var num5 = Math.acos(num4);\r\n            var num6 = (1.0 / Math.sin(num5));\r\n            num3 = (Math.sin((1.0 - num) * num5)) * num6;\r\n            num2 = flag ? ((-Math.sin(num * num5)) * num6) : ((Math.sin(num * num5)) * num6);\r\n        }\r\n\r\n        this.set((num3 * left.x) + (num2 * right.x), (num3 * left.y) + (num2 * right.y), (num3 * left.z) + (num2 * right.z), (num3 * left.w) + (num2 * right.w));\r\n\r\n        return this;\r\n    }\r\n}","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { Matrix3 } from \"./Matrix3\";\r\nimport { Log } from \"../utils/Log\";\r\nimport { requireCheck, it } from \"../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { Vector3 } from \"./Vector3\";\r\nimport { Vector4 } from \"./Vector4\";\r\nimport { Quaternion } from \"./Quaternion\";\r\nimport { RAD_TO_DEG } from \"./Global\";\r\n\r\ndeclare var Math: any;\r\n\r\n/*!\r\n 注意：矩阵元素是按列主序存储在数组中的。\r\n */\r\n@registerClass(\"Matrix4\")\r\nexport class Matrix4 {\r\n    public static create(mat: Float32Array): Matrix4;\r\n    public static create(): Matrix4;\r\n\r\n    public static create(...args): Matrix4 {\r\n        var m = null;\r\n\r\n        if (args.length === 0) {\r\n            m = new this();\r\n        }\r\n        else {\r\n            m = new this(args[0]);\r\n        }\r\n\r\n        return m;\r\n    }\r\n\r\n    constructor(mat: Float32Array);\r\n    constructor();\r\n\r\n    constructor(...args) {\r\n        if (args.length === 1) {\r\n            this.values = args[0];\r\n        }\r\n        else {\r\n            this.values = new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\r\n        }\r\n    }\r\n\r\n    public values: Float32Array = null;\r\n\r\n    public set(initialM11: number, initialM12: number, initialM13: number, initialM14: number,\r\n        initialM21: number, initialM22: number, initialM23: number, initialM24: number,\r\n        initialM31: number, initialM32: number, initialM33: number, initialM34: number,\r\n        initialM41: number, initialM42: number, initialM43: number, initialM44: number) {\r\n        var te = this.values;\r\n\r\n        te[0] = initialM11;\r\n        te[1] = initialM12;\r\n        te[2] = initialM13;\r\n        te[3] = initialM14;\r\n        te[4] = initialM21;\r\n        te[5] = initialM22;\r\n        te[6] = initialM23;\r\n        te[7] = initialM24;\r\n        te[8] = initialM31;\r\n        te[9] = initialM32;\r\n        te[10] = initialM33;\r\n        te[11] = initialM34;\r\n        te[12] = initialM41;\r\n        te[13] = initialM42;\r\n        te[14] = initialM43;\r\n        te[15] = initialM44;\r\n\r\n        return this;\r\n    }\r\n\r\n    public setIdentity(): Matrix4 {\r\n        var e = this.values;\r\n        e[0] = 1; e[4] = 0; e[8] = 0; e[12] = 0;\r\n        e[1] = 0; e[5] = 1; e[9] = 0; e[13] = 0;\r\n        e[2] = 0; e[6] = 0; e[10] = 1; e[14] = 0;\r\n        e[3] = 0; e[7] = 0; e[11] = 0; e[15] = 1;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Calculate the inverse matrix of specified matrix, and set to this.\r\n     * @param other The source matrix\r\n     * @return this\r\n     */\r\n    public invert(): Matrix4 {\r\n        var a00, a01, a02, a03,\r\n            a10, a11, a12, a13,\r\n            a20, a21, a22, a23,\r\n            a30, a31, a32, a33,\r\n            b00, b01, b02, b03,\r\n            b04, b05, b06, b07,\r\n            b08, b09, b10, b11,\r\n            invDet, m;\r\n\r\n        m = this.values;\r\n        a00 = m[0];\r\n        a01 = m[1];\r\n        a02 = m[2];\r\n        a03 = m[3];\r\n        a10 = m[4];\r\n        a11 = m[5];\r\n        a12 = m[6];\r\n        a13 = m[7];\r\n        a20 = m[8];\r\n        a21 = m[9];\r\n        a22 = m[10];\r\n        a23 = m[11];\r\n        a30 = m[12];\r\n        a31 = m[13];\r\n        a32 = m[14];\r\n        a33 = m[15];\r\n\r\n        b00 = a00 * a11 - a01 * a10;\r\n        b01 = a00 * a12 - a02 * a10;\r\n        b02 = a00 * a13 - a03 * a10;\r\n        b03 = a01 * a12 - a02 * a11;\r\n        b04 = a01 * a13 - a03 * a11;\r\n        b05 = a02 * a13 - a03 * a12;\r\n        b06 = a20 * a31 - a21 * a30;\r\n        b07 = a20 * a32 - a22 * a30;\r\n        b08 = a20 * a33 - a23 * a30;\r\n        b09 = a21 * a32 - a22 * a31;\r\n        b10 = a21 * a33 - a23 * a31;\r\n        b11 = a22 * a33 - a23 * a32;\r\n\r\n        invDet = 1 / (b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06);\r\n\r\n        m[0] = (a11 * b11 - a12 * b10 + a13 * b09) * invDet;\r\n        m[1] = (-a01 * b11 + a02 * b10 - a03 * b09) * invDet;\r\n        m[2] = (a31 * b05 - a32 * b04 + a33 * b03) * invDet;\r\n        m[3] = (-a21 * b05 + a22 * b04 - a23 * b03) * invDet;\r\n        m[4] = (-a10 * b11 + a12 * b08 - a13 * b07) * invDet;\r\n        m[5] = (a00 * b11 - a02 * b08 + a03 * b07) * invDet;\r\n        m[6] = (-a30 * b05 + a32 * b02 - a33 * b01) * invDet;\r\n        m[7] = (a20 * b05 - a22 * b02 + a23 * b01) * invDet;\r\n        m[8] = (a10 * b10 - a11 * b08 + a13 * b06) * invDet;\r\n        m[9] = (-a00 * b10 + a01 * b08 - a03 * b06) * invDet;\r\n        m[10] = (a30 * b04 - a31 * b02 + a33 * b00) * invDet;\r\n        m[11] = (-a20 * b04 + a21 * b02 - a23 * b00) * invDet;\r\n        m[12] = (-a10 * b09 + a11 * b07 - a12 * b06) * invDet;\r\n        m[13] = (a00 * b09 - a01 * b07 + a02 * b06) * invDet;\r\n        m[14] = (-a30 * b03 + a31 * b01 - a32 * b00) * invDet;\r\n        m[15] = (a20 * b03 - a21 * b01 + a22 * b00) * invDet;\r\n\r\n        return this;\r\n    }\r\n\r\n    public invertTo3x3(): Matrix3 {\r\n        var a11, a21, a31, a12, a22, a32, a13, a23, a33,\r\n            m, r, det, idet;\r\n        var mat3 = Matrix3.create();\r\n\r\n        m = this.values;\r\n\r\n        r = mat3.values;\r\n\r\n        a11 = m[10] * m[5] - m[6] * m[9];\r\n        a21 = -m[10] * m[1] + m[2] * m[9];\r\n        a31 = m[6] * m[1] - m[2] * m[5];\r\n        a12 = -m[10] * m[4] + m[6] * m[8];\r\n        a22 = m[10] * m[0] - m[2] * m[8];\r\n        a32 = -m[6] * m[0] + m[2] * m[4];\r\n        a13 = m[9] * m[4] - m[5] * m[8];\r\n        a23 = -m[9] * m[0] + m[1] * m[8];\r\n        a33 = m[5] * m[0] - m[1] * m[4];\r\n\r\n        det = m[0] * a11 + m[1] * a12 + m[2] * a13;\r\n        if (det === 0) { // no inverse\r\n            Log.warn(\"can't invert matrix, determinant is 0\");\r\n\r\n            return mat3;\r\n        }\r\n\r\n        idet = 1 / det;\r\n\r\n        r[0] = idet * a11;\r\n        r[1] = idet * a21;\r\n        r[2] = idet * a31;\r\n        r[3] = idet * a12;\r\n        r[4] = idet * a22;\r\n        r[5] = idet * a32;\r\n        r[6] = idet * a13;\r\n        r[7] = idet * a23;\r\n        r[8] = idet * a33;\r\n\r\n        return mat3;\r\n    }\r\n\r\n    /**\r\n     * Transpose the matrix.\r\n     * @return this\r\n     */\r\n    public transpose(): Matrix4 {\r\n        var te = this.values;\r\n        var tmp;\r\n\r\n        tmp = te[1]; te[1] = te[4]; te[4] = tmp;\r\n        tmp = te[2]; te[2] = te[8]; te[8] = tmp;\r\n        tmp = te[6]; te[6] = te[9]; te[9] = tmp;\r\n\r\n        tmp = te[3]; te[3] = te[12]; te[12] = tmp;\r\n        tmp = te[7]; te[7] = te[13]; te[13] = tmp;\r\n        tmp = te[11]; te[11] = te[14]; te[14] = tmp;\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Set the matrix for translation.\r\n     * @param x The X value of a translation.\r\n     * @param y The Y value of a translation.\r\n     * @param z The Z value of a translation.\r\n     * @return this\r\n     */\r\n    public setTranslate(x, y, z): Matrix4 {\r\n        var e = this.values;\r\n        e[0] = 1; e[4] = 0; e[8] = 0; e[12] = x;\r\n        e[1] = 0; e[5] = 1; e[9] = 0; e[13] = y;\r\n        e[2] = 0; e[6] = 0; e[10] = 1; e[14] = z;\r\n        e[3] = 0; e[7] = 0; e[11] = 0; e[15] = 1;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Multiply the matrix for translation from the right.\r\n     * @param x The X value of a translation.\r\n     * @param y The Y value of a translation.\r\n     * @param z The Z value of a translation.\r\n     * @return this\r\n     */\r\n    public translate(x, y, z, GlobalTempData: any): Matrix4 {\r\n        this.applyMatrix(GlobalTempData.matrix4_1.setTranslate(x, y, z), GlobalTempData);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Set the matrix for rotation.\r\n     * The vector of rotation axis may not be normalized.\r\n     * @param angle The angle of rotation (degrees)\r\n     * @param x The X coordinate of vector of rotation axis.\r\n     * @param y The Y coordinate of vector of rotation axis.\r\n     * @param z The Z coordinate of vector of rotation axis.\r\n     * @return this\r\n     */\r\n    @requireCheck(function(angle: number, x: number, y: number, z: number) {\r\n        it(\"axis's component shouldn't all be zero\", () => {\r\n            expect(x === 0 && y === 0 && z === 0).false;\r\n        });\r\n    })\r\n    public setRotate(angle: number, x: number, y: number, z: number): Matrix4 {\r\n        var e, s, c, len, rlen, nc, xy, yz, zx, xs, ys, zs;\r\n\r\n        var angle = Math.PI * angle / 180;\r\n        e = this.values;\r\n\r\n        s = Math.sin(angle);\r\n        c = Math.cos(angle);\r\n\r\n        if (0 !== x && 0 === y && 0 === z) {\r\n            // Rotation around X axis\r\n            if (x < 0) {\r\n                s = -s;\r\n            }\r\n            e[0] = 1; e[4] = 0; e[8] = 0; e[12] = 0;\r\n            e[1] = 0; e[5] = c; e[9] = -s; e[13] = 0;\r\n            e[2] = 0; e[6] = s; e[10] = c; e[14] = 0;\r\n            e[3] = 0; e[7] = 0; e[11] = 0; e[15] = 1;\r\n        } else if (0 === x && 0 !== y && 0 === z) {\r\n            // Rotation around Y axis\r\n            if (y < 0) {\r\n                s = -s;\r\n            }\r\n            e[0] = c; e[4] = 0; e[8] = s; e[12] = 0;\r\n            e[1] = 0; e[5] = 1; e[9] = 0; e[13] = 0;\r\n            e[2] = -s; e[6] = 0; e[10] = c; e[14] = 0;\r\n            e[3] = 0; e[7] = 0; e[11] = 0; e[15] = 1;\r\n        } else if (0 === x && 0 === y && 0 !== z) {\r\n            // Rotation around Z axis\r\n            if (z < 0) {\r\n                s = -s;\r\n            }\r\n            e[0] = c; e[4] = -s; e[8] = 0; e[12] = 0;\r\n            e[1] = s; e[5] = c; e[9] = 0; e[13] = 0;\r\n            e[2] = 0; e[6] = 0; e[10] = 1; e[14] = 0;\r\n            e[3] = 0; e[7] = 0; e[11] = 0; e[15] = 1;\r\n        } else {\r\n            // Rotation around another axis\r\n            len = Math.sqrt(x * x + y * y + z * z);\r\n            if (len !== 1) {\r\n                //转换为单位向量\r\n                rlen = 1 / len;\r\n                x *= rlen;\r\n                y *= rlen;\r\n                z *= rlen;\r\n            }\r\n\r\n            nc = 1 - c;\r\n            xy = x * y;\r\n            yz = y * z;\r\n            zx = z * x;\r\n            xs = x * s;\r\n            ys = y * s;\r\n            zs = z * s;\r\n\r\n            e[0] = x * x * nc + c;\r\n            e[1] = xy * nc + zs;\r\n            e[2] = zx * nc - ys;\r\n            e[3] = 0;\r\n\r\n            e[4] = xy * nc - zs;\r\n            e[5] = y * y * nc + c;\r\n            e[6] = yz * nc + xs;\r\n            e[7] = 0;\r\n\r\n            e[8] = zx * nc + ys;\r\n            e[9] = yz * nc - xs;\r\n            e[10] = z * z * nc + c;\r\n            e[11] = 0;\r\n\r\n            e[12] = 0;\r\n            e[13] = 0;\r\n            e[14] = 0;\r\n            e[15] = 1;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Multiply the matrix for rotation from the right.\r\n     * The vector of rotation axis may not be normalized.\r\n     * @param angle The angle of rotation (degrees)\r\n     * @param x The X coordinate of vector of rotation axis.\r\n     * @param y The Y coordinate of vector of rotation axis.\r\n     * @param z The Z coordinate of vector of rotation axis.\r\n     * @return this\r\n     */\r\n    public rotate(angle, vector3: Vector3, GlobalTempData: any): Matrix4;\r\n    public rotate(angle, x, y, z, GlobalTempData: any): Matrix4;\r\n\r\n    public rotate(...args): Matrix4 {\r\n        var angle = args[0];\r\n\r\n        if (args.length === 3) {\r\n            let vector3 = args[1],\r\n                GlobalTempData = args[2];\r\n\r\n            this.applyMatrix(GlobalTempData.matrix4_1.setRotate(angle, vector3.values[0], vector3.values[1], vector3.values[2]), GlobalTempData);\r\n        }\r\n        else if (args.length === 5) {\r\n            let x = args[1],\r\n                y = args[2],\r\n                z = args[3],\r\n                GlobalTempData = args[4];\r\n\r\n            this.applyMatrix(GlobalTempData.matrix4_1.setRotate(angle, x, y, z), GlobalTempData);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Set the matrix for scaling.\r\n     * @param x The scale factor along the X axis\r\n     * @param y The scale factor along the Y axis\r\n     * @param z The scale factor along the Z axis\r\n     * @return this\r\n     */\r\n    public setScale(x, y, z): Matrix4 {\r\n        var e = this.values;\r\n        e[0] = x; e[4] = 0; e[8] = 0; e[12] = 0;\r\n        e[1] = 0; e[5] = y; e[9] = 0; e[13] = 0;\r\n        e[2] = 0; e[6] = 0; e[10] = z; e[14] = 0;\r\n        e[3] = 0; e[7] = 0; e[11] = 0; e[15] = 1;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Multiply the matrix for scaling from the right.\r\n     * @param x The scale factor along the X axis\r\n     * @param y The scale factor along the Y axis\r\n     * @param z The scale factor along the Z axis\r\n     * @return this\r\n     */\r\n    public scale(x, y, z, GlobalTempData: any): Matrix4 {\r\n        this.applyMatrix(GlobalTempData.matrix4_1.setScale(x, y, z), GlobalTempData);\r\n\r\n        return this;\r\n    }\r\n\r\n    //todo fix GlobalTempData\r\n    // public setLookAt(eye: Vector3, center: Vector3, up: Vector3): Matrix4;\r\n    // public setLookAt(eyeX: number, eyeY: number, eyeZ: number, centerX: number, centerY: number, centerZ: number, upX: number, upY: number, upZ: number): Matrix4;\r\n\r\n    // /**\r\n    //  * @function\r\n    //  * @name setLookAt\r\n    //  * @description Sets the specified matrix to a viewing matrix derived from an eye point, a target point\r\n    //  * and an up vector. The matrix maps the target point to the negative z-axis and the eye point to the\r\n    //  * origin, so that when you use a typical projection matrix, the center of the scene maps to the center\r\n    //  * of the viewport. Similarly, the direction described by the up vector projected onto the viewing plane\r\n    //  * is mapped to the positive y-axis so that it points upward in the viewport. The up vector must not be\r\n    //  * parallel to the line of sight from the eye to the reference point.\r\n    //  * @param {Vec3} position 3-d vector holding view position.\r\n    //  * @param {Vec3} target 3-d vector holding reference point.\r\n    //  * @param {Vec3} up 3-d vector holding the up direction.\r\n    //  * @returns {Mat4} Self for chaining.\r\n    //  */\r\n    // public setLookAt(...args) {\r\n    //     var x, y, z,\r\n    //         eye, center, up;\r\n    //\r\n    //     if (args.length === 3) {\r\n    //         eye = args[0];\r\n    //         center = args[1];\r\n    //         up = args[2]\r\n    //     }\r\n    //     else if (args.length === 9) {\r\n    //         eye = Vector3.create(args[0], args[1], args[2]);\r\n    //         center = Vector3.create(args[3], args[4], args[5]);\r\n    //         up = Vector3.create(args[6], args[7], args[8]);\r\n    //     }\r\n    //     x = Vector3.create();\r\n    //\r\n    //     z = eye.clone().sub(center).normalize();\r\n    //\r\n    //     y = up.clone().normalize();\r\n    //     x.cross(y, z).normalize();\r\n    //     y.cross(z, x);\r\n    //\r\n    //     var r = this.values;\r\n    //\r\n    //     r[0] = x.x;\r\n    //     r[1] = x.y;\r\n    //     r[2] = x.z;\r\n    //     r[3] = 0;\r\n    //     r[4] = y.x;\r\n    //     r[5] = y.y;\r\n    //     r[6] = y.z;\r\n    //     r[7] = 0;\r\n    //     r[8] = z.x;\r\n    //     r[9] = z.y;\r\n    //     r[10] = z.z;\r\n    //     r[11] = 0;\r\n    //     r[12] = eye.x;\r\n    //     r[13] = eye.y;\r\n    //     r[14] = eye.z;\r\n    //     r[15] = 1;\r\n    //\r\n    //     return this;\r\n    // }\r\n    //\r\n    // /**\r\n    //  * Multiply the viewing matrix from the right.\r\n    //  * @param eyeX, eyeY, eyeZ The position of the eye point.\r\n    //  * @param centerX, centerY, centerZ The position of the reference point.\r\n    //  * @param upX, upY, upZ The direction of the up vector.\r\n    //  * @return this\r\n    //  */\r\n    // public lookAt(eye: Vector3, center: Vector3, up: Vector3, GlobalTempData:any): Matrix4;\r\n    // public lookAt(eyeX: number, eyeY: number, eyeZ: number, centerX: number, centerY: number, centerZ: number, upX: number, upY: number, upZ: number, GlobalTempData:any): Matrix4;\r\n    //\r\n    // public lookAt(...args): Matrix4 {\r\n    //     var matrix = Matrix4.create();\r\n    //\r\n    //     //todo optimize: not create Matrix4?\r\n    //     this.applyMatrix(matrix.setLookAt.apply(matrix, args));\r\n    //\r\n    //     return this;\r\n    // }\r\n\r\n    @requireCheck(function(left: number, right: number, bottom: number, top: number, near: number, far: number) {\r\n        it(\"frustum should not be null\", () => {\r\n            expect(left !== right && bottom !== top && near !== far).true;\r\n        });\r\n    })\r\n    public setOrtho(left: number, right: number, bottom: number, top: number, near: number, far: number): Matrix4 {\r\n        var e = this.values,\r\n            rw,\r\n            rh,\r\n            rd;\r\n\r\n        rw = 1 / (right - left);\r\n        rh = 1 / (top - bottom);\r\n        rd = 1 / (far - near);\r\n\r\n        e[0] = 2 * rw;\r\n        e[1] = 0;\r\n        e[2] = 0;\r\n        e[3] = 0;\r\n\r\n        e[4] = 0;\r\n        e[5] = 2 * rh;\r\n        e[6] = 0;\r\n        e[7] = 0;\r\n\r\n        e[8] = 0;\r\n        e[9] = 0;\r\n        e[10] = -2 * rd;\r\n        e[11] = 0;\r\n\r\n        e[12] = -(right + left) * rw;\r\n        e[13] = -(top + bottom) * rh;\r\n        e[14] = -(far + near) * rd;\r\n        e[15] = 1;\r\n\r\n        return this;\r\n    }\r\n\r\n    public ortho(left: number, right: number, bottom: number, top: number, near: number, far: number, GlobalTempData: any): Matrix4 {\r\n        this.applyMatrix(Matrix4.create().setOrtho(left, right, bottom, top, near, far), GlobalTempData);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Set the perspective projection matrix by fovy and aspect.\r\n     * @param fovy The angle between the upper and lower sides of the frustum.\r\n     * @param aspect The aspect ratio of the frustum. (width/height)\r\n     * @param near The distances to the nearer depth clipping plane. This value must be plus value.\r\n     * @param far The distances to the farther depth clipping plane. This value must be plus value.\r\n     * @return this\r\n     */\r\n    @requireCheck(function(fovy: number, aspect: number, near: number, far: number) {\r\n        it(\"frustum should not be null\", () => {\r\n            expect(near !== far && aspect !== 0).true;\r\n        });\r\n        it(\"near should > 0\", () => {\r\n            expect(near).gt(0);\r\n        });\r\n        it(\"far should > 0\", () => {\r\n            expect(far).gt(0);\r\n        });\r\n    })\r\n    public setPerspective(fovy: number, aspect: number, near: number, far: number): Matrix4 {\r\n        var e = null,\r\n            rd = null,\r\n            s = null,\r\n            ct = null,\r\n            fovy = Math.PI * fovy / 180 / 2;\r\n\r\n        s = Math.sin(fovy);\r\n        Log.error(s === 0, Log.info.FUNC_MUST_NOT_BE(\"frustum\", \"null\"));\r\n\r\n        rd = 1 / (far - near);\r\n        ct = Math.cos(fovy) / s;\r\n\r\n        e = this.values;\r\n\r\n        e[0] = ct / aspect;\r\n        e[1] = 0;\r\n        e[2] = 0;\r\n        e[3] = 0;\r\n\r\n        e[4] = 0;\r\n        e[5] = ct;\r\n        e[6] = 0;\r\n        e[7] = 0;\r\n\r\n        e[8] = 0;\r\n        e[9] = 0;\r\n        e[10] = -(far + near) * rd;\r\n        e[11] = -1;\r\n\r\n        e[12] = 0;\r\n        e[13] = 0;\r\n        e[14] = -2 * near * far * rd;\r\n        e[15] = 0;\r\n\r\n        return this;\r\n    }\r\n\r\n    public perspective(fovy: number, aspect: number, near: number, far: number, GlobalTempData: any): Matrix4 {\r\n        this.applyMatrix(Matrix4.create().setPerspective(fovy, aspect, near, far), GlobalTempData);\r\n\r\n        return this;\r\n    }\r\n\r\n    public applyMatrix(other: Matrix4, GlobalTempData: any, notChangeSelf: boolean = false): Matrix4 {\r\n        var a = this,\r\n            tempMat4 = GlobalTempData.matrix4_3;\r\n\r\n        /*!\r\n         b*a，而不是a*b\r\n         这是因为在webgl中，向量是右乘的，\r\n         此处希望坐标向量先进行this.values的变换，然后进行other.values的变换，因此要b*a，从而在右乘向量时为b*a*vec\r\n         */\r\n\r\n        if (notChangeSelf) {\r\n            return tempMat4.multiply(other, a);\r\n        }\r\n\r\n        this.values = tempMat4.multiply(other, a).values;\r\n\r\n        return this;\r\n    }\r\n\r\n    public multiply(matrix: Matrix4): Matrix4;\r\n    public multiply(matrix1: Matrix4, matrix2: Matrix4): Matrix4;\r\n\r\n    public multiply(...args): Matrix4 {\r\n        var mat1 = null,\r\n            mat2 = null,\r\n            result = null;\r\n\r\n        result = this.values;\r\n\r\n        if (args.length === 1) {\r\n            mat1 = this.values;\r\n            mat2 = args[0].values;\r\n        }\r\n        else if (args.length === 2) {\r\n            mat1 = args[0].values;\r\n            mat2 = args[1].values;\r\n\r\n        }\r\n\r\n        var a = mat1[0], b = mat1[1], c = mat1[2], d = mat1[3],\r\n            e = mat1[4], f = mat1[5], g = mat1[6], h = mat1[7],\r\n            i = mat1[8], j = mat1[9], k = mat1[10], l = mat1[11],\r\n            m = mat1[12], n = mat1[13], o = mat1[14], p = mat1[15],\r\n            A = mat2[0], B = mat2[1], C = mat2[2], D = mat2[3],\r\n            E = mat2[4], F = mat2[5], G = mat2[6], H = mat2[7],\r\n            I = mat2[8], J = mat2[9], K = mat2[10], L = mat2[11],\r\n            M = mat2[12], N = mat2[13], O = mat2[14], P = mat2[15];\r\n\r\n        result[0] = A * a + B * e + C * i + D * m;\r\n        result[1] = A * b + B * f + C * j + D * n;\r\n        result[2] = A * c + B * g + C * k + D * o;\r\n        result[3] = A * d + B * h + C * l + D * p;\r\n        result[4] = E * a + F * e + G * i + H * m;\r\n        result[5] = E * b + F * f + G * j + H * n;\r\n        result[6] = E * c + F * g + G * k + H * o;\r\n        result[7] = E * d + F * h + G * l + H * p;\r\n        result[8] = I * a + J * e + K * i + L * m;\r\n        result[9] = I * b + J * f + K * j + L * n;\r\n        result[10] = I * c + J * g + K * k + L * o;\r\n        result[11] = I * d + J * h + K * l + L * p;\r\n        result[12] = M * a + N * e + O * i + P * m;\r\n        result[13] = M * b + N * f + O * j + P * n;\r\n        result[14] = M * c + N * g + O * k + P * o;\r\n        result[15] = M * d + N * h + O * l + P * p;\r\n\r\n        return this;\r\n    }\r\n\r\n    public multiplyVector4(vector: Vector4, isChangeVector: boolean = false): Vector4 {\r\n        var mat1 = this.values,\r\n            vec4 = vector.values,\r\n            x: number = null,\r\n            y: number = null,\r\n            z: number = null,\r\n            w: number = null;\r\n\r\n        // var result = [];\r\n\r\n        x = vec4[0] * mat1[0] + vec4[1] * mat1[4] + vec4[2] * mat1[8] + vec4[3] * mat1[12];\r\n        y = vec4[0] * mat1[1] + vec4[1] * mat1[5] + vec4[2] * mat1[9] + vec4[3] * mat1[13];\r\n        z = vec4[0] * mat1[2] + vec4[1] * mat1[6] + vec4[2] * mat1[10] + vec4[3] * mat1[14];\r\n        w = vec4[0] * mat1[3] + vec4[1] * mat1[7] + vec4[2] * mat1[11] + vec4[3] * mat1[15];\r\n\r\n        if (isChangeVector) {\r\n            vector.set(x, y, z, w);\r\n\r\n            return vector;\r\n        }\r\n\r\n        return Vector4.create(x, y, z, w);\r\n    }\r\n\r\n    public multiplyVector3(vector: Vector3): Vector3 {\r\n        var mat1 = this.values,\r\n            vec3 = vector.values;\r\n        var result = [];\r\n\r\n        result[0] = vec3[0] * mat1[0] + vec3[1] * mat1[4] + vec3[2] * mat1[8];\r\n        result[1] = vec3[0] * mat1[1] + vec3[1] * mat1[5] + vec3[2] * mat1[9];\r\n        result[2] = vec3[0] * mat1[2] + vec3[1] * mat1[6] + vec3[2] * mat1[10];\r\n\r\n        return Vector3.create(result[0], result[1], result[2]);\r\n    }\r\n\r\n    public multiplyPoint(vector: Vector3): Vector3 {\r\n        var mat1 = this.values,\r\n            vec3 = vector.values;\r\n        var result = [];\r\n\r\n        result[0] = vec3[0] * mat1[0] + vec3[1] * mat1[4] + vec3[2] * mat1[8] + mat1[12];\r\n        result[1] = vec3[0] * mat1[1] + vec3[1] * mat1[5] + vec3[2] * mat1[9] + mat1[13];\r\n        result[2] = vec3[0] * mat1[2] + vec3[1] * mat1[6] + vec3[2] * mat1[10] + mat1[14];\r\n\r\n        return Vector3.create(result[0], result[1], result[2]);\r\n    }\r\n\r\n    public clone(): Matrix4 {\r\n        var result = Matrix4.create(),\r\n            i = 0,\r\n            len = this.values.length;\r\n\r\n        for (i = 0; i < len; i++) {\r\n            result.values[i] = this.values[i];\r\n        }\r\n\r\n\r\n        return result;\r\n    }\r\n\r\n    public cloneToArray(array: Float32Array, offset: number = 0): Matrix4 {\r\n        var values = this.values;\r\n\r\n        for (let index = 0; index < 16; index++) {\r\n            array[offset + index] = values[index];\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public getX() {\r\n        return Vector3.create(this.values[0], this.values[1], this.values[2]);\r\n    }\r\n\r\n    public getY() {\r\n        return Vector3.create(this.values[4], this.values[5], this.values[6]);\r\n    }\r\n\r\n    public getZ() {\r\n        return Vector3.create(this.values[8], this.values[9], this.values[10]);\r\n    }\r\n\r\n    public getTranslation() {\r\n        return Vector3.create(this.values[12], this.values[13], this.values[14]);\r\n    }\r\n\r\n    public getScale() {\r\n        return Vector3.create(this.getX().length(), this.getY().length(), this.getZ().length());\r\n    }\r\n\r\n    public getRotation() {\r\n        //return Quaternion.create().setFromEulerAngles(this.getEulerAngles());\r\n        return Quaternion.create().setFromMatrix(this);\r\n    }\r\n\r\n    public getEulerAngles() {\r\n        var x, y, z, sx, sy, sz, m, halfPi;\r\n        var scale = this.getScale();\r\n\r\n        sx = scale.x;\r\n        sy = scale.y;\r\n        sz = scale.z;\r\n\r\n        m = this.values;\r\n\r\n        y = Math.asin(-m[2] / sx);\r\n        halfPi = Math.PI * 0.5;\r\n\r\n        if (y < halfPi) {\r\n            if (y > -halfPi) {\r\n                x = Math.atan2(m[6] / sy, m[10] / sz);\r\n                z = Math.atan2(m[1] / sx, m[0] / sx);\r\n            } else {\r\n                // Not a unique solution\r\n                z = 0;\r\n                x = -Math.atan2(m[4] / sy, m[5] / sy);\r\n            }\r\n        } else {\r\n            // Not a unique solution\r\n            z = 0;\r\n            x = Math.atan2(m[4] / sy, m[5] / sy);\r\n        }\r\n\r\n        return Vector3.create(x, y, z).scale(RAD_TO_DEG);\r\n    }\r\n\r\n    /**\r\n     * @function\r\n     * @name setTRS\r\n     * @description Sets the specified matrix to the concatenation of a translation, a\r\n     * quaternion rotation and a scale.\r\n     * @param {Vec3} t A 3-d vector translation.\r\n     * @param {Quat} r A quaternion rotation.\r\n     * @param {Vec3} s A 3-d vector scale.\r\n     * @returns {Mat4} Self for chaining.\r\n     * @example\r\n     * var t = new Vec3(10, 20, 30);\r\n     * var r = new Quat();\r\n     * var s = new Vec3(2, 2, 2);\r\n     *\r\n     * var m = new Mat4();\r\n     * m.setTRS(t, r, s);\r\n     */\r\n    public setTRS(t: Vector3, r: Quaternion, s: Vector3) {\r\n        var tx, ty, tz, qx, qy, qz, qw, sx, sy, sz,\r\n            x2, y2, z2, xx, xy, xz, yy, yz, zz, wx, wy, wz, m;\r\n\r\n        tx = t.x;\r\n        ty = t.y;\r\n        tz = t.z;\r\n\r\n        qx = r.x;\r\n        qy = r.y;\r\n        qz = r.z;\r\n        qw = r.w;\r\n\r\n        sx = s.x;\r\n        sy = s.y;\r\n        sz = s.z;\r\n\r\n        x2 = qx + qx;\r\n        y2 = qy + qy;\r\n        z2 = qz + qz;\r\n        xx = qx * x2;\r\n        xy = qx * y2;\r\n        xz = qx * z2;\r\n        yy = qy * y2;\r\n        yz = qy * z2;\r\n        zz = qz * z2;\r\n        wx = qw * x2;\r\n        wy = qw * y2;\r\n        wz = qw * z2;\r\n\r\n        m = this.values;\r\n\r\n        m[0] = (1 - (yy + zz)) * sx;\r\n        m[1] = (xy + wz) * sx;\r\n        m[2] = (xz - wy) * sx;\r\n        m[3] = 0;\r\n\r\n        m[4] = (xy - wz) * sy;\r\n        m[5] = (1 - (xx + zz)) * sy;\r\n        m[6] = (yz + wx) * sy;\r\n        m[7] = 0;\r\n\r\n        m[8] = (xz + wy) * sz;\r\n        m[9] = (yz - wx) * sz;\r\n        m[10] = (1 - (xx + yy)) * sz;\r\n        m[11] = 0;\r\n\r\n        m[12] = tx;\r\n        m[13] = ty;\r\n        m[14] = tz;\r\n        m[15] = 1;\r\n\r\n        return this;\r\n    }\r\n}","import { Matrix4 } from \"../math/Matrix4\";\r\nimport { Vector3 } from \"../math/Vector3\";\r\nimport { Quaternion } from \"../math/Quaternion\";\r\n\r\nexport class GlobalTempData {\r\n    public static matrix4_1 = Matrix4.create();\r\n    public static matrix4_2 = Matrix4.create();\r\n    public static matrix4_3 = Matrix4.create();\r\n    public static vector3_1 = Vector3.create();\r\n    public static vector3_2 = Vector3.create();\r\n    public static vector3_3 = Vector3.create();\r\n    public static vector3_4 = Vector3.create();\r\n    public static quaternion_1 = Quaternion.create();\r\n}\r\n\r\n","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Vector3 } from \"../../math/Vector3\";\r\nimport { ThreeDTransformData } from \"./ThreeDTransformData\";\r\nimport {\r\n    checkShouldAlive,\r\n    create, getGameObject,\r\n    getLocalPosition, getLocalToWorldMatrix, getPosition, getTempLocalToWorldMatrix, setBatchDatas,\r\n    setLocalPosition,\r\n    setParent,\r\n    setPosition\r\n} from \"./ThreeDTransformSystem\";\r\nimport { getParent } from \"./ThreeDTransformSystem\";\r\nimport { GlobalTempData } from \"../../definition/GlobalTempData\";\r\nimport { Component } from \"../Component\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport { it, requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\n\r\n@registerClass(\"ThreeDTransform\")\r\nexport class ThreeDTransform extends Component implements IThreeDTransform {\r\n    public uid: number = null;\r\n}\r\n\r\nexport interface IThreeDTransform {\r\n    index: number;\r\n    uid: number;\r\n}\r\n\r\nexport interface BatchTransformData {\r\n    // uid:number;\r\n    // index:number;\r\n    transform: ThreeDTransform,\r\n    position: Vector3;\r\n    localPosition: Vector3;\r\n}\r\n\r\n\r\nexport const createThreeDTransform = () => {\r\n    return create(ThreeDTransformData);\r\n}\r\n\r\nexport const getThreeDTransformPosition = requireCheckFunc((component: ThreeDTransform) => {\r\n    checkShouldAlive(component, ThreeDTransformData);\r\n}, (component: ThreeDTransform) => {\r\n    return getPosition(component, ThreeDTransformData);\r\n})\r\n\r\nexport const setThreeDTransformPosition = requireCheckFunc((component: ThreeDTransform, position: Vector3) => {\r\n    checkShouldAlive(component, ThreeDTransformData);\r\n}, (component: ThreeDTransform, position: Vector3) => {\r\n    setPosition(component, position, GlobalTempData, ThreeDTransformData);\r\n})\r\n\r\nexport const getThreeDTransformLocalToWorldMatrix = requireCheckFunc((component: ThreeDTransform) => {\r\n    checkShouldAlive(component, ThreeDTransformData);\r\n}, (component: ThreeDTransform) => {\r\n    return getLocalToWorldMatrix(component, getTempLocalToWorldMatrix(component, ThreeDTransformData), ThreeDTransformData);\r\n})\r\n\r\nexport const getThreeDTransformLocalPosition = requireCheckFunc((component: ThreeDTransform) => {\r\n    checkShouldAlive(component, ThreeDTransformData);\r\n}, (component: ThreeDTransform) => {\r\n    return getLocalPosition(component, ThreeDTransformData);\r\n})\r\n\r\nexport const setThreeDTransformLocalPosition = requireCheckFunc((component: ThreeDTransform, localPosition: Vector3) => {\r\n    checkShouldAlive(component, ThreeDTransformData);\r\n}, (component: ThreeDTransform, localPosition: Vector3) => {\r\n    setLocalPosition(component, localPosition, ThreeDTransformData);\r\n})\r\n\r\nexport const setThreeDTransformBatchTransformDatas = (batchData: Array<BatchTransformData>) => {\r\n    setBatchDatas(batchData, GlobalTempData, ThreeDTransformData);\r\n}\r\n\r\nexport const getThreeDTransformParent = requireCheckFunc((component: ThreeDTransform) => {\r\n    checkShouldAlive(component, ThreeDTransformData);\r\n}, (component: ThreeDTransform) => {\r\n    return getParent(component, ThreeDTransformData);\r\n})\r\n\r\nexport const setThreeDTransformParent = requireCheckFunc((parent: ThreeDTransform, child: ThreeDTransform) => {\r\n    checkShouldAlive(child, ThreeDTransformData);\r\n}, (parent: ThreeDTransform, child: ThreeDTransform) => {\r\n    setParent(parent, child, ThreeDTransformData);\r\n})\r\n\r\nexport const getThreeDTransformGameObject = requireCheckFunc((component: ThreeDTransform) => {\r\n    checkShouldAlive(component, ThreeDTransformData);\r\n}, (component: ThreeDTransform) => {\r\n    return getGameObject(component.uid, ThreeDTransformData);\r\n})\r\n","export const cacheFunc = <T>(hasCacheFunc: (...args) => boolean, getCacheFunc: (...args) => T, setCacheFunc: (...args) => void, bodyFunc: (...args) => T) => {\r\n    return (...args) => {\r\n        if (hasCacheFunc.apply(null, args)) {\r\n            return getCacheFunc.apply(null, args);\r\n        }\r\n\r\n        let result = bodyFunc.apply(null, args);\r\n\r\n        args.push(result);\r\n\r\n        setCacheFunc.apply(null, args);\r\n\r\n        return result;\r\n    }\r\n}\r\n","import { ensureFunc, it, requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { isValidMapValue } from \"../../utils/objectUtils\";\r\n\r\nexport const getUId = requireCheckFunc((index: number, ThreeDTransformData: any) => {\r\n    it(\"index should exist\", () => {\r\n        expect(index).exist;\r\n    });\r\n    it(\"transform should exist\", () => {\r\n        expect(ThreeDTransformData.transformMap[index]).exist;\r\n    });\r\n}, (index: number, ThreeDTransformData: any) => {\r\n    return ThreeDTransformData.transformMap[index].uid;\r\n})\r\n\r\nexport const isIndexUsed = ensureFunc((isExist: boolean, index: number, ThreeDTransformData: any) => {\r\n    // it(\"if(or not) exist data, the transform and its index should be(or not) setted to data container;relation item should(or not) exist\", () => {\r\n    //     if (isExist) {\r\n    // expect(_isValidArrayValue(ThreeDTransformData.transforms[index])).true;\r\n    // expect(_getTransformIndexInArrayBufferTable(ThreeDTransformData.transforms[index], ThreeDTransformData)).equal(index);\r\n    //\r\n    //         expect(_isRelationItemExist(ThreeDTransformData.relationMap[index])).true;\r\n    //     }\r\n    //     else {\r\n    //         // expect(_isValidArrayValue(ThreeDTransformData.transforms[index])).false;\r\n    //\r\n    //         expect(_isRelationItemExist(ThreeDTransformData.relationMap[index])).false;\r\n    //     }\r\n    // });\r\n}, (index: number, ThreeDTransformData: any) => {\r\n    return isValidMapValue(ThreeDTransformData.transformMap[index]);\r\n    // return _isValidArrayValue(ThreeDTransformData.transforms[index]);\r\n})\r\n\r\n/*!\r\n regard 0 as the default index, so that _isValidIndex can judge whether the index is not the default index or not!\r\n */\r\nexport const getStartIndexInArrayBuffer = () => 1;\r\n","import { IUIdEntity } from \"../core/entityObject/gameObject/IUIdEntity\";\r\n\r\nexport const removeChildEntity = (children: Array<IUIdEntity>, targetUId: number) => {\r\n    for (let i = 0, len = children.length; i < len; ++i) {\r\n        if (children[i].uid === targetUId) {\r\n            children.splice(i, 1);\r\n            break;\r\n        }\r\n    }\r\n}\r\n","import { it, requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { deleteVal, isNotValidMapValue, isValidMapValue } from \"../../utils/objectUtils\";\r\nimport { isNotUndefined } from \"../../utils/JudgeUtils\";\r\nimport { ThreeDTransform } from \"./ThreeDTransform\";\r\nimport { addItAndItsChildrenToDirtyList } from \"./dirtySystem\";\r\nimport { removeChildEntity } from \"../../utils/entityUtils\";\r\n\r\nexport const getParent = requireCheckFunc((uid: string, ThreeDTransformData: any) => {\r\n    it(\"uid should exist\", () => {\r\n        expect(uid).exist;\r\n    });\r\n}, (uid: string, ThreeDTransformData: any) => {\r\n    return ThreeDTransformData.parentMap[uid];\r\n})\r\n\r\nexport const setParent = requireCheckFunc((parent: ThreeDTransform, child:ThreeDTransform, ThreeDTransformData: any) => {\r\n    it(\"parent should not be self\", () => {\r\n        if (parent !== null) {\r\n            expect(_isTransformEqual(child, parent)).false;\r\n        }\r\n    });\r\n}, (parent: ThreeDTransform, child:ThreeDTransform, ThreeDTransformData: any) => {\r\n    var index = child.index,\r\n        uid = child.uid,\r\n        parentIndexInArrayBuffer: number = null,\r\n        currentParent: ThreeDTransform = getParent(uid, ThreeDTransformData),\r\n        isCurrentParentExisit = isParentExist(currentParent);\r\n\r\n    if (parent === null) {\r\n        if (isCurrentParentExisit) {\r\n            _removeHierarchyFromParent(currentParent, uid, ThreeDTransformData);\r\n\r\n            addItAndItsChildrenToDirtyList(index, uid, ThreeDTransformData);\r\n        }\r\n\r\n        return;\r\n    }\r\n\r\n    parentIndexInArrayBuffer = parent.index;\r\n\r\n    if (isCurrentParentExisit) {\r\n        if (isNotChangeParent(currentParent.index, parentIndexInArrayBuffer)) {\r\n            return;\r\n        }\r\n\r\n        _removeHierarchyFromParent(currentParent, uid, ThreeDTransformData);\r\n    }\r\n\r\n    _addToParent(uid, child, parent, ThreeDTransformData);\r\n\r\n    addItAndItsChildrenToDirtyList(index, uid, ThreeDTransformData);\r\n})\r\n\r\nconst _isTransformEqual =(tra1: ThreeDTransform, tra2: ThreeDTransform) => tra1.uid === tra2.uid;\r\n\r\nexport const getChildren = (uid: number, ThreeDTransformData: any) => {\r\n    return ThreeDTransformData.childrenMap[uid];\r\n}\r\n\r\nexport const isParentExist = (parent: ThreeDTransform) => isNotUndefined(parent);\r\n\r\nexport const isChildrenExist = (children: Array<ThreeDTransform>) => isNotUndefined(children);\r\n\r\nexport const isNotChangeParent = (currentParentIndexInArrayBuffer: number, newParentIndexInArrayBuffer: number) => {\r\n    return currentParentIndexInArrayBuffer === newParentIndexInArrayBuffer;\r\n}\r\n\r\nexport const removeHierarchyData = (uid: number, ThreeDTransformData: any) => {\r\n    deleteVal(uid, ThreeDTransformData.childrenMap);\r\n}\r\n\r\nconst _removeHierarchyFromParent =(parent: ThreeDTransform, targetUId: number, ThreeDTransformData: any) => {\r\n    var parentUId = parent.uid,\r\n        children = getChildren(parentUId, ThreeDTransformData);\r\n\r\n    deleteVal(targetUId, ThreeDTransformData.parentMap);\r\n\r\n    if (isNotValidMapValue(children)) {\r\n        return;\r\n    }\r\n\r\n    _removeChild(parentUId, targetUId, children, ThreeDTransformData);\r\n}\r\n\r\nconst _removeChild =(parentUId: number, targetUId: number, children: Array<ThreeDTransform>, ThreeDTransformData: any) => {\r\n    removeChildEntity(children, targetUId);\r\n};\r\n\r\nconst _addChild =requireCheckFunc((uid: number, child: ThreeDTransform, ThreeDTransformData: any) => {\r\n    it(\"children should be empty array if has no child\", () => {\r\n        expect(getChildren(uid, ThreeDTransformData)).be.a(\"array\");\r\n    });\r\n}, (uid: number, child: ThreeDTransform, ThreeDTransformData: any) => {\r\n    var children = getChildren(uid, ThreeDTransformData);\r\n\r\n    children.push(child);\r\n})\r\n\r\nexport const setChildren = (uid: number, children: Array<ThreeDTransform>, ThreeDTransformData: any) => {\r\n    ThreeDTransformData.childrenMap[uid] = children;\r\n}\r\n\r\nconst _setParent =(uid: number, parent: ThreeDTransform, ThreeDTransformData: any) => {\r\n    ThreeDTransformData.parentMap[uid] = parent;\r\n}\r\n\r\nconst _addToParent =requireCheckFunc((targetUId: number, target: ThreeDTransform, parent: ThreeDTransform, ThreeDTransformData: any) => {\r\n    it(\"the child one should not has parent\", () => {\r\n        expect(isValidMapValue(getParent(targetUId, ThreeDTransformData))).false;\r\n    });\r\n    it(\"parent should not already has the child\", () => {\r\n        var parentUId = parent.uid,\r\n            children = getChildren(parentUId, ThreeDTransformData);\r\n\r\n        if (isValidMapValue(children)) {\r\n            expect(children.indexOf(target)).equal(-1);\r\n        }\r\n    });\r\n}, (targetUId: number, target: ThreeDTransform, parent: ThreeDTransform, ThreeDTransformData: any) => {\r\n    var parentUId = parent.uid;\r\n\r\n    _setParent(targetUId, parent, ThreeDTransformData);\r\n\r\n    _addChild(parentUId, target, ThreeDTransformData);\r\n})\r\n","import { Matrix4 } from \"../math/Matrix4\";\r\nimport { Vector3 } from \"../math/Vector3\";\r\nimport { Quaternion } from \"../math/Quaternion\";\r\nimport { it, requireCheckFunc } from \"../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { Matrix3 } from \"../math/Matrix3\";\r\nimport { TypeArr } from \"../renderer/type/dataType\";\r\n\r\nexport const getMatrix3DataSize = () => 9;\r\n\r\nexport const getMatrix4DataSize = () => 16;\r\n\r\nexport const getVector3DataSize = () => 3;\r\n\r\nexport const getQuaternionDataSize = () => 4;\r\n\r\nexport const getSlice = (typeArr: TypeArr, startIndex: number, endIndex: number) => {\r\n    return typeArr.slice(startIndex, endIndex);\r\n}\r\n\r\nexport const getSubarray = (typeArr: TypeArr, startIndex: number, endIndex: number) => {\r\n    return typeArr.subarray(startIndex, endIndex);\r\n}\r\n\r\nexport const deleteBySwapAndNotReset = (sourceIndex: number, targetIndex: number, typeArr: TypeArr) => {\r\n    typeArr[sourceIndex] = typeArr[targetIndex];\r\n}\r\n\r\nexport const deleteBySwapAndReset = (sourceIndex: number, targetIndex: number, typeArr: TypeArr, length: number, defaultValueArr: Array<number>) => {\r\n    for (let i = 0; i < length; i++) {\r\n        typeArr[sourceIndex + i] = typeArr[targetIndex + i];\r\n        typeArr[targetIndex + i] = defaultValueArr[i];\r\n    }\r\n}\r\n\r\nexport const deleteSingleValueBySwapAndReset = (sourceIndex: number, lastIndex: number, typeArr: TypeArr, resetValue: any) => {\r\n    typeArr[sourceIndex] = typeArr[lastIndex];\r\n    typeArr[lastIndex] = resetValue;\r\n}\r\n\r\n\r\nexport const deleteOneItemBySwapAndReset = (sourceIndex: number, targetIndex: number, typeArr: TypeArr, defaultValue: number) => {\r\n    typeArr[sourceIndex] = typeArr[targetIndex];\r\n    typeArr[targetIndex] = defaultValue;\r\n}\r\n\r\nexport const set = (typeArr: TypeArr, valArr: Array<number> | TypeArr, offset = 0) => {\r\n    typeArr.set(valArr, offset);\r\n}\r\n\r\nexport const setMatrices3 = (typeArr: Float32Array, mat: Matrix3, index: number) => {\r\n    var values = mat.values;\r\n\r\n    typeArr[index] = values[0];\r\n    typeArr[index + 1] = values[1];\r\n    typeArr[index + 2] = values[2];\r\n    typeArr[index + 3] = values[3];\r\n    typeArr[index + 4] = values[4];\r\n    typeArr[index + 5] = values[5];\r\n    typeArr[index + 6] = values[6];\r\n    typeArr[index + 7] = values[7];\r\n    typeArr[index + 8] = values[8];\r\n}\r\n\r\nexport const setMatrices = (typeArr: Float32Array, mat: Matrix4, index: number) => {\r\n    var values = mat.values;\r\n\r\n    typeArr[index] = values[0];\r\n    typeArr[index + 1] = values[1];\r\n    typeArr[index + 2] = values[2];\r\n    typeArr[index + 3] = values[3];\r\n    typeArr[index + 4] = values[4];\r\n    typeArr[index + 5] = values[5];\r\n    typeArr[index + 6] = values[6];\r\n    typeArr[index + 7] = values[7];\r\n    typeArr[index + 8] = values[8];\r\n    typeArr[index + 9] = values[9];\r\n    typeArr[index + 10] = values[10];\r\n    typeArr[index + 11] = values[11];\r\n    typeArr[index + 12] = values[12];\r\n    typeArr[index + 13] = values[13];\r\n    typeArr[index + 14] = values[14];\r\n    typeArr[index + 15] = values[15];\r\n}\r\n\r\nexport const setMatrix4ByIndex = requireCheckFunc((mat: Matrix4, typeArr: Float32Array, index: number) => {\r\n    it(\"should not exceed type arr's length\", () => {\r\n        expect(index + 15).lte(typeArr.length - 1);\r\n    });\r\n}, (mat: Matrix4, typeArr: Float32Array, index: number) => {\r\n    mat.set(\r\n        typeArr[index],\r\n        typeArr[index + 1],\r\n        typeArr[index + 2],\r\n        typeArr[index + 3],\r\n        typeArr[index + 4],\r\n        typeArr[index + 5],\r\n        typeArr[index + 6],\r\n        typeArr[index + 7],\r\n        typeArr[index + 8],\r\n        typeArr[index + 9],\r\n        typeArr[index + 10],\r\n        typeArr[index + 11],\r\n        typeArr[index + 12],\r\n        typeArr[index + 13],\r\n        typeArr[index + 14],\r\n        typeArr[index + 15]\r\n    );\r\n\r\n    return mat;\r\n})\r\n\r\nexport const setVectors = (typeArr: Float32Array, vec: Vector3, index: number) => {\r\n    var values = vec.values;\r\n\r\n    typeArr[index] = values[0];\r\n    typeArr[index + 1] = values[1];\r\n    typeArr[index + 2] = values[2];\r\n}\r\n\r\nexport const setVector3ByIndex = requireCheckFunc((vec: Vector3, typeArr: Float32Array, index: number) => {\r\n    it(\"should not exceed type arr's length\", () => {\r\n        expect(index + 2).lte(typeArr.length - 1);\r\n    });\r\n}, (vec: Vector3, typeArr: Float32Array, index: number) => {\r\n    var values = vec.values;\r\n\r\n    values[0] = typeArr[index];\r\n    values[1] = typeArr[index + 1];\r\n    values[2] = typeArr[index + 2];\r\n\r\n    return vec;\r\n})\r\n\r\nexport const setQuaternions = (typeArr: Float32Array, qua: Quaternion, index: number) => {\r\n    typeArr[index] = qua.x;\r\n    typeArr[index + 1] = qua.y;\r\n    typeArr[index + 2] = qua.z;\r\n    typeArr[index + 3] = qua.z;\r\n}\r\n\r\nexport const setQuaternionByIndex = requireCheckFunc((qua: Quaternion, typeArr: Float32Array, index: number) => {\r\n    it(\"should not exceed type arr's length\", () => {\r\n        expect(index + 3).lte(typeArr.length - 1);\r\n    });\r\n}, (qua: Quaternion, typeArr: Float32Array, index: number) => {\r\n    qua.set(\r\n        typeArr[index],\r\n        typeArr[index + 1],\r\n        typeArr[index + 2],\r\n        typeArr[index + 3]\r\n    );\r\n\r\n    return qua;\r\n})\r\n\r\nexport const swap = (typeArr: any, index1: number, index2: number, length: number) => {\r\n    for (let i = 0; i < length; i++) {\r\n        let newIndex1 = index1 + i,\r\n            newIndex2 = index2 + i,\r\n            temp = typeArr[newIndex2];\r\n\r\n        typeArr[newIndex2] = typeArr[newIndex1];\r\n\r\n        typeArr[newIndex1] = temp;\r\n    }\r\n}\r\n\r\nexport const createMatrix4ByIndex = (mat: Matrix4, typeArr: Float32Array, index: number) => {\r\n    return setMatrix4ByIndex(mat, typeArr, index);\r\n}\r\n\r\nexport const createVector3ByIndex = (vec: Vector3, typeArr: Float32Array, index: number) => {\r\n    return setVector3ByIndex(vec, typeArr, index);\r\n}\r\n\r\n// const _setValue =requireCheckFunc((typeArr: Float32Array, increment: number, startIndex: number, target: any) => {\r\n//     it(\"should not exceed type arr's length\", () => {\r\n//         expect(startIndex + increment).lte(typeArr.length - 1);\r\n//     });\r\n// }, (typeArr: Float32Array, increment: number, startIndex: number, target: any) => {\r\n//     typeArr[startIndex + increment] = target;\r\n// })\r\n\r\nexport const fillTypeArr = requireCheckFunc((typeArr: Float32Array | Uint32Array | Uint16Array, dataArr: Array<number>, startIndex: number, count: number) => {\r\n    it(\"should not exceed type arr's length\", () => {\r\n        expect(count + startIndex).lte(typeArr.length);\r\n    });\r\n}, (typeArr: Float32Array | Uint32Array | Uint16Array, dataArr: Array<number>, startIndex: number, count: number) => {\r\n    // for (let i = 0; i < count; i++) {\r\n    //     typeArr[i + startIndex] = dataArr[i];\r\n    // }\r\n    typeArr.set(dataArr, startIndex);\r\n})\r\n\r\nexport const setTypeArrayValue = requireCheckFunc((typeArr: TypeArr, index: number, value: number) => {\r\n    it(\"should not exceed type arr's length\", () => {\r\n        expect(index).lte(typeArr.length - 1);\r\n    });\r\n}, (typeArr: Float32Array, index: number, value: number) => {\r\n    typeArr[index] = value;\r\n})\r\n\r\nexport const setSingleValue = (typeArr: TypeArr, index: number, value: number) => {\r\n    var size = 1,\r\n        i = index * size;\r\n\r\n    setTypeArrayValue(typeArr, i, value);\r\n}\r\n\r\nexport const computeBufferLength = (count: number, size: number) => count * size;\r\n","import { Matrix4 } from \"../../math/Matrix4\";\r\nimport { Quaternion } from \"../../math/Quaternion\";\r\nimport { Vector3 } from \"../../math/Vector3\";\r\nimport { getUId, isIndexUsed } from \"./utils\";\r\nimport { ensureFunc, it, requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { TransformMap } from \"./ThreeDTransformData\";\r\nimport { deleteVal } from \"../../utils/objectUtils\";\r\nimport { addNotUsedIndex } from \"./dirtySystem\";\r\nimport { ThreeDTransform } from \"./ThreeDTransform\";\r\nimport { isParentExist } from \"./hierarchySystem\";\r\nimport { getLocalToWorldMatrix } from \"./ThreeDTransformSystem\";\r\nimport {\r\n    getMatrix4DataSize, getQuaternionDataSize, getVector3DataSize, setMatrices, setQuaternions,\r\n    setVectors\r\n} from \"../../utils/typeArrayUtils\";\r\n\r\nexport const swap = requireCheckFunc((index1: number, index2: number, ThreeDTransformData: any) => {\r\n    it(\"source index and target index should be used\", () => {\r\n        expect(isIndexUsed(index1, ThreeDTransformData)).true;\r\n        expect(isIndexUsed(index2, ThreeDTransformData)).true;\r\n    });\r\n}, (index1: number, index2: number, ThreeDTransformData: any) => {\r\n    swapTypeArrData(index1, index2, ThreeDTransformData);\r\n    swapTransformMapData(index1, index2, ThreeDTransformData);\r\n\r\n    return ThreeDTransformData;\r\n})\r\n\r\nexport const swapTransformMapData = requireCheckFunc((index1: number, index2: number, ThreeDTransformData: any) => {\r\n    it(\"source index and target index should be used\", () => {\r\n        expect(isIndexUsed(index1, ThreeDTransformData)).true;\r\n        expect(isIndexUsed(index2, ThreeDTransformData)).true;\r\n    });\r\n}, (index1: number, index2: number, ThreeDTransformData: any) => {\r\n    return _changeMapData(index1, index2, _swapTransformMap, ThreeDTransformData);\r\n})\r\n\r\nexport const swapTypeArrData = (index1: number, index2: number, ThreeDTransformData: any) => {\r\n    return _changeTypeArrData(index1, index2, _swapTypeArr, ThreeDTransformData);\r\n}\r\n\r\nconst _swapTypeArr =(dataArr: any, index1: number, index2: number, length: number) => {\r\n    for (let i = 0; i < length; i++) {\r\n        let newIndex1 = index1 + i,\r\n            newIndex2 = index2 + i,\r\n            temp = dataArr[newIndex2];\r\n\r\n        dataArr[newIndex2] = dataArr[newIndex1];\r\n\r\n        dataArr[newIndex1] = temp;\r\n    }\r\n}\r\n\r\nconst _swapTransformMap =(transformMap: TransformMap, sourceIndex: number, targetIndex: number) => {\r\n    var sourceTransform = transformMap[sourceIndex],\r\n        targetTransform = transformMap[targetIndex];\r\n\r\n    sourceTransform.index = targetIndex;\r\n    targetTransform.index = sourceIndex;\r\n\r\n    transformMap[targetIndex] = sourceTransform;\r\n    transformMap[sourceIndex] = targetTransform;\r\n}\r\n\r\nconst _changeTypeArrData =(sourceIndex: number, targetIndex: number, changeFunc: (arr: Float32Array, sourceIndex: number, targetIndex: number, length: number) => void, ThreeDTransformData: any) => {\r\n    if (sourceIndex === targetIndex) {\r\n        return ThreeDTransformData;\r\n    }\r\n\r\n    let mat4SourceIndex = getMatrix4DataIndexInArrayBuffer(sourceIndex),\r\n        mat4TargetIndex = getMatrix4DataIndexInArrayBuffer(targetIndex),\r\n        mat4Size = getMatrix4DataSize(),\r\n        vec3SourceIndex = getVector3DataIndexInArrayBuffer(sourceIndex),\r\n        vec3TargetIndex = getVector3DataIndexInArrayBuffer(targetIndex),\r\n        vec3Size = getVector3DataSize(),\r\n        quaSourceIndex = getQuaternionDataIndexInArrayBuffer(sourceIndex),\r\n        quaTargetIndex = getQuaternionDataIndexInArrayBuffer(targetIndex),\r\n        quaSize = getQuaternionDataSize();\r\n\r\n    changeFunc(ThreeDTransformData.localToWorldMatrices, mat4SourceIndex, mat4TargetIndex, mat4Size);\r\n    changeFunc(ThreeDTransformData.localPositions, vec3SourceIndex, vec3TargetIndex, vec3Size);\r\n    changeFunc(ThreeDTransformData.localRotations, quaSourceIndex, quaTargetIndex, quaSize);\r\n    _changeLocalScaleData(vec3SourceIndex, vec3TargetIndex, vec3Size, ThreeDTransformData, changeFunc);\r\n\r\n    return ThreeDTransformData;\r\n}\r\n\r\nconst _changeLocalScaleData =requireCheckFunc((vec3SourceIndex: number, vec3TargetIndex: number, vec3Size: number, ThreeDTransformData: any, changeFunc: Function) => {\r\n    it(\"source localScale data shouldn't be [0,0,0]\", () => {\r\n        if (ThreeDTransformData.localScales[vec3SourceIndex] === 0\r\n            && ThreeDTransformData.localScales[vec3SourceIndex + 1] === 0\r\n            && ThreeDTransformData.localScales[vec3SourceIndex + 2] === 0\r\n        ) {\r\n            expect(false).true;\r\n        }\r\n    });\r\n}, (vec3SourceIndex: number, vec3TargetIndex: number, vec3Size: number, ThreeDTransformData: any, changeFunc: Function) => {\r\n    changeFunc(ThreeDTransformData.localScales, vec3SourceIndex, vec3TargetIndex, vec3Size);\r\n})\r\n\r\nconst _changeMapData =(sourceIndex: number, targetIndex: number, changeFunc: (transformMap: TransformMap, sourceIndex: number, targetIndex: number) => void, ThreeDTransformData: any) => {\r\n    if (sourceIndex === targetIndex) {\r\n        return ThreeDTransformData;\r\n    }\r\n\r\n    changeFunc(ThreeDTransformData.transformMap, sourceIndex, targetIndex);\r\n\r\n    return ThreeDTransformData;\r\n}\r\n\r\n// const _resetValInArr =(dataArr: Array<any>, index: number) => {\r\n//     dataArr[index] = void 0;\r\n// }\r\n\r\nconst _moveToTypeArr =(dataArr: Float32Array, sourceIndex: number, targetIndex: number, length: number\r\n) => {\r\n    for (let i = 0; i < length; i++) {\r\n        let newIndex1 = sourceIndex + i,\r\n            newIndex2 = targetIndex + i;\r\n\r\n        dataArr[newIndex2] = dataArr[newIndex1];\r\n    }\r\n};\r\n\r\nconst _moveToTransformMap =(transformMap: TransformMap, sourceIndex: number, targetIndex: number) => {\r\n    var sourceTransform = transformMap[sourceIndex];\r\n\r\n    sourceTransform.index = targetIndex;\r\n    transformMap[targetIndex] = sourceTransform;\r\n\r\n    deleteVal(sourceIndex, transformMap);\r\n}\r\n\r\n\r\nexport const moveToIndex = ensureFunc((returnVal, sourceIndex: number, targetIndex: number, ThreeDTransformData: any) => {\r\n    it(\"source index should not be used\", () => {\r\n        expect(isIndexUsed(sourceIndex, ThreeDTransformData)).false;\r\n    });\r\n}, requireCheckFunc((sourceIndex: number, targetIndex: number, ThreeDTransformData: any) => {\r\n    it(\"source index should be used\", () => {\r\n        expect(isIndexUsed(sourceIndex, ThreeDTransformData)).true;\r\n    });\r\n    it(\"target index should not be used\", () => {\r\n        expect(isIndexUsed(targetIndex, ThreeDTransformData)).false;\r\n    });\r\n}, (sourceIndex: number, targetIndex: number, ThreeDTransformData: any) => {\r\n    moveTypeArrDataToIndex(sourceIndex, targetIndex, ThreeDTransformData);\r\n    moveMapDataToIndex(sourceIndex, targetIndex, ThreeDTransformData);\r\n\r\n    addNotUsedIndex(sourceIndex, ThreeDTransformData.notUsedIndexLinkList);\r\n\r\n    return ThreeDTransformData;\r\n}))\r\n\r\nexport const moveMapDataToIndex = ensureFunc((returnVal, sourceIndex: number, targetIndex: number, ThreeDTransformData: any) => {\r\n    it(\"source index should not be used\", () => {\r\n        expect(isIndexUsed(sourceIndex, ThreeDTransformData)).false;\r\n    });\r\n}, requireCheckFunc((sourceIndex: number, targetIndex: number, ThreeDTransformData: any) => {\r\n    it(\"source index should be used\", () => {\r\n        expect(isIndexUsed(sourceIndex, ThreeDTransformData)).true;\r\n    });\r\n    it(\"target index should not be used\", () => {\r\n        expect(isIndexUsed(targetIndex, ThreeDTransformData)).false;\r\n    });\r\n}, (sourceIndex: number, targetIndex: number, ThreeDTransformData: any) => {\r\n    return _changeMapData(sourceIndex, targetIndex, _moveToTransformMap, ThreeDTransformData);\r\n}))\r\n\r\n\r\nexport const moveTypeArrDataToIndex = (sourceIndex: number, targetIndex: number, ThreeDTransformData: any) => {\r\n    return _changeTypeArrData(sourceIndex, targetIndex, _moveToTypeArr, ThreeDTransformData);\r\n}\r\n\r\n\r\nexport const setTransformDataInTypeArr = (index: number, mat: Matrix4, qua: Quaternion, positionVec: Vector3, scaleVec: Vector3, ThreeDTransformData: any) => {\r\n    // export const setTransformDataInTypeArr = (index: number, qua: Quaternion, positionVec: Vector3, scaleVec: Vector3, ThreeDTransformData: any) => {\r\n    setLocalRotationData(qua, getQuaternionDataIndexInArrayBuffer(index), ThreeDTransformData);\r\n    setLocalPositionData(positionVec, getVector3DataIndexInArrayBuffer(index), ThreeDTransformData);\r\n    setLocalScaleData(scaleVec, getVector3DataIndexInArrayBuffer(index), ThreeDTransformData);\r\n\r\n    setLocalToWorldMatricesData(mat, getMatrix4DataIndexInArrayBuffer(index), ThreeDTransformData);\r\n}\r\n\r\nexport const setLocalToWorldMatricesData = (mat: Matrix4, mat4IndexInArrayBuffer: number, ThreeDTransformData: any) => {\r\n    setMatrices(ThreeDTransformData.localToWorldMatrices, mat, mat4IndexInArrayBuffer);\r\n}\r\n\r\nexport const setLocalPositionData = (position: Vector3, vec3IndexInArrayBuffer: number, ThreeDTransformData: any) => {\r\n    setVectors(ThreeDTransformData.localPositions, position, vec3IndexInArrayBuffer);\r\n\r\n    return ThreeDTransformData;\r\n}\r\n\r\nexport const setLocalRotationData = (qua: Quaternion, quaIndexInArrayBuffer: number, ThreeDTransformData: any) => {\r\n    setQuaternions(ThreeDTransformData.localRotations, qua, quaIndexInArrayBuffer);\r\n\r\n    return ThreeDTransformData;\r\n}\r\n\r\nexport const setLocalScaleData = (scale: Vector3, vec3IndexInArrayBuffer: number, ThreeDTransformData: any) => {\r\n    setVectors(ThreeDTransformData.localScales, scale, vec3IndexInArrayBuffer);\r\n\r\n    return ThreeDTransformData;\r\n}\r\n\r\nexport const setPositionData = (index: number, parent: ThreeDTransform, vec3IndexInArrayBuffer: number, position: Vector3, GlobalTempData: any, ThreeDTransformData: any) => {\r\n    if (isParentExist(parent)) {\r\n        let index = parent.index;\r\n\r\n        setVectors(ThreeDTransformData.localPositions, getLocalToWorldMatrix({\r\n            uid: getUId(index, ThreeDTransformData),\r\n            index: index\r\n        }, GlobalTempData.matrix4_3, ThreeDTransformData).invert().multiplyPoint(position), vec3IndexInArrayBuffer);\r\n    }\r\n    else {\r\n        setVectors(ThreeDTransformData.localPositions, position, vec3IndexInArrayBuffer);\r\n    }\r\n}\r\n\r\nexport const getMatrix4DataIndexInArrayBuffer = (index: number) => index * getMatrix4DataSize();\r\n\r\nexport const getVector3DataIndexInArrayBuffer = (index: number) => index * getVector3DataSize();\r\n\r\nexport const getQuaternionDataIndexInArrayBuffer = (index: number) => index * getQuaternionDataSize();\r\n","export class LinkList<T>{\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _first: LinkNode<T> = null;\r\n    private _last: LinkNode<T> = null;\r\n\r\n    public shift() {\r\n        var node = this._first;\r\n\r\n        if (node === null) {\r\n            return null;\r\n        }\r\n\r\n        this._first = node.next;\r\n\r\n        return node;\r\n    }\r\n\r\n    public push(node: LinkNode<T>) {\r\n        if (this._last === null) {\r\n            this._first = node;\r\n            this._last = node;\r\n\r\n            return;\r\n        }\r\n\r\n        this._last.next = node;\r\n\r\n        this._last = node;\r\n    }\r\n\r\n    public hasDuplicateNode(val: any) {\r\n        var node = this._first;\r\n\r\n        while (node !== null && node.val !== val) {\r\n            node = node.next;\r\n        }\r\n\r\n        if (node === null) {\r\n            return false;\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n\r\nexport class LinkNode<T>{\r\n    public static create(val: any) {\r\n        var obj = new this(val);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(val: T) {\r\n        this.val = val;\r\n    }\r\n\r\n    public val: T = null;\r\n    public next: LinkNode<T> = null;\r\n}\r\n","import { requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { BatchTransformData } from \"./ThreeDTransform\";\r\n\r\nexport const getIsTranslate = (uid: number, ThreeDTransformData: any) => {\r\n    // return ThreeDTransformData.isTranslateMap.get(uid);\r\n    return ThreeDTransformData.isTranslateMap[uid];\r\n}\r\n\r\nexport const setIsTranslate = requireCheckFunc((uid: number, isTranslate: boolean, ThreeDTransformData: any) => {\r\n    // it(\"index should be used\", () => {\r\n    //     expect(_isIndexUsed(index)).true;\r\n    // });\r\n}, (uid: number, isTranslate: boolean, ThreeDTransformData: any) => {\r\n    // ThreeDTransformData.isTranslateMap.set(uid, isTranslate);\r\n    ThreeDTransformData.isTranslateMap[uid] = isTranslate;\r\n})\r\n\r\nexport const isTranslate = (data: BatchTransformData) => {\r\n    return !!data.position || !!data.localPosition;\r\n}\r\n\r\n","import { ensureFunc, it, requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { getStartIndexInArrayBuffer, isIndexUsed } from \"./utils\";\r\nimport { isNotUndefined } from \"../../utils/JudgeUtils\";\r\nimport { getChildren, isChildrenExist } from \"./hierarchySystem\";\r\nimport { ThreeDTransform } from \"./ThreeDTransform\";\r\nimport { moveToIndex, swap } from \"./operateDataSystem\";\r\nimport { forEach } from \"../../utils/arrayUtils\";\r\nimport { LinkList, LinkNode } from \"./LinkList\";\r\nimport { isNotAlive } from \"./ThreeDTransformSystem\";\r\nimport { setIsTranslate } from \"./isTransformSystem\";\r\n\r\nexport const addFirstDirtyIndex = ensureFunc((firstDirtyIndex: number, ThreeDTransformData: any) => {\r\n    it(\"firstDirtyIndex should <= maxCount\", () => {\r\n        expect(firstDirtyIndex).lte(ThreeDTransformData.maxCount);\r\n    });\r\n}, (ThreeDTransformData: any) => {\r\n    return ThreeDTransformData.firstDirtyIndex + 1;\r\n})\r\n\r\nexport const minusFirstDirtyIndex = ensureFunc((firstDirtyIndex: number) => {\r\n    it(`firstDirtyIndex should >= start index:${getStartIndexInArrayBuffer()}`, () => {\r\n        expect(firstDirtyIndex).gte(getStartIndexInArrayBuffer());\r\n    });\r\n}, (firstDirtyIndex: number) => {\r\n    return firstDirtyIndex - 1;\r\n})\r\n\r\nexport const generateNotUsedIndexInArrayBuffer = ensureFunc((index: number, ThreeDTransformData: any) => {\r\n    _checkGeneratedNotUsedIndex(ThreeDTransformData, index);\r\n}, (ThreeDTransformData: any) => {\r\n    var result = ThreeDTransformData.index;\r\n\r\n    if (result >= ThreeDTransformData.firstDirtyIndex) {\r\n        return _getNotUsedIndexFromArr(ThreeDTransformData);\r\n    }\r\n\r\n    ThreeDTransformData.index += 1;\r\n\r\n    return result;\r\n})\r\n\r\nconst _isValidArrayValue =(val: any) => {\r\n    return isNotUndefined(val);\r\n}\r\n\r\nconst _isValidLinkNode =(node: LinkNode<number>) => {\r\n    return node !== null;\r\n}\r\n\r\nexport const generateNotUsedIndexInNormalList = ensureFunc((index: number, ThreeDTransformData: any) => {\r\n    _checkGeneratedNotUsedIndex(ThreeDTransformData, index);\r\n}, (ThreeDTransformData: any) => {\r\n    var index = _getNotUsedIndexFromArr(ThreeDTransformData);\r\n\r\n    if (_isValidArrayValue(index)) {\r\n        return index;\r\n    }\r\n\r\n    index = ThreeDTransformData.index;\r\n\r\n    ThreeDTransformData.index += 1;\r\n\r\n    return index;\r\n})\r\n\r\nexport const addToDirtyList = requireCheckFunc((index: number, ThreeDTransformData: any) => {\r\n    it(\"firstDirtyIndex should <= maxCount\", () => {\r\n        expect(ThreeDTransformData.firstDirtyIndex).lte(ThreeDTransformData.maxCount);\r\n    });\r\n    // it(\"target index should not be used\", () => {\r\n    //     var targetDirtyIndex = minusFirstDirtyIndex(ThreeDTransformData.firstDirtyIndex);\r\n    //\r\n    //     expect(isIndexUsed(targetDirtyIndex, ThreeDTransformData)).false;\r\n    // });\r\n}, (index: number, ThreeDTransformData: any) => {\r\n    let targetDirtyIndex = minusFirstDirtyIndex(ThreeDTransformData.firstDirtyIndex);\r\n\r\n    ThreeDTransformData.firstDirtyIndex = targetDirtyIndex;\r\n\r\n    if (isIndexUsed(targetDirtyIndex, ThreeDTransformData)) {\r\n        swap(index, targetDirtyIndex, ThreeDTransformData);\r\n    }\r\n    else {\r\n        moveToIndex(index, targetDirtyIndex, ThreeDTransformData);\r\n    }\r\n\r\n    return targetDirtyIndex;\r\n})\r\n\r\nconst _getNotUsedIndexFromArr =(ThreeDTransformData: any) => {\r\n    var notUsedIndexLinkList = ThreeDTransformData.notUsedIndexLinkList,\r\n        isValidLinkNode = true,\r\n        node: LinkNode<number> = null;\r\n\r\n    do {\r\n        node = _getNotUsedIndexNode(notUsedIndexLinkList);\r\n        isValidLinkNode = _isValidLinkNode(node);\r\n    }\r\n    while (isValidLinkNode && isIndexUsed(node.val, ThreeDTransformData))\r\n\r\n    if (!isValidLinkNode) {\r\n        return void 0;\r\n    }\r\n\r\n    return node.val;\r\n}\r\n\r\nconst _getNotUsedIndexNode =(notUsedIndexLinkList: LinkList<number>) => {\r\n    /*!\r\n    optimize: return the first one to ensure that the result index be as much remote from firDirtyIndex as possible(so that it can reduce swap when add to dirty list).\r\n\r\n    not shift array! because it's too slow in firefox!\r\n    so here use link list->shift.\r\n     */\r\n    return notUsedIndexLinkList.shift();\r\n};\r\n\r\nexport const addNotUsedIndex = requireCheckFunc((index: number, notUsedIndexLinkList: LinkList<number>) => {\r\n    it(\"index shouldn't already exist\", () => {\r\n        expect(notUsedIndexLinkList.hasDuplicateNode(index)).false;\r\n    });\r\n}, (index: number, notUsedIndexLinkList: LinkList<number>) => {\r\n    notUsedIndexLinkList.push(LinkNode.create(index));\r\n})\r\n\r\nexport const isNotDirty = (index: number, firstDirtyIndex: number) => {\r\n    return index < firstDirtyIndex;\r\n}\r\n\r\nexport const addItAndItsChildrenToDirtyList = (rootIndexInArrayBuffer: number, uid: number, ThreeDTransformData: any) => {\r\n    var indexInArraybuffer: number = rootIndexInArrayBuffer,\r\n        children = getChildren(uid, ThreeDTransformData);\r\n\r\n    if (isNotDirty(indexInArraybuffer, ThreeDTransformData.firstDirtyIndex)) {\r\n        setIsTranslate(uid, true, ThreeDTransformData);\r\n\r\n        addToDirtyList(indexInArraybuffer, ThreeDTransformData);\r\n    }\r\n\r\n    if (isChildrenExist(children)) {\r\n        forEach(children, (child: ThreeDTransform) => {\r\n            if (isNotAlive(child, ThreeDTransformData)) {\r\n                return;\r\n            }\r\n\r\n            addItAndItsChildrenToDirtyList(child.index, child.uid, ThreeDTransformData);\r\n        });\r\n    }\r\n\r\n    return ThreeDTransformData;\r\n}\r\n\r\nconst _checkGeneratedNotUsedIndex =(ThreeDTransformData: any, index: number) => {\r\n    // it(\"notUsedIndexLinkList shouldn't contain the index\", () => {\r\n    //     expect(ThreeDTransformData.notUsedIndexLinkList.indexOf(index)).equal(-1);\r\n    // });\r\n    it(\"index should < firstDirtyIndex\", () => {\r\n        expect(index).exist;\r\n        expect(index).lt(ThreeDTransformData.firstDirtyIndex);\r\n    });\r\n    it(\"index should not be used\", () => {\r\n        expect(isIndexUsed(index, ThreeDTransformData)).false;\r\n    });\r\n}\r\n","import curry from \"wonder-lodash/curry\";\r\nimport { Map } from \"immutable\";\r\nimport { deleteVal, isNotValidMapValue } from \"../../utils/objectUtils\";\r\nimport { getIsTranslate, setIsTranslate } from \"./isTransformSystem\";\r\nimport { getUId } from \"./utils\";\r\nimport { Matrix4 } from \"../../math/Matrix4\";\r\nimport { Vector3 } from \"../../math/Vector3\";\r\nimport { ThreeDTransformCacheMap } from \"./ThreeDTransformData\";\r\nimport { Matrix3 } from \"../../math/Matrix3\";\r\n\r\nexport const clearCache = curry((ThreeDTransformData: any, state: Map<any, any>) => {\r\n    var count: number = null,\r\n        cacheMap: ThreeDTransformCacheMap = null;\r\n\r\n    if (ThreeDTransformData.isClearCacheMap) {\r\n        ThreeDTransformData.isClearCacheMap = false;\r\n\r\n        return;\r\n    }\r\n\r\n    count = ThreeDTransformData.maxCount;\r\n    cacheMap = ThreeDTransformData.cacheMap;\r\n\r\n    for (let i = ThreeDTransformData.firstDirtyIndex; i < count; i++) {\r\n        let uid = getUId(i, ThreeDTransformData),\r\n            isTranslate = getIsTranslate(uid, ThreeDTransformData);\r\n\r\n        if (isTranslate) {\r\n            deleteVal(uid, cacheMap);\r\n\r\n            setIsTranslate(uid, false, ThreeDTransformData);\r\n        }\r\n\r\n        //todo clean more cache!\r\n    }\r\n\r\n    return state;\r\n})\r\n\r\nexport const clearCacheMap = (ThreeDTransformData: any) => {\r\n    ThreeDTransformData.cacheMap = {};\r\n\r\n    ThreeDTransformData.isClearCacheMap = true;\r\n}\r\n\r\nexport const getLocalToWorldMatrixCache = (uid: number, ThreeTransformData: any) => {\r\n    return _getCache(uid, ThreeTransformData).localToWorldMatrix;\r\n}\r\n\r\nexport const setLocalToWorldMatrixCache = (uid: number, mat: Matrix4, ThreeTransformData: any) => {\r\n    _getCache(uid, ThreeTransformData).localToWorldMatrix = mat;\r\n}\r\n\r\nexport const getPositionCache = (uid: number, ThreeTransformData: any) => {\r\n    return _getCache(uid, ThreeTransformData).position;\r\n}\r\n\r\nexport const setPositionCache = (uid: number, pos: Vector3, ThreeTransformData: any) => {\r\n    _getCache(uid, ThreeTransformData).position = pos;\r\n}\r\n\r\nexport const getLocalPositionCache = (uid: number, ThreeTransformData: any) => {\r\n    return _getCache(uid, ThreeTransformData).localPosition;\r\n}\r\n\r\nexport const setLocalPositionCache = (uid: number, pos: Vector3, ThreeTransformData: any) => {\r\n    ThreeTransformData.cacheMap[uid].localPosition = pos;\r\n}\r\n\r\nexport const getNormalMatrixCache = (uid: number, ThreeTransformData: any) => {\r\n    return _getCache(uid, ThreeTransformData).normalMatrix;\r\n}\r\n\r\nexport const setNormalMatrixCache = (uid: number, mat: Matrix3, ThreeTransformData: any) => {\r\n    _getCache(uid, ThreeTransformData).normalMatrix = mat;\r\n}\r\n\r\nconst _getCache =(uid: number, ThreeTransformData: any) => {\r\n    var cache = ThreeTransformData.cacheMap[uid];\r\n\r\n    if (isNotValidMapValue(cache)) {\r\n        cache = {};\r\n        ThreeTransformData.cacheMap[uid] = cache;\r\n    }\r\n\r\n    return cache;\r\n}\r\n","import { compose } from \"../../utils/functionalUtils\";\r\nimport curry from \"wonder-lodash/curry\";\r\nimport { addFirstDirtyIndex, generateNotUsedIndexInNormalList } from \"./dirtySystem\";\r\nimport { getUId } from \"./utils\";\r\nimport { getParent as getThreeDTransformDataParent, isParentExist } from \"./hierarchySystem\";\r\nimport {\r\n    getMatrix4DataIndexInArrayBuffer, getQuaternionDataIndexInArrayBuffer, getVector3DataIndexInArrayBuffer,\r\n    moveToIndex,\r\n    setLocalToWorldMatricesData,\r\n    swap\r\n} from \"./operateDataSystem\";\r\nimport { Map } from \"immutable\";\r\nimport { clearCache } from \"./cacheSystem\";\r\nimport { it, requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { setMatrix4ByIndex, setQuaternionByIndex, setVector3ByIndex } from \"../../utils/typeArrayUtils\";\r\n\r\nexport const update = (elapsed: number, GlobalTempData: any, ThreeDTransformData: any, state: Map<any, any>) => {\r\n    return compose(\r\n        _cleanDirtyList(ThreeDTransformData),\r\n        _updateDirtyList(GlobalTempData, ThreeDTransformData),\r\n        clearCache(ThreeDTransformData)\r\n    )(state);\r\n}\r\n\r\nconst _updateDirtyList =requireCheckFunc(curry((GlobalTempData: any, ThreeDTransformData: any, state: Map<any, any>) => {\r\n    it(\"firstDirtyIndex should <= maxCount\", () => {\r\n        expect(ThreeDTransformData.firstDirtyIndex).lte(ThreeDTransformData.maxCount)\r\n    })\r\n}), curry((GlobalTempData: any, ThreeDTransformData: any, state: Map<any, any>) => {\r\n    _sortParentBeforeChildInDirtyList(ThreeDTransformData);\r\n\r\n    let count = ThreeDTransformData.maxCount;\r\n\r\n    for (let i = ThreeDTransformData.firstDirtyIndex; i < count; i++) {\r\n        _transform(i, GlobalTempData, ThreeDTransformData);\r\n    }\r\n\r\n    return state;\r\n}))\r\n\r\n//todo optimize: if transform not transformed in 5 frames, not move off\r\nconst _cleanDirtyList =requireCheckFunc(curry((ThreeDTransformData: any, state: Map<any, any>) => {\r\n    it(\"firstDirtyIndex should <= maxCount\", () => {\r\n        expect(ThreeDTransformData.firstDirtyIndex).lte(ThreeDTransformData.maxCount)\r\n    })\r\n}), curry((ThreeDTransformData: any, state: Map<any, any>) => {\r\n    var count = ThreeDTransformData.maxCount;\r\n\r\n    for (let i = ThreeDTransformData.firstDirtyIndex; i < count; i++) {\r\n        if (_needMoveOffDirtyList(i)) {\r\n            _moveFromDirtyListToNormalList(i, ThreeDTransformData);\r\n        }\r\n    }\r\n\r\n    return state;\r\n}))\r\n\r\nconst _needMoveOffDirtyList =(index: number) => {\r\n    return true;\r\n}\r\n\r\nconst _moveFromDirtyListToNormalList =(index: number, ThreeDTransformData: any) => {\r\n    ThreeDTransformData.firstDirtyIndex = addFirstDirtyIndex(ThreeDTransformData);\r\n\r\n    moveToIndex(index, generateNotUsedIndexInNormalList(ThreeDTransformData), ThreeDTransformData);\r\n}\r\n\r\nconst _transform =(index: number, GlobalTempData: any, ThreeDTransformData: any) => {\r\n    var vec3Index = getVector3DataIndexInArrayBuffer(index),\r\n        quaIndex = getQuaternionDataIndexInArrayBuffer(index),\r\n        mat4Index = getMatrix4DataIndexInArrayBuffer(index),\r\n        mat = GlobalTempData.matrix4_2.setTRS(\r\n            setVector3ByIndex(GlobalTempData.vector3_1, ThreeDTransformData.localPositions, vec3Index),\r\n            setQuaternionByIndex(GlobalTempData.quaternion_1, ThreeDTransformData.localRotations, quaIndex),\r\n            setVector3ByIndex(GlobalTempData.vector3_2, ThreeDTransformData.localScales, vec3Index)\r\n        ),\r\n        parent = getThreeDTransformDataParent(getUId(index, ThreeDTransformData), ThreeDTransformData);\r\n\r\n    if (isParentExist(parent)) {\r\n        let parentIndex = parent.index;\r\n\r\n        return setLocalToWorldMatricesData(setMatrix4ByIndex(GlobalTempData.matrix4_1, ThreeDTransformData.localToWorldMatrices, getMatrix4DataIndexInArrayBuffer(parentIndex))\r\n            .multiply(mat),\r\n            mat4Index,\r\n            ThreeDTransformData\r\n        );\r\n    }\r\n\r\n    return setLocalToWorldMatricesData(\r\n        mat,\r\n        mat4Index,\r\n        ThreeDTransformData\r\n    );\r\n}\r\n\r\nconst _sortParentBeforeChildInDirtyList =(ThreeDTransformData: any) => {\r\n    var count = ThreeDTransformData.maxCount;\r\n\r\n    for (let i = ThreeDTransformData.firstDirtyIndex; i < count; i++) {\r\n        let parent = getThreeDTransformDataParent(getUId(i, ThreeDTransformData), ThreeDTransformData);\r\n\r\n        if (isParentExist(parent)) {\r\n            let parentIndex = parent.index;\r\n\r\n            if (parentIndex > i) {\r\n                swap(parentIndex, i, ThreeDTransformData);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n","import { ThreeDTransform } from \"./ThreeDTransform\";\r\nimport { checkComponentShouldAlive } from \"../ComponentSystem\";\r\nimport { isAlive } from \"./ThreeDTransformSystem\";\r\n\r\nexport const checkTransformShouldAlive = (transform: ThreeDTransform, ThreeDTransformData: any) => {\r\n    checkComponentShouldAlive(transform, ThreeDTransformData, (transform: ThreeDTransform, ThreeDTransformData: any) => {\r\n        return isAlive(transform, ThreeDTransformData);\r\n    });\r\n}\r\n\r\n","import curry from \"wonder-lodash/curry\";\r\nimport { getChildren, getParent, isChildrenExist } from \"./hierarchySystem\";\r\nimport { BatchTransformData, ThreeDTransform } from \"./ThreeDTransform\";\r\nimport {\r\n    getVector3DataIndexInArrayBuffer, moveMapDataToIndex, moveTypeArrDataToIndex, setLocalPositionData, setPositionData,\r\n    swapTransformMapData,\r\n    swapTypeArrData\r\n} from \"./operateDataSystem\";\r\nimport { isTranslate, setIsTranslate } from \"./isTransformSystem\";\r\nimport { addNotUsedIndex, isNotDirty, minusFirstDirtyIndex } from \"./dirtySystem\";\r\nimport { isIndexUsed } from \"./utils\";\r\nimport { requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { compose } from \"../../utils/functionalUtils\";\r\nimport { checkTransformShouldAlive } from \"./contractUtils\";\r\nimport { forEach } from \"../../utils/arrayUtils\";\r\nimport { isNotAlive } from \"./ThreeDTransformSystem\";\r\n\r\nexport const setBatchDatas = requireCheckFunc((batchData: Array<BatchTransformData>, GlobalTempData: any, ThreeTransformData: any) => {\r\n    for (let data of batchData) {\r\n        checkTransformShouldAlive(data.transform, ThreeTransformData);\r\n    }\r\n}, (batchData: Array<BatchTransformData>, GlobalTempData: any, ThreeDTransformData: any) => {\r\n    compose(\r\n        _addBatchToDirtyListByChangeMapData(ThreeDTransformData, ThreeDTransformData.firstDirtyIndex),\r\n        _addBatchToDirtyListByChangeTypeArrData(ThreeDTransformData, ThreeDTransformData.firstDirtyIndex),\r\n        ([noDirtyIndex, targetDirtyIndex]) => {\r\n            ThreeDTransformData.firstDirtyIndex = targetDirtyIndex;\r\n\r\n            return noDirtyIndex;\r\n        },\r\n        _getAllTransfomrsNotDirtyIndexArrAndMarkTransform(batchData),\r\n        _setBatchTransformData(batchData, GlobalTempData)\r\n    )(ThreeDTransformData);\r\n})\r\n\r\nconst _setBatchTransformData =curry((batchData: Array<BatchTransformData>, GlobalTempData: any, ThreeDTransformData: any) => {\r\n    for (let data of batchData) {\r\n        let transform = data.transform,\r\n            index = transform.index,\r\n            uid = transform.uid,\r\n            parent = getParent(uid, ThreeDTransformData),\r\n            vec3IndexInArrayBuffer = getVector3DataIndexInArrayBuffer(index),\r\n            { position, localPosition } = data;\r\n\r\n        if (localPosition) {\r\n            setLocalPositionData(localPosition, vec3IndexInArrayBuffer, ThreeDTransformData);\r\n        }\r\n\r\n        if (position) {\r\n            setPositionData(index, parent, vec3IndexInArrayBuffer, position, GlobalTempData, ThreeDTransformData);\r\n        }\r\n    }\r\n\r\n    return ThreeDTransformData;\r\n})\r\n\r\nconst _getAllTransfomrsNotDirtyIndexArrAndMarkTransform =curry((batchData: Array<BatchTransformData>, ThreeDTransformData: any) => {\r\n    var notDirtyIndexArr = [],\r\n        firstDirtyIndex = ThreeDTransformData.firstDirtyIndex;\r\n    const _getNotDirtyIndex =(index, uid, notDirtyIndexArr, isTranslate: boolean, ThreeDTransformData) => {\r\n        var children = getChildren(uid, ThreeDTransformData);\r\n\r\n        if (isTranslate) {\r\n            setIsTranslate(uid, true, ThreeDTransformData);\r\n        }\r\n\r\n        if (isNotDirty(index, firstDirtyIndex)) {\r\n            notDirtyIndexArr.push(index);\r\n\r\n            firstDirtyIndex = minusFirstDirtyIndex(firstDirtyIndex);\r\n        }\r\n\r\n        if (isChildrenExist(children)) {\r\n            forEach(children, (child: ThreeDTransform) => {\r\n                if (isNotAlive(child, ThreeDTransformData)) {\r\n                    return;\r\n                }\r\n\r\n                _getNotDirtyIndex(child.index, child.uid, notDirtyIndexArr, isTranslate, ThreeDTransformData)\r\n            })\r\n        }\r\n    }\r\n\r\n    for (let data of batchData) {\r\n        let transform = data.transform,\r\n            index = transform.index;\r\n\r\n        _getNotDirtyIndex(index, transform.uid, notDirtyIndexArr, isTranslate(data), ThreeDTransformData);\r\n    }\r\n\r\n    return [notDirtyIndexArr, firstDirtyIndex];\r\n});\r\n\r\n\r\nconst _addBatchToDirtyList =(ThreeDTransformData: any, targetDirtyIndex: number, swapFunc: Function, moveToIndexFunc: Function, notDirtyIndexArr: Array<number>) => {\r\n    for (let index of notDirtyIndexArr) {\r\n        targetDirtyIndex = minusFirstDirtyIndex(targetDirtyIndex);\r\n\r\n        if (isIndexUsed(targetDirtyIndex, ThreeDTransformData)) {\r\n            swapFunc(index, targetDirtyIndex, ThreeDTransformData);\r\n        }\r\n        else {\r\n            moveToIndexFunc(index, targetDirtyIndex, ThreeDTransformData);\r\n        }\r\n    }\r\n\r\n    return targetDirtyIndex;\r\n}\r\n\r\nconst _addBatchToDirtyListByChangeTypeArrData =curry((ThreeDTransformData: any, targetDirtyIndex: number, notDirtyIndexArr: Array<number>) => {\r\n    _addBatchToDirtyList(ThreeDTransformData, targetDirtyIndex, swapTypeArrData, moveTypeArrDataToIndex, notDirtyIndexArr);\r\n\r\n    return notDirtyIndexArr;\r\n})\r\n\r\n\r\nconst _addBatchToDirtyListByChangeMapData =curry((ThreeDTransformData: any, targetDirtyIndex: number, notDirtyIndexArr: Array<number>) => {\r\n    return _addBatchToDirtyList(ThreeDTransformData, targetDirtyIndex, swapTransformMapData, (sourceIndex: number, targetIndex: number, ThreeDTransformData: any) => {\r\n        moveMapDataToIndex(sourceIndex, targetIndex, ThreeDTransformData);\r\n        addNotUsedIndex(sourceIndex, ThreeDTransformData.notUsedIndexLinkList);\r\n    }, notDirtyIndexArr);\r\n})\r\n\r\n","import { ComponentGameObjectMap } from \"../ComponentData\";\r\nimport { Component } from \"../Component\";\r\n\r\nexport class TagData {\r\n    public static tagArray: Array<string> = null;\r\n\r\n    public static slotCountMap: Array<number> = null;\r\n    public static usedSlotCountMap: Array<number> = null;\r\n\r\n    public static indexMap: Array<number> = null;\r\n    public static indexInTagArrayMap: Array<number> = null;\r\n\r\n    public static lastIndexInTagArray: number = null;\r\n\r\n    public static tagMap: TagMap = null;\r\n\r\n    public static gameObjectMap: ComponentGameObjectMap = null;\r\n\r\n    public static index: number = null;\r\n    public static count: number = null;\r\n    public static disposeCount: number = null;\r\n}\r\n\r\nexport type TagMap = {\r\n    [index: number]: Component\r\n}\r\n","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Component } from \"../Component\";\r\nimport {\r\n    addTag as addTagSystemTag, removeTag as removeTagSystemTag, create,\r\n    findGameObjectsByTag as findTagSystemTagGameObjectsByTag, getGameObject\r\n} from \"./TagSystem\";\r\nimport { TagData } from \"./TagData\";\r\nimport { requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { checkComponentShouldAlive } from \"../ComponentSystem\";\r\nimport { isValidMapValue } from \"../../utils/objectUtils\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\n\r\n@registerClass(\"Tag\")\r\nexport class Tag extends Component {\r\n}\r\n\r\nexport const createTag = (slotCount: number = 4) => {\r\n    return create(slotCount, TagData);\r\n}\r\n\r\nexport const addTag = requireCheckFunc((component: Tag, tag: string) => {\r\n    _checkShouldAlive(component, TagData);\r\n}, (component: Tag, tag: string) => {\r\n    addTagSystemTag(component, tag, TagData);\r\n})\r\n\r\nexport const removeTag = requireCheckFunc((component: Tag, tag: string) => {\r\n    _checkShouldAlive(component, TagData);\r\n}, (component: Tag, tag: string) => {\r\n    removeTagSystemTag(component, tag, TagData);\r\n})\r\n\r\nexport const findGameObjectsByTag = (tag: string) => {\r\n    return findTagSystemTagGameObjectsByTag(tag, TagData);\r\n}\r\n\r\nexport const getTagGameObject = requireCheckFunc((component: Tag) => {\r\n    _checkShouldAlive(component, TagData);\r\n}, (component: Tag) => {\r\n    return getGameObject(component.index, TagData);\r\n})\r\n\r\nconst _checkShouldAlive =(tag: Tag, TagData: any) => {\r\n    checkComponentShouldAlive(tag, TagData, (tag: Tag, TagData: any) => {\r\n        return isValidMapValue(TagData.indexMap[TagData.indexInTagArrayMap[tag.index]]);\r\n    })\r\n}\r\n","import { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport { Tag } from \"./Tag\";\r\nimport { ensureFunc, it, requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport {\r\n    addAddComponentHandle as addAddComponentHandleToMap, addComponentToGameObjectMap,\r\n    addDisposeHandle as addDisposeHandleToMap,\r\n    generateComponentIndex, getComponentGameObject, markComponentIndexRemoved\r\n} from \"../ComponentSystem\";\r\nimport { createMap, deleteVal } from \"../../utils/objectUtils\";\r\nimport { forEach } from \"../../utils/arrayUtils\";\r\nimport { TagData } from \"./TagData\";\r\nimport { isDisposeTooManyComponents, reAllocateTag } from \"../../utils/memoryUtils\";\r\nimport { IUIdEntity } from \"../../core/entityObject/gameObject/IUIdEntity\";\r\n\r\nexport const addAddComponentHandle = (_class: any) => {\r\n    addAddComponentHandleToMap(_class, addComponent);\r\n}\r\n\r\nexport const addDisposeHandle = (_class: any) => {\r\n    addDisposeHandleToMap(_class, disposeComponent);\r\n}\r\n\r\nexport const create = ensureFunc((tag: Tag, slotCount: number, TagData: any) => {\r\n    it(\"slot array should has no hole\", () => {\r\n        for (let count of TagData.slotCountMap) {\r\n            expect(count).exist;\r\n        }\r\n    });\r\n    // it(\"used slot array should has no hole\", () => {\r\n    //     for(let count of TagData.usedSlotCountMap){\r\n    //         expect(count).exist;\r\n    //     }\r\n    // });\r\n}, (slotCount: number, TagData: any) => {\r\n    var tag = new Tag(),\r\n        index = generateComponentIndex(TagData);\r\n\r\n    tag.index = index;\r\n\r\n    TagData.count += 1;\r\n\r\n    _setSlotCount(index, slotCount, TagData.slotCountMap);\r\n    _setUsedSlotCount(index, 0, TagData.usedSlotCountMap);\r\n\r\n    setNextIndexInTagArrayMap(index, slotCount, TagData.indexInTagArrayMap);\r\n\r\n    _initIndexMap(index, slotCount, TagData);\r\n\r\n    TagData.lastIndexInTagArray += slotCount;\r\n\r\n    TagData.tagMap[index] = tag;\r\n\r\n    return tag;\r\n})\r\n\r\nexport const setNextIndexInTagArrayMap = requireCheckFunc((index: number, slotCount: number, indexInTagArrayMap: Array<number>) => {\r\n    it(\"index should >= 0\", () => {\r\n        expect(index).gte(0);\r\n    });\r\n}, (index: number, slotCount: number, indexInTagArrayMap: Array<number>) => {\r\n    indexInTagArrayMap[index + 1] = indexInTagArrayMap[index] + slotCount;\r\n})\r\n\r\nconst _initIndexMap =(index: number, slotCount: number, TagData: any) => {\r\n    var indexMap = TagData.indexMap,\r\n        lastIndexInTagArray = TagData.lastIndexInTagArray;\r\n\r\n    for (let i = lastIndexInTagArray, count = lastIndexInTagArray + slotCount; i < count; i++) {\r\n        indexMap[i] = index;\r\n    }\r\n}\r\n\r\nexport const addTag = requireCheckFunc((tagComponent: Tag, tag: string, TagData: any) => {\r\n    it(\"tag should not already be added\", () => {\r\n        var index = tagComponent.index,\r\n            indexInArray = _convertTagIndexToIndexInArray(index, TagData),\r\n            tagArray = TagData.tagArray,\r\n            slotCountMap = TagData.slotCountMap,\r\n            currentSlotCount = getSlotCount(index, slotCountMap);\r\n\r\n        expect(tagArray.slice(indexInArray, indexInArray + currentSlotCount).indexOf(tag) > -1).false;\r\n    });\r\n}, (tagComponent: Tag, tag: string, TagData: any) => {\r\n    var index = tagComponent.index,\r\n        indexInArray = _convertTagIndexToIndexInArray(index, TagData),\r\n        slotCountMap = TagData.slotCountMap,\r\n        tagArray = TagData.tagArray,\r\n        usedSlotCountMap = TagData.usedSlotCountMap,\r\n        currentSlotCount = getSlotCount(index, slotCountMap),\r\n        currentUsedSlotCount = getUsedSlotCount(index, usedSlotCountMap);\r\n\r\n    if (_isSlotAllUsed(currentUsedSlotCount, currentSlotCount)) {\r\n        let increasedSlotCount = _allocateDoubleSlotCountAndAddTag(indexInArray, index, tag, currentSlotCount, currentUsedSlotCount, TagData),\r\n            slotCount = currentSlotCount + increasedSlotCount;\r\n\r\n        _setSlotCount(index, slotCount, slotCountMap);\r\n\r\n        _updateIndexInTagArrayMap(index, increasedSlotCount, TagData);\r\n\r\n        TagData.lastIndexInTagArray = _updateIndexMap(indexInArray, index, increasedSlotCount, TagData);\r\n    }\r\n    else {\r\n        tagArray[indexInArray + currentUsedSlotCount] = tag;\r\n    }\r\n\r\n    _setUsedSlotCount(index, currentUsedSlotCount + 1, usedSlotCountMap);\r\n})\r\n\r\nconst _updateIndexInTagArrayMap =(startIndex: number, increasedSlotCount: number, TagData: any) => {\r\n    var count = TagData.count,\r\n        indexInTagArrayMap = TagData.indexInTagArrayMap;\r\n\r\n    for (let i = startIndex + 1; i <= count; i++) {\r\n        indexInTagArrayMap[i] += increasedSlotCount;\r\n    }\r\n}\r\n\r\nconst _updateIndexMap =(indexInArray: number, index: number, increasedSlotCount: number, TagData: any) => {\r\n    var indexMap = TagData.indexMap,\r\n        lastIndexInTagArray = TagData.lastIndexInTagArray + increasedSlotCount,\r\n        spliceParamArr = [indexInArray + increasedSlotCount, 0];\r\n\r\n    for (let i = 0; i < increasedSlotCount; i++) {\r\n        spliceParamArr.push(index);\r\n    }\r\n\r\n    Array.prototype.splice.apply(indexMap, spliceParamArr);\r\n\r\n    return lastIndexInTagArray;\r\n}\r\n\r\n//todo optimize: collect redundant allocated slot count\r\nexport const removeTag = requireCheckFunc((tagComponent: Tag, tag: string, TagData: any) => {\r\n    it(\"current used slot count should >= 0\", () => {\r\n        var index = tagComponent.index,\r\n            usedSlotCountMap = TagData.usedSlotCountMap;\r\n\r\n        expect(getUsedSlotCount(index, usedSlotCountMap)).gte(0);\r\n    });\r\n}, (tagComponent: Tag, tag: string, TagData: any) => {\r\n    var index = tagComponent.index,\r\n        indexInArray = _convertTagIndexToIndexInArray(index, TagData),\r\n        usedSlotCountMap = TagData.usedSlotCountMap,\r\n        tagArray = TagData.tagArray,\r\n        currentUsedSlotCount = getUsedSlotCount(index, usedSlotCountMap),\r\n        newUsedSlotCount = currentUsedSlotCount;\r\n\r\n    for (let i = indexInArray, count = indexInArray + currentUsedSlotCount; i < count; i++) {\r\n        if (tagArray[i] === tag) {\r\n            tagArray[i] = void 0;\r\n            newUsedSlotCount = currentUsedSlotCount - 1;\r\n\r\n            break;\r\n        }\r\n    }\r\n\r\n    if (newUsedSlotCount <= 0) {\r\n        newUsedSlotCount = 0;\r\n    }\r\n\r\n    _setUsedSlotCount(index, newUsedSlotCount, usedSlotCountMap);\r\n})\r\n\r\nexport const addComponent = (component: Tag, gameObject: GameObject) => {\r\n    addComponentToGameObjectMap(TagData.gameObjectMap, component.index, gameObject);\r\n}\r\n\r\nexport const getSlotCount = (index: number, slotCountMap: Array<number>) => {\r\n    return slotCountMap[index];\r\n}\r\n\r\nconst _setSlotCount =(index: number, slotCount: number, slotCountMap: Array<number>) => {\r\n    slotCountMap[index] = slotCount;\r\n}\r\n\r\nexport const getUsedSlotCount = (index: number, usedSlotCountMap: Array<number>) => {\r\n    return usedSlotCountMap[index];\r\n}\r\n\r\nconst _setUsedSlotCount =(index: number, slotCount: number, usedSlotCountMap: Array<number>) => {\r\n    usedSlotCountMap[index] = slotCount;\r\n}\r\n\r\nconst _isSlotAllUsed =requireCheckFunc((currentUsedSlotCount: number, currentSlotCount: number) => {\r\n    it(\"usedSlotCount should <= slotCount\", () => {\r\n        expect(currentUsedSlotCount).lte(currentSlotCount);\r\n    });\r\n}, (currentUsedSlotCount: number, currentSlotCount: number) => {\r\n    return currentUsedSlotCount === currentSlotCount;\r\n})\r\n\r\nconst _allocateDoubleSlotCountAndAddTag =(indexInArray: number, index: number, tag: string, currentSlotCount: number, currentUsedSlotCount: number, TagData: any) => {\r\n    var spliceArr = [indexInArray + currentUsedSlotCount, 0, tag],\r\n        tagArray = TagData.tagArray;\r\n\r\n    for (let i = 0, len = currentSlotCount - 1; i < len; i++) {\r\n        spliceArr.push(null);\r\n    }\r\n\r\n    Array.prototype.splice.apply(tagArray, spliceArr);\r\n\r\n    return currentSlotCount;\r\n}\r\n\r\nconst _convertTagIndexToIndexInArray =(tagIndex: number, TagData: any) => {\r\n    return TagData.indexInTagArrayMap[tagIndex];\r\n}\r\n\r\nconst _convertIndexInArrayToTagIndex =(indexInTagArray: number, TagData: any) => {\r\n    return TagData.indexMap[indexInTagArray];\r\n}\r\n\r\nexport const disposeComponent = ensureFunc((returnVal, tag: Tag) => {\r\n    it(\"count should >= 0\", () => {\r\n        expect(TagData.count).gte(0);\r\n    });\r\n}, (tag: Tag) => {\r\n    var index = tag.index,\r\n        indexInTagArray = _convertTagIndexToIndexInArray(index, TagData),\r\n        currentUsedSlotCount = getUsedSlotCount(index, TagData.usedSlotCountMap),\r\n        tagArray = TagData.tagArray;\r\n\r\n    for (let i = indexInTagArray, count = indexInTagArray + currentUsedSlotCount; i < count; i++) {\r\n        tagArray[i] = void 0;\r\n    }\r\n\r\n    /*!\r\n    delete for isAlive check\r\n     */\r\n    deleteVal(indexInTagArray, TagData.indexMap);\r\n\r\n    TagData.count -= 1;\r\n\r\n    markComponentIndexRemoved(TagData.tagMap[index]);\r\n\r\n    TagData.disposeCount += 1;\r\n\r\n    if (isDisposeTooManyComponents(TagData.disposeCount)) {\r\n        reAllocateTag(TagData);\r\n\r\n        TagData.disposeCount = 0;\r\n    }\r\n})\r\n\r\nexport const getGameObject = (index: number, Data: any) => {\r\n    return getComponentGameObject(Data.gameObjectMap, index);\r\n}\r\n\r\nexport const findGameObjectsByTag = (targetTag: string, TagData: any) => {\r\n    var gameObjectArr: Array<GameObject> = [],\r\n        gameObjectMap = TagData.gameObjectMap;\r\n\r\n    forEach(TagData.tagArray, (tag: string, indexInTagArray: number) => {\r\n        if (tag === targetTag) {\r\n            gameObjectArr.push(gameObjectMap[_convertIndexInArrayToTagIndex(indexInTagArray, TagData)]);\r\n        }\r\n    });\r\n\r\n    return gameObjectArr;\r\n}\r\n\r\nexport const initData = (TagData: any) => {\r\n    TagData.tagArray = [];\r\n    TagData.slotCountMap = [];\r\n    TagData.usedSlotCountMap = [];\r\n    TagData.indexMap = [];\r\n    TagData.indexInTagArrayMap = [0];\r\n    TagData.gameObjectMap = createMap();\r\n    TagData.tagMap = createMap();\r\n\r\n    TagData.lastIndexInTagArray = 0;\r\n    TagData.index = 0;\r\n    TagData.count = 0;\r\n    TagData.disposeCount = 0;\r\n}\r\n","export const MemoryConfig = {\r\n    maxComponentDisposeCount: 1000\r\n};\r\n\r\n","import { createMap, deleteVal, isNotValidMapValue, isValidMapValue } from \"./objectUtils\";\r\nimport { clearCacheMap } from \"../component/transform/cacheSystem\";\r\nimport { getSlotCount, getUsedSlotCount, setNextIndexInTagArrayMap } from \"../component/tag/TagSystem\";\r\nimport { isNotValidVal, isValidVal } from \"./arrayUtils\";\r\nimport { MemoryConfig } from \"../config/MemoryConfig\";\r\nimport { ensureFunc, it, requireCheckFunc } from \"../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { Component } from \"../component/Component\";\r\nimport { checkIndexShouldEqualCount } from \"../component/utils/contractUtils\";\r\nimport { GeometryInfo, GeometryInfoList } from \"../definition/type/geometryType\";\r\nimport { set } from \"./typeArrayUtils\";\r\nimport {\r\n    getChildren as getGameObjectChildren, isAlive as isGameObjectAlive,\r\n    setChildren as setGameObjectChildren\r\n} from \"../core/entityObject/gameObject/GameObjectSystem\";\r\nimport { isNotUndefined } from \"./JudgeUtils\";\r\nimport { isAlive as isThreeDTransformAlive } from \"../component/transform/ThreeDTransformSystem\";\r\nimport {\r\n    getChildren as getThreeDTransformChildren,\r\n    setChildren as setThreeDTransformChildren\r\n} from \"../component/transform/hierarchySystem\";\r\n\r\nexport const isDisposeTooManyComponents = (disposeCount: number, maxComponentDisposeCount: number = MemoryConfig.maxComponentDisposeCount) => {\r\n    return disposeCount >= maxComponentDisposeCount;\r\n}\r\n\r\nconst _setMapVal =(map: object, key: number, val: any) => {\r\n    map[key] = val;\r\n}\r\n\r\nconst _setArrayVal =(arr: Array<any>, index: number, val: any) => {\r\n    arr[index] = val;\r\n}\r\n\r\nexport const reAllocateThreeDTransform = (ThreeDTransformData: any) => {\r\n    var val: any = null,\r\n        newParentMap = createMap(),\r\n        newChildrenMap = createMap(),\r\n        newIsTranslateMap = createMap(),\r\n        newGameObjectMap = createMap(),\r\n        newTempMap = createMap(),\r\n        newAliveUIdArray: Array<number> = [],\r\n        aliveUIdArray = ThreeDTransformData.aliveUIdArray,\r\n        parentMap = ThreeDTransformData.parentMap,\r\n        childrenMap = ThreeDTransformData.childrenMap,\r\n        isTranslateMap = ThreeDTransformData.isTranslateMap,\r\n        gameObjectMap = ThreeDTransformData.gameObjectMap,\r\n        tempMap = ThreeDTransformData.tempMap;\r\n\r\n    clearCacheMap(ThreeDTransformData);\r\n\r\n\r\n    let disposedUIdArr = [],\r\n        actualAliveUIdArr = [];\r\n\r\n    for (let uid of aliveUIdArray) {\r\n        val = childrenMap[uid];\r\n\r\n        if (isNotValidMapValue(val)) {\r\n            disposedUIdArr.push(uid);\r\n        }\r\n        else {\r\n            actualAliveUIdArr.push(uid);\r\n        }\r\n    }\r\n\r\n    _cleanChildrenMap(disposedUIdArr, parentMap, isThreeDTransformAlive, getThreeDTransformChildren, setThreeDTransformChildren, ThreeDTransformData);\r\n\r\n    for (let uid of actualAliveUIdArr) {\r\n        val = childrenMap[uid];\r\n\r\n        newAliveUIdArray.push(uid);\r\n\r\n        _setMapVal(newChildrenMap, uid, val);\r\n\r\n        val = tempMap[uid];\r\n        _setMapVal(newTempMap, uid, val);\r\n\r\n        val = parentMap[uid];\r\n        _setMapVal(newParentMap, uid, val);\r\n\r\n        val = isTranslateMap[uid];\r\n        _setMapVal(newIsTranslateMap, uid, val);\r\n\r\n        val = gameObjectMap[uid];\r\n        _setMapVal(newGameObjectMap, uid, val);\r\n    }\r\n\r\n    ThreeDTransformData.parentMap = newParentMap;\r\n    ThreeDTransformData.childrenMap = newChildrenMap;\r\n    ThreeDTransformData.isTranslateMap = newIsTranslateMap;\r\n    ThreeDTransformData.tempMap = newTempMap;\r\n    ThreeDTransformData.gameObjectMap = newGameObjectMap;\r\n\r\n    ThreeDTransformData.aliveUIdArray = newAliveUIdArray;\r\n}\r\n\r\nexport const reAllocateGameObject = (GameObjectData: any) => {\r\n    let val: any = null,\r\n        newParentMap = createMap(),\r\n        newChildrenMap = createMap(),\r\n        newComponentMap = createMap(),\r\n        newAliveUIdArray: Array<number> = [],\r\n        aliveUIdArray = GameObjectData.aliveUIdArray,\r\n        parentMap = GameObjectData.parentMap,\r\n        childrenMap = GameObjectData.childrenMap,\r\n        componentMap = GameObjectData.componentMap,\r\n        disposedUIdArr = [],\r\n        actualAliveUIdArr = [];\r\n\r\n    for (let uid of aliveUIdArray) {\r\n        val = componentMap[uid];\r\n\r\n        if (isNotValidMapValue(val)) {\r\n            disposedUIdArr.push(uid);\r\n        }\r\n        else {\r\n            actualAliveUIdArr.push(uid);\r\n        }\r\n    }\r\n\r\n    _cleanChildrenMap(disposedUIdArr, parentMap, isGameObjectAlive, getGameObjectChildren, setGameObjectChildren, GameObjectData);\r\n\r\n    for (let uid of actualAliveUIdArr) {\r\n        val = componentMap[uid];\r\n\r\n        newAliveUIdArray.push(uid);\r\n\r\n        _setMapVal(newComponentMap, uid, val);\r\n\r\n        val = parentMap[uid];\r\n        _setMapVal(newParentMap, uid, val);\r\n\r\n        val = childrenMap[uid];\r\n        _setMapVal(newChildrenMap, uid, val);\r\n    }\r\n\r\n    GameObjectData.parentMap = newParentMap;\r\n    GameObjectData.childrenMap = newChildrenMap;\r\n    GameObjectData.componentMap = newComponentMap;\r\n    GameObjectData.aliveUIdArray = newAliveUIdArray;\r\n};\r\n\r\nconst _cleanChildrenMap =(disposedUIdArr: Array<number>, parentMap: object, isAlive: Function, getChildren: Function, setChildren: Function, Data: any) => {\r\n    var isCleanedParentMap = createMap();\r\n\r\n    for (let uid of disposedUIdArr) {\r\n        let parent = parentMap[uid];\r\n\r\n        if (_isParentExist(parent)) {\r\n            let parentUId = parent.uid;\r\n\r\n            if (isValidMapValue(isCleanedParentMap[parentUId])) {\r\n                continue;\r\n            }\r\n\r\n            _cleanChildren(parentUId, isAlive, getChildren, setChildren, Data);\r\n\r\n            deleteVal(uid, parentMap);\r\n        }\r\n    }\r\n}\r\n\r\nconst _cleanChildren =(parentUId: number, isAlive: Function, getChildren: Function, setChildren: Function, Data: any) => {\r\n    var children = getChildren(parentUId, Data);\r\n\r\n    if (!_isChildrenExist(children)) {\r\n        return;\r\n    }\r\n\r\n    let newChildren: Array<Component> = [];\r\n\r\n    for (let i = 0, len = children.length; i < len; ++i) {\r\n        let child = children[i];\r\n\r\n        if (isAlive(child, Data)) {\r\n            newChildren.push(child);\r\n        }\r\n    }\r\n\r\n    setChildren(parentUId, newChildren, Data);\r\n};\r\n\r\nconst _isParentExist =(parent: Component) => isNotUndefined(parent);\r\n\r\nconst _isChildrenExist =(children: Array<Component>) => isNotUndefined(children);\r\n\r\nexport const reAllocateTag = (TagData: any) => {\r\n    var usedSlotCountMap = TagData.usedSlotCountMap,\r\n        slotCountMap = TagData.slotCountMap,\r\n        indexMap = TagData.indexMap,\r\n        tagArray = TagData.tagArray,\r\n        gameObjectMap = TagData.gameObjectMap,\r\n        indexInTagArrayMap = TagData.indexInTagArrayMap,\r\n        tagMap = TagData.tagMap,\r\n        newIndexInTagArrayMap: Array<number> = [0],\r\n        newTagArray = [],\r\n        newGameObjectMap = createMap(),\r\n        newUsedSlotCountMap = [],\r\n        newSlotCountMap = [],\r\n        newIndexMap = [],\r\n        newTagMap = createMap(),\r\n        newIndexInTagArray = 0,\r\n        newIndexInTagArrayInMap = null,\r\n        newIndex = 0,\r\n        newLastIndexInTagArray = 0,\r\n        hasNewData = false,\r\n        tagIndex: number = null;\r\n\r\n    for (let indexInTagArray of indexInTagArrayMap) {\r\n        let index = indexMap[indexInTagArray];\r\n\r\n        if (isNotValidVal(index)) {\r\n            continue;\r\n        }\r\n\r\n        hasNewData = true;\r\n\r\n        let currentUsedSlotCount = getUsedSlotCount(index, usedSlotCountMap),\r\n            tag = tagMap[index];\r\n\r\n        newGameObjectMap[newIndex] = gameObjectMap[index];\r\n        newSlotCountMap[newIndex] = getSlotCount(index, slotCountMap);\r\n        newUsedSlotCountMap[newIndex] = currentUsedSlotCount;\r\n\r\n        newIndexInTagArrayInMap = newIndexInTagArray;\r\n        newIndexInTagArrayMap[newIndex] = newIndexInTagArrayInMap;\r\n\r\n        tag.index = newIndex;\r\n        newTagMap[newIndex] = tag;\r\n\r\n        for (let i = indexInTagArray, count = indexInTagArray + currentUsedSlotCount; i < count; i++) {\r\n            newTagArray[newIndexInTagArray] = tagArray[i];\r\n\r\n            newIndexMap[newIndexInTagArray] = newIndex;\r\n\r\n            newIndexInTagArray += 1;\r\n        }\r\n\r\n        newIndex += 1;\r\n    }\r\n\r\n    if (hasNewData) {\r\n        newIndex -= 1;\r\n\r\n        newLastIndexInTagArray = newIndexInTagArrayInMap + getSlotCount(newIndex, newSlotCountMap);\r\n\r\n        tagIndex = newIndex + 1;\r\n    }\r\n    else {\r\n        tagIndex = 0;\r\n    }\r\n\r\n    setNextIndexInTagArrayMap(newIndex, newSlotCountMap[newIndex], newIndexInTagArrayMap);\r\n\r\n    TagData.slotCountMap = newSlotCountMap;\r\n    TagData.usedSlotCountMap = newUsedSlotCountMap;\r\n    TagData.gameObjectMap = newGameObjectMap;\r\n    TagData.tagMap = newTagMap;\r\n\r\n    TagData.indexMap = newIndexMap;\r\n\r\n    TagData.indexInTagArrayMap = newIndexInTagArrayMap;\r\n\r\n    TagData.lastIndexInTagArray = newLastIndexInTagArray;\r\n    TagData.tagArray = newTagArray;\r\n\r\n    TagData.index = tagIndex;\r\n};\r\n\r\nexport const reAllocateGeometry = ensureFunc((returnVal: any, GeometryData: any) => {\r\n    checkIndexShouldEqualCount(GeometryData);\r\n}, (GeometryData: any) => {\r\n    let val: any = null,\r\n        // hasNewData = false,\r\n        index = GeometryData.index,\r\n        vertices = GeometryData.vertices,\r\n        normals = GeometryData.normals,\r\n        texCoords = GeometryData.texCoords,\r\n        indices = GeometryData.indices,\r\n        verticesInfoList = GeometryData.verticesInfoList,\r\n        normalsInfoList = GeometryData.normalsInfoList,\r\n        texCoordsInfoList = GeometryData.texCoordsInfoList,\r\n        indicesInfoList = GeometryData.indicesInfoList,\r\n        gameObjectMap = GeometryData.gameObjectMap,\r\n        geometryMap = GeometryData.geometryMap,\r\n        computeDataFuncMap = GeometryData.computeDataFuncMap,\r\n        configDataMap = GeometryData.configDataMap,\r\n        verticesCacheMap = GeometryData.verticesCacheMap,\r\n        normalsCacheMap = GeometryData.normalsCacheMap,\r\n        texCoordsCacheMap = GeometryData.texCoordsCacheMap,\r\n        indicesCacheMap = GeometryData.indicesCacheMap,\r\n        newIndexInArrayBuffer = 0,\r\n        newVerticesOffset = 0,\r\n        newNormalsOffset = 0,\r\n        newTexCoordsOffset = 0,\r\n        newIndicesOffset = 0,\r\n        newVertivesInfoList = [],\r\n        newNormalsInfoList = [],\r\n        newTexCoordsInfoList = [],\r\n        newIndicesInfoList = [],\r\n        newGameObjectMap = createMap(),\r\n        newGeometryMap = createMap(),\r\n        newComputeDatafuncMap = createMap(),\r\n        newConfigDataMap: Array<number> = [],\r\n        newVerticesCacheMap: Array<number> = [],\r\n        newNormalsCacheMap: Array<number> = [],\r\n        newTexCoordsCacheMap: Array<number> = [],\r\n        newIndicesCacheMap: Array<number> = [],\r\n        newVertices: Array<number> = [],\r\n        newNormals: Array<number> = [],\r\n        newTexCoords: Array<number> = [],\r\n        newIndices: Array<number> = [],\r\n        disposedIndexArray: Array<number> = [];\r\n\r\n    for (let i = 0; i < index; i++) {\r\n        val = geometryMap[i];\r\n        // val = gameObjectMap[i];\r\n\r\n        if (isNotValidMapValue(val)) {\r\n            disposedIndexArray.push(i);\r\n            continue;\r\n        }\r\n\r\n        let verticesInfo = verticesInfoList[i],\r\n            normalsInfo = normalsInfoList[i],\r\n            texCoordsInfo = texCoordsInfoList[i],\r\n            indicesInfo = indicesInfoList[i];\r\n\r\n        // hasNewData = true;\r\n\r\n        _updateInfoList(newVertivesInfoList, newIndexInArrayBuffer, verticesInfo, newVerticesOffset);\r\n\r\n        if (isValidVal(normalsInfo)) {\r\n            _updateInfoList(newNormalsInfoList, newIndexInArrayBuffer, normalsInfo, newNormalsOffset);\r\n        }\r\n\r\n        if (isValidVal(texCoordsInfo)) {\r\n            _updateInfoList(newTexCoordsInfoList, newIndexInArrayBuffer, texCoordsInfo, newTexCoordsOffset);\r\n        }\r\n\r\n        _updateInfoList(newIndicesInfoList, newIndexInArrayBuffer, indicesInfo, newIndicesOffset);\r\n\r\n        newVerticesOffset = _fillTypeArr(newVertices, newVerticesOffset, vertices, verticesInfo.startIndex, verticesInfo.endIndex);\r\n\r\n        if (isValidVal(normalsInfo)) {\r\n            newNormalsOffset = _fillTypeArr(newNormals, newNormalsOffset, normals, normalsInfo.startIndex, normalsInfo.endIndex);\r\n        }\r\n\r\n        if (isValidVal(texCoordsInfo)) {\r\n            newTexCoordsOffset = _fillTypeArr(newTexCoords, newTexCoordsOffset, texCoords, texCoordsInfo.startIndex, texCoordsInfo.endIndex);\r\n        }\r\n\r\n        newIndicesOffset = _fillTypeArr(newIndices, newIndicesOffset, indices, indicesInfo.startIndex, indicesInfo.endIndex);\r\n\r\n        _updateComponentIndex(geometryMap, newGeometryMap, i, newIndexInArrayBuffer);\r\n\r\n        val = computeDataFuncMap[i];\r\n        _setMapVal(newComputeDatafuncMap, newIndexInArrayBuffer, val);\r\n\r\n        val = configDataMap[i];\r\n        _setMapVal(newConfigDataMap, newIndexInArrayBuffer, val);\r\n\r\n        val = verticesCacheMap[i];\r\n        _setMapVal(newVerticesCacheMap, newIndexInArrayBuffer, val);\r\n\r\n        val = normalsCacheMap[i];\r\n        _setMapVal(newNormalsCacheMap, newIndexInArrayBuffer, val);\r\n\r\n        val = texCoordsCacheMap[i];\r\n        _setMapVal(newTexCoordsCacheMap, newIndexInArrayBuffer, val);\r\n\r\n        val = indicesCacheMap[i];\r\n        _setMapVal(newIndicesCacheMap, newIndexInArrayBuffer, val);\r\n\r\n        val = geometryMap[i];\r\n        _setMapVal(newGeometryMap, newIndexInArrayBuffer, val);\r\n\r\n        val = gameObjectMap[i];\r\n        _setMapVal(newGameObjectMap, newIndexInArrayBuffer, val);\r\n\r\n        newIndexInArrayBuffer += 1;\r\n    }\r\n\r\n    set(GeometryData.vertices, newVertices);\r\n    set(GeometryData.normals, newNormals);\r\n    set(GeometryData.texCoords, newTexCoords);\r\n    set(GeometryData.indices, newIndices);\r\n\r\n    GeometryData.gameObjectMap = newGameObjectMap;\r\n    GeometryData.verticesInfoList = newVertivesInfoList;\r\n    GeometryData.normalsInfoList = newNormalsInfoList;\r\n    GeometryData.texCoordsInfoList = newTexCoordsInfoList;\r\n    GeometryData.indicesInfoList = newIndicesInfoList;\r\n    GeometryData.geometryMap = newGeometryMap;\r\n    GeometryData.computeDataFuncMap = newComputeDatafuncMap;\r\n    GeometryData.configDataMap = newConfigDataMap;\r\n    GeometryData.verticesCacheMap = newVerticesCacheMap;\r\n    GeometryData.normalsCacheMap = newNormalsCacheMap;\r\n    GeometryData.texCoordsCacheMap = newTexCoordsCacheMap;\r\n    GeometryData.indicesCacheMap = newIndicesCacheMap;\r\n\r\n    GeometryData.verticesOffset = newVerticesOffset;\r\n    GeometryData.normalsOffset = newNormalsOffset;\r\n    GeometryData.texCoordsOffset = newTexCoordsOffset;\r\n    GeometryData.indicesOffset = newIndicesOffset;\r\n\r\n    GeometryData.index = newIndexInArrayBuffer;\r\n\r\n    return disposedIndexArray;\r\n})\r\n\r\nconst _updateComponentIndex =(componentMap: object, newComponentMap: object, oldIndex: number, newIndex: number) => {\r\n    let component: Component = componentMap[oldIndex];\r\n\r\n    component.index = newIndex;\r\n    newComponentMap[newIndex] = component;\r\n}\r\n\r\nconst _fillTypeArr =requireCheckFunc((targetTypeArr: Float32Array | Uint32Array | Uint16Array, targetStartIndex: number, sourceTypeArr: Float32Array | Uint32Array | Uint16Array, startIndex: number, endIndex: number) => {\r\n    // it(\"targetStartIndex should <= sourceStartIndex\", () => {\r\n    //     expect(targetStartIndex).lte(startIndex);\r\n    // })\r\n}, (targetTypeArr: Float32Array | Uint32Array | Uint16Array, targetStartIndex: number, sourceTypeArr: Float32Array | Uint32Array | Uint16Array, startIndex: number, endIndex: number) => {\r\n    var typeArrIndex = targetStartIndex;\r\n\r\n    for (let i = startIndex; i < endIndex; i++) {\r\n        targetTypeArr[typeArrIndex] = sourceTypeArr[i];\r\n        typeArrIndex += 1;\r\n    }\r\n\r\n    return typeArrIndex;\r\n})\r\n\r\nconst _updateInfoList =ensureFunc((returnVal: any, newInfoList, newIndexInArrayBuffer, info: GeometryInfo, offset: number) => {\r\n    it(\"info.startIndex should >= 0\", () => {\r\n        expect(newInfoList[newIndexInArrayBuffer].startIndex).gte(0);\r\n    });\r\n}, (newInfoList: GeometryInfoList, newIndexInArrayBuffer: number, info: GeometryInfo, offset: number) => {\r\n    var increment = info.endIndex - info.startIndex;\r\n\r\n    _setArrayVal(newInfoList, newIndexInArrayBuffer, {\r\n        startIndex: offset,\r\n        endIndex: offset + increment\r\n    });\r\n})\r\n","//todo refactor: import event manager project!\r\n\r\nimport { forEach } from \"../utils/arrayUtils\";\r\n\r\nconst _data ={};\r\n\r\nexport const registerEvent = (eventName: string, func: Function) => {\r\n    if (!_data[eventName]) {\r\n        _data[eventName] = [];\r\n    }\r\n\r\n    _data[eventName].push(func);\r\n}\r\n\r\nexport const triggerEvent = (eventName: string) => {\r\n    if (!_data[eventName]) {\r\n        return;\r\n    }\r\n\r\n    forEach(_data[eventName], (func: Function) => {\r\n        func();\r\n    })\r\n}\r\n","import { ThreeDTransformData } from \"./ThreeDTransformData\";\r\nimport { ensureFunc, it, requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { BatchTransformData, IThreeDTransform, ThreeDTransform } from \"./ThreeDTransform\";\r\nimport { Map as MapImmutable } from \"immutable\";\r\nimport { Matrix4 } from \"../../math/Matrix4\";\r\nimport { Vector3 } from \"../../math/Vector3\";\r\nimport { cacheFunc } from \"../../utils/cacheUtils\";\r\nimport {\r\n    addAddComponentHandle as addAddComponentHandleToMap, addComponentToGameObjectMap,\r\n    addDisposeHandle as addDisposeHandleToMap, checkComponentShouldAlive, getComponentGameObject\r\n} from \"../ComponentSystem\";\r\nimport { createMap, deleteVal, isNotValidMapValue, isValidMapValue } from \"../../utils/objectUtils\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport { update as updateSystem } from \"./updateSystem\";\r\nimport {\r\n    addFirstDirtyIndex, addItAndItsChildrenToDirtyList, addNotUsedIndex,\r\n    generateNotUsedIndexInArrayBuffer, isNotDirty\r\n} from \"./dirtySystem\";\r\nimport {\r\n    getChildren,\r\n    getParent as getThreeDTransformDataParent, isChildrenExist, removeHierarchyData, setChildren,\r\n    setParent as setParentHierarchy\r\n} from \"./hierarchySystem\";\r\nimport {\r\n    getMatrix4DataIndexInArrayBuffer, getVector3DataIndexInArrayBuffer,\r\n    setLocalPositionData, setPositionData, setTransformDataInTypeArr,\r\n    swap\r\n} from \"./operateDataSystem\";\r\nimport { getStartIndexInArrayBuffer } from \"./utils\";\r\nimport { checkTransformShouldAlive } from \"./contractUtils\";\r\nimport { setBatchDatas as setBatchDatasSystem } from \"./batchSystem\";\r\nimport {\r\n    getLocalPositionCache, getLocalToWorldMatrixCache, getNormalMatrixCache, getPositionCache, setLocalPositionCache,\r\n    setLocalToWorldMatrixCache, setNormalMatrixCache, setPositionCache\r\n} from \"./cacheSystem\";\r\nimport { isDisposeTooManyComponents, reAllocateThreeDTransform } from \"../../utils/memoryUtils\";\r\nimport { LinkList } from \"./LinkList\";\r\nimport { GlobalTempData } from \"../../definition/GlobalTempData\";\r\nimport { Quaternion } from \"../../math/Quaternion\";\r\nimport {\r\n    createMatrix4ByIndex, createVector3ByIndex, getMatrix4DataSize, getQuaternionDataSize,\r\n    getVector3DataSize\r\n} from \"../../utils/typeArrayUtils\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { Matrix3 } from \"../../math/Matrix3\";\r\nimport { IUIdEntity } from \"../../core/entityObject/gameObject/IUIdEntity\";\r\nimport { triggerEvent } from \"../../event/EventManagerSystem\";\r\n\r\nexport const addAddComponentHandle = (_class: any) => {\r\n    addAddComponentHandleToMap(_class, addComponent);\r\n}\r\n\r\nexport const addDisposeHandle = (_class: any) => {\r\n    addDisposeHandleToMap(_class, disposeComponent);\r\n}\r\n\r\nexport const create = ensureFunc((transform: ThreeDTransform, ThreeDTransformData: any) => {\r\n    it(\"componentMap should has data\", () => {\r\n        expect(getChildren(transform.uid, ThreeDTransformData)).exist;\r\n    });\r\n    it(\"count should <= ThreeDTransformData.maxCount\", () => {\r\n        expect(ThreeDTransformData.count).lte(ThreeDTransformData.maxCount);\r\n    });\r\n}, (ThreeDTransformData: any) => {\r\n    var transform = new ThreeDTransform(),\r\n        index = _generateIndexInArrayBuffer(ThreeDTransformData),\r\n        uid = _buildUId(ThreeDTransformData);\r\n\r\n    transform.index = index;\r\n    transform.uid = uid;\r\n\r\n    ThreeDTransformData.count += 1;\r\n\r\n    _createTempData(uid, ThreeDTransformData);\r\n    _setTransformMap(index, transform, ThreeDTransformData);\r\n    setChildren(uid, [], ThreeDTransformData);\r\n\r\n    _setDefaultTypeArrData(index, ThreeDTransformData);\r\n\r\n    ThreeDTransformData.aliveUIdArray.push(uid);\r\n\r\n    return transform;\r\n})\r\n\r\nconst _buildUId =(ThreeDTransformData: any) => {\r\n    return ThreeDTransformData.uid++;\r\n}\r\n\r\nconst _generateIndexInArrayBuffer =(ThreeDTransformData: any) => {\r\n    return generateNotUsedIndexInArrayBuffer(ThreeDTransformData);\r\n}\r\n\r\nconst _createTempData =(uid: number, ThreeDTransformData: any, ) => {\r\n    ThreeDTransformData.tempMap[uid] = {\r\n        position: Vector3.create(),\r\n        localPosition: Vector3.create(),\r\n        localToWorldMatrix: Matrix4.create()\r\n    }\r\n\r\n    return ThreeDTransformData;\r\n}\r\n\r\nexport const checkShouldAlive = (component: ThreeDTransform, ThreeDTransformData: any) => {\r\n    checkComponentShouldAlive(component, ThreeDTransformData, (component: ThreeDTransform, ThreeDTransformData: any) => {\r\n        return isChildrenExist(getChildren(component.uid, ThreeDTransformData));\r\n    })\r\n}\r\n\r\nexport const init = (GlobalTempData: any, ThreeDTransformData: any, state: MapImmutable<any, any>) => {\r\n    return update(null, GlobalTempData, ThreeDTransformData, state);\r\n}\r\n\r\nexport const addComponent = (transform: ThreeDTransform, gameObject: GameObject) => {\r\n    var index = transform.index,\r\n        uid = transform.uid;\r\n\r\n    addComponentToGameObjectMap(ThreeDTransformData.gameObjectMap, uid, gameObject);\r\n\r\n    return addItAndItsChildrenToDirtyList(index, uid, ThreeDTransformData);\r\n}\r\n\r\nexport const isAlive = (transform: ThreeDTransform, ThreeDTransformData: any) => {\r\n    return isValidMapValue(ThreeDTransformData.transformMap[transform.index]);\r\n}\r\n\r\nexport const isNotAlive = (transform: ThreeDTransform, ThreeDTransformData: any) => {\r\n    return !isAlive(transform, ThreeDTransformData);\r\n}\r\n\r\nexport const disposeComponent = (transform: ThreeDTransform) => {\r\n    var index = transform.index,\r\n        uid = transform.uid;\r\n\r\n    if (isNotDirty(index, ThreeDTransformData.firstDirtyIndex)) {\r\n        _disposeFromNormalList(index, uid, GlobalTempData, ThreeDTransformData);\r\n    }\r\n    else {\r\n        _disposeFromDirtyList(index, uid, GlobalTempData, ThreeDTransformData);\r\n    }\r\n\r\n    ThreeDTransformData.count -= 1;\r\n    ThreeDTransformData.disposeCount += 1;\r\n\r\n    if (isDisposeTooManyComponents(ThreeDTransformData.disposeCount)) {\r\n        reAllocateThreeDTransform(ThreeDTransformData);\r\n\r\n        ThreeDTransformData.disposeCount = 0;\r\n    }\r\n}\r\n\r\nexport const getGameObject = (uid: number, ThreeDTransformData: any) => getComponentGameObject(ThreeDTransformData.gameObjectMap, uid);\r\n\r\nexport const getParent = (transform: ThreeDTransform, ThreeDTransformData: any) => {\r\n    var parent = getThreeDTransformDataParent(transform.uid, ThreeDTransformData);\r\n\r\n    if (isValidMapValue(parent)) {\r\n        return parent;\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\nexport const setParent = (parent: ThreeDTransform, child:ThreeDTransform, ThreeDTransformData: any) => setParentHierarchy(parent, child, ThreeDTransformData);\r\n\r\nexport const getLocalToWorldMatrix = requireCheckFunc((transform: IThreeDTransform, mat: Matrix4, ThreeDTransformData: any) => {\r\n    checkTransformShouldAlive(transform, ThreeDTransformData);\r\n}, cacheFunc((transform: IThreeDTransform, mat: Matrix4, ThreeDTransformData: any) => {\r\n    return isValidMapValue(getLocalToWorldMatrixCache(transform.uid, ThreeDTransformData));\r\n}, (transform: IThreeDTransform, mat: Matrix4, ThreeDTransformData: any) => {\r\n    return getLocalToWorldMatrixCache(transform.uid, ThreeDTransformData);\r\n}, (transform: IThreeDTransform, mat: Matrix4, ThreeDTransformData: any, returnedMat: Matrix4) => {\r\n    setLocalToWorldMatrixCache(transform.uid, returnedMat, ThreeDTransformData);\r\n}, (transform: IThreeDTransform, mat: Matrix4, ThreeDTransformData: any) => {\r\n    return createMatrix4ByIndex(mat, ThreeDTransformData.localToWorldMatrices, getMatrix4DataIndexInArrayBuffer(transform.index));\r\n}))\r\n\r\nexport const getPosition = requireCheckFunc((transform: ThreeDTransform, ThreeDTransformData: any) => {\r\n    checkTransformShouldAlive(transform, ThreeDTransformData);\r\n}, cacheFunc((transform: ThreeDTransform, ThreeDTransformData: any) => {\r\n    return isValidMapValue(getPositionCache(transform.uid, ThreeDTransformData));\r\n}, (transform: ThreeDTransform, ThreeDTransformData: any) => {\r\n    return getPositionCache(transform.uid, ThreeDTransformData);\r\n}, (transform: ThreeDTransform, ThreeDTransformData: any, position: Vector3) => {\r\n    setPositionCache(transform.uid, position, ThreeDTransformData);\r\n}, (transform: ThreeDTransform, ThreeDTransformData: any) => {\r\n    var index = getMatrix4DataIndexInArrayBuffer(transform.index),\r\n        localToWorldMatrices = ThreeDTransformData.localToWorldMatrices;\r\n\r\n    return _getTempData(transform.uid, ThreeDTransformData).position.set(localToWorldMatrices[index + 12], localToWorldMatrices[index + 13], localToWorldMatrices[index + 14]);\r\n}))\r\n\r\nexport const getNormalMatrix = requireCheckFunc((transform: ThreeDTransform, GlobalTempData: any, ThreeDTransformData: any) => {\r\n    checkTransformShouldAlive(transform, ThreeDTransformData);\r\n}, cacheFunc((transform: ThreeDTransform, GlobalTempData: any, ThreeDTransformData: any) => {\r\n    return isValidMapValue(getNormalMatrixCache(transform.uid, ThreeDTransformData));\r\n}, (transform: ThreeDTransform, GlobalTempData: any, ThreeDTransformData: any) => {\r\n    return getNormalMatrixCache(transform.uid, ThreeDTransformData);\r\n}, (transform: ThreeDTransform, GlobalTempData: any, ThreeDTransformData: any, mat: Matrix3) => {\r\n    setNormalMatrixCache(transform.uid, mat, ThreeDTransformData);\r\n}, (transform: ThreeDTransform, GlobalTempData: any, ThreeDTransformData: any) => {\r\n    return getLocalToWorldMatrix(transform, GlobalTempData.matrix4_1, ThreeDTransformData).invertTo3x3().transpose();\r\n}))\r\n\r\nconst _setTransformMap = (index: number, transform: ThreeDTransform, ThreeDTransformData: any) => ThreeDTransformData.transformMap[index] =transform;\r\n\r\nexport const setPosition = requireCheckFunc((transform: ThreeDTransform, position: Vector3, GlobalTempData: any, ThreeDTransformData: any) => {\r\n    checkTransformShouldAlive(transform, ThreeDTransformData);\r\n}, (transform: ThreeDTransform, position: Vector3, GlobalTempData: any, ThreeDTransformData: any) => {\r\n    var index = transform.index,\r\n        uid = transform.uid,\r\n        parent = getThreeDTransformDataParent(uid, ThreeDTransformData),\r\n        vec3IndexInArrayBuffer = getVector3DataIndexInArrayBuffer(index);\r\n\r\n    setPositionData(index, parent, vec3IndexInArrayBuffer, position, GlobalTempData, ThreeDTransformData);\r\n\r\n    _triggerChangePositionEvent(uid, ThreeDTransformData);\r\n\r\n    return addItAndItsChildrenToDirtyList(index, uid, ThreeDTransformData);\r\n})\r\n\r\nexport const setBatchDatas = (batchData: Array<BatchTransformData>, GlobalTempData: any, ThreeDTransformData: any) => setBatchDatasSystem(batchData, GlobalTempData, ThreeDTransformData);\r\n\r\nexport const getLocalPosition = requireCheckFunc((transform: ThreeDTransform, ThreeDTransformData: any) => {\r\n    checkTransformShouldAlive(transform, ThreeDTransformData);\r\n}, cacheFunc((transform: ThreeDTransform, ThreeDTransformData: any) => {\r\n    return isValidMapValue(getLocalPositionCache(transform.uid, ThreeDTransformData));\r\n}, (transform: ThreeDTransform, ThreeDTransformData: any) => {\r\n    return getLocalPositionCache(transform.uid, ThreeDTransformData);\r\n}, (transform: ThreeDTransform, ThreeDTransformData: any, position: Vector3) => {\r\n    setLocalPositionCache(transform.uid, position, ThreeDTransformData);\r\n}, (transform: ThreeDTransform, ThreeDTransformData: any) => {\r\n    return createVector3ByIndex(_getTempData(transform.uid, ThreeDTransformData).localPosition, ThreeDTransformData.localPositions, getVector3DataIndexInArrayBuffer(transform.index));\r\n}))\r\n\r\nexport const setLocalPosition = requireCheckFunc((transform: ThreeDTransform, position: Vector3, ThreeDTransformData: any) => {\r\n    checkTransformShouldAlive(transform, ThreeDTransformData);\r\n}, (transform: ThreeDTransform, position: Vector3, ThreeDTransformData: any) => {\r\n    var index = transform.index,\r\n        uid = transform.uid,\r\n        vec3IndexInArrayBuffer = getVector3DataIndexInArrayBuffer(index);\r\n\r\n    setLocalPositionData(position, vec3IndexInArrayBuffer, ThreeDTransformData);\r\n\r\n    _triggerChangePositionEvent(uid, ThreeDTransformData);\r\n\r\n    return addItAndItsChildrenToDirtyList(index, uid, ThreeDTransformData);\r\n})\r\n\r\nconst _triggerChangePositionEvent =(uid: number, ThreeDTransformData: any) => {\r\n    triggerEvent(\"changePosition\");\r\n}\r\n\r\nexport const update = (elapsed: number, GlobalTempData: any, ThreeDTransformData: any, state: MapImmutable<any, any>) => {\r\n    return updateSystem(elapsed, GlobalTempData, ThreeDTransformData, state);\r\n}\r\n\r\nconst _disposeItemInDataContainer =(index: number, uid: number, GlobalTempData: any, ThreeDTransformData: any) => {\r\n    removeHierarchyData(uid, ThreeDTransformData);\r\n    _disposeMapDatas(index, uid, ThreeDTransformData);\r\n\r\n    return ThreeDTransformData;\r\n}\r\n\r\nconst _disposeMapDatas =(index: number, uid: number, ThreeDTransformData: any) => {\r\n    deleteVal(index, ThreeDTransformData.transformMap);\r\n}\r\n\r\nconst _disposeFromNormalList =(index: number, uid: number, GlobalTempData: any, ThreeDTransformData: any) => {\r\n    addNotUsedIndex(index, ThreeDTransformData.notUsedIndexLinkList);\r\n\r\n    return _disposeItemInDataContainer(index, uid, GlobalTempData, ThreeDTransformData);\r\n}\r\n\r\n\r\nconst _disposeFromDirtyList =(index: number, uid: number, GlobalTempData: any, ThreeDTransformData: any) => {\r\n    var firstDirtyIndex = ThreeDTransformData.firstDirtyIndex;\r\n\r\n    swap(index, firstDirtyIndex, ThreeDTransformData);\r\n\r\n\r\n    _disposeItemInDataContainer(firstDirtyIndex, uid, GlobalTempData, ThreeDTransformData);\r\n\r\n    ThreeDTransformData.firstDirtyIndex = addFirstDirtyIndex(ThreeDTransformData);\r\n}\r\n\r\n\r\nconst _setDefaultTypeArrData =(index: number, ThreeDTransformData: any) => {\r\n    setTransformDataInTypeArr(index, ThreeDTransformData.defaultLocalToWorldMatrice, ThreeDTransformData.defaultRotation, ThreeDTransformData.defaultPosition, ThreeDTransformData.defaultScale, ThreeDTransformData);\r\n}\r\n\r\nexport const getTempLocalToWorldMatrix = (transform: ThreeDTransform, ThreeDTransformData: any) => _getTempData(transform.uid, ThreeDTransformData).localToWorldMatrix;\r\n\r\nconst _getTempData =(uid: number, ThreeDTransformData: any) => {\r\n    var tempData = ThreeDTransformData.tempMap[uid];\r\n\r\n    if (isNotValidMapValue(tempData)) {\r\n        tempData = {};\r\n        ThreeDTransformData.tempMap[uid] = tempData;\r\n    }\r\n\r\n    return tempData;\r\n}\r\n\r\nexport const initData = (GlobalTempData: any, ThreeDTransformData: any) => {\r\n    _initBufferData(ThreeDTransformData);\r\n\r\n    ThreeDTransformData.defaultPosition = Vector3.create(0, 0, 0);\r\n    ThreeDTransformData.defaultRotation = Quaternion.create(0, 0, 0, 1);\r\n    ThreeDTransformData.defaultScale = Vector3.create(1, 1, 1);\r\n    ThreeDTransformData.defaultLocalToWorldMatrice = Matrix4.create().setIdentity();\r\n\r\n\r\n    ThreeDTransformData.notUsedIndexLinkList = LinkList.create();\r\n\r\n    ThreeDTransformData.parentMap = createMap();\r\n    ThreeDTransformData.childrenMap = createMap();\r\n\r\n    ThreeDTransformData.isTranslateMap = createMap();\r\n\r\n    ThreeDTransformData.cacheMap = createMap();\r\n    ThreeDTransformData.tempMap = createMap();\r\n\r\n    ThreeDTransformData.transformMap = createMap();\r\n\r\n    ThreeDTransformData.gameObjectMap = createMap();\r\n\r\n    ThreeDTransformData.firstDirtyIndex = ThreeDTransformData.maxCount;\r\n    ThreeDTransformData.index = getStartIndexInArrayBuffer();\r\n\r\n    ThreeDTransformData.uid = 0;\r\n    ThreeDTransformData.disposeCount = 0;\r\n    ThreeDTransformData.isClearCacheMap = false;\r\n\r\n    ThreeDTransformData.count = 0;\r\n\r\n    ThreeDTransformData.aliveUIdArray = [];\r\n}\r\n\r\nconst _initBufferData =(ThreeDTransformData: any) => {\r\n    var buffer: ArrayBuffer = null,\r\n        count = ThreeDTransformData.maxCount,\r\n        size = Float32Array.BYTES_PER_ELEMENT * (getMatrix4DataSize() + getVector3DataSize() + getQuaternionDataSize() + getVector3DataSize());\r\n\r\n    buffer = new ArrayBuffer(count * size);\r\n\r\n    ThreeDTransformData.localToWorldMatrices = new Float32Array(buffer, 0, count * getMatrix4DataSize());\r\n    ThreeDTransformData.localPositions = new Float32Array(buffer, count * Float32Array.BYTES_PER_ELEMENT * getMatrix4DataSize(), count * getVector3DataSize());\r\n    ThreeDTransformData.localRotations = new Float32Array(buffer, count * Float32Array.BYTES_PER_ELEMENT * (getMatrix4DataSize() + getVector3DataSize()), count * getQuaternionDataSize());\r\n    ThreeDTransformData.localScales = new Float32Array(buffer, count * Float32Array.BYTES_PER_ELEMENT * (getMatrix4DataSize() + getVector3DataSize() + getQuaternionDataSize()), count * getVector3DataSize());\r\n\r\n    ThreeDTransformData.buffer = buffer;\r\n}\r\n","import { GameObject } from \"../core/entityObject/gameObject/GameObject\";\r\nimport { it } from \"../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { isAlive } from \"../core/entityObject/gameObject/GameObjectSystem\";\r\nimport { GameObjectData } from \"../core/entityObject/gameObject/GameObjectData\";\r\n\r\nexport const checkGameObjectShouldAlive = (gameObject: GameObject, GameObjectData: any) => {\r\n    it(\"gameObject is diposed, should release it\", () => {\r\n        expect(isAlive(gameObject, GameObjectData)).true;\r\n    });\r\n}\r\n","import { Map } from \"immutable\";\r\n\r\nexport class DirectorData {\r\n    public static state: Map<any, any> = null;\r\n    public static isInit: boolean = null;\r\n}\r\n","import { ClassUtils } from \"../utils/ClassUtils\";\r\nimport { Component } from \"./Component\";\r\n\r\nconst _generateComponentId =() => {\r\n    var result = _componentId;\r\n\r\n    _componentId += 1;\r\n\r\n    return String(result);\r\n}\r\n\r\nexport const getComponentIdFromClass = (_class: any) => {\r\n    return _table[ClassUtils.getClassNameByClass(_class)];\r\n}\r\n\r\nexport const getComponentIdFromComponent = (component: Component) => {\r\n    return _table[ClassUtils.getClassNameByInstance(component)];\r\n}\r\n\r\nconst _addComponentId =(componentClassNameArr: Array<string>, table: object) => {\r\n    var id = _generateComponentId();\r\n\r\n    for (let className of componentClassNameArr) {\r\n        table[className] = id;\r\n    }\r\n}\r\n\r\nvar _componentId =1;\r\nvar _table = {};\r\n\r\n_addComponentId([\"ThreeDTransform\"], _table);\r\n_addComponentId([\"Geometry\", \"BoxGeometry\", \"CustomGeometry\"], _table);\r\n_addComponentId([\"Material\", \"BasicMaterial\", \"LightMaterial\"], _table);\r\n_addComponentId([\"MeshRenderer\"], _table);\r\n_addComponentId([\"Tag\"], _table);\r\n_addComponentId([\"CameraController\"], _table);\r\n_addComponentId([\"Light\", \"AmbientLight\", \"DirectionLight\", \"PointLight\"], _table);\r\n","import { registerClass } from \"../../../definition/typescript/decorator/registerClass\";\r\nimport {\r\n    addChild,\r\n    addComponent, addRemovedChild, create, dispose, disposeComponent, getAliveChildren, getAllComponents, getComponent,\r\n    getMaterial,\r\n    getParent,\r\n    getTransform,\r\n    hasChild,\r\n    hasComponent, initGameObject as initGameObjectSystem,\r\n    isAlive, removeChild, setParent\r\n} from \"./GameObjectSystem\";\r\nimport { GameObjectData } from \"./GameObjectData\";\r\nimport { Component } from \"../../../component/Component\";\r\nimport { ThreeDTransformData } from \"../../../component/transform/ThreeDTransformData\";\r\nimport { create as createThreeDTransform } from \"../../../component/transform/ThreeDTransformSystem\";\r\nimport { requireCheckFunc } from \"../../../definition/typescript/decorator/contract\";\r\nimport { checkGameObjectShouldAlive } from \"../../../utils/contractUtils\";\r\nimport { getState } from \"../../DirectorSystem\";\r\nimport { DirectorData } from \"../../DirectorData\";\r\nimport { getComponentIdFromClass } from \"../../../component/ComponentComponentIdManager\";\r\nimport { IUIdEntity } from \"./IUIdEntity\";\r\nimport { MeshRendererData } from \"../../../component/renderer/MeshRendererData\";\r\n\r\n@registerClass(\"GameObject\")\r\nexport class GameObject implements IUIdEntity {\r\n    public uid: number = null;\r\n}\r\n\r\nexport const createGameObject = () => create(createThreeDTransform(ThreeDTransformData), GameObjectData);\r\n\r\nexport const addGameObjectComponent = requireCheckFunc((gameObject: GameObject, component: Component) => {\r\n    checkGameObjectShouldAlive(gameObject, GameObjectData);\r\n}, (gameObject: GameObject, component: Component) => {\r\n    addComponent(gameObject, component, GameObjectData);\r\n})\r\n\r\nexport const disposeGameObject = requireCheckFunc((gameObject: GameObject) => {\r\n    checkGameObjectShouldAlive(gameObject, GameObjectData);\r\n}, (gameObject: GameObject) => {\r\n    dispose(gameObject, ThreeDTransformData, GameObjectData);\r\n})\r\n\r\n// export const disposeBatchGameObjectChildren = requireCheckFunc((children: Array<GameObject>, parent:GameObject) => {\r\n//     for(let child of children){\r\n//         checkGameObjectShouldAlive(child, GameObjectData);\r\n//     }\r\n// }, (children: Array<GameObject>, parent:GameObject) => {\r\n//     disposeBatchChildren(children, parent, ThreeDTransformData, GameObjectData);\r\n// })\r\n\r\nexport const initGameObject = requireCheckFunc((gameObject: GameObject) => {\r\n    checkGameObjectShouldAlive(gameObject, GameObjectData);\r\n}, (gameObject: GameObject) => {\r\n    initGameObjectSystem(gameObject, getState(DirectorData), GameObjectData);\r\n})\r\n\r\nexport const disposeGameObjectComponent = requireCheckFunc((gameObject: GameObject, component: Component) => {\r\n    checkGameObjectShouldAlive(gameObject, GameObjectData);\r\n}, (gameObject: GameObject, component: Component) => {\r\n    disposeComponent(gameObject.uid, component, GameObjectData);\r\n})\r\n\r\nexport const getGameObjectComponent = requireCheckFunc((gameObject: GameObject, _class: any) => {\r\n    checkGameObjectShouldAlive(gameObject, GameObjectData);\r\n}, (gameObject: GameObject, _class: any) => {\r\n    return getComponent(gameObject.uid, getComponentIdFromClass(_class), GameObjectData);\r\n})\r\n\r\nexport const getGameObjectTransform = requireCheckFunc((gameObject: GameObject) => {\r\n    checkGameObjectShouldAlive(gameObject, GameObjectData);\r\n}, (gameObject: GameObject) => {\r\n    return getTransform(gameObject.uid, GameObjectData);\r\n})\r\n\r\nexport const getGameObjectMaterial = requireCheckFunc((gameObject: GameObject) => {\r\n    checkGameObjectShouldAlive(gameObject, GameObjectData);\r\n}, (gameObject: GameObject) => {\r\n    return getMaterial(gameObject.uid, GameObjectData);\r\n})\r\n\r\nexport const getGameObjectAllComponents = requireCheckFunc((gameObject: GameObject) => {\r\n    checkGameObjectShouldAlive(gameObject, GameObjectData);\r\n}, (gameObject: GameObject) => {\r\n    return getAllComponents(gameObject.uid, GameObjectData);\r\n})\r\n\r\nexport const hasGameObjectComponent = requireCheckFunc((gameObject: GameObject, _class: any) => {\r\n    // checkGameObjectShouldAlive(gameObject, GameObjectData);\r\n}, (gameObject: GameObject, _class: any) => {\r\n    return hasComponent(gameObject, getComponentIdFromClass(_class), GameObjectData);\r\n})\r\n\r\nexport const isGameObjectAlive = (gameObject: GameObject) => {\r\n    return isAlive(gameObject, GameObjectData);\r\n}\r\n\r\nexport const addGameObject = requireCheckFunc((gameObject: GameObject, child: GameObject) => {\r\n    checkGameObjectShouldAlive(gameObject, GameObjectData);\r\n}, (gameObject: GameObject, child: GameObject) => {\r\n    addChild(gameObject, child, ThreeDTransformData, GameObjectData);\r\n})\r\n\r\nexport const addRemovedGameObject = requireCheckFunc((gameObject: GameObject, child: GameObject) => {\r\n    checkGameObjectShouldAlive(gameObject, GameObjectData);\r\n}, (gameObject: GameObject, child: GameObject) => {\r\n    addRemovedChild(gameObject, child, MeshRendererData, ThreeDTransformData, GameObjectData);\r\n})\r\n\r\nexport const removeGameObject = requireCheckFunc((gameObject: GameObject, child: GameObject) => {\r\n    checkGameObjectShouldAlive(gameObject, GameObjectData);\r\n}, (gameObject: GameObject, child: GameObject) => {\r\n    removeChild(gameObject.uid, child.uid, ThreeDTransformData, GameObjectData);\r\n})\r\n\r\nexport const hasGameObject = requireCheckFunc((gameObject: GameObject, child: GameObject) => {\r\n    checkGameObjectShouldAlive(gameObject, GameObjectData);\r\n}, (gameObject: GameObject, child: GameObject) => {\r\n    return hasChild(gameObject, child, GameObjectData);\r\n})\r\n\r\nexport const getGameObjectChildren = requireCheckFunc((gameObject: GameObject) => {\r\n    checkGameObjectShouldAlive(gameObject, GameObjectData);\r\n}, (gameObject: GameObject) => {\r\n    return getAliveChildren(gameObject.uid, GameObjectData);\r\n})\r\n\r\nexport const getGameObjectParent = requireCheckFunc((gameObject: GameObject) => {\r\n    checkGameObjectShouldAlive(gameObject, GameObjectData);\r\n}, (gameObject: GameObject) => {\r\n    return getParent(gameObject.uid, GameObjectData);\r\n})\r\n\r\nexport const setGameObjectParent = requireCheckFunc((parent: GameObject, child: GameObject) => {\r\n    checkGameObjectShouldAlive(parent, GameObjectData);\r\n}, (parent: GameObject, child: GameObject) => {\r\n    return setParent(parent, child, ThreeDTransformData, GameObjectData);\r\n})\r\n","import { EDrawMode } from \"../../renderer/enum/EDrawMode\";\r\nimport { EBufferType } from \"../../renderer/enum/EBufferType\";\r\nimport { ComponentGameObjectMap } from \"../ComponentData\";\r\nimport { ComponentMap } from \"../ComponentSystem\";\r\nimport {\r\n    GeometryIndicesCacheMap, GeometryInfoList, GeometryNormalsCacheMap, GeometryVertexCacheMap,\r\n    GeometryWorkerInfoList\r\n} from \"../../definition/type/geometryType\";\r\n\r\nexport class GeometryData {\r\n    public static index: number = null;\r\n    public static count: number = null;\r\n\r\n    public static disposeCount: number = null;\r\n\r\n    public static maxDisposeIndex: number = null;\r\n    public static isReallocate: boolean = null;\r\n\r\n    public static buffer: SharedArrayBuffer = null;\r\n\r\n    public static verticesOffset: number = null;\r\n    public static normalsOffset: number = null;\r\n    public static texCoordsOffset: number = null;\r\n    public static indicesOffset: number = null;\r\n\r\n    public static verticesInfoList: GeometryInfoList = null;\r\n    public static normalsInfoList: GeometryInfoList = null;\r\n    public static texCoordsInfoList: GeometryInfoList = null;\r\n    public static indicesInfoList: GeometryInfoList = null;\r\n\r\n    public static isInit: boolean = null;\r\n\r\n    public static verticesWorkerInfoList: GeometryWorkerInfoList = null;\r\n    public static normalsWorkerInfoList: GeometryWorkerInfoList = null;\r\n    public static texCoordsWorkerInfoList: GeometryWorkerInfoList = null;\r\n    public static indicesWorkerInfoList: GeometryWorkerInfoList = null;\r\n\r\n    public static disposedGeometryIndexArray: Array<number> = null;\r\n\r\n    public static vertices: Float32Array = null;\r\n    public static normals: Float32Array = null;\r\n    public static texCoords: Float32Array = null;\r\n    public static indices: Uint16Array | Uint32Array = null;\r\n\r\n    public static verticesCacheMap: GeometryVertexCacheMap = null;\r\n    public static normalsCacheMap: GeometryNormalsCacheMap = null;\r\n    public static texCoordsCacheMap: GeometryNormalsCacheMap = null;\r\n    public static indicesCacheMap: GeometryIndicesCacheMap = null;\r\n\r\n    public static indexType: EBufferType = null;\r\n    public static indexTypeSize: number = null;\r\n\r\n    public static configDataMap: object = null;\r\n\r\n    public static computeDataFuncMap: GeometryComputeDataFuncMap = null;\r\n\r\n    public static gameObjectMap: ComponentGameObjectMap = null;\r\n\r\n    public static geometryMap: ComponentMap = null;\r\n}\r\n\r\nexport type GeometryComputeDataFuncMap = {\r\n    [index: number]: (index: number, GeometryData: any) => GeometryComputeData\r\n}\r\n\r\nexport type GeometryComputeData = {\r\n    vertices: Float32Array;\r\n    normals: Float32Array;\r\n    texCoords: Float32Array;\r\n    indices: Uint16Array | Uint32Array;\r\n}\r\n","export enum EBufferType {\r\n    BYTE = \"BYTE\",\r\n    UNSIGNED_BYTE = \"UNSIGNED_BYTE\",\r\n    SHORT = \"SHORT\",\r\n    UNSIGNED_SHORT = \"UNSIGNED_SHORT\",\r\n    INT = \"INT\",\r\n    UNSIGNED_INT = \"UNSIGNED_INT\",\r\n    FLOAT = \"FLOAT\"\r\n}\r\n\r\n","export enum EDrawMode {\r\n    POINTS = \"POINTS\",\r\n    LINES = \"LINES\",\r\n    LINE_LOOP = \"LINE_LOOP\",\r\n    LINE_STRIP = \"LINE_STRIP\",\r\n    TRIANGLES = \"TRIANGLES\",\r\n    TRIANGLE_STRIP = \"TRIANGLE_STRIP\",\r\n    TRANGLE_FAN = \"TRIANGLE_FAN\"\r\n}\r\n\r\n","import {\r\n    isNotValidMapValue\r\n} from \"../../../../../utils/objectUtils\";\r\nimport { EDrawMode } from \"../../../../enum/EDrawMode\";\r\nimport { EBufferType } from \"../../../../enum/EBufferType\";\r\nimport { Log } from \"../../../../../utils/Log\";\r\n\r\nexport const getVertexDataSize = () => 3;\r\n\r\nexport const getNormalDataSize = () => 3;\r\n\r\nexport const getTexCoordsDataSize = () => 2;\r\n\r\nexport const getIndexDataSize = () => 1;\r\n\r\nexport const getUIntArrayClass = (indexType: EBufferType) => {\r\n    switch (indexType) {\r\n        case EBufferType.UNSIGNED_SHORT:\r\n            return Uint16Array;\r\n        case EBufferType.INT:\r\n            return Uint32Array;\r\n        default:\r\n            Log.error(true, Log.info.FUNC_INVALID(`indexType:${indexType}`));\r\n            break;\r\n    }\r\n}\r\n\r\nexport const getIndexType = (GeometryDataFromSystem: any) => {\r\n    return GeometryDataFromSystem.indexType;\r\n}\r\n\r\nexport const getIndexTypeSize = (GeometryDataFromSystem: any) => {\r\n    return GeometryDataFromSystem.indexTypeSize;\r\n}\r\n\r\nexport const hasIndices = (index: number, getIndices: Function, GeometryDataFromSystem: any) => {\r\n    var indices = getIndices(index, GeometryDataFromSystem);\r\n\r\n    if (isNotValidMapValue(indices)) {\r\n        return false;\r\n    }\r\n\r\n    return indices.length > 0;\r\n}\r\n\r\nexport const getDrawMode = (index: number, GeometryDataFromSystem: any) => {\r\n    return EDrawMode.TRIANGLES;\r\n}\r\n\r\nexport const getVerticesCount = (index: number, getVertices: Function, GeometryDataFromSystem: any) => {\r\n    return getVertices(index, GeometryDataFromSystem).length;\r\n}\r\n\r\nexport const getIndicesCount = (index: number, getIndices: Function, GeometryDataFromSystem: any) => {\r\n    return getIndices(index, GeometryDataFromSystem).length;\r\n}\r\n\r\nexport const createBufferViews = (buffer: any, count: number, UintArray: any, GeometryDataFromSystem: any) => {\r\n    GeometryDataFromSystem.vertices = new Float32Array(buffer, 0, count * getVertexDataSize());\r\n    GeometryDataFromSystem.normals = new Float32Array(buffer, count * Float32Array.BYTES_PER_ELEMENT * getVertexDataSize(), count * getVertexDataSize());\r\n    GeometryDataFromSystem.texCoords = new Float32Array(buffer, count * Float32Array.BYTES_PER_ELEMENT * (getVertexDataSize() + getNormalDataSize()), count * getTexCoordsDataSize());\r\n    GeometryDataFromSystem.indices = new UintArray(buffer, count * Float32Array.BYTES_PER_ELEMENT * (getVertexDataSize() + getNormalDataSize() + getTexCoordsDataSize()), count * getIndexDataSize());\r\n}\r\n","import { isSupportSharedArrayBuffer } from \"../device/WorkerDetectSystem\";\r\n\r\nexport const createSharedArrayBufferOrArrayBuffer = (length: number) => {\r\n    var Buffer: any = null;\r\n\r\n    if (isSupportSharedArrayBuffer()) {\r\n        Buffer = SharedArrayBuffer;\r\n    }\r\n    else {\r\n        Buffer = ArrayBuffer;\r\n    }\r\n\r\n    return new Buffer(length);\r\n}\r\n\r\n","import { it, requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { Geometry } from \"./Geometry\";\r\nimport { Map } from \"immutable\";\r\nimport { EBufferType } from \"../../renderer/enum/EBufferType\";\r\nimport {\r\n    createMap, deleteVal, isNotValidMapValue,\r\n    isValidMapValue\r\n} from \"../../utils/objectUtils\";\r\nimport {\r\n    addAddComponentHandle as addAddComponentHandleToMap, addComponentToGameObjectMap,\r\n    addInitHandle as addInitHandleToMap, deleteComponent,\r\n    generateComponentIndex, getComponentGameObject\r\n} from \"../ComponentSystem\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport { GeometryData } from \"./GeometryData\";\r\nimport {\r\n    getIndexDataSize,\r\n    getUIntArrayClass,\r\n    getVertexDataSize,\r\n    getIndexTypeSize as getIndexTypeSizeUtils,\r\n    getDrawMode as getDrawModeUtils,\r\n    getIndexType as getIndexTypeUtils,\r\n    getIndicesCount as getIndicesCountUtils,\r\n    getVerticesCount as getVerticesCountUtils,\r\n    hasIndices as hasIndicesUtils, createBufferViews, getNormalDataSize, getTexCoordsDataSize\r\n} from \"../../renderer/utils/worker/render_file/geometry/geometryUtils\";\r\nimport { GeometryInfoList, GeometryWorkerInfoList } from \"../../definition/type/geometryType\";\r\nimport { isDisposeTooManyComponents, reAllocateGeometry } from \"../../utils/memoryUtils\";\r\nimport { isSupportRenderWorkerAndSharedArrayBuffer } from \"../../device/WorkerDetectSystem\";\r\nimport { createSharedArrayBufferOrArrayBuffer } from \"../../utils/arrayBufferUtils\";\r\nimport { fillTypeArr, getSubarray } from \"../../utils/typeArrayUtils\";\r\nimport { isNotValidVal } from \"../../utils/arrayUtils\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { IUIdEntity } from \"../../core/entityObject/gameObject/IUIdEntity\";\r\nimport { hasExtensionUintIndices } from \"../../renderer/utils/device/gpuDetectUtils\";\r\n\r\nexport const addAddComponentHandle = (BoxGeometry: any, CustomGeometry: any) => {\r\n    addAddComponentHandleToMap(BoxGeometry, addComponent);\r\n    addAddComponentHandleToMap(CustomGeometry, addComponent);\r\n}\r\n\r\n// export const addDisposeHandle = (BoxGeometry: any, CustomGeometry: any) => {\r\n//     addDisposeHandleToMap(BoxGeometry, disposeComponent);\r\n//     addDisposeHandleToMap(CustomGeometry, disposeComponent);\r\n// }\r\n\r\nexport const addInitHandle = (BoxGeometry: any, CustomGeometry: any) => {\r\n    addInitHandleToMap(BoxGeometry, initGeometry);\r\n    addInitHandleToMap(CustomGeometry, initGeometry);\r\n}\r\n\r\nexport const create = requireCheckFunc((geometry: Geometry, GeometryData: any) => {\r\n    // checkIndexShouldEqualCount(GeometryData);\r\n}, (geometry: Geometry, GeometryData: any) => {\r\n    var index = generateComponentIndex(GeometryData);\r\n\r\n    geometry.index = index;\r\n\r\n    GeometryData.count += 1;\r\n\r\n    GeometryData.geometryMap[index] = geometry;\r\n\r\n    return geometry;\r\n})\r\n\r\nexport const init = (GeometryData: any, state: Map<any, any>) => {\r\n    for (let i = 0, count = GeometryData.count; i < count; i++) {\r\n        initGeometry(i, state);\r\n    }\r\n\r\n    _markIsInit(GeometryData);\r\n\r\n    return state;\r\n}\r\n\r\nexport const initGeometry = (index: number, state: Map<any, any>) => {\r\n    var computeDataFunc = GeometryData.computeDataFuncMap[index];\r\n\r\n    if (_isComputeDataFuncNotExist(computeDataFunc)) {\r\n        return;\r\n    }\r\n\r\n    let {\r\n        vertices,\r\n        normals,\r\n        texCoords,\r\n        indices\r\n    } = computeDataFunc(index, GeometryData);\r\n\r\n    //todo compute normals\r\n\r\n    setVertices(index, vertices, GeometryData);\r\n\r\n    setNormals(index, normals, GeometryData);\r\n\r\n    setTexCoords(index, texCoords, GeometryData);\r\n\r\n    setIndices(index, indices, GeometryData);\r\n}\r\n\r\nconst _isComputeDataFuncNotExist =(func: Function) => isNotValidMapValue(func);\r\n\r\nexport const getVertices = (index: number, GeometryData: any) => {\r\n    return _getPointData(index, GeometryData.vertices, GeometryData.verticesCacheMap, GeometryData.verticesInfoList);\r\n}\r\n\r\nexport const setVertices = requireCheckFunc((index: number, vertices: Array<number>, GeometryData: any) => {\r\n    // it(\"vertices should not already exist\", () => {\r\n    //     expect(GeometryData.verticesCacheMap[index]).not.exist;\r\n    // });\r\n}, (index: number, vertices: Array<number>, GeometryData: any) => {\r\n    GeometryData.verticesOffset = _setPointData(index, vertices, getVertexDataSize(), GeometryData.vertices, GeometryData.verticesCacheMap, GeometryData.verticesInfoList, GeometryData.verticesWorkerInfoList, GeometryData.verticesOffset, GeometryData);\r\n})\r\n\r\nexport const getNormals = (index: number, GeometryData: any) => {\r\n    return _getPointData(index, GeometryData.normals, GeometryData.normalsCacheMap, GeometryData.normalsInfoList);\r\n}\r\n\r\nexport const setNormals = requireCheckFunc((index: number, normals: Array<number>, GeometryData: any) => {\r\n}, (index: number, normals: Array<number>, GeometryData: any) => {\r\n    GeometryData.normalsOffset = _setPointData(index, normals, getNormalDataSize(), GeometryData.normals, GeometryData.normalsCacheMap, GeometryData.normalsInfoList, GeometryData.normalsWorkerInfoList, GeometryData.normalsOffset, GeometryData);\r\n})\r\n\r\nexport const getTexCoords = (index: number, GeometryData: any) => {\r\n    return _getPointData(index, GeometryData.texCoords, GeometryData.texCoordsCacheMap, GeometryData.texCoordsInfoList);\r\n}\r\n\r\nexport const setTexCoords = requireCheckFunc((index: number, texCoords: Array<number>, GeometryData: any) => {\r\n}, (index: number, texCoords: Array<number>, GeometryData: any) => {\r\n    GeometryData.texCoordsOffset = _setPointData(index, texCoords, getTexCoordsDataSize(), GeometryData.texCoords, GeometryData.texCoordsCacheMap, GeometryData.texCoordsInfoList, GeometryData.texCoordsWorkerInfoList, GeometryData.texCoordsOffset, GeometryData);\r\n})\r\n\r\nexport const getIndices = (index: number, GeometryData: any) => {\r\n    return _getPointData(index, GeometryData.indices, GeometryData.indicesCacheMap, GeometryData.indicesInfoList);\r\n}\r\n\r\nexport const setIndices = requireCheckFunc((index: number, indices: Array<number>, GeometryData: any) => {\r\n    // it(\"indices should not already exist\", () => {\r\n    //     expect(GeometryData.indicesCacheMap[index]).not.exist;\r\n    // });\r\n}, (index: number, indices: Array<number>, GeometryData: any) => {\r\n    GeometryData.indicesOffset = _setPointData(index, indices, getIndexDataSize(), GeometryData.indices, GeometryData.indicesCacheMap, GeometryData.indicesInfoList, GeometryData.indicesWorkerInfoList, GeometryData.indicesOffset, GeometryData);\r\n})\r\n\r\nconst _getPointData =requireCheckFunc((index: number, points: Float32Array | Uint16Array | Uint32Array, cacheMap: object, infoList: object) => {\r\n    it(\"infoList[index] should exist\", () => {\r\n        expect(infoList[index]).exist;\r\n    });\r\n}, (index: number, points: Float32Array | Uint16Array | Uint32Array, cacheMap: object, infoList: object) => {\r\n    var dataArr = cacheMap[index];\r\n\r\n    if (isValidMapValue(dataArr)) {\r\n        return dataArr;\r\n    }\r\n\r\n    let info = infoList[index];\r\n\r\n    dataArr = getSubarray(points, info.startIndex, info.endIndex);\r\n\r\n    cacheMap[index] = dataArr;\r\n\r\n    return dataArr;\r\n})\r\n\r\nconst _setPointData =(index: number, dataArr: Array<number>, dataSize: number, points: Float32Array | Uint16Array | Uint32Array, cacheMap: object, infoList: GeometryInfoList, workerInfoList: GeometryWorkerInfoList, offset: number, GeometryData: any) => {\r\n    var count = dataArr.length,\r\n        startIndex = offset;\r\n\r\n    offset += count;\r\n\r\n    infoList[index] = _buildInfo(startIndex, offset);\r\n\r\n    fillTypeArr(points, dataArr, startIndex, count);\r\n\r\n    _removeCache(index, cacheMap);\r\n\r\n    if (_isInit(GeometryData)) {\r\n        _addWorkerInfo(workerInfoList, index, startIndex, offset);\r\n    }\r\n\r\n    return offset;\r\n}\r\n\r\nconst _removeCache =(index: number, cacheMap: object) => {\r\n    deleteVal(index, cacheMap);\r\n}\r\n\r\nconst _buildInfo =(startIndex: number, endIndex: number) => {\r\n    return {\r\n        startIndex: startIndex,\r\n        endIndex: endIndex\r\n    }\r\n}\r\n\r\nexport const addComponent = (component: Geometry, gameObject: GameObject) => {\r\n    addComponentToGameObjectMap(GeometryData.gameObjectMap, component.index, gameObject);\r\n}\r\n\r\nexport const disposeComponent = (component: Geometry, disposeBuffers: Function) => {\r\n    var sourceIndex = component.index;\r\n\r\n    deleteComponent(sourceIndex, GeometryData.geometryMap);\r\n\r\n    GeometryData.count -= 1;\r\n    GeometryData.disposeCount += 1;\r\n    GeometryData.isReallocate = false;\r\n\r\n    if (isDisposeTooManyComponents(GeometryData.disposeCount) || _isBufferNearlyFull(GeometryData)) {\r\n        let disposedIndexArray = reAllocateGeometry(GeometryData);\r\n\r\n        disposeBuffers(disposedIndexArray);\r\n\r\n        clearWorkerInfoList(GeometryData);\r\n        GeometryData.isReallocate = true;\r\n\r\n        GeometryData.disposeCount = 0;\r\n    }\r\n}\r\n\r\nexport const isReallocate = (GeometryData: any) => {\r\n    return GeometryData.isReallocate;\r\n}\r\n\r\nconst _isBufferNearlyFull =(GeometryData: any) => {\r\n    var infoList = GeometryData.indicesInfoList,\r\n        lastInfo = infoList[infoList.length - 1];\r\n\r\n    if (isNotValidVal(lastInfo)) {\r\n        return false;\r\n    }\r\n\r\n    return lastInfo.endIndex >= GeometryData.maxDisposeIndex;\r\n}\r\n\r\nexport const getGameObject = (index: number, Data: any) => {\r\n    return getComponentGameObject(Data.gameObjectMap, index);\r\n}\r\n\r\nexport const getConfigData = (index: number, GeometryData: any) => {\r\n    return GeometryData.configDataMap[index];\r\n}\r\n\r\n// const _createVerticesTypeArray =() => {\r\n//     var count = DataBufferConfig.geometryDataBufferCount,\r\n//         size = Float32Array.BYTES_PER_ELEMENT * 3 + indicesArrayBytes * 1;\r\n//\r\n//     GeometryData.vertices = new Float32Array(buffer, 0, count * getVertexDataSize());\r\n// }\r\n\r\nconst _checkIsIndicesBufferNeed32BitsByConfig =(DataBufferConfig: any, GPUDetectData: any) => {\r\n    if (DataBufferConfig.geometryIndicesBufferBits === 16) {\r\n        return false;\r\n    }\r\n\r\n    return hasExtensionUintIndices(GPUDetectData) === true;\r\n}\r\n\r\nexport const isIndicesBufferNeed32BitsByData = (GeometryData: any) => {\r\n    return GeometryData.indexType === EBufferType.UNSIGNED_INT;\r\n}\r\n\r\n\r\nconst _markIsInit =(GeometryData: any) => {\r\n    GeometryData.isInit = true;\r\n}\r\n\r\nconst _isInit =(GeometryData: any) => {\r\n    return GeometryData.isInit;\r\n}\r\n\r\nexport const clearWorkerInfoList = (GeometryData: any) => {\r\n    GeometryData.verticesWorkerInfoList = [];\r\n    GeometryData.normalsWorkerInfoList = [];\r\n    GeometryData.texCoordsWorkerInfoList = [];\r\n    GeometryData.indicesWorkerInfoList = [];\r\n};\r\n\r\nexport const hasNewPointData = (GeometryData: any) => {\r\n    return GeometryData.verticesWorkerInfoList.length > 0;\r\n}\r\n\r\nexport const getDisposedGeometryIndexArrayData = (GeometryData: any) => {\r\n    return GeometryData.disposedGeometryIndexArray;\r\n}\r\n\r\nexport const hasDisposedGeometryIndexArrayData = (GeometryData: any) => {\r\n    return GeometryData.disposedGeometryIndexArray.length > 0;\r\n}\r\n\r\nexport const clearDisposedGeometryIndexArray = (GeometryData: any) => {\r\n    GeometryData.disposedGeometryIndexArray = [];\r\n}\r\n\r\nvar _addWorkerInfo =null;\r\n\r\nif (isSupportRenderWorkerAndSharedArrayBuffer()) {\r\n    _addWorkerInfo = (infoList: GeometryWorkerInfoList, index: number, startIndex: number, endIndex: number) => {\r\n        infoList.push(_buildWorkerInfo(index, startIndex, endIndex));\r\n    }\r\n}\r\nelse {\r\n    _addWorkerInfo = (infoList: GeometryWorkerInfoList, index: number, startIndex: number, endIndex: number) => {\r\n    };\r\n}\r\n\r\nconst _buildWorkerInfo =(index: number, startIndex: number, endIndex: number) => {\r\n    return {\r\n        index: index,\r\n        startIndex: startIndex,\r\n        endIndex: endIndex\r\n    }\r\n}\r\n\r\nexport const initData = (DataBufferConfig: any, GeometryData: any, GPUDetectData: any) => {\r\n    var isIndicesBufferNeed32Bits = _checkIsIndicesBufferNeed32BitsByConfig(DataBufferConfig, GPUDetectData),\r\n        indicesArrayBytes: number = null;\r\n\r\n    if (isIndicesBufferNeed32Bits) {\r\n        indicesArrayBytes = Uint32Array.BYTES_PER_ELEMENT;\r\n\r\n        GeometryData.indexType = EBufferType.UNSIGNED_INT;\r\n    }\r\n    else {\r\n        indicesArrayBytes = Uint16Array.BYTES_PER_ELEMENT;\r\n\r\n        GeometryData.indexType = EBufferType.UNSIGNED_SHORT;\r\n    }\r\n\r\n    GeometryData.indexTypeSize = indicesArrayBytes;\r\n\r\n    GeometryData.configDataMap = createMap();\r\n\r\n    GeometryData.verticesCacheMap = createMap();\r\n    GeometryData.normalsCacheMap = createMap();\r\n    GeometryData.texCoordsCacheMap = createMap();\r\n    GeometryData.indicesCacheMap = createMap();\r\n\r\n    GeometryData.computeDataFuncMap = createMap();\r\n\r\n    GeometryData.gameObjectMap = createMap();\r\n\r\n    GeometryData.geometryMap = createMap();\r\n\r\n    GeometryData.index = 0;\r\n    GeometryData.count = 0;\r\n\r\n    _initBufferData(indicesArrayBytes, getUIntArrayClass(GeometryData.indexType), DataBufferConfig, GeometryData);\r\n\r\n    GeometryData.verticesInfoList = [];\r\n    GeometryData.normalsInfoList = [];\r\n    GeometryData.texCoordsInfoList = [];\r\n    GeometryData.indicesInfoList = [];\r\n\r\n    GeometryData.verticesWorkerInfoList = [];\r\n    GeometryData.normalsWorkerInfoList = [];\r\n    GeometryData.texCoordsWorkerInfoList = [];\r\n    GeometryData.indicesWorkerInfoList = [];\r\n\r\n    GeometryData.disposedGeometryIndexArray = [];\r\n\r\n    GeometryData.verticesOffset = 0;\r\n    GeometryData.normalsOffset = 0;\r\n    GeometryData.texCoordsOffset = 0;\r\n    GeometryData.indicesOffset = 0;\r\n\r\n    GeometryData.disposeCount = 0;\r\n\r\n    GeometryData.isReallocate = false;\r\n}\r\n\r\nconst _initBufferData =(indicesArrayBytes: number, UintArray: any, DataBufferConfig: any, GeometryData: any) => {\r\n    var buffer: any = null,\r\n        count = DataBufferConfig.geometryDataBufferCount,\r\n        size = Float32Array.BYTES_PER_ELEMENT * (getVertexDataSize() + getNormalDataSize() + getTexCoordsDataSize()) + indicesArrayBytes * getIndexDataSize();\r\n\r\n    buffer = createSharedArrayBufferOrArrayBuffer(count * size);\r\n\r\n    createBufferViews(buffer, count, UintArray, GeometryData);\r\n\r\n    GeometryData.buffer = buffer;\r\n\r\n    GeometryData.maxDisposeIndex = GeometryData.indices.length * 0.9;\r\n}\r\n\r\nexport var getIndexType = null;\r\n\r\nexport var getIndexTypeSize = null;\r\n\r\nexport var hasIndices = null;\r\n\r\nexport var getDrawMode = null;\r\n\r\nexport var getVerticesCount = null;\r\n\r\nexport var getIndicesCount = null;\r\n\r\nif (!isSupportRenderWorkerAndSharedArrayBuffer()) {\r\n    getIndexType = getIndexTypeUtils;\r\n\r\n    getIndexTypeSize = getIndexTypeSizeUtils;\r\n\r\n    hasIndices = (index: number, GeometryData: any) => hasIndicesUtils(index, getIndices, GeometryData);\r\n\r\n    getDrawMode = getDrawModeUtils;\r\n\r\n    getVerticesCount = (index: number, GeometryData: any) => getVerticesCountUtils(index, getVertices, GeometryData);\r\n\r\n    getIndicesCount = (index: number, GeometryData: any) => getIndicesCountUtils(index, getIndices, GeometryData);\r\n}\r\n","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { GeometryData } from \"./GeometryData\";\r\nimport {\r\n    getVertices as getGeometryVertices,\r\n    getIndices as getGeometryIndices, getConfigData, initGeometry as initGeometrySystem,\r\n    getGameObject, getDrawMode as getGeometryDrawMode, getNormals as getGeometryNormals, getTexCoords as getGeometryTexCoords,\r\n} from \"./GeometrySystem\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport { Component } from \"../Component\";\r\nimport { getState } from \"../../core/DirectorSystem\";\r\nimport { DirectorData } from \"../../core/DirectorData\";\r\nimport { requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { checkComponentShouldAlive, isComponentIndexNotRemoved } from \"../ComponentSystem\";\r\n\r\n@registerClass(\"Geometry\")\r\nexport abstract class Geometry extends Component {\r\n}\r\n\r\nexport const getDrawMode = requireCheckFunc((geometry: Geometry) => {\r\n    _checkShouldAlive(geometry, GeometryData);\r\n}, (geometry: Geometry) => {\r\n    return getGeometryDrawMode(geometry.index, GeometryData);\r\n})\r\n\r\nexport const getVertices = requireCheckFunc((geometry: Geometry) => {\r\n    _checkShouldAlive(geometry, GeometryData);\r\n}, (geometry: Geometry) => {\r\n    return getGeometryVertices(geometry.index, GeometryData);\r\n})\r\n\r\nexport const getNormals = requireCheckFunc((geometry: Geometry) => {\r\n    _checkShouldAlive(geometry, GeometryData);\r\n}, (geometry: Geometry) => {\r\n    return getGeometryNormals(geometry.index, GeometryData);\r\n})\r\n\r\nexport const getTexCoords = requireCheckFunc((geometry: Geometry) => {\r\n    _checkShouldAlive(geometry, GeometryData);\r\n}, (geometry: Geometry) => {\r\n    return getGeometryTexCoords(geometry.index, GeometryData);\r\n})\r\n\r\nexport const getIndices = requireCheckFunc((geometry: Geometry) => {\r\n    _checkShouldAlive(geometry, GeometryData);\r\n}, (geometry: Geometry) => {\r\n    return getGeometryIndices(geometry.index, GeometryData);\r\n})\r\n\r\nexport const getGeometryConfigData = requireCheckFunc((geometry: Geometry) => {\r\n    _checkShouldAlive(geometry, GeometryData);\r\n}, (geometry: Geometry) => {\r\n    return getConfigData(geometry.index, GeometryData);\r\n})\r\n\r\nexport const initGeometry = (geometry: Geometry) => {\r\n    initGeometrySystem(geometry.index, getState(DirectorData));\r\n}\r\n\r\nexport const getGeometryGameObject = requireCheckFunc((geometry: Geometry) => {\r\n    _checkShouldAlive(geometry, GeometryData);\r\n}, (geometry: Geometry) => {\r\n    return getGameObject(geometry.index, GeometryData);\r\n})\r\n\r\nconst _checkShouldAlive =(geometry: Geometry, GeometryData: any) => {\r\n    checkComponentShouldAlive(geometry, GeometryData, (geometry: Geometry, GeometryData: any) => {\r\n        return isComponentIndexNotRemoved(geometry);\r\n    })\r\n}\r\n","export function cache(judgeFunc: any, returnCacheValueFunc: any, setCacheFunc: any) {\r\n    return function(target, name, descriptor) {\r\n        var value = descriptor.value;\r\n\r\n        descriptor.value = function(args) {\r\n            var result = null,\r\n                setArgs = null;\r\n\r\n            if (judgeFunc.apply(this, arguments)) {\r\n                return returnCacheValueFunc.apply(this, arguments);\r\n            }\r\n\r\n            result = value.apply(this, arguments);\r\n\r\n            setArgs = [result];\r\n\r\n            for (let i = 0, len = arguments.length; i < len; i++) {\r\n                setArgs[i + 1] = arguments[i];\r\n            }\r\n\r\n            setCacheFunc.apply(this, setArgs);\r\n\r\n            return result;\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}\r\n","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { ensureGetter, requireCheck, it } from \"../definition/typescript/decorator/contract\";\r\nimport { Log } from \"../utils/Log\";\r\nimport { Vector3 } from \"../math/Vector3\";\r\nimport { Vector4 } from \"../math/Vector4\";\r\nimport { cache } from \"../definition/typescript/decorator/cache\";\r\nimport { expect } from \"wonder-expect.js\";\r\n\r\ndeclare var Math: any;\r\n\r\nconst REGEX_RGBA = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*([^\\)]+)\\)$/i,\r\n    REGEX_RGBA_2 = /^rgba\\((\\d+\\.\\d+),\\s*(\\d+\\.\\d+),\\s*(\\d+\\.\\d+),\\s*([^\\)]+)\\)$/i,\r\n    REGEX_RGB = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/i,\r\n    REGEX_RGB_2 = /^rgb\\((\\d+\\.\\d+),\\s*(\\d+\\.\\d+),\\s*(\\d+\\.\\d+)\\)$/i,\r\n    REGEX_NUM = /^\\#([0-9a-f]{6})$/i;\r\n\r\n@registerClass(\"Color\")\r\nexport class Color {\r\n    public static create(colorVal?: string) {\r\n        var obj = new this();\r\n\r\n        obj.initWhenCreate(colorVal);\r\n\r\n        return obj;\r\n    }\r\n\r\n    set dirty(dirty: boolean) {\r\n        if (dirty) {\r\n            this._clearCache();\r\n        }\r\n    }\r\n\r\n    private _r: number = null;\r\n    @ensureGetter(function(r: number) {\r\n        it(\"r should >= 0\", () => {\r\n            expect(r).gte(0);\r\n        });\r\n    })\r\n    get r() {\r\n        return this._r;\r\n    }\r\n    set r(r: number) {\r\n        if (this._r !== r) {\r\n            this.dirty = true;\r\n\r\n            this._r = r;\r\n        }\r\n    }\r\n\r\n    private _g: number = null;\r\n    @ensureGetter(function(g: number) {\r\n        it(\"g should >= 0\", () => {\r\n            expect(g).gte(0);\r\n        });\r\n    })\r\n    get g() {\r\n        return this._g;\r\n    }\r\n    set g(g: number) {\r\n        if (this._g !== g) {\r\n            this.dirty = true;\r\n\r\n            this._g = g;\r\n        }\r\n    }\r\n\r\n    private _b: number = null;\r\n    @ensureGetter(function(b: number) {\r\n        it(\"b should >= 0\", () => {\r\n            expect(b).gte(0);\r\n        });\r\n    })\r\n    get b() {\r\n        return this._b;\r\n    }\r\n    set b(b: number) {\r\n        if (this._b !== b) {\r\n            this.dirty = true;\r\n\r\n            this._b = b;\r\n        }\r\n    }\r\n\r\n    private _a: number = null;\r\n    @ensureGetter(function(a: number) {\r\n        it(\"a should >= 0\", () => {\r\n            expect(a).gte(0);\r\n        });\r\n    })\r\n    get a() {\r\n        return this._a;\r\n    }\r\n    set a(a: number) {\r\n        if (this._a !== a) {\r\n            this.dirty = true;\r\n\r\n            this._a = a;\r\n        }\r\n    }\r\n\r\n    private _colorString: string = null;\r\n    private _colorVec3Cache: Vector3 = null;\r\n    private _colorVec4Cache: Vector4 = null;\r\n    private _colorArr3Cache: Array<number> = null;\r\n    private _colorArr4Cache: Array<number> = null;\r\n\r\n    public initWhenCreate(colorVal?: string) {\r\n        if (!colorVal) {\r\n            return;\r\n        }\r\n\r\n        this._colorString = colorVal;\r\n        this._setColor(colorVal);\r\n    }\r\n\r\n    @cache(function() {\r\n        return this._colorVec3Cache !== null;\r\n    }, function() {\r\n        return this._colorVec3Cache;\r\n    }, function(result) {\r\n        this._colorVec3Cache = result;\r\n    })\r\n    public toVector3() {\r\n        return Vector3.create(this.r, this.g, this.b);\r\n    }\r\n\r\n    @cache(function() {\r\n        return this._colorVec4Cache !== null;\r\n    }, function() {\r\n        return this._colorVec4Cache;\r\n    }, function(result) {\r\n        this._colorVec4Cache = result;\r\n    })\r\n    public toVector4() {\r\n        return Vector4.create(this.r, this.g, this.b, this.a);\r\n    }\r\n\r\n    @cache(function() {\r\n        return this._colorArr3Cache !== null;\r\n    }, function() {\r\n        return this._colorArr3Cache;\r\n    }, function(result) {\r\n        this._colorArr3Cache = result;\r\n    })\r\n    public toArray3() {\r\n        return [this.r, this.g, this.b];\r\n    }\r\n\r\n\r\n    @cache(function() {\r\n        return this._colorArr4Cache !== null;\r\n    }, function() {\r\n        return this._colorArr4Cache;\r\n    }, function(result) {\r\n        this._colorArr4Cache = result;\r\n    })\r\n    public toArray4() {\r\n        return [this.r, this.g, this.b, this.a];\r\n    }\r\n\r\n    public toString() {\r\n        if (this._colorString !== null) {\r\n            return this._colorString;\r\n        }\r\n\r\n        return `#${(`000000${this._getHex().toString(16)}`).slice(-6)}`;\r\n    }\r\n\r\n    private _getHex () {\r\n        return ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\r\n    }\r\n\r\n    public clone() {\r\n        return Color.create(this._colorString);\r\n    }\r\n\r\n    public isEqual(color: Color) {\r\n        return this.r === color.r && this.g === color.g && this.b === color.b && this.a === color.a;\r\n    }\r\n\r\n    @requireCheck((colorVal: string) => {\r\n        it(\"color should be #xxxxxx\", () => {\r\n            expect(REGEX_NUM.test(colorVal)).true;\r\n        })\r\n    })\r\n    public setColorByNum(colorVal: string) {\r\n        var color = null;\r\n\r\n        this._colorString = colorVal;\r\n\r\n        color = REGEX_NUM.exec(colorVal);\r\n\r\n        this._setHex(parseInt(color[1], 16));\r\n\r\n        return this;\r\n    }\r\n\r\n    private _setColor(colorVal: string) {\r\n        var color = null;\r\n\r\n        // rgba(255,0,0,0)\r\n\r\n        if (REGEX_RGBA.test(colorVal)) {\r\n            color = REGEX_RGBA.exec(colorVal);\r\n\r\n            this.r = this._getColorValue(color, 1);\r\n            this.g = this._getColorValue(color, 2);\r\n            this.b = this._getColorValue(color, 3);\r\n            this.a = Number(color[4]);\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        // rgba(0.1,0.0,0.3,0.2)\r\n\r\n        if (REGEX_RGBA_2.test(colorVal)) {\r\n            color = REGEX_RGBA_2.exec(colorVal);\r\n\r\n            this.r = parseFloat(color[1]);\r\n            this.g = parseFloat(color[2]);\r\n            this.b = parseFloat(color[3]);\r\n            this.a = Number(color[4]);\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        // rgb(255,0,0)\r\n\r\n        if (REGEX_RGB.test(colorVal)) {\r\n            color = REGEX_RGB.exec(colorVal);\r\n\r\n            this.r = this._getColorValue(color, 1);\r\n            this.g = this._getColorValue(color, 2);\r\n            this.b = this._getColorValue(color, 3);\r\n            this.a = 1;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        /*!\r\n         it will cause ambiguity: rgb(x,x,x)\r\n         so the format should be:\r\n         rgb(x.x,x.x,x.x)\r\n         */\r\n        if (REGEX_RGB_2.test(colorVal)) {\r\n            color = REGEX_RGB_2.exec(colorVal);\r\n\r\n            this.r = parseFloat(color[1]);\r\n            this.g = parseFloat(color[2]);\r\n            this.b = parseFloat(color[3]);\r\n            this.a = 1;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        // #ffffff\r\n\r\n        if (REGEX_NUM.test(colorVal)) {\r\n            return this.setColorByNum(colorVal);\r\n        }\r\n    }\r\n\r\n    private _getColorValue(color, index, num = 255) {\r\n        return Math.min(num, parseInt(color[index], 10)) / num;\r\n    }\r\n\r\n    private _setHex(hex) {\r\n        hex = Math.floor(hex);\r\n\r\n        this.r = (hex >> 16 & 255) / 255;\r\n        this.g = (hex >> 8 & 255) / 255;\r\n        this.b = (hex & 255) / 255;\r\n        this.a = 1;\r\n\r\n        return this;\r\n    }\r\n\r\n    private _clearCache() {\r\n        this._colorVec3Cache = null;\r\n        this._colorVec4Cache = null;\r\n        this._colorArr3Cache = null;\r\n        this._colorArr4Cache = null;\r\n    }\r\n}","import { IUIdEntity } from \"../../core/entityObject/gameObject/IUIdEntity\";\r\nimport { Component } from \"../Component\";\r\nimport { MaterialWorkerInitDataList } from \"../../renderer/type/dataType\";\r\n\r\nexport class MaterialData {\r\n    public static buffer: SharedArrayBuffer = null;\r\n\r\n    public static shaderIndices: Uint32Array = null;\r\n    public static colors: Float32Array = null;\r\n    public static opacities: Float32Array = null;\r\n    public static alphaTests: Float32Array = null;\r\n\r\n    public static defaultShaderIndex: number = null;\r\n    public static defaultColorArr: Array<number> = null;\r\n    public static defaultOpacity: number = null;\r\n    public static defaultAlphaTest: number = null;\r\n\r\n    public static gameObjectMap: Array<IUIdEntity> = null;\r\n\r\n    public static materialMap: Array<Component> = null;\r\n\r\n    public static workerInitList: MaterialWorkerInitDataList = null;\r\n}\r\n","export const getColorArr3 = (index: number, DataFromSystem: any) => {\r\n    return getColorArr3Data(index, DataFromSystem.colors);\r\n}\r\n\r\nexport const getColorArr3Data = (index: number, colors: Float32Array) => {\r\n    var size = 3,\r\n        i = index * size;\r\n\r\n    return [colors[i], colors[i + 1], colors[i + 2]];\r\n}\r\n\r\nexport const getSingleSizeData = (index: number, datas: Uint8Array | Float32Array) => {\r\n    return datas[index];\r\n}\r\n\r\n","import { getSingleSizeData } from \"../../../common/operateBufferDataUtils\";\r\nimport { InitShaderDataMap } from \"../../../../type/utilsType\";\r\nimport { setTypeArrayValue } from \"../../../../../utils/typeArrayUtils\";\r\nimport { IMaterialConfig } from \"../../../../data/material_config_interface\";\r\nimport { IShaderLibGenerator } from \"../../../../data/shaderLib_generator_interface\";\r\nimport { Map } from \"immutable\";\r\n\r\nexport const initNoMaterialShaders = (state: Map<any, any>, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, initNoMaterialShader: Function, initShaderDataMap: InitShaderDataMap) => {\r\n    var shaders = material_config.shaders.noMaterialShaders;\r\n\r\n    for (let shaderName in shaders) {\r\n        if (shaders.hasOwnProperty(shaderName)) {\r\n            initNoMaterialShader(state, shaderName, shaders[shaderName], material_config, shaderLib_generator, initShaderDataMap);\r\n        }\r\n    }\r\n}\r\n\r\nexport const setShaderIndex = (materialIndex: number, shaderIndex: number, MaterialDataFromSystem: any) => {\r\n    setTypeArrayValue(MaterialDataFromSystem.shaderIndices, materialIndex, shaderIndex);\r\n}\r\n\r\nexport const useShader = (index: number, shaderName: string, state: Map<any, any>, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, initMaterialShader: Function, initShaderDataMap: InitShaderDataMap) => {\r\n    var shaderIndex = initMaterialShader(state, index, shaderName, material_config, shaderLib_generator, initShaderDataMap);\r\n\r\n    setShaderIndex(index, shaderIndex, initShaderDataMap.MaterialDataFromSystem);\r\n\r\n    return shaderIndex;\r\n}\r\n\r\n// export const getColorArr3 = getColorArr3Utils;\r\n\r\nexport const getOpacity = (materialIndex: number, MaterialDataFromSystem: any) => {\r\n    return getSingleSizeData(materialIndex, MaterialDataFromSystem.opacities);\r\n}\r\n\r\nexport const getAlphaTest = (materialIndex: number, MaterialDataFromSystem: any) => {\r\n    return getSingleSizeData(materialIndex, MaterialDataFromSystem.alphaTests);\r\n}\r\n\r\nexport const isTestAlpha = (alphaTest: number) => {\r\n    return alphaTest >= 0;\r\n}\r\n\r\nexport const getShaderIndexDataSize = () => 1;\r\n\r\nexport const getColorDataSize = () => 3;\r\n\r\nexport const getOpacityDataSize = () => 1;\r\n\r\nexport const getAlphaTestDataSize = () => 1;\r\n\r\nexport const createTypeArrays = (buffer: any, count: number, MaterialDataFromSystem: any) => {\r\n    var offset = 0;\r\n\r\n    MaterialDataFromSystem.shaderIndices = new Uint32Array(buffer, offset, count * getShaderIndexDataSize());\r\n    offset += count * Uint32Array.BYTES_PER_ELEMENT * getShaderIndexDataSize();\r\n\r\n    MaterialDataFromSystem.colors = new Float32Array(buffer, offset, count * getColorDataSize());\r\n    offset += count * Float32Array.BYTES_PER_ELEMENT * getColorDataSize();\r\n\r\n    MaterialDataFromSystem.opacities = new Float32Array(buffer, offset, count * getOpacityDataSize());\r\n    offset += count * Float32Array.BYTES_PER_ELEMENT * getOpacityDataSize();\r\n\r\n    MaterialDataFromSystem.alphaTests = new Float32Array(buffer, offset, count * getAlphaTestDataSize());\r\n    offset += count * Float32Array.BYTES_PER_ELEMENT * getAlphaTestDataSize();\r\n\r\n    return offset;\r\n}\r\n\r\nexport const buildInitShaderDataMap = (DeviceManagerDataFromSystem, ProgramDataFromSystem, LocationDataFromSystem, GLSLSenderDataFromSystem, ShaderDataFromSystem: any, MapManagerDataFromSystem: any, MaterialDataFromSystem: any, BasicMaterialDataFromSystem: any, LightMaterialDataFromSystem: any, AmbientLightDataFromSystem: any, DirectionLightDataFromSystem: any, PointLightDataFromSystem: any, GPUDetectDataFromSystem: any, VaoDataFromSystem: any) => {\r\n    return {\r\n        GPUDetectDataFromSystem: GPUDetectDataFromSystem,\r\n        DeviceManagerDataFromSystem: DeviceManagerDataFromSystem,\r\n        ProgramDataFromSystem: ProgramDataFromSystem,\r\n        LocationDataFromSystem: LocationDataFromSystem,\r\n        GLSLSenderDataFromSystem: GLSLSenderDataFromSystem,\r\n        ShaderDataFromSystem: ShaderDataFromSystem,\r\n        MapManagerDataFromSystem: MapManagerDataFromSystem,\r\n        MaterialDataFromSystem: MaterialDataFromSystem,\r\n        BasicMaterialDataFromSystem: BasicMaterialDataFromSystem,\r\n        LightMaterialDataFromSystem: LightMaterialDataFromSystem,\r\n        AmbientLightDataFromSystem: AmbientLightDataFromSystem,\r\n        DirectionLightDataFromSystem: DirectionLightDataFromSystem,\r\n        PointLightDataFromSystem: PointLightDataFromSystem,\r\n        VaoDataFromSystem: VaoDataFromSystem\r\n    }\r\n}\r\n","import { ensureFunc, it, requireCheckFunc } from \"../../../../../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { createMap } from \"../../../../../../utils/objectUtils\";\r\nimport { forEach } from \"../../../../../../utils/arrayUtils\";\r\n\r\nexport const use = requireCheckFunc((gl: WebGLRenderingContext, shaderIndex: number, ProgramDataFromSystem: any, LocationDataFromSystem: any, GLSLSenderDataFromSystem: any) => {\r\n    it(\"program should exist\", () => {\r\n        expect(getProgram(shaderIndex, ProgramDataFromSystem)).exist;\r\n    });\r\n}, (gl: WebGLRenderingContext, shaderIndex: number, ProgramDataFromSystem: any, LocationDataFromSystem: any, GLSLSenderDataFromSystem: any) => {\r\n    var program = getProgram(shaderIndex, ProgramDataFromSystem);\r\n\r\n    if (ProgramDataFromSystem.lastUsedProgram === program) {\r\n        return program;\r\n    }\r\n\r\n    ProgramDataFromSystem.lastUsedProgram = program;\r\n\r\n    gl.useProgram(program);\r\n\r\n    disableVertexAttribArray(gl, GLSLSenderDataFromSystem);\r\n\r\n    ProgramDataFromSystem.lastBindedArrayBuffer = null;\r\n    ProgramDataFromSystem.lastBindedIndexBuffer = null;\r\n\r\n    return program;\r\n})\r\n\r\nexport const disableVertexAttribArray = requireCheckFunc((gl: WebGLRenderingContext, GLSLSenderDataFromSystem: any) => {\r\n    it(\"vertexAttribHistory should has not hole\", () => {\r\n        forEach(GLSLSenderDataFromSystem.vertexAttribHistory, (isEnable: boolean) => {\r\n            expect(isEnable).exist;\r\n            expect(isEnable).be.a(\"boolean\");\r\n        })\r\n    });\r\n}, (gl: WebGLRenderingContext, GLSLSenderDataFromSystem: any) => {\r\n    var vertexAttribHistory = GLSLSenderDataFromSystem.vertexAttribHistory;\r\n\r\n    for (let i = 0, len = vertexAttribHistory.length; i < len; i++) {\r\n        let isEnable = vertexAttribHistory[i];\r\n\r\n        if (isEnable === false || i > gl.VERTEX_ATTRIB_ARRAY_ENABLED) {\r\n            continue;\r\n        }\r\n\r\n        // vertexAttribHistory[i] = false;\r\n        gl.disableVertexAttribArray(i);\r\n    }\r\n\r\n    GLSLSenderDataFromSystem.vertexAttribHistory = [];\r\n})\r\n\r\nexport const getProgram = ensureFunc((program: WebGLProgram) => {\r\n}, (shaderIndex: number, ProgramDataFromSystem: any) => {\r\n    return ProgramDataFromSystem.programMap[shaderIndex];\r\n})\r\n\r\nexport const initData = (ProgramDataFromSystem: any) => {\r\n    ProgramDataFromSystem.programMap = createMap();\r\n}\r\n","import { use as useProgram } from \"./program/programUtils\";\r\nimport { it, requireCheckFunc } from \"../../../../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { WebGLVertexArrayObject } from \"../../../../extend/interface\";\r\nimport { isValidVal } from \"../../../../../utils/arrayUtils\";\r\nimport { VaoMap } from \"../../../../type/dataType\";\r\n\r\nexport const use = (gl: WebGLRenderingContext, shaderIndex: number, ProgramDataFromSystem: any, LocationDataFromSystem: any, GLSLSenderDataFromSystem: any) => {\r\n    return useProgram(gl, shaderIndex, ProgramDataFromSystem, LocationDataFromSystem, GLSLSenderDataFromSystem);\r\n}\r\n\r\nexport const getVao = (geometryIndex: number, vaoMap: VaoMap) => {\r\n    return vaoMap[geometryIndex];\r\n}\r\n\r\nexport const isVaoExist = (vao: WebGLVertexArrayObject) => isValidVal(vao);\r\n\r\nexport const createAndInitArrayBuffer = requireCheckFunc((gl: WebGLRenderingContext, data: Float32Array, location: number, size) => {\r\n    it(\"location should be defined\", () => {\r\n        expect(location).exist;\r\n    });\r\n}, (gl: WebGLRenderingContext, data: Float32Array, location: number, size) => {\r\n    var buffer = gl.createBuffer();\r\n\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\r\n\r\n    gl.bufferData(gl.ARRAY_BUFFER, data, gl.STATIC_DRAW);\r\n\r\n    gl.vertexAttribPointer(location, size, gl.FLOAT, false, 0, 0);\r\n\r\n    gl.enableVertexAttribArray(location);\r\n\r\n    return buffer;\r\n})\r\n\r\nexport const createAndInitIndexBuffer = (gl: WebGLRenderingContext, data: Uint16Array | Uint32Array) => {\r\n    var buffer = gl.createBuffer();\r\n\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffer);\r\n\r\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, data, gl.STATIC_DRAW);\r\n\r\n    return buffer;\r\n}\r\n\r\n","import { isSupportRenderWorkerAndSharedArrayBuffer } from \"../../device/WorkerDetectSystem\";\r\nimport {\r\n    use as useUtils\r\n} from \"../utils/worker/render_file/shader/shaderUtils\";\r\nimport { createMap } from \"../../utils/objectUtils\";\r\n\r\nexport const create = (ShaderData: any) => {\r\n    ShaderData.count += 1;\r\n}\r\n\r\nexport var use = null;\r\n\r\nif (!isSupportRenderWorkerAndSharedArrayBuffer()) {\r\n    use = useUtils;\r\n}\r\n\r\n// export const dispose = (gl: WebGLRenderingContext, shaderIndex: number, ShaderData: any) => {\r\n//\r\n//     // _disposeProgram(gl, ShaderData.programMap[shaderIndex]);\r\n//     // deleteVal(shaderIndex, ShaderData.programMap);\r\n//\r\n//\r\n//     // deleteVal(shaderIndex, LocationData.attributeLocationMap);\r\n//     // deleteVal(shaderIndex, LocationData.uniformLocationMap);\r\n//     // deleteVal(shaderIndex, ShaderData.sendAttributeConfigMap);\r\n//     // deleteVal(shaderIndex, ShaderData.sendUniformConfigMap);\r\n//     // deleteVal(shaderIndex, ShaderData.vertexAttribHistory);\r\n//     // deleteVal(shaderIndex, ShaderData.shaderMap);\r\n// }\r\n\r\n// const _disposeProgram =(gl:WebGLRenderingContext, program:WebGLProgram) => {\r\n//     gl.deleteProgram(this.glProgram);\r\n// }\r\n","import { Color } from \"../../structure/Color\";\r\nimport { it, requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { TypeArr } from \"../../renderer/type/dataType\";\r\nimport { setTypeArrayValue } from \"../../utils/typeArrayUtils\";\r\n\r\nexport const getColor3Data = (index: number, colors: Float32Array) => {\r\n    var color = Color.create(),\r\n        size = 3,\r\n        i = index * size;\r\n\r\n    color.r = colors[i];\r\n    color.g = colors[i + 1];\r\n    color.b = colors[i + 2];\r\n\r\n    return color;\r\n}\r\n\r\n\r\nexport const setColor3Data = (index: number, color: Color, colors: Float32Array) => {\r\n    var r = color.r,\r\n        g = color.g,\r\n        b = color.b,\r\n        size = 3,\r\n        index = index * size;\r\n\r\n    setTypeArrayValue(colors, index, r);\r\n    setTypeArrayValue(colors, index + 1, g);\r\n    setTypeArrayValue(colors, index + 2, b);\r\n}\r\n","export enum ETextureWrapMode {\r\n    REPEAT = \"REPEAT\",\r\n    MIRRORED_REPEAT = \"MIRRORED_REPEAT\",\r\n    CLAMP_TO_EDGE = \"CLAMP_TO_EDGE\"\r\n}\r\n\r\n","export enum ETextureFilterMode {\r\n    NEAREST = \"NEAREST\",\r\n    NEAREST_MIPMAP_MEAREST = \"NEAREST_MIPMAP_MEAREST\",\r\n    NEAREST_MIPMAP_LINEAR = \"NEAREST_MIPMAP_LINEAR\",\r\n    LINEAR = \"LINEAR\",\r\n    LINEAR_MIPMAP_NEAREST = \"LINEAR_MIPMAP_NEAREST\",\r\n    LINEAR_MIPMAP_LINEAR = \"LINEAR_MIPMAP_LINEAR\"\r\n}\r\n\r\n","export enum ETextureTarget {\r\n    TEXTURE_2D = \"TEXTURE_2D\"\r\n}\r\n\r\n","export enum EVariableType {\r\n    INT = \"int\",\r\n    FLOAT = \"float\",\r\n    FLOAT3 = \"float3\",\r\n    VEC3 = \"vec3\",\r\n    MAT3 = \"mat3\",\r\n    MAT4 = \"mat4\",\r\n    SAMPLER_2D = \"sampler2D\"\r\n}\r\n\r\n","import { getSingleSizeData } from \"../../../common/operateBufferDataUtils\";\r\nimport { ETextureWrapMode } from \"../../../../enum/ETextureWrapMode\";\r\nimport { ETextureFilterMode } from \"../../../../enum/ETextureFilterMode\";\r\nimport { ETextureFormat } from \"../../../../enum/ETextureFormat\";\r\nimport { ETextureType } from \"../../../../enum/ETextureType\";\r\nimport { deleteBySwap, isValidVal } from \"../../../../../utils/arrayUtils\";\r\nimport { DataBufferConfig } from \"../../../../../config/DataBufferConfig\";\r\nimport { setTypeArrayValue } from \"../../../../../utils/typeArrayUtils\";\r\nimport { ETextureTarget } from \"../../../../enum/ETextureTarget\";\r\nimport { clearAllBindTextureUnitCache } from \"./textureCacheUtils\";\r\nimport { UniformCacheMap, UniformLocationMap } from \"../../../../type/dataType\";\r\nimport { SendUniformDataGLSLSenderDataMap } from \"../../../../type/utilsType\";\r\nimport { EVariableType } from \"../../../../enum/EVariableType\";\r\nimport { getMaxTextureUnit } from \"../../../device/gpuDetectUtils\";\r\n\r\nexport const getBufferDataSize = () => 1;\r\n\r\nexport const createTypeArrays = (buffer: any, count: number, TextureDataFromSystem: any) => {\r\n    var offset = 0;\r\n\r\n    TextureDataFromSystem.widths = new Float32Array(buffer, offset, count * getBufferDataSize());\r\n    offset += count * Float32Array.BYTES_PER_ELEMENT * getBufferDataSize();\r\n\r\n    TextureDataFromSystem.heights = new Float32Array(buffer, offset, count * getBufferDataSize());\r\n    offset += count * Float32Array.BYTES_PER_ELEMENT * getBufferDataSize();\r\n\r\n    TextureDataFromSystem.isNeedUpdates = new Uint8Array(buffer, offset, count * getBufferDataSize());\r\n    offset += count * Uint8Array.BYTES_PER_ELEMENT * getBufferDataSize();\r\n\r\n    return offset;\r\n}\r\n\r\nexport const getSource = (textureIndex: number, TextureDataFromSystem: any) => {\r\n    return TextureDataFromSystem.sourceMap[textureIndex];\r\n}\r\n\r\nexport const getWidth = (textureIndex: number, TextureDataFromSystem: any) => {\r\n    var width = getSingleSizeData(textureIndex, TextureDataFromSystem.widths);\r\n\r\n    if (width === 0) {\r\n        let source = getSource(textureIndex, TextureDataFromSystem);\r\n\r\n        if (_isSourceValueExist(source)) {\r\n            return source.width;\r\n        }\r\n    }\r\n\r\n    return width;\r\n}\r\n\r\nexport const getHeight = (textureIndex: number, TextureDataFromSystem: any) => {\r\n    var height = getSingleSizeData(textureIndex, TextureDataFromSystem.heights);\r\n\r\n    if (height === 0) {\r\n        let source = getSource(textureIndex, TextureDataFromSystem);\r\n\r\n        if (_isSourceValueExist(source)) {\r\n            return source.height;\r\n        }\r\n    }\r\n\r\n    return height;\r\n}\r\n\r\nexport const getWrapS = (textureIndex: number, TextureData: any) => {\r\n    //todo finish: judge type array value, return enum value\r\n\r\n    return ETextureWrapMode.CLAMP_TO_EDGE;\r\n}\r\n\r\nexport const getWrapT = (textureIndex: number, TextureData: any) => {\r\n    //todo finish\r\n\r\n    return ETextureWrapMode.CLAMP_TO_EDGE;\r\n}\r\n\r\nexport const getMagFilter = (textureIndex: number, TextureData: any) => {\r\n    //todo finish\r\n\r\n    return ETextureFilterMode.LINEAR;\r\n}\r\n\r\nexport const getMinFilter = (textureIndex: number, TextureData: any) => {\r\n    //todo finish\r\n\r\n    return ETextureFilterMode.NEAREST;\r\n}\r\n\r\nexport const getFormat = (textureIndex: number, TextureData: any) => {\r\n    //todo finish\r\n\r\n    return ETextureFormat.RGBA;\r\n}\r\n\r\nexport const getType = (textureIndex: number, TextureData: any) => {\r\n    //todo finish\r\n\r\n    return ETextureType.UNSIGNED_BYTE;\r\n}\r\n\r\nexport const getFlipY = (textureIndex: number, TextureData: any) => {\r\n    //todo finish\r\n\r\n    return true;\r\n}\r\n\r\nexport const getIsNeedUpdate = (textureIndex: number, TextureDataFromSystem: any) => {\r\n    return getSingleSizeData(textureIndex, TextureDataFromSystem.isNeedUpdates);\r\n}\r\n\r\nexport const setIsNeedUpdate = (textureIndex: number, value: number, TextureDataFromSystem: any) => {\r\n    setTypeArrayValue(TextureDataFromSystem.isNeedUpdates, textureIndex, value);\r\n}\r\n\r\nexport const initTextures = (gl: WebGLRenderingContext, TextureDataFromSystem: any) => {\r\n    for (let i = 0; i < TextureDataFromSystem.index; i++) {\r\n        initTexture(gl, i, TextureDataFromSystem);\r\n    }\r\n}\r\n\r\nexport const initTexture =(gl: WebGLRenderingContext, textureIndex: number, TextureDataFromSystem: any) => {\r\n    _createWebglTexture(gl, textureIndex, TextureDataFromSystem);\r\n}\r\n\r\nconst _createWebglTexture =(gl: WebGLRenderingContext, textureIndex: number, TextureDataFromSystem: any) => {\r\n    var glTexture = _getWebglTexture(textureIndex, TextureDataFromSystem);\r\n\r\n    if (_isGLTextureExist(glTexture)) {\r\n        return;\r\n    }\r\n\r\n    TextureDataFromSystem.glTextures[textureIndex] = gl.createTexture();\r\n}\r\n\r\nconst _isGLTextureExist =(glTexture: WebGLTexture) => isValidVal(glTexture);\r\n\r\nconst _isSourceExist =(textureIndex: number, TextureDataFromSystem: any) => _isSourceValueExist(TextureDataFromSystem.sourceMap[textureIndex]);\r\n\r\nconst _isSourceValueExist =(source: any) => isValidVal(source);\r\n\r\nexport const getBufferCount = () => DataBufferConfig.textureDataBufferCount;\r\n\r\nexport const needUpdate = (textureIndex: number, TextureDataFromSystem: any) => {\r\n    return getIsNeedUpdate(textureIndex, TextureDataFromSystem) === 0;\r\n}\r\n\r\nexport const markNeedUpdate = (textureIndex, value: boolean, TextureDataFromSystem) => {\r\n    if (value === false) {\r\n        setIsNeedUpdate(textureIndex, 1, TextureDataFromSystem);\r\n    }\r\n    else {\r\n        setIsNeedUpdate(textureIndex, 0, TextureDataFromSystem);\r\n    }\r\n}\r\n\r\nexport const update = (gl: WebGLRenderingContext, textureIndex: number, setFlipY: Function, TextureDataFromSystem: any) => {\r\n    if(!_isSourceExist(textureIndex, TextureDataFromSystem)){\r\n        return;\r\n    }\r\n\r\n    let width = getWidth(textureIndex, TextureDataFromSystem),\r\n        height = getHeight(textureIndex, TextureDataFromSystem),\r\n        wrapS = getWrapS(textureIndex, TextureDataFromSystem),\r\n        wrapT = getWrapT(textureIndex, TextureDataFromSystem),\r\n        magFilter = getMagFilter(textureIndex, TextureDataFromSystem),\r\n        minFilter = getMinFilter(textureIndex, TextureDataFromSystem),\r\n        format = getFormat(textureIndex, TextureDataFromSystem),\r\n        type = getType(textureIndex, TextureDataFromSystem),\r\n        flipY = getFlipY(textureIndex, TextureDataFromSystem),\r\n        source = TextureDataFromSystem.sourceMap[textureIndex],\r\n        target = ETextureTarget.TEXTURE_2D,\r\n        isSourcePowerOfTwo = _isSourcePowerOfTwo(width, height);\r\n\r\n    setFlipY(gl, flipY);\r\n\r\n    //todo handle _needClampMaxSize\r\n    // if(_needClampMaxSize(source, width, height)){\r\n    //     this.clampToMaxSize();\r\n    //\r\n    //     isSourcePowerOfTwo = this.isSourcePowerOfTwo();\r\n    //\r\n    //     if(!isSourcePowerOfTwo){\r\n    //         Log.warn(\"texture size is not power of two after clampToMaxSize()\");\r\n    //     }\r\n    // }\r\n\r\n    _setTextureParameters(gl, gl[target], isSourcePowerOfTwo, wrapS, wrapT, magFilter, minFilter);\r\n\r\n    _allocateSourceToTexture(gl, source, format, type);\r\n\r\n    // if (this.generateMipmaps && isSourcePowerOfTwo) {\r\n    //     gl.generateMipmap(gl[this.target]);\r\n    // }\r\n\r\n    markNeedUpdate(textureIndex, false, TextureDataFromSystem);\r\n}\r\n\r\nconst _setTextureParameters =(gl: WebGLRenderingContext, textureType: any, isSourcePowerOfTwo: boolean, wrapS: ETextureWrapMode, wrapT: ETextureWrapMode, magFilter: ETextureFilterMode, minFilter: ETextureFilterMode) => {\r\n    if (isSourcePowerOfTwo) {\r\n        gl.texParameteri(textureType, gl.TEXTURE_WRAP_S, gl[wrapS]);\r\n        gl.texParameteri(textureType, gl.TEXTURE_WRAP_T, gl[wrapT]);\r\n\r\n        gl.texParameteri(textureType, gl.TEXTURE_MAG_FILTER, gl[magFilter]);\r\n        gl.texParameteri(textureType, gl.TEXTURE_MIN_FILTER, gl[minFilter]);\r\n    }\r\n    else {\r\n        gl.texParameteri(textureType, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(textureType, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n\r\n        gl.texParameteri(textureType, gl.TEXTURE_MAG_FILTER, gl[_filterFallback(magFilter)]);\r\n        gl.texParameteri(textureType, gl.TEXTURE_MIN_FILTER, gl[_filterFallback(minFilter)]);\r\n    }\r\n}\r\n\r\nconst _filterFallback =(filter: ETextureFilterMode) => {\r\n    if (filter === ETextureFilterMode.NEAREST || filter === ETextureFilterMode.NEAREST_MIPMAP_MEAREST || filter === ETextureFilterMode.NEAREST_MIPMAP_LINEAR) {\r\n        return ETextureFilterMode.NEAREST;\r\n    }\r\n\r\n    return ETextureFilterMode.LINEAR;\r\n}\r\n\r\nconst _allocateSourceToTexture =(gl: WebGLRenderingContext, source: any, format: ETextureFormat, type: ETextureType) => {\r\n    _drawNoMipmapTwoDTexture(gl, source, format, type);\r\n}\r\n\r\nconst _drawNoMipmapTwoDTexture =(gl: WebGLRenderingContext, source: any, format: ETextureFormat, type: ETextureType) => {\r\n    _drawTexture(gl, gl.TEXTURE_2D, 0, source, format, type);\r\n}\r\n\r\nconst _drawTexture =(gl: WebGLRenderingContext, glTarget: any, index: number, source: any, format: ETextureFormat, type: ETextureType) => {\r\n    gl.texImage2D(glTarget, index, gl[format], gl[format], gl[type], source);\r\n}\r\n\r\nconst _isSourcePowerOfTwo =(width: number, height: number) => {\r\n    return _isPowerOfTwo(width) && _isPowerOfTwo(height);\r\n}\r\n\r\nconst _isPowerOfTwo =(value: number) => {\r\n    return (value & (value - 1)) === 0 && value !== 0;\r\n}\r\n\r\n// const _needClampMaxSize =(source:HTMLImageElement, width:number, height:number) => {\r\n//     if(_isSourceNotExist(source)){\r\n//         return false;\r\n//     }\r\n//\r\n//     let maxSize = GPUDetector.getInstance().maxTextureSize;\r\n//\r\n//     return width > maxSize || height > maxSize;\r\n// }\r\n\r\n// const _isGLTextureExist =(textureIndex: number, TextureDataFromSystem:any) => {\r\n//     return isValidVal(TextureDataFromSystem.glTextures[textureIndex]);\r\n// }\r\n\r\nexport const bindToUnit = (gl: WebGLRenderingContext, unitIndex: number, textureIndex: number, TextureCacheDataFromSystem: any, TextureDataFromSystem: any, GPUDetectDataFromSystem: any, isCached: Function, addActiveTexture: Function) => {\r\n    var target = ETextureTarget.TEXTURE_2D;\r\n\r\n    if (isCached(unitIndex, textureIndex, TextureCacheDataFromSystem, GPUDetectDataFromSystem)) {\r\n        return;\r\n    }\r\n\r\n    addActiveTexture(unitIndex, textureIndex, TextureCacheDataFromSystem, GPUDetectDataFromSystem);\r\n\r\n    gl.activeTexture(gl[`TEXTURE${unitIndex}`]);\r\n    gl.bindTexture(gl[target], _getWebglTexture(textureIndex, TextureDataFromSystem));\r\n}\r\n\r\nexport const sendData = (gl: WebGLRenderingContext, mapCount: number, shaderIndex: number, textureIndex: number, unitIndex: number, program: WebGLProgram, glslSenderData: SendUniformDataGLSLSenderDataMap, uniformLocationMap: UniformLocationMap, uniformCacheMap: UniformCacheMap, directlySendUniformData: Function, TextureDataFromSystem: any) => {\r\n    directlySendUniformData(gl, _getUniformSamplerName(textureIndex, TextureDataFromSystem), shaderIndex, program, _getSamplerType(_getTarget()), unitIndex, glslSenderData, uniformLocationMap, uniformCacheMap);\r\n}\r\n\r\nconst _getSamplerType =(target: ETextureTarget) => {\r\n    var type = null;\r\n\r\n    switch (target) {\r\n        case ETextureTarget.TEXTURE_2D:\r\n            type = EVariableType.SAMPLER_2D;\r\n            break;\r\n        // case ETextureTarget.TEXTURE_CUBE_MAP:\r\n        //     type = EVariableType.SAMPLER_CUBE;\r\n        //     break;\r\n        default:\r\n            break;\r\n    }\r\n\r\n    return type;\r\n}\r\n\r\nconst _getTarget =() => {\r\n    return ETextureTarget.TEXTURE_2D;\r\n}\r\n\r\nconst _getUniformSamplerName =(index: number, TextureDataFromSystem: any) => {\r\n    return TextureDataFromSystem.uniformSamplerNameMap[index];\r\n}\r\n\r\nexport const disposeSourceMap = (sourceIndex: number, lastComponentIndex: number, TextureDataFromSystem: any) => {\r\n    deleteBySwap(sourceIndex, lastComponentIndex, TextureDataFromSystem.sourceMap);\r\n}\r\n\r\nexport const disposeGLTexture = (gl: WebGLRenderingContext, sourceIndex: number, lastComponentIndex: number, TextureCacheDataFromSystem: any, TextureDataFromSystem: any, GPUDetectDataFromSystem: any) => {\r\n    var glTexture = _getWebglTexture(sourceIndex, TextureDataFromSystem);\r\n\r\n    gl.deleteTexture(glTexture);\r\n    // delete glTexture;\r\n\r\n    _unBindAllUnit(gl, TextureCacheDataFromSystem, GPUDetectDataFromSystem);\r\n\r\n    deleteBySwap(sourceIndex, lastComponentIndex, TextureDataFromSystem.glTextures);\r\n}\r\n\r\nconst _unBindAllUnit =(gl: WebGLRenderingContext, TextureCacheDataFromSystem: any, GPUDetectData: any) => {\r\n    var maxTextureUnit = getMaxTextureUnit(GPUDetectData);\r\n\r\n    for (let channel = 0; channel < maxTextureUnit; channel++) {\r\n        gl.activeTexture(gl[`TEXTURE${channel}`]);\r\n        gl.bindTexture(gl.TEXTURE_2D, null);\r\n        // gl.bindTexture(gl.TEXTURE_CUBE_MAP, null);\r\n    }\r\n\r\n    clearAllBindTextureUnitCache(TextureCacheDataFromSystem);\r\n}\r\n\r\nconst _getWebglTexture =(textureIndex: number, TextureDataFromSystem: any) => {\r\n    return TextureDataFromSystem.glTextures[textureIndex];\r\n}\r\n","import {\r\n    getAlphaTestDataSize,\r\n    getColorDataSize, getOpacityDataSize,\r\n    getShaderIndexDataSize\r\n} from \"../worker/render_file/material/materialUtils\";\r\nimport { DataBufferConfig } from \"../../../config/DataBufferConfig\";\r\n\r\nexport const getMaterialBufferSize = () => {\r\n    return Float32Array.BYTES_PER_ELEMENT * (getShaderIndexDataSize() + getColorDataSize() + getOpacityDataSize() + getAlphaTestDataSize());\r\n}\r\n\r\nexport const getBasicMaterialBufferStartIndex = () => 0;\r\n\r\nexport const getLightMaterialBufferStartIndex = () => DataBufferConfig.basicMaterialDataBufferCount;\r\n\r\n","import { getColorDataSize } from \"./materialUtils\";\r\nimport { getColorArr3Data, getSingleSizeData } from \"../../../common/operateBufferDataUtils\";\r\nimport { setTypeArrayValue } from \"../../../../../utils/typeArrayUtils\";\r\nimport { getLightMaterialBufferStartIndex } from \"../../../material/bufferUtils\";\r\n\r\nexport const getShadingDataSize = () => 1;\r\n\r\nexport const getLightModelDataSize = () => 1;\r\n\r\nexport const getShininessDataSize = () => 1;\r\n\r\nexport const getMapSize = () => 1;\r\n\r\nexport const getSpecularColorArr3 = (index: number, LightMaterialDataFromSystem: any) => {\r\n    return getColorArr3Data(index, LightMaterialDataFromSystem.specularColors);\r\n}\r\n\r\nexport const getEmissionColorArr3 = (index: number, LightMaterialDataFromSystem: any) => {\r\n    return getColorArr3Data(index, LightMaterialDataFromSystem.emissionColors);\r\n}\r\n\r\nexport const getShininess = (index: number, LightMaterialDataFromSystem: any) => {\r\n    return getSingleSizeData(index, LightMaterialDataFromSystem.shininess);\r\n}\r\n\r\nexport const getShading = (index: number, LightMaterialDataFromSystem: any) => {\r\n    return getSingleSizeData(index, LightMaterialDataFromSystem.shadings);\r\n}\r\n\r\nexport const getLightModel = (index: number, LightMaterialDataFromSystem: any) => {\r\n    return getSingleSizeData(index, LightMaterialDataFromSystem.lightModels);\r\n}\r\n\r\nexport const hasDiffuseMap = (index: number, LightMaterialDataFromSystem: any) => {\r\n    return _hasMap(index, LightMaterialDataFromSystem.hasDiffuseMaps);\r\n}\r\n\r\nexport const hasSpecularMap = (index: number, LightMaterialDataFromSystem: any) => {\r\n    return _hasMap(index, LightMaterialDataFromSystem.hasSpecularMaps);\r\n}\r\n\r\nexport const markHasMap = (index: number, hasMapTypArray: Uint8Array) => {\r\n    setTypeArrayValue(hasMapTypArray, computeLightBufferIndex(index), 1);\r\n}\r\n\r\nexport const markNotHasMap = (index: number, hasMapTypArray: Uint8Array) => {\r\n    setTypeArrayValue(hasMapTypArray, computeLightBufferIndex(index), getNotHasMapValue());\r\n}\r\n\r\nexport const getNotHasMapValue = () => 0;\r\n\r\nconst _hasMap =(index: number, hasMapTypArray: Uint8Array) => {\r\n    return getSingleSizeData(index, hasMapTypArray) !== getNotHasMapValue();\r\n}\r\n\r\nexport const computeLightBufferIndex = (index: number) => index - getLightMaterialBufferStartIndex();\r\n\r\nexport const createTypeArrays = (buffer: any, offset: number, count: number, LightMaterialDataFromSystem: any) => {\r\n    LightMaterialDataFromSystem.specularColors = new Float32Array(buffer, offset, count * getColorDataSize());\r\n    offset += count * Float32Array.BYTES_PER_ELEMENT * getColorDataSize();\r\n\r\n    LightMaterialDataFromSystem.emissionColors = new Float32Array(buffer, offset, count * getColorDataSize());\r\n    offset += count * Float32Array.BYTES_PER_ELEMENT * getColorDataSize();\r\n\r\n    LightMaterialDataFromSystem.shininess = new Float32Array(buffer, offset, count * getShininessDataSize());\r\n    offset += count * Float32Array.BYTES_PER_ELEMENT * getShininessDataSize();\r\n\r\n    LightMaterialDataFromSystem.shadings = new Uint8Array(buffer, offset, count * getShadingDataSize());\r\n    offset += count * Uint8Array.BYTES_PER_ELEMENT * getShadingDataSize();\r\n\r\n    LightMaterialDataFromSystem.lightModels = new Uint8Array(buffer, offset, count * getLightModelDataSize());\r\n    offset += count * Uint8Array.BYTES_PER_ELEMENT * getLightModelDataSize();\r\n\r\n    LightMaterialDataFromSystem.hasDiffuseMaps = new Uint8Array(buffer, offset, count * getMapSize());\r\n    offset += count * Uint8Array.BYTES_PER_ELEMENT * getMapSize();\r\n\r\n    LightMaterialDataFromSystem.hasSpecularMaps = new Uint8Array(buffer, offset, count * getMapSize());\r\n    offset += count * Uint8Array.BYTES_PER_ELEMENT * getMapSize();\r\n\r\n    return offset;\r\n}\r\n\r\nexport const getClassName = () => \"LightMaterial\";\r\n","import { DataBufferConfig } from \"../../../../../config/DataBufferConfig\";\r\nimport {\r\n    getColorDataSize,\r\n    getShaderIndexDataSize\r\n} from \"./materialUtils\";\r\nimport { getLightModelDataSize, getMapSize, getShininessDataSize } from \"./lightMaterialUtils\";\r\nimport { getMaterialBufferSize } from \"../../../material/bufferUtils\";\r\n\r\nexport const getBasicMaterialBufferCount = () => {\r\n    return DataBufferConfig.basicMaterialDataBufferCount;\r\n}\r\n\r\nexport const getBasicMaterialBufferSize = () => {\r\n    return getMaterialBufferSize();\r\n}\r\n\r\nexport const getLightMaterialBufferCount = () => {\r\n    return DataBufferConfig.lightMaterialDataBufferCount;\r\n}\r\n\r\nexport const getBufferLength = () => {\r\n    return getBasicMaterialBufferCount() * getBasicMaterialBufferSize() + getLightMaterialBufferCount() * getLightMaterialBufferSize();\r\n}\r\n\r\nexport const getLightMaterialBufferSize = () => {\r\n    return getMaterialBufferSize() + Uint8Array.BYTES_PER_ELEMENT * (getShaderIndexDataSize() + getLightModelDataSize() + getMapSize() * 2) + Float32Array.BYTES_PER_ELEMENT * (getColorDataSize() * 2 + getShininessDataSize());\r\n}\r\n\r\nexport const getBufferTotalCount = () => {\r\n    return getBasicMaterialBufferCount() + getLightMaterialBufferCount();\r\n}\r\n\r\n","import { SendUniformDataGLSLSenderDataMap } from \"../../../../type/utilsType\";\r\nimport { UniformCacheMap, UniformLocationMap } from \"../../../../type/dataType\";\r\nimport { sendData as sendTextureData } from \"./textureUtils\";\r\nimport { getBufferTotalCount } from \"../material/bufferUtils\";\r\nimport { ensureFunc, it, requireCheckFunc } from \"../../../../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { forEach } from \"../../../../../utils/arrayUtils\";\r\n\r\n//todo support multi textures\r\n\r\n// export const addMapList = (materialIndex: number, mapList: Array<Texture>, MapManagerDataFromSystem:any) => {\r\n//     for(let map of mapList){\r\n//         addMap(materialIndex, map, MapManagerDataFromSystem);\r\n//     }\r\n// }\r\n\r\nexport const getTextureIndexDataSize = () => 1;\r\n\r\nexport const getTextureCountDataSize = () => 1;\r\n\r\nexport const bindAndUpdate = requireCheckFunc((gl: WebGLRenderingContext, mapCount: number, startTextureIndex: number, definedStartTextureUnitIndex:number, TextureCacheDataFromSystem: any, TextureDataFromSystem: any, MapManagerDataFromSystem: any, GPUDetectDataFromSystem: any, bindToUnit: Function, needUpdate: Function, update: Function) => {\r\n    it(\"mapCount should >= 0\", () => {\r\n        expect(mapCount).gte(0);\r\n    });\r\n    it(\"startTextureIndex should >= 0\", () => {\r\n        expect(startTextureIndex).gte(0);\r\n    });\r\n    it(\"definedStartTextureUnitIndex should >= 0\", () => {\r\n        expect(definedStartTextureUnitIndex).gte(0);\r\n    });\r\n}, (gl: WebGLRenderingContext, mapCount: number, startTextureIndex: number, definedStartTextureUnitIndex:number, TextureCacheDataFromSystem: any, TextureDataFromSystem: any, MapManagerDataFromSystem: any, GPUDetectDataFromSystem: any, bindToUnit: Function, needUpdate: Function, update: Function) => {\r\n    var textureIndices = MapManagerDataFromSystem.textureIndices;\r\n\r\n    for (let i = startTextureIndex, count = mapCount + startTextureIndex; i < count; i++) {\r\n        let textureIndex = textureIndices[i],\r\n            unitIndex = _getUnitIndex(i, startTextureIndex, definedStartTextureUnitIndex);\r\n\r\n        bindToUnit(gl, unitIndex, textureIndex, TextureCacheDataFromSystem, TextureDataFromSystem, GPUDetectDataFromSystem);\r\n\r\n        if (needUpdate(textureIndex, TextureDataFromSystem)) {\r\n            update(gl, textureIndex, TextureDataFromSystem);\r\n        }\r\n    }\r\n})\r\n\r\nexport const sendData = (gl: WebGLRenderingContext, mapCount: number, startTextureIndex: number, definedStartTextureUnitIndex:number, shaderIndex: number, program: WebGLProgram, glslSenderData: SendUniformDataGLSLSenderDataMap, uniformLocationMap: UniformLocationMap, uniformCacheMap: UniformCacheMap, directlySendUniformData: Function, TextureData: any, MapManagerData: any) => {\r\n    var textureIndices = MapManagerData.textureIndices;\r\n\r\n    for (let i = startTextureIndex, count = mapCount + startTextureIndex; i < count; i++) {\r\n        let textureIndex = textureIndices[i],\r\n            unitIndex = _getUnitIndex(i, startTextureIndex, definedStartTextureUnitIndex);\r\n\r\n        sendTextureData(gl, mapCount, shaderIndex, textureIndex, unitIndex, program, glslSenderData, uniformLocationMap, uniformCacheMap, directlySendUniformData, TextureData);\r\n    }\r\n}\r\n\r\nconst _getUnitIndex = (index:number, startTextureIndex:number, definedStartTextureUnitIndex:number) => index - startTextureIndex + definedStartTextureUnitIndex;\r\n\r\nexport const getMapCount = (materialIndex: number, MapManagerDataFromSystem: any) => {\r\n    return MapManagerDataFromSystem.textureCounts[materialIndex];\r\n}\r\n\r\n// export const initData = (TextureCacheDataFromSystem:any, TextureDataFromSystem:any, MapManagerDataFromSystem:any) => {\r\n//     initTextureDataFromSystem(TextureCacheDataFromSystem, TextureDataFromSystem);\r\n//\r\n//     // MapManagerDataFromSystem.textureMap = [];\r\n// }\r\n//\r\n// export const initMapManager = (gl: WebGLRenderingContext, materialIndex:number, initTexture:Function, MapManagerDataFromSystem: any, TextureDataFromSystem: any) => {\r\n//     forEach(_getMaterialTextures(materialIndex, MapManagerDataFromSystem), (textureIndex:number) => {\r\n//         initTexture(gl, textureIndex, TextureDataFromSystem);\r\n//     });\r\n// }\r\n\r\nexport const getMaterialTextures = (materialIndex:number, MapManagerDataFromSystem:any) => {\r\n    return MapManagerDataFromSystem.materialTextureList[materialIndex];\r\n}\r\n\r\nexport const getBufferCount = () => getBufferTotalCount() * getMaxTextureCount();\r\n\r\n/*!\r\n //todo should be GPUDetector.getInstance().maxTextureUnit!\r\n but in render worker version:\r\n because MapManagerSystem->initData use it, so render worker should send maxTextureUnit to main worker and then Main should MapManagerSystem->initData!\r\n */\r\nexport const getMaxTextureCount = () => 16;\r\n\r\nexport const createTypeArrays = (buffer: any, count: number, MapManagerDataFromSystem: any) => {\r\n    var offset = 0;\r\n\r\n    MapManagerDataFromSystem.textureIndices = new Uint32Array(buffer, offset, count * getTextureIndexDataSize());\r\n    offset += count * Uint32Array.BYTES_PER_ELEMENT * getTextureIndexDataSize();\r\n\r\n    MapManagerDataFromSystem.textureCounts = new Uint8Array(buffer, offset, count * getTextureCountDataSize());\r\n    offset += count * Uint8Array.BYTES_PER_ELEMENT * getTextureCountDataSize();\r\n\r\n    return offset;\r\n}\r\n\r\nexport const getStartTextureIndex = ensureFunc((textureIndex) => {\r\n    it(\"startTextureIndex should >= 0\", () => {\r\n        expect(textureIndex).gte(0);\r\n    });\r\n}, (materialIndex: number) => {\r\n    return getMaxTextureCount() * materialIndex;\r\n})\r\n\r\n","import { isUndefined } from \"./JudgeUtils\";\r\n\r\nexport const deleteMapVal = (key: number, map: Map<number, any>) => map.delete(key);\r\n// export const deleteMapVal = (map:Map<number, any>, key:number) => map.set(key, void 0);\r\n\r\nexport const deleteBySwap = (sourceIndex: number, targetIndex: number, map: Map<number, any>) => {\r\n    map.set(sourceIndex, map.get(targetIndex));\r\n\r\n    deleteMapVal(targetIndex, map);\r\n}\r\n\r\nexport const isNotExist = (val:any) => isUndefined(val);\r\n","import { ensureFunc, it, requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { Texture } from \"./Texture\";\r\nimport {\r\n    bindAndUpdate as bindAndUpdateUtils,\r\n    createTypeArrays,\r\n    getBufferCount,\r\n    getMapCount as getMapCountUtils,\r\n    getMaterialTextures,\r\n    getMaxTextureCount,\r\n    getStartTextureIndex\r\n} from \"../utils/worker/render_file/texture/mapManagerUtils\";\r\nimport {\r\n    bindToUnit,\r\n    initData as initTextureData,\r\n    initTexture,\r\n    initTextures,\r\n    needUpdate,\r\n    setUniformSamplerName,\r\n    update\r\n} from \"./TextureSystem\";\r\nimport { createSharedArrayBufferOrArrayBuffer } from \"../../utils/arrayBufferUtils\";\r\nimport { computeBufferLength, deleteSingleValueBySwapAndReset } from \"../../utils/typeArrayUtils\";\r\nimport { createMap, deleteBySwap } from \"../../utils/objectUtils\";\r\nimport { forEach, replaceItem } from \"../../utils/arrayUtils\";\r\nimport { TextureOffsetMap } from \"../type/dataType\";\r\nimport { isNotExist } from \"../../utils/mapUtils\";\r\n\r\nexport const initMapManagers = (gl: WebGLRenderingContext, TextureData: any) => {\r\n    initTextures(gl, TextureData);\r\n}\r\n\r\nexport const initMapManager = (gl: WebGLRenderingContext, materialIndex:number, MapManagerData: any, TextureData: any) => {\r\n    forEach(getMaterialTextures(materialIndex, MapManagerData), (textureIndex:number) => {\r\n        initTexture(gl, textureIndex, TextureData);\r\n    });\r\n}\r\n\r\nexport const setMap = ensureFunc((returnVal:any, materialIndex: number, map: Texture, uniformSamplerName: string, MapManagerData: any, TextureData: any) => {\r\n    it(\"map count shouldn't exceed max count\", () => {\r\n        expect(getMapCount(materialIndex, MapManagerData)).lte(getMaxTextureCount());\r\n    });\r\n}, (materialIndex: number, map: Texture, uniformSamplerName: string, MapManagerData: any, TextureData: any) => {\r\n    var textureIndex = map.index,\r\n        {\r\n            textureOffsetMap,\r\n            textureIndices,\r\n            textureCounts\r\n        } = MapManagerData,\r\n        count = getMapCount(materialIndex, MapManagerData),\r\n        offset = _getTextureOffset(materialIndex, uniformSamplerName, textureOffsetMap);\r\n\r\n    if(_isSetMapBefore(offset)) {\r\n        offset = count;\r\n\r\n        _setTextureOffset(materialIndex, uniformSamplerName, offset, textureOffsetMap);\r\n\r\n        textureCounts[materialIndex] = count + 1;\r\n\r\n        _addTextureToMaterialTextureList(materialIndex, textureIndex, MapManagerData);\r\n\r\n        setUniformSamplerName(textureIndex, uniformSamplerName, TextureData);\r\n    }\r\n    else{\r\n        let oldMapIndex = _getMap(materialIndex, offset, textureIndices);\r\n\r\n        _setTextureOffset(materialIndex, uniformSamplerName, offset, textureOffsetMap);\r\n\r\n        _replaceTextureInMaterialTextureList(materialIndex, oldMapIndex, textureIndex, MapManagerData);\r\n\r\n        setUniformSamplerName(textureIndex, uniformSamplerName, TextureData);\r\n    }\r\n\r\n    _setMapInTextureIndices(materialIndex, offset, textureIndex, textureIndices);\r\n})\r\n\r\nconst _setMapInTextureIndices = (materialIndex:number, offset:number, textureIndex:number, textureIndices:Uint32Array) => {\r\n    textureIndices[getStartTextureIndex(materialIndex) + offset] = textureIndex;\r\n}\r\n\r\nconst _getTextureOffset = (materialIndex:number, uniformSamplerName:string, textureOffsetMap:TextureOffsetMap) => {\r\n    var map = textureOffsetMap[materialIndex];\r\n\r\n    if(isNotExist(map)){\r\n        return void 0;\r\n    }\r\n\r\n    return map[uniformSamplerName];\r\n}\r\n\r\nconst _setTextureOffset = requireCheckFunc((materialIndex:number, uniformSamplerName:string, offset:number, textureOffsetMap:TextureOffsetMap) => {\r\n    it(\"offset should >= 0\", () => {\r\n        expect(offset).gte(0);\r\n    });\r\n}, (materialIndex:number, uniformSamplerName:string, offset:number, textureOffsetMap:TextureOffsetMap) => {\r\n    var map = textureOffsetMap[materialIndex];\r\n\r\n    if(isNotExist(map)){\r\n        let m = {};\r\n\r\n        m[uniformSamplerName] = offset;\r\n\r\n        textureOffsetMap[materialIndex] = m;\r\n\r\n        return;\r\n    }\r\n\r\n    map[uniformSamplerName] = offset;\r\n})\r\n\r\nconst _isSetMapBefore = (offset:number) => isNotExist(offset);\r\n\r\nconst _getMap = (materialIndex:number, offset:number, textureIndices:Uint32Array) => {\r\n    return textureIndices[getStartTextureIndex(materialIndex) + offset];\r\n}\r\n\r\nconst _replaceTextureInMaterialTextureList = requireCheckFunc ((materialIndex:number, oldTextureIndex:number, newTextureIndex:number, MapManagerData:any) => {\r\n    it(\"MapManagerData.materialTextureList[materialIndex] should be array\", () => {\r\n        expect(MapManagerData.materialTextureList[materialIndex]).exist;\r\n        expect(MapManagerData.materialTextureList[materialIndex]).be.a(\"array\");\r\n    });\r\n}, (materialIndex:number, oldTextureIndex:number, newTextureIndex:number, MapManagerData:any) => {\r\n    replaceItem(MapManagerData.materialTextureList[materialIndex], oldTextureIndex, newTextureIndex);\r\n})\r\n\r\nconst _addTextureToMaterialTextureList = (materialIndex:number, textureIndex:number, MapManagerData:any) => {\r\n    var map = MapManagerData.materialTextureList[materialIndex];\r\n\r\n    if(map === void 0){\r\n        map = [textureIndex];\r\n\r\n        MapManagerData.materialTextureList[materialIndex] = map;\r\n\r\n        return;\r\n    }\r\n\r\n    map.push(textureIndex);\r\n}\r\n\r\nexport const getMaterialTextureList = (MapManagerData:any) => MapManagerData.materialTextureList;\r\n\r\nexport const getMapCount = getMapCountUtils;\r\n\r\n//todo support multi textures\r\n\r\n// export const addMapList = (materialIndex: number, mapList: Array<Texture>, MapManagerData:any) => {\r\n//     for(let map of mapList){\r\n//         addMap(materialIndex, map, MapManagerData);\r\n//     }\r\n// }\r\n\r\nexport const bindAndUpdate = (gl: WebGLRenderingContext, mapCount: number, startTextureIndex: number, definedStartTextureUnitIndex:number, TextureCacheData: any, TextureData: any, MapManagerData: any, GPUDetectData: any) => {\r\n    bindAndUpdateUtils(gl, mapCount, startTextureIndex, definedStartTextureUnitIndex, TextureCacheData, TextureData, MapManagerData, GPUDetectData, bindToUnit, needUpdate, update);\r\n}\r\n\r\n/*!\r\n not dispose texture when dispose map manager(dispose material)!\r\n because different materials may use same texture, if dispose one material's texture which is shared, then will affect other materials!\r\n\r\n so need user mannually dispose texture one by one!\r\n */\r\nexport const dispose = (materialSourceIndex: number, materialLastComponentIndex: number, MapManagerData: any) => {\r\n    deleteSingleValueBySwapAndReset(materialSourceIndex, materialLastComponentIndex, MapManagerData.textureCounts, 0);\r\n\r\n    deleteBySwap(materialSourceIndex, materialLastComponentIndex, MapManagerData.materialTextureList);\r\n    deleteBySwap(materialSourceIndex, materialLastComponentIndex, MapManagerData.textureOffsetMap);\r\n}\r\n\r\nexport const initData = (TextureCacheData: any, TextureData: any, MapManagerData: any) => {\r\n    initTextureData(TextureCacheData, TextureData);\r\n\r\n    _initBufferData(MapManagerData);\r\n\r\n    MapManagerData.materialTextureList = [];\r\n    MapManagerData.textureOffsetMap = createMap();\r\n}\r\n\r\nconst _initBufferData =(MapManagerData: any) => {\r\n    var buffer: any = null,\r\n        count = getBufferCount(),\r\n        size = Uint32Array.BYTES_PER_ELEMENT + Uint8Array.BYTES_PER_ELEMENT,\r\n        offset: number = null;\r\n\r\n    buffer = createSharedArrayBufferOrArrayBuffer(computeBufferLength(count, size));\r\n\r\n    offset = createTypeArrays(buffer, count, MapManagerData);\r\n\r\n    _setDefaultTypeArrData(count, MapManagerData);\r\n\r\n    MapManagerData.buffer = buffer;\r\n}\r\n\r\nconst _setDefaultTypeArrData =(count: number, MapManagerData: any) => {\r\n}\r\n","import { Map } from \"immutable\";\r\n// import { material_config } from \"../../../webgl1/data/material_config\";\r\n// import { shaderLib_generator } from \"../../../data/shaderLib_generator\";\r\n// import { init as initShader } from \"../shader/ShaderWorkerSystem\";\r\nimport {\r\n    getAlphaTest as getAlphaTestUtils,\r\n    getOpacity as getOpacityUtils,\r\n    isTestAlpha as isTestAlphaUtils,\r\n    useShader as useShaderUtils\r\n} from \"../../../utils/worker/render_file/material/materialUtils\";\r\nimport { getColorArr3 as getColorArr3Utils } from \"../../../utils/common/operateBufferDataUtils\";\r\nimport { MaterialWorkerInitDataList } from \"../../../type/dataType\";\r\nimport { IMaterialConfig } from \"../../../data/material_config_interface\";\r\nimport { IShaderLibGenerator } from \"../../../data/shaderLib_generator_interface\";\r\n\r\nexport const initMaterial = (index: number, state: Map<any, any>, className: string, MaterialWorkerData:any) => {\r\n}\r\n\r\n// export const getShaderIndex = (materialIndex: number, MaterialWorkerData: any) => {\r\n//     return MaterialWorkerData.shaderIndices[materialIndex];\r\n// }\r\n\r\n// export const getShaderIndexFromTable = getShaderIndexFromTableUtils;\r\n\r\nexport const initNewInitedMaterials = (workerInitList: MaterialWorkerInitDataList, MaterialWorkerData:any) => {\r\n    for (let { index, className } of workerInitList) {\r\n        initMaterial(index, null, className, MaterialWorkerData);\r\n    }\r\n}\r\n\r\nexport const useShader = useShaderUtils;\r\n\r\nexport const getColorArr3 = getColorArr3Utils;\r\n\r\nexport const getOpacity = getOpacityUtils;\r\n\r\nexport const getAlphaTest = getAlphaTestUtils;\r\n\r\nexport const isTestAlpha = isTestAlphaUtils;\r\n\r\n","import { Map as MapImmutable } from \"immutable\";\r\nimport { it, requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { Color } from \"../../structure/Color\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { Material } from \"./Material\";\r\nimport { addComponentToGameObjectMap, deleteComponentBySwapArray, getComponentGameObject } from \"../ComponentSystem\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport { MaterialData } from \"./MaterialData\";\r\nimport {\r\n    deleteBySwapAndNotReset,\r\n    deleteBySwapAndReset,\r\n    deleteOneItemBySwapAndReset,\r\n    setTypeArrayValue\r\n} from \"../../utils/typeArrayUtils\";\r\nimport {\r\n    getAlphaTest as getAlphaTestUtils,\r\n    getAlphaTestDataSize,\r\n    getColorDataSize,\r\n    getOpacity as getOpacityUtils,\r\n    getOpacityDataSize,\r\n    isTestAlpha as isTestAlphaUtils,\r\n    useShader as useShaderUtils\r\n} from \"../../renderer/utils/worker/render_file/material/materialUtils\";\r\nimport { isSupportRenderWorkerAndSharedArrayBuffer } from \"../../device/WorkerDetectSystem\";\r\nimport { deleteBySwap } from \"../../utils/arrayUtils\";\r\nimport { create as createShader } from \"../../renderer/shader/ShaderSystem\";\r\nimport { getColor3Data, setColor3Data } from \"../utils/operateBufferDataUtils\";\r\nimport { dispose as disposeMapManager } from \"../../renderer/texture/MapManagerSystem\";\r\nimport { getColorArr3 as getColorArr3Utils } from \"../../renderer/worker/render_file/material/MaterialWorkerSystem\";\r\nimport { IMaterialConfig } from \"../../renderer/data/material_config_interface\";\r\nimport { IShaderLibGenerator } from \"../../renderer/data/shaderLib_generator_interface\";\r\nimport { IUIdEntity } from \"../../core/entityObject/gameObject/IUIdEntity\";\r\n\r\nexport const create = (index: number, material: Material, ShaderData: any, MaterialData: any) => {\r\n    MaterialData.materialMap[index] = material;\r\n\r\n    createShader(ShaderData);\r\n\r\n    return material;\r\n}\r\n\r\nexport const useShader = useShaderUtils;\r\n\r\nexport var initMaterial = null;\r\n\r\nif (isSupportRenderWorkerAndSharedArrayBuffer()) {\r\n    initMaterial = (index: number, state: MapImmutable<any, any>, className: string, MaterialData: any) => {\r\n        MaterialData.workerInitList.push(_buildWorkerInitData(index, className));\r\n    }\r\n\r\n    let _buildWorkerInitData = (index: number, className: string) => {\r\n        return {\r\n            index: index,\r\n            className: className\r\n        }\r\n    }\r\n}\r\nelse {\r\n    initMaterial = (index: number, state: MapImmutable<any, any>, className: string, MaterialData: any) => {\r\n    }\r\n}\r\n\r\n// const _updateShaderIndex =requireCheckFunc ((materialIndex: number, shaderIndex:number, MaterialData: any) => {\r\n//     it(\"shader should exist in map\", () => {\r\n//         expect(MaterialData.shaderMap[materialIndex]).exist;\r\n//     });\r\n// }, (materialIndex: number, shaderIndex:number, MaterialData: any) => {\r\n//     MaterialData.shaderMap[materialIndex].index = shaderIndex;\r\n// })\r\n\r\nexport var clearWorkerInitList = null;\r\n\r\nif (isSupportRenderWorkerAndSharedArrayBuffer()) {\r\n    clearWorkerInitList = (MaterialData: any) => {\r\n        MaterialData.workerInitList = [];\r\n    };\r\n}\r\nelse {\r\n    clearWorkerInitList = (MaterialData: any) => {\r\n    };\r\n}\r\n\r\nexport const hasNewInitedMaterial = (MaterialData: any) => {\r\n    return MaterialData.workerInitList.length > 0;\r\n}\r\n\r\nexport const getShaderIndex = (materialIndex: number, MaterialData: any) => {\r\n    return MaterialData.shaderIndices[materialIndex];\r\n}\r\n\r\n// export const getShaderIndexFromTable = getShaderIndexFromTableUtils;\r\n\r\nexport const getColor = (materialIndex: number, MaterialData: any) => {\r\n    return getColor3Data(materialIndex, MaterialData.colors);\r\n}\r\n\r\nexport const getColorArr3 = getColorArr3Utils;\r\n\r\nexport const setColor = (materialIndex: number, color: Color, MaterialData: any) => {\r\n    setColorData(materialIndex, color, MaterialData.colors);\r\n}\r\n\r\nexport const setColorData = (materialIndex: number, color: Color, colors: Float32Array) => {\r\n    setColor3Data(materialIndex, color, colors);\r\n}\r\n\r\nexport const getOpacity = getOpacityUtils;\r\n\r\nexport const setOpacity = requireCheckFunc((materialIndex: number, opacity: number, MaterialData: any) => {\r\n    it(\"opacity should be number\", () => {\r\n        expect(opacity).be.a(\"number\");\r\n    });\r\n    it(\"opacity should <= 1 && >= 0\", () => {\r\n        expect(opacity).lte(1);\r\n        expect(opacity).gte(0);\r\n    });\r\n}, (materialIndex: number, opacity: number, MaterialData: any) => {\r\n    var size = getOpacityDataSize(),\r\n        index = materialIndex * size;\r\n\r\n    setTypeArrayValue(MaterialData.opacities, index, opacity);\r\n})\r\n\r\nexport const getAlphaTest = getAlphaTestUtils;\r\n\r\nexport const setAlphaTest = requireCheckFunc((materialIndex: number, alphaTest: number, MaterialData: any) => {\r\n    it(\"alphaTest should be number\", () => {\r\n        expect(alphaTest).be.a(\"number\");\r\n    });\r\n    // it(\"alphaTest should <= 1 && >= 0\", () => {\r\n    //     expect(alphaTest).lte(1);\r\n    //     expect(alphaTest).gte(0);\r\n    // });\r\n}, (materialIndex: number, alphaTest: number, MaterialData: any) => {\r\n    var size = getAlphaTestDataSize(),\r\n        index = materialIndex * size;\r\n\r\n    setTypeArrayValue(MaterialData.alphaTests, index, alphaTest);\r\n})\r\n\r\nexport const addComponent = (component: Material, gameObject: GameObject, MaterialData: any) => {\r\n    addComponentToGameObjectMap(MaterialData.gameObjectMap, component.index, gameObject);\r\n}\r\n\r\nexport const disposeComponent = requireCheckFunc((sourceIndex: number, lastComponentIndex: number, MapManagerData: any, MaterialData: any) => {\r\n    _checkDisposeComponentWorker(sourceIndex);\r\n}, (sourceIndex: number, lastComponentIndex: number, MapManagerData: any, MaterialData: any) => {\r\n    var colorDataSize = getColorDataSize(),\r\n        opacityDataSize = getOpacityDataSize(),\r\n        alphaTestDataSize = getAlphaTestDataSize();\r\n\r\n    deleteBySwapAndNotReset(sourceIndex, lastComponentIndex, MaterialData.shaderIndices);\r\n\r\n    deleteBySwapAndReset(sourceIndex * colorDataSize, lastComponentIndex * colorDataSize, MaterialData.colors, colorDataSize, MaterialData.defaultColorArr);\r\n\r\n    deleteOneItemBySwapAndReset(sourceIndex * opacityDataSize, lastComponentIndex * opacityDataSize, MaterialData.opacities, MaterialData.defaultOpacity);\r\n    deleteOneItemBySwapAndReset(sourceIndex * alphaTestDataSize, lastComponentIndex * alphaTestDataSize, MaterialData.alphaTests, MaterialData.defaultAlphaTest);\r\n\r\n    deleteBySwap(sourceIndex, lastComponentIndex, MaterialData.gameObjectMap);\r\n\r\n    deleteComponentBySwapArray(sourceIndex, lastComponentIndex, MaterialData.materialMap);\r\n\r\n    disposeMapManager(sourceIndex, lastComponentIndex, MapManagerData);\r\n\r\n    //not dispose shader(for reuse shader)(if dipose shader, should change render worker)\r\n})\r\n\r\nvar _checkDisposeComponentWorker =null;\r\n\r\nif (isSupportRenderWorkerAndSharedArrayBuffer()) {\r\n    _checkDisposeComponentWorker = (materialIndex: number) => {\r\n        it(\"should not dispose the material which is inited in the same frame\", () => {\r\n            for (let { index } of MaterialData.workerInitList) {\r\n                expect(materialIndex).not.equal(index);\r\n            }\r\n        });\r\n    }\r\n}\r\nelse {\r\n    _checkDisposeComponentWorker = (index: number) => { };\r\n}\r\n\r\nexport const getGameObject = (index: number, MaterialData: any) => {\r\n    return getComponentGameObject(MaterialData.gameObjectMap, index);\r\n}\r\n\r\nexport const isTestAlpha = isTestAlphaUtils;\r\n\r\nexport const createDefaultColor = () => {\r\n    var color = Color.create();\r\n\r\n    return color.setColorByNum(\"#ffffff\");\r\n}\r\n","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport {\r\n    getGameObject\r\n} from \"./MaterialSystem\";\r\nimport { MaterialData } from \"./MaterialData\";\r\nimport { Component } from \"../Component\";\r\nimport { requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { checkComponentShouldAlive, isComponentIndexNotRemoved } from \"../ComponentSystem\";\r\n\r\n@registerClass(\"Material\")\r\nexport abstract class Material extends Component {\r\n}\r\n\r\nexport const getMaterialGameObject = requireCheckFunc((material: Material) => {\r\n    checkShouldAlive(material);\r\n}, (component: Material) => {\r\n    return getGameObject(component.index, MaterialData);\r\n})\r\n\r\nexport const checkShouldAlive = (material: Material) => {\r\n    checkComponentShouldAlive(material, null, (material: Material) => {\r\n        return isComponentIndexNotRemoved(material);\r\n    })\r\n}\r\n","import { GameObject } from \"./GameObject\";\r\nimport { Component } from \"../../../component/Component\";\r\nimport { createMap, deleteVal, isValidMapValue } from \"../../../utils/objectUtils\";\r\nimport { setParent as setThreeDTransformParent } from \"../../../component/transform/ThreeDTransformSystem\";\r\nimport { GameObjectComponentData } from \"./GameObjectData\";\r\nimport { ensureFunc, it, requireCheckFunc } from \"../../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { ThreeDTransform } from \"../../../component/transform/ThreeDTransform\";\r\nimport { isNotUndefined } from \"../../../utils/JudgeUtils\";\r\nimport { execHandle, execInitHandle } from \"../../../component/ComponentSystem\";\r\nimport { Geometry } from \"../../../component/geometry/Geometry\";\r\nimport { Material } from \"../../../component/material/Material\";\r\nimport { filter, forEach } from \"../../../utils/arrayUtils\";\r\nimport { Map as MapImmutable } from \"immutable\";\r\nimport { removeChildEntity } from \"../../../utils/entityUtils\";\r\nimport { isDisposeTooManyComponents, reAllocateGameObject } from \"../../../utils/memoryUtils\";\r\nimport { getComponentIdFromClass, getComponentIdFromComponent } from \"../../../component/ComponentComponentIdManager\";\r\nimport { IUIdEntity } from \"./IUIdEntity\";\r\nimport { MeshRenderer } from \"../../../component/renderer/MeshRenderer\";\r\nimport { create as createMeshRenderer } from \"../../../component/renderer/MeshRendererSystem\";\r\nimport { getTypeIdFromComponent } from \"../../../component/ComponentTypeIdManager\";\r\n\r\nexport const create = ensureFunc((gameObject: GameObject, transform: ThreeDTransform, GameObjectData: any) => {\r\n    it(\"componentMap should has data\", () => {\r\n        expect(_getComponentData(gameObject.uid, GameObjectData)).exist;\r\n    });\r\n}, (transform: ThreeDTransform, GameObjectData: any) => {\r\n    var gameObject: GameObject = new GameObject(),\r\n        uid = _buildUId(GameObjectData);\r\n\r\n    gameObject.uid = uid;\r\n\r\n    GameObjectData.aliveUIdArray.push(uid);\r\n\r\n    if (!transform) {\r\n        _setComponentData(uid, {}, GameObjectData);\r\n    }\r\n    else {\r\n        addComponent(gameObject, transform, GameObjectData);\r\n    }\r\n\r\n    return gameObject;\r\n})\r\n\r\nconst _buildUId = (GameObjectData: any) => {\r\n    return GameObjectData.uid++;\r\n}\r\n\r\nexport const isAlive = (entity: IUIdEntity, GameObjectData: any) => {\r\n    return isValidMapValue(_getComponentData(entity.uid, GameObjectData));\r\n}\r\n\r\nexport const isNotAlive = (entity: IUIdEntity, GameObjectData: any) => {\r\n    return !isAlive(entity, GameObjectData);\r\n}\r\n\r\nexport const initGameObject = (gameObject: GameObject, state: MapImmutable<any, any>, GameObjectData: any) => {\r\n    var uid = gameObject.uid,\r\n        componentData: GameObjectComponentData = _getComponentData(uid, GameObjectData);\r\n\r\n    for (let componentId in componentData) {\r\n        if (componentData.hasOwnProperty(componentId)) {\r\n            let component = componentData[componentId];\r\n\r\n            execInitHandle(getTypeIdFromComponent(component), component.index, state);\r\n        }\r\n    }\r\n}\r\n\r\nexport const dispose = (entity: IUIdEntity, ThreeDTransformData: any, GameObjectData: any) => {\r\n    _diposeAllDatas(entity, GameObjectData);\r\n\r\n    GameObjectData.disposeCount += 1;\r\n\r\n    if (isDisposeTooManyComponents(GameObjectData.disposeCount)) {\r\n        reAllocateGameObject(GameObjectData);\r\n\r\n        GameObjectData.disposeCount = 0;\r\n    }\r\n}\r\n\r\nconst _removeFromChildrenMap = (parentUId: number, childUId: number, GameObjectData: any) => {\r\n    removeChildEntity(getChildren(parentUId, GameObjectData), childUId);\r\n};\r\n\r\nconst _diposeAllDatas = (gameObject: GameObject, GameObjectData: any) => {\r\n    let uid = gameObject.uid,\r\n        children = getChildren(uid, GameObjectData);\r\n\r\n    _disposeAllComponents(gameObject, GameObjectData);\r\n    _disposeMapDatas(uid, GameObjectData);\r\n\r\n    if (_isChildrenExist(children)) {\r\n        forEach(children, (child: GameObject) => {\r\n            if (isNotAlive(child, GameObjectData)) {\r\n                return;\r\n            }\r\n\r\n            _diposeAllDatas(child, GameObjectData);\r\n        })\r\n    }\r\n}\r\n\r\nconst _disposeMapDatas = (uid: number, GameObjectData: any) => {\r\n    deleteVal(uid, GameObjectData.childrenMap);\r\n    // deleteVal(uid, GameObjectData.parentMap);\r\n    deleteVal(uid, GameObjectData.componentMap);\r\n}\r\n\r\nconst _disposeAllComponents = (gameObject: GameObject, GameObjectData: any) => {\r\n    var components = _getComponentData(gameObject.uid, GameObjectData);\r\n\r\n    //todo optimize?\r\n    for (let typeId in components) {\r\n        if (components.hasOwnProperty(typeId)) {\r\n            let component = components[typeId];\r\n\r\n            execHandle(component, \"disposeHandleMap\");\r\n        }\r\n    }\r\n}\r\n\r\nexport const addComponent = requireCheckFunc((gameObject: GameObject, component: Component, GameObjectData: any) => {\r\n    it(\"component should exist\", () => {\r\n        expect(component).exist;\r\n    });\r\n    it(\"should not has this type of component, please dispose it\", () => {\r\n        expect(hasComponent(gameObject, getComponentIdFromComponent(component), GameObjectData)).false;\r\n    });\r\n}, (gameObject: GameObject, component: Component, GameObjectData: any) => {\r\n    var uid = gameObject.uid,\r\n        componentId = getComponentIdFromComponent(component),\r\n        data = _getComponentData(uid, GameObjectData);\r\n\r\n    execHandle(component, \"addComponentHandleMap\", [component, gameObject]);\r\n\r\n    if (!data) {\r\n        let d = {};\r\n\r\n        d[componentId] = component;\r\n        _setComponentData(uid, d, GameObjectData);\r\n\r\n        return;\r\n    }\r\n\r\n    data[componentId] = component;\r\n})\r\n\r\nconst _removeComponent = (componentId: string, uid: number, GameObjectData: any) => {\r\n    var data = _getComponentData(uid, GameObjectData);\r\n\r\n    if (isValidMapValue(data)) {\r\n        deleteVal(componentId, data);\r\n    }\r\n}\r\n\r\n// export const removeComponent = (gameObject:GameObject, component: Component, GameObjectData:any) => {\r\n//     _removeComponent(getTypeIdFromComponent(component), gameObject, component, GameObjectData);\r\n// }\r\n\r\nexport const disposeComponent = (uid: number, component: Component, GameObjectData: any) => {\r\n    var componentId = getComponentIdFromComponent(component);\r\n\r\n    _removeComponent(componentId, uid, GameObjectData);\r\n\r\n    execHandle(component, \"disposeHandleMap\");\r\n}\r\n\r\nexport const getComponent = (uid: number, componentId: string, GameObjectData: any) => {\r\n    var data = _getComponentData(uid, GameObjectData);\r\n\r\n    if (isValidMapValue(data)) {\r\n        let component = data[componentId];\r\n\r\n        return isValidMapValue(component) ? component : null;\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\nexport const getAllComponents = (uid: number, GameObjectData: any) => {\r\n    return _getComponentData(uid, GameObjectData);\r\n}\r\n\r\nconst _getComponentData = (uid: number, GameObjectData: any) => GameObjectData.componentMap[uid];\r\n\r\nconst _setComponentData = (uid: number, data: GameObjectComponentData, GameObjectData: any) => GameObjectData.componentMap[uid] = data;\r\n\r\nexport const hasComponent = (gameObject: GameObject, componentId: string, GameObjectData: any) => {\r\n    return getComponent(gameObject.uid, componentId, GameObjectData) !== null;\r\n}\r\n\r\nexport const getTransform = (uid: number, GameObjectData: any) => {\r\n    return getComponent(uid, getComponentIdFromClass(ThreeDTransform), GameObjectData);\r\n}\r\n\r\nexport const getGeometry = (uid: number, GameObjectData: any) => {\r\n    return getComponent(uid, getComponentIdFromClass(Geometry), GameObjectData);\r\n}\r\n\r\nexport const getMaterial = (uid: number, GameObjectData: any) => {\r\n    return getComponent(uid, getComponentIdFromClass(Material), GameObjectData);\r\n}\r\n\r\nexport const getMeshRenderer = (uid: number, GameObjectData: any) => {\r\n    return getComponent(uid, getComponentIdFromClass(MeshRenderer), GameObjectData);\r\n}\r\n\r\nconst _isParentExist = (parent: GameObject) => isNotUndefined(parent);\r\n\r\nconst _isChildrenExist = (children: Array<GameObject>) => isNotUndefined(children);\r\n\r\nconst _isComponentExist = (component: Component) => component !== null;\r\n\r\nconst _isGameObjectEqual = (gameObject1: GameObject, gameObject2: GameObject) => gameObject1.uid === gameObject2.uid;\r\n\r\nexport const getParent = (uid: number, GameObjectData: any) => GameObjectData.parentMap[uid];\r\n\r\nexport const setParent = (parent: GameObject, child: GameObject, ThreeDTransformData: any, GameObjectData: any) => {\r\n    var parentUId: number = parent.uid,\r\n        childUId: number = child.uid,\r\n        transform = getTransform(parentUId, GameObjectData),\r\n        childOriginParent: GameObject = getParent(childUId, GameObjectData);\r\n\r\n    if (_isParentExist(childOriginParent)) {\r\n        removeChildWithoutDisposeMeshRenderer(childOriginParent.uid, childUId, ThreeDTransformData, GameObjectData);\r\n    }\r\n\r\n    _setParent(childUId, parent, GameObjectData);\r\n\r\n    if (_isComponentExist(transform)) {\r\n        setThreeDTransformParent(transform, getTransform(childUId, GameObjectData), ThreeDTransformData);\r\n    }\r\n\r\n    _addChild(parentUId, child, GameObjectData);\r\n}\r\n\r\nconst _setParent = (uid: number, parent: GameObject, GameObjectData: any) => {\r\n    GameObjectData.parentMap[uid] = parent;\r\n}\r\n\r\nexport const getChildren = (uid: number, GameObjectData: any) => {\r\n    return GameObjectData.childrenMap[uid];\r\n}\r\n\r\nexport const setChildren = (uid: number, children: Array<GameObject>, GameObjectData: any) => {\r\n    GameObjectData.childrenMap[uid] = children;\r\n}\r\n\r\n\r\nexport const getAliveChildren = (uid: number, GameObjectData: any) => {\r\n    return filter(getChildren(uid, GameObjectData), (gameObject: GameObject) => {\r\n        return isAlive(gameObject, GameObjectData);\r\n    })\r\n}\r\n\r\nconst _addChild = (uid: number, child: GameObject, GameObjectData: any) => {\r\n    var children = getChildren(uid, GameObjectData);\r\n\r\n    if (isValidMapValue(children)) {\r\n        children.push(child);\r\n    }\r\n    else {\r\n        setChildren(uid, [child], GameObjectData);\r\n    }\r\n}\r\n\r\nexport const addChild = requireCheckFunc((gameObject: GameObject, child: GameObject, ThreeDTransformData: any, GameObjectData: any) => {\r\n}, (gameObject: GameObject, child: GameObject, ThreeDTransformData: any, GameObjectData: any) => {\r\n    setParent(gameObject, child, ThreeDTransformData, GameObjectData);\r\n})\r\n\r\nexport const addRemovedChild = (gameObject: GameObject, child: GameObject, MeshRendererData: any, ThreeDTransformData: any, GameObjectData: any) => {\r\n    setParent(gameObject, child, ThreeDTransformData, GameObjectData);\r\n\r\n    addComponent(child, createMeshRenderer(MeshRendererData), GameObjectData);\r\n}\r\n\r\nexport const removeChild = (parentUId: number, childUId: number, ThreeDTransformData: any, GameObjectData: any) => {\r\n    var meshRenderer = getMeshRenderer(childUId, GameObjectData);\r\n\r\n    if (_isComponentExist(meshRenderer)) {\r\n        disposeComponent(childUId, getMeshRenderer(childUId, GameObjectData), GameObjectData);\r\n    }\r\n\r\n    _removeChildWithoutDisposeMeshRenderer(parentUId, childUId, ThreeDTransformData, GameObjectData);\r\n}\r\n\r\nexport const removeChildWithoutDisposeMeshRenderer = (parentUId: number, childUId: number, ThreeDTransformData: any, GameObjectData: any) => {\r\n    _removeChildWithoutDisposeMeshRenderer(parentUId, childUId, ThreeDTransformData, GameObjectData);\r\n}\r\n\r\nconst _removeChildWithoutDisposeMeshRenderer = requireCheckFunc((parentUId: number, childUId: number, ThreeDTransformData: any, GameObjectData: any) => {\r\n    it(\"child should has transform component\", () => {\r\n        expect(getTransform(childUId, GameObjectData)).exist;\r\n    });\r\n}, (parentUId: number, childUId: number, ThreeDTransformData: any, GameObjectData: any) => {\r\n    deleteVal(childUId, GameObjectData.parentMap);\r\n\r\n    setThreeDTransformParent(null, getTransform(childUId, GameObjectData), ThreeDTransformData);\r\n\r\n    _removeFromChildrenMap(parentUId, childUId, GameObjectData);\r\n})\r\n\r\nexport const hasChild = (gameObject: GameObject, child: GameObject, GameObjectData: any) => {\r\n    if (isNotAlive(gameObject, GameObjectData) || isNotAlive(child, GameObjectData)) {\r\n        return false;\r\n    }\r\n\r\n    let parent = getParent(child.uid, GameObjectData);\r\n\r\n    if (!_isParentExist(parent) || isNotAlive(parent, GameObjectData)) {\r\n        return false;\r\n    }\r\n\r\n    return _isGameObjectEqual(parent, gameObject);\r\n}\r\n\r\nexport const initData = (GameObjectData: any) => {\r\n    GameObjectData.uid = 0;\r\n\r\n    GameObjectData.componentMap = createMap();\r\n    GameObjectData.parentMap = createMap();\r\n    GameObjectData.childrenMap = createMap();\r\n\r\n    GameObjectData.disposeCount = 0;\r\n\r\n    GameObjectData.aliveUIdArray = [];\r\n}\r\n","import { getMatrix4DataSize } from \"../../../utils/typeArrayUtils\";\r\n\r\nexport const createTypeArrays = (buffer: any, DataBufferConfig: any, BasicRenderCommandBufferDataFromSystem: any) => {\r\n    var mat4Length = getMatrix4DataSize(),\r\n        count = DataBufferConfig.renderCommandBufferCount,\r\n        offset: number = 0;\r\n\r\n    BasicRenderCommandBufferDataFromSystem.mMatrices = new Float32Array(buffer, offset, count * mat4Length);\r\n    offset += count * Float32Array.BYTES_PER_ELEMENT * mat4Length;\r\n\r\n    BasicRenderCommandBufferDataFromSystem.materialIndices = new Uint32Array(buffer, offset, count);\r\n    offset += count * Uint32Array.BYTES_PER_ELEMENT;\r\n\r\n    BasicRenderCommandBufferDataFromSystem.geometryIndices = new Uint32Array(buffer, offset, count);\r\n    offset += count * Uint32Array.BYTES_PER_ELEMENT;\r\n\r\n\r\n    BasicRenderCommandBufferDataFromSystem.vMatrix = new Float32Array(buffer, offset, mat4Length);\r\n    offset += Float32Array.BYTES_PER_ELEMENT * mat4Length;\r\n\r\n    BasicRenderCommandBufferDataFromSystem.pMatrix = new Float32Array(buffer, offset, mat4Length);\r\n    offset += Float32Array.BYTES_PER_ELEMENT * mat4Length;\r\n}\r\n\r\nexport const buildRenderCommandBufferForDrawData = (count: number, materialIndices: Float32Array, geometryIndices: Float32Array, mMatrices: Float32Array) => {\r\n    return {\r\n        renderCommandBufferData: {\r\n            materialIndices: materialIndices,\r\n            geometryIndices: geometryIndices,\r\n            mMatrices: mMatrices\r\n        },\r\n        count: count\r\n    }\r\n}\r\n","import { getMatrix4DataSize, setMatrices } from \"../../../../../utils/typeArrayUtils\";\r\nimport { it, requireCheckFunc } from \"../../../../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { ClassUtils } from \"../../../../../utils/ClassUtils\";\r\nimport {\r\n    getGeometry, getMaterial,\r\n    getTransform\r\n} from \"../../../../../core/entityObject/gameObject/GameObjectSystem\";\r\nimport { getLocalToWorldMatrix, getTempLocalToWorldMatrix } from \"../../../../../component/transform/ThreeDTransformSystem\";\r\nimport { Map } from \"immutable\";\r\nimport { createTypeArrays } from \"../../../command_buffer/basicRenderComandBufferUtils\";\r\nimport { createSharedArrayBufferOrArrayBuffer } from \"../../../../../utils/arrayBufferUtils\";\r\nimport { GameObject } from \"../../../../../core/entityObject/gameObject/GameObject\";\r\n\r\nexport const createRenderCommandBufferData = requireCheckFunc((state: Map<any, any>, GlobalTempData: any, GameObjectData: any, ThreeDTransformData: any, CameraControllerData: any, CameraData: any, MaterialData: any, GeometryData: any, SceneData: any, RenderCommandBufferData: any, renderGameObjectArray: Array<GameObject>, buildRenderCommandBufferForDrawData: Function) => {\r\n    it(\"renderGameObject should be basic material gameObject\", () => {\r\n        for (let gameObject of renderGameObjectArray) {\r\n            expect(ClassUtils.getClassNameByInstance(getMaterial(gameObject.uid, GameObjectData))).equal(\"BasicMaterial\")\r\n        }\r\n    })\r\n}, (state: Map<any, any>, GlobalTempData: any, GameObjectData: any, ThreeDTransformData: any, CameraControllerData: any, CameraData: any, MaterialData: any, GeometryData: any, SceneData: any, RenderCommandBufferData: any, renderGameObjectArray: Array<GameObject>, buildRenderCommandBufferForDrawData: Function) => {\r\n    var count = renderGameObjectArray.length,\r\n        buffer: any = RenderCommandBufferData.buffer,\r\n        mMatrices = RenderCommandBufferData.mMatrices,\r\n        materialIndices = RenderCommandBufferData.materialIndices,\r\n        geometryIndices = RenderCommandBufferData.geometryIndices,\r\n        mat4Length = getMatrix4DataSize();\r\n\r\n    for (let i = 0; i < count; i++) {\r\n        let matIndex = mat4Length * i,\r\n            gameObject = renderGameObjectArray[i],\r\n            uid = gameObject.uid,\r\n            geometry = getGeometry(uid, GameObjectData),\r\n            material = getMaterial(uid, GameObjectData),\r\n            transform = getTransform(uid, GameObjectData),\r\n            materialIndex = material.index;\r\n\r\n        setMatrices(mMatrices, getLocalToWorldMatrix(transform, getTempLocalToWorldMatrix(transform, ThreeDTransformData), ThreeDTransformData), matIndex);\r\n\r\n        materialIndices[i] = materialIndex;\r\n        geometryIndices[i] = geometry.index;\r\n    }\r\n\r\n    return buildRenderCommandBufferForDrawData(count, buffer, materialIndices, geometryIndices, mMatrices);\r\n})\r\n\r\nexport const initData = (DataBufferConfig: any, RenderCommandBufferData: any) => {\r\n    var mat4Length = getMatrix4DataSize(),\r\n        size = Float32Array.BYTES_PER_ELEMENT * mat4Length + Uint32Array.BYTES_PER_ELEMENT * 2,\r\n        buffer: any = null,\r\n        count = DataBufferConfig.renderCommandBufferCount;\r\n\r\n    buffer = createSharedArrayBufferOrArrayBuffer(count * size + Float32Array.BYTES_PER_ELEMENT * (mat4Length * 2));\r\n\r\n    createTypeArrays(buffer, DataBufferConfig, RenderCommandBufferData);\r\n\r\n    RenderCommandBufferData.buffer = buffer;\r\n}\r\n","import { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport { Map } from \"immutable\";\r\nimport {\r\n    getMaterial\r\n} from \"../../core/entityObject/gameObject/GameObjectSystem\";\r\nimport { it, requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport {\r\n    buildRenderCommandBufferForDrawData\r\n} from \"../utils/command_buffer/basicRenderComandBufferUtils\";\r\nimport { ClassUtils } from \"../../utils/ClassUtils\";\r\nimport {\r\n    createRenderCommandBufferData as createRenderCommandBufferDataUtils,\r\n    initData as initDataUtils\r\n} from \"../utils/worker/logic_file/command_buffer/basicRenderComandBufferUtils\";\r\n\r\nexport const createRenderCommandBufferData = requireCheckFunc((state: Map<any, any>, GlobalTempData: any, GameObjectData: any, ThreeDTransformData: any, CameraControllerData: any, CameraData: any, MaterialData: any, GeometryData: any, SceneData: any, RenderCommandBufferData: any, renderGameObjectArray: Array<GameObject>) => {\r\n    it(\"renderGameObject should be basic material gameObject\", () => {\r\n        for (let gameObject of renderGameObjectArray) {\r\n            expect(ClassUtils.getClassNameByInstance(getMaterial(gameObject.uid, GameObjectData))).equal(\"BasicMaterial\")\r\n        }\r\n    })\r\n}, (state: Map<any, any>, GlobalTempData: any, GameObjectData: any, ThreeDTransformData: any, CameraControllerData: any, CameraData: any, MaterialData: any, GeometryData: any, SceneData: any, RenderCommandBufferData: any, renderGameObjectArray: Array<GameObject>) => {\r\n    return createRenderCommandBufferDataUtils(state, GlobalTempData, GameObjectData, ThreeDTransformData, CameraControllerData, CameraData, MaterialData, GeometryData, SceneData, RenderCommandBufferData, renderGameObjectArray, (count: number, buffer: any, materialIndices: Float32Array, geometryIndices: Float32Array, mMatrices: Float32Array) => {\r\n        return buildRenderCommandBufferForDrawData(count, materialIndices, geometryIndices, mMatrices);\r\n    });\r\n})\r\n\r\nexport const initData = initDataUtils;\r\n","import { getMatrix3DataSize, getMatrix4DataSize, getVector3DataSize } from \"../../../utils/typeArrayUtils\";\r\n\r\nexport const createTypeArrays = (buffer: any, DataBufferConfig: any, RenderCommandBufferDataFromSystem: any) => {\r\n    var mat3Length = getMatrix3DataSize(),\r\n        mat4Length = getMatrix4DataSize(),\r\n        cameraPositionLength = getVector3DataSize(),\r\n        count = DataBufferConfig.renderCommandBufferCount,\r\n        offset: number = 0;\r\n\r\n    RenderCommandBufferDataFromSystem.mMatrices = new Float32Array(buffer, offset, count * mat4Length);\r\n    offset += count * Float32Array.BYTES_PER_ELEMENT * mat4Length;\r\n\r\n    RenderCommandBufferDataFromSystem.materialIndices = new Uint32Array(buffer, offset, count);\r\n    offset += count * Uint32Array.BYTES_PER_ELEMENT;\r\n\r\n    RenderCommandBufferDataFromSystem.geometryIndices = new Uint32Array(buffer, offset, count);\r\n    offset += count * Uint32Array.BYTES_PER_ELEMENT;\r\n\r\n\r\n    RenderCommandBufferDataFromSystem.vMatrices = new Float32Array(buffer, offset, mat4Length);\r\n    offset += Float32Array.BYTES_PER_ELEMENT * mat4Length;\r\n\r\n    RenderCommandBufferDataFromSystem.pMatrices = new Float32Array(buffer, offset, mat4Length);\r\n    offset += Float32Array.BYTES_PER_ELEMENT * mat4Length;\r\n\r\n    RenderCommandBufferDataFromSystem.cameraPositions = new Float32Array(buffer, offset, cameraPositionLength);\r\n    offset += Float32Array.BYTES_PER_ELEMENT * cameraPositionLength;\r\n\r\n    RenderCommandBufferDataFromSystem.normalMatrices = new Float32Array(buffer, offset, mat3Length);\r\n    offset += Float32Array.BYTES_PER_ELEMENT * mat3Length;\r\n}\r\n\r\nexport const buildRenderCommandBufferForDrawData = (count: number, materialIndices: Float32Array, geometryIndices: Float32Array, mMatrices: Float32Array) => {\r\n    return {\r\n        renderCommandBufferData: {\r\n            materialIndices: materialIndices,\r\n            geometryIndices: geometryIndices,\r\n            mMatrices: mMatrices\r\n        },\r\n        count: count\r\n    }\r\n}\r\n","import { it, requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { createMap, deleteVal, isValidMapValue } from \"../../utils/objectUtils\";\r\nimport { addToDirtyList } from \"./CameraControllerSystem\";\r\nimport { Matrix4 } from \"../../math/Matrix4\";\r\nimport { setPMatrix } from \"./CameraSystem\";\r\n\r\nexport const updateProjectionMatrix = requireCheckFunc((index: number, PerspectiveCameraData: any, CameraData: any) => {\r\n    it(\"fovy should exist\", () => {\r\n        expect(isValidMapValue(PerspectiveCameraData.fovyMap[index])).true;\r\n    });\r\n    it(\"aspect should exist\", () => {\r\n        expect(isValidMapValue(PerspectiveCameraData.aspectMap[index])).true;\r\n    });\r\n    it(\"near should exist\", () => {\r\n        expect(isValidMapValue(CameraData.nearMap[index])).true;\r\n    });\r\n    it(\"far should exist\", () => {\r\n        expect(isValidMapValue(CameraData.farMap[index])).true;\r\n    });\r\n}, (index: number, PerspectiveCameraData: any, CameraData: any) => {\r\n    setPMatrix(index, _getOrCreatePMatrix(index, CameraData).setPerspective(PerspectiveCameraData.fovyMap[index], PerspectiveCameraData.aspectMap[index], CameraData.nearMap[index], CameraData.farMap[index]), CameraData);\r\n})\r\n\r\nconst _getOrCreatePMatrix =(index: number, CameraData: any) => {\r\n    var mat = CameraData.pMatrixMap[index];\r\n\r\n    if (isValidMapValue(mat)) {\r\n        return mat;\r\n    }\r\n\r\n    return Matrix4.create();\r\n}\r\n\r\nexport const getFovy = (index: number, PerspectiveCameraData: any) => {\r\n    return PerspectiveCameraData.fovyMap[index];\r\n}\r\n\r\nexport const setFovy = (index: number, fovy: number, PerspectiveCameraData: any, CameraControllerData: any) => {\r\n    PerspectiveCameraData.fovyMap[index] = fovy;\r\n\r\n    addToDirtyList(index, CameraControllerData);\r\n}\r\n\r\nexport const getAspect = (index: number, PerspectiveCameraData: any) => {\r\n    return PerspectiveCameraData.aspectMap[index];\r\n}\r\n\r\nexport const setAspect = (index: number, aspect: number, PerspectiveCameraData: any, CameraControllerData: any) => {\r\n    PerspectiveCameraData.aspectMap[index] = aspect;\r\n\r\n    addToDirtyList(index, CameraControllerData);\r\n}\r\n\r\nexport const dispose = (index: number, PerspectiveCameraData: any) => {\r\n    deleteVal(index, PerspectiveCameraData.fovyMap);\r\n    deleteVal(index, PerspectiveCameraData.aspectMap);\r\n}\r\n\r\nexport const initData = (PerspectiveCameraData: any) => {\r\n    PerspectiveCameraData.fovyMap = createMap();\r\n    PerspectiveCameraData.aspectMap = createMap();\r\n}\r\n","import {\r\n    dispose as disposePerspectiveCamera, initData as initDataPerspectiveCamera,\r\n    updateProjectionMatrix as updateProjectionMatrixPerspectiveCamera\r\n} from \"./PerspectiveCameraSystem\";\r\nimport { Map } from \"immutable\";\r\nimport { addToDirtyList, getGameObject } from \"./CameraControllerSystem\";\r\nimport { Matrix4 } from \"../../math/Matrix4\";\r\nimport { createMap, deleteVal } from \"../../utils/objectUtils\";\r\nimport { getTransform } from \"../../core/entityObject/gameObject/GameObjectSystem\";\r\nimport { getLocalToWorldMatrix, getTempLocalToWorldMatrix } from \"../transform/ThreeDTransformSystem\";\r\n\r\nexport const init = (state: Map<any, any>, index: number, PerspectiveCameraData: any, CameraData: any) => {\r\n    updateProjectionMatrix(index, PerspectiveCameraData, CameraData);\r\n}\r\n\r\nexport const updateProjectionMatrix = (index: number, PerspectiveCameraData: any, CameraData: any) => {\r\n    updateProjectionMatrixPerspectiveCamera(index, PerspectiveCameraData, CameraData);\r\n}\r\n\r\nexport const getWorldToCameraMatrix = (index: number, ThreeDTransformData: any, GameObjectData: any, CameraControllerData: any, CameraData: any) => {\r\n    return _getCameraToWorldMatrix(index, ThreeDTransformData, GameObjectData, CameraControllerData, CameraData).clone().invert();\r\n}\r\n\r\nconst _getCameraToWorldMatrix =(index: number, ThreeDTransformData: any, GameObjectData: any, CameraControllerData: any, CameraData: any) => {\r\n    var transform = getTransform(getGameObject(index, CameraControllerData).uid, GameObjectData);\r\n\r\n    return getLocalToWorldMatrix(transform, getTempLocalToWorldMatrix(transform, ThreeDTransformData), ThreeDTransformData);\r\n}\r\n\r\nexport const getPMatrix = (index: number, CameraData: any) => {\r\n    return CameraData.pMatrixMap[index];\r\n}\r\n\r\nexport const setPMatrix = (index: number, pMatrix: Matrix4, CameraData: any) => {\r\n    CameraData.pMatrixMap[index] = pMatrix;\r\n}\r\n\r\nexport const getNear = (index: number, CameraData: any) => {\r\n    return CameraData.nearMap[index];\r\n}\r\n\r\nexport const setNear = (index: number, near: number, CameraControllerData: any, CameraData: any) => {\r\n    CameraData.nearMap[index] = near;\r\n\r\n    addToDirtyList(index, CameraControllerData);\r\n}\r\n\r\nexport const getFar = (index: number, CameraData: any) => {\r\n    return CameraData.farMap[index];\r\n}\r\n\r\nexport const setFar = (index: number, far: number, CameraControllerData: any, CameraData: any) => {\r\n    CameraData.farMap[index] = far;\r\n\r\n    addToDirtyList(index, CameraControllerData);\r\n}\r\n\r\nexport const dispose = (index: number, PerspectiveCameraData: any, CameraData: any) => {\r\n    deleteVal(index, CameraData.nearMap);\r\n    deleteVal(index, CameraData.farMap);\r\n    deleteVal(index, CameraData.worldToCameraMatrixMap);\r\n    deleteVal(index, CameraData.pMatrixMap);\r\n\r\n    disposePerspectiveCamera(index, PerspectiveCameraData);\r\n}\r\n\r\nexport const initData = (PerspectiveCameraData: any, CameraData: any) => {\r\n    CameraData.nearMap = createMap();\r\n    CameraData.farMap = createMap();\r\n    CameraData.worldToCameraMatrixMap = createMap();\r\n    CameraData.pMatrixMap = createMap();\r\n\r\n    initDataPerspectiveCamera(PerspectiveCameraData);\r\n}\r\n\r\n","import { ComponentGameObjectMap } from \"../ComponentData\";\r\nimport { Matrix4 } from \"../../math/Matrix4\";\r\n\r\nexport class CameraControllerData {\r\n    public static index: number = null;\r\n    public static count: number = null;\r\n\r\n    public static dirtyIndexArray: Array<number> = null;\r\n    public static gameObjectMap: ComponentGameObjectMap = null;\r\n\r\n    public static worldToCameraMatrixCacheMap: WorldToCameraMatrixCacheMap = null;\r\n}\r\n\r\nexport type WorldToCameraMatrixCacheMap = {\r\n    [index: number]: Matrix4\r\n}\r\n\r\n","export class PerspectiveCameraData {\r\n    public static fovyMap: FovyMap = null;\r\n    public static aspectMap: AspectMap = null;\r\n}\r\n\r\nexport type FovyMap = {\r\n    [cameraControllerIndex: number]: number\r\n}\r\n\r\nexport type AspectMap = {\r\n    [cameraControllerIndex: number]: number\r\n}\r\n","import { Matrix4 } from \"../../math/Matrix4\";\r\n\r\nexport class CameraData {\r\n    public static nearMap: NearMap = null;\r\n    public static farMap: FarMap = null;\r\n    public static worldToCameraMatrixMap: WorldToCameraMatrixMap = null;\r\n    public static pMatrixMap: PMatrixMap = null;\r\n}\r\n\r\nexport type NearMap = {\r\n    [cameraControllerIndex: number]: number\r\n}\r\n\r\nexport type FarMap = {\r\n    [cameraControllerIndex: number]: number\r\n}\r\n\r\nexport type WorldToCameraMatrixMap = {\r\n    [cameraControllerIndex: number]: Matrix4\r\n}\r\n\r\nexport type PMatrixMap = {\r\n    [cameraControllerIndex: number]: Matrix4\r\n}\r\n","import {\r\n    addAddComponentHandle as addAddComponentHandleToMap, addComponentToGameObjectMap,\r\n    addDisposeHandle as addDisposeHandleToMap, generateComponentIndex, getComponentGameObject\r\n} from \"../ComponentSystem\";\r\nimport { checkIndexShouldEqualCount } from \"../utils/contractUtils\";\r\nimport { ensureFunc, requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport {\r\n    dispose, getPMatrix as getPMatrixCamera,\r\n    getWorldToCameraMatrix as getWorldToCameraMatrixCamera, init as initCamera, initData as initDataCamera,\r\n    updateProjectionMatrix\r\n} from \"./CameraSystem\";\r\nimport { CameraController } from \"./CameraController\";\r\nimport curry from \"wonder-lodash/curry\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport { Map } from \"immutable\";\r\nimport { removeDuplicateItems, removeItem } from \"../../utils/arrayUtils\";\r\nimport { createMap, deleteVal, isValidMapValue } from \"../../utils/objectUtils\";\r\nimport { cacheFunc } from \"../../utils/cacheUtils\";\r\nimport { Matrix4 } from \"../../math/Matrix4\";\r\nimport { CameraControllerData } from \"./CameraControllerData\";\r\nimport { PerspectiveCameraData } from \"./PerspectiveCameraData\";\r\nimport { CameraData } from \"./CameraData\";\r\nimport { IUIdEntity } from \"../../core/entityObject/gameObject/IUIdEntity\";\r\n\r\nexport const addAddComponentHandle = (_class: any) => {\r\n    addAddComponentHandleToMap(_class, addComponent);\r\n}\r\n\r\nexport const addDisposeHandle = (_class: any) => {\r\n    addDisposeHandleToMap(_class, disposeComponent);\r\n}\r\n\r\nexport const create = requireCheckFunc((CameraControllerData: any) => {\r\n    checkIndexShouldEqualCount(CameraControllerData);\r\n}, (CameraControllerData: any) => {\r\n    var controller = new CameraController(),\r\n        index = generateComponentIndex(CameraControllerData);\r\n\r\n    controller.index = index;\r\n\r\n    CameraControllerData.count += 1;\r\n\r\n    addToDirtyList(index, CameraControllerData);\r\n\r\n    return controller;\r\n})\r\n\r\nexport const addToDirtyList = ensureFunc((index: number, CameraControllerData: any) => {\r\n    // it(\"dirty index should not be duplicated\", () => {\r\n    //     expect(hasDuplicateItems(CameraControllerData.dirtyIndexArray)).false;\r\n    // });\r\n}, (index: number, CameraControllerData: any) => {\r\n    CameraControllerData.dirtyIndexArray.push(index);\r\n})\r\n\r\nexport const init = (PerspectiveCameraData: any, CameraData: any, CameraControllerData: any, state: Map<any, any>) => {\r\n    _forEachDirtyList(CameraControllerData.dirtyIndexArray, (dirtyIndex: number) => {\r\n        initCameraController(state, dirtyIndex, PerspectiveCameraData, CameraData);\r\n    });\r\n\r\n    _clearDirtyList(CameraControllerData);\r\n\r\n    return state;\r\n}\r\n\r\nexport const initCameraController = (state: Map<any, any>, index: number, PerspectiveCameraData: any, CameraData: any) => {\r\n    initCamera(state, index, PerspectiveCameraData, CameraData);\r\n}\r\n\r\nconst _forEachDirtyList =(dirtyIndexArray: Array<number>, func: (dirtyIndex: number) => void) => {\r\n    var arr = removeDuplicateItems(dirtyIndexArray);\r\n\r\n    for (let dirtyIndex of arr) {\r\n        func(dirtyIndex);\r\n    }\r\n}\r\n\r\nconst _clearDirtyList =(CameraControllerData: any) => {\r\n    CameraControllerData.dirtyIndexArray = [];\r\n}\r\n\r\nexport const update = (PerspectiveCameraData: any, CameraData: any, CameraControllerData: any, state: Map<any, any>) => {\r\n    _forEachDirtyList(CameraControllerData.dirtyIndexArray, (dirtyIndex: number) => {\r\n        updateProjectionMatrix(dirtyIndex, PerspectiveCameraData, CameraData);\r\n    });\r\n\r\n    _clearDirtyList(CameraControllerData);\r\n    _clearCache(CameraControllerData);\r\n\r\n    return state;\r\n}\r\n\r\nexport const addComponent = (component: CameraController, gameObject: GameObject) => {\r\n    addComponentToGameObjectMap(CameraControllerData.gameObjectMap, component.index, gameObject);\r\n}\r\n\r\nexport const disposeComponent = (component: CameraController) => {\r\n    var index = component.index;\r\n\r\n    deleteVal(index, CameraControllerData.gameObjectMap);\r\n    deleteVal(index, CameraControllerData.worldToCameraMatrixCacheMap);\r\n\r\n    CameraControllerData.count -= 1;\r\n\r\n    CameraControllerData.dirtyIndexArray = removeItem(CameraControllerData.dirtyIndexArray, index);\r\n\r\n    dispose(index, PerspectiveCameraData, CameraData);\r\n}\r\n\r\nexport const getGameObject = (index: number, CameraControllerData: any) => {\r\n    return getComponentGameObject(CameraControllerData.gameObjectMap, index);\r\n}\r\n\r\nexport const getWorldToCameraMatrix = cacheFunc((index: number, ThreeDTransformData: any, GameObjectData: any, CameraControllerData: any, CameraData: any) => {\r\n    return isValidMapValue(CameraControllerData.worldToCameraMatrixCacheMap[index]);\r\n}, (index: number, ThreeDTransformData: any, GameObjectData: any, CameraControllerData: any, CameraData: any) => {\r\n    return CameraControllerData.worldToCameraMatrixCacheMap[index];\r\n}, (index: number, ThreeDTransformData: any, GameObjectData: any, CameraControllerData: any, CameraData: any, worldToCamraMatrix: Matrix4, ) => {\r\n    CameraControllerData.worldToCameraMatrixCacheMap[index] = worldToCamraMatrix;\r\n}, (index: number, ThreeDTransformData: any, GameObjectData: any, CameraControllerData: any, CameraData: any) => {\r\n    return getWorldToCameraMatrixCamera(index, ThreeDTransformData, GameObjectData, CameraControllerData, CameraData);\r\n})\r\n\r\nexport const getPMatrix = (index: number, CameraData: any) => {\r\n    return getPMatrixCamera(index, CameraData);\r\n}\r\n\r\nconst _clearCache =(CameraControllerData: any) => {\r\n    CameraControllerData.worldToCameraMatrixCacheMap = {};\r\n}\r\n\r\nexport const initData = (CameraControllerData: any, PerspectiveCameraData: any, CameraData: any) => {\r\n    CameraControllerData.index = 0;\r\n    CameraControllerData.count = 0;\r\n    CameraControllerData.gameObjectMap = createMap();\r\n    CameraControllerData.dirtyIndexArray = [];\r\n    CameraControllerData.worldToCameraMatrixCacheMap = createMap();\r\n\r\n    initDataCamera(PerspectiveCameraData, CameraData);\r\n}\r\n","import { Component } from \"../Component\";\r\nimport { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { create, getGameObject } from \"./CameraControllerSystem\";\r\nimport { CameraControllerData } from \"./CameraControllerData\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport { IUIdEntity } from \"../../core/entityObject/gameObject/IUIdEntity\";\r\n\r\n@registerClass(\"CameraController\")\r\nexport class CameraController extends Component {\r\n}\r\n\r\nexport const createCameraController = () => {\r\n    return create(CameraControllerData);\r\n}\r\n\r\nexport const getCameraControllerGameObject = (component: CameraController) => {\r\n    return getGameObject(component.index, CameraControllerData);\r\n}\r\n","import {\r\n    create as createGameObject, addChild as addGameObject, removeChild as removeGameObject,\r\n    hasComponent\r\n} from \"../gameObject/GameObjectSystem\";\r\nimport { GameObject } from \"../gameObject/GameObject\";\r\nimport { CameraController } from \"../../../component/camera/CameraController\";\r\nimport { Scene } from \"./Scene\";\r\nimport { ensureFunc, it } from \"../../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { getComponentIdFromClass } from \"../../../component/ComponentComponentIdManager\";\r\n\r\nexport const create = (GameObjectData: any) => {\r\n    return createGameObject(null, GameObjectData);\r\n}\r\n\r\nexport const addChild = (scene: Scene, child: GameObject, ThreeDTransformData: any, GameObjectData: any, SceneData: any) => {\r\n    if (_isCamera(child, GameObjectData)) {\r\n        SceneData.cameraArray.push(child);\r\n    }\r\n\r\n    addGameObject(scene, child, ThreeDTransformData, GameObjectData);\r\n}\r\n\r\nexport const removeChild = (parentUId:number, childUId: number, ThreeDTransformData: any, GameObjectData: any) => {\r\n    removeGameObject(parentUId, childUId, ThreeDTransformData, GameObjectData);\r\n}\r\n\r\nconst _isCamera =(gameObject: GameObject, GameObjectData: any) => {\r\n    return hasComponent(gameObject, getComponentIdFromClass(CameraController), GameObjectData);\r\n}\r\n\r\nexport const getCurrentCamera = ensureFunc((camera: GameObject, SceneData: any) => {\r\n    it(\"current camera should exist\", () => {\r\n        expect(camera).exist;\r\n    });\r\n}, (SceneData: any) => {\r\n    return SceneData.cameraArray[0];\r\n})\r\n\r\nexport const initData = (SceneData: any) => {\r\n    SceneData.cameraArray = [];\r\n}\r\n","import {\r\n    getMatrix3DataSize, getMatrix4DataSize, getVector3DataSize, setMatrices, setMatrices3,\r\n    setVectors\r\n} from \"../../../../../utils/typeArrayUtils\";\r\nimport { it, requireCheckFunc } from \"../../../../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { ClassUtils } from \"../../../../../utils/ClassUtils\";\r\nimport {\r\n    getComponent, getGeometry, getMaterial,\r\n    getTransform\r\n} from \"../../../../../core/entityObject/gameObject/GameObjectSystem\";\r\nimport { getCurrentCamera } from \"../../../../../core/entityObject/scene/SceneSystem\";\r\nimport { getComponentIdFromClass } from \"../../../../../component/ComponentComponentIdManager\";\r\nimport { getPMatrix, getWorldToCameraMatrix } from \"../../../../../component/camera/CameraControllerSystem\";\r\nimport {\r\n    getLocalToWorldMatrix, getNormalMatrix, getPosition,\r\n    getTempLocalToWorldMatrix\r\n} from \"../../../../../component/transform/ThreeDTransformSystem\";\r\nimport { CameraController } from \"../../../../../component/camera/CameraController\";\r\nimport { Map } from \"immutable\";\r\nimport { createSharedArrayBufferOrArrayBuffer } from \"../../../../../utils/arrayBufferUtils\";\r\nimport { createTypeArrays } from \"../../../command_buffer/lightRenderComandBufferUtils\";\r\nimport { GameObject } from \"../../../../../core/entityObject/gameObject/GameObject\";\r\n\r\nexport const createRenderCommandBufferData = requireCheckFunc((state: Map<any, any>, GlobalTempData: any, GameObjectData: any, ThreeDTransformData: any, CameraControllerData: any, CameraData: any, MaterialData: any, GeometryData: any, SceneData: any, RenderCommandBufferData: any, renderGameObjectArray: Array<GameObject>, buildRenderCommandBufferForDrawData: Function) => {\r\n    it(\"renderGameObject should be light material gameObject\", () => {\r\n        for (let gameObject of renderGameObjectArray) {\r\n            expect(ClassUtils.getClassNameByInstance(getMaterial(gameObject.uid, GameObjectData))).equal(\"LightMaterial\")\r\n        }\r\n    })\r\n}, (state: Map<any, any>, GlobalTempData: any, GameObjectData: any, ThreeDTransformData: any, CameraControllerData: any, CameraData: any, MaterialData: any, GeometryData: any, SceneData: any, RenderCommandBufferData: any, renderGameObjectArray: Array<GameObject>, buildRenderCommandBufferForDrawData: Function) => {\r\n    var count = renderGameObjectArray.length,\r\n        buffer: any = RenderCommandBufferData.buffer,\r\n        mMatrices = RenderCommandBufferData.mMatrices,\r\n        vMatrices = RenderCommandBufferData.vMatrices,\r\n        pMatrices = RenderCommandBufferData.pMatrices,\r\n        cameraPositions = RenderCommandBufferData.cameraPositions,\r\n        normalMatrices = RenderCommandBufferData.normalMatrices,\r\n        materialIndices = RenderCommandBufferData.materialIndices,\r\n        geometryIndices = RenderCommandBufferData.geometryIndices,\r\n        currentCameraUId = getCurrentCamera(SceneData).uid,\r\n        currentCameraComponent = getComponent(currentCameraUId, getComponentIdFromClass(CameraController), GameObjectData),\r\n        currentCameraIndex = currentCameraComponent.index,\r\n        currentCameraTransform = getTransform(currentCameraUId, GameObjectData),\r\n        mat4Length = getMatrix4DataSize();\r\n\r\n    setMatrices(vMatrices, getWorldToCameraMatrix(currentCameraIndex, ThreeDTransformData, GameObjectData, CameraControllerData, CameraData), 0);\r\n    setMatrices(pMatrices, getPMatrix(currentCameraIndex, CameraData), 0);\r\n    setVectors(cameraPositions, getPosition(currentCameraTransform, ThreeDTransformData), 0);\r\n    setMatrices3(normalMatrices, getNormalMatrix(currentCameraTransform, GlobalTempData, ThreeDTransformData), 0);\r\n\r\n    for (let i = 0; i < count; i++) {\r\n        let matIndex = mat4Length * i,\r\n            gameObject = renderGameObjectArray[i],\r\n            uid = gameObject.uid,\r\n            geometry = getGeometry(uid, GameObjectData),\r\n            material = getMaterial(uid, GameObjectData),\r\n            transform = getTransform(uid, GameObjectData),\r\n            materialIndex = material.index;\r\n\r\n        setMatrices(mMatrices, getLocalToWorldMatrix(transform, getTempLocalToWorldMatrix(transform, ThreeDTransformData), ThreeDTransformData), matIndex);\r\n\r\n        materialIndices[i] = materialIndex;\r\n        geometryIndices[i] = geometry.index;\r\n    }\r\n\r\n    return buildRenderCommandBufferForDrawData(count, buffer, materialIndices, geometryIndices, mMatrices, vMatrices, pMatrices, cameraPositions, normalMatrices);\r\n})\r\n\r\nexport const initData = (DataBufferConfig: any, RenderCommandBufferData: any) => {\r\n    var mat3Length = getMatrix3DataSize(),\r\n        mat4Length = getMatrix4DataSize(),\r\n        cameraPositionLength = getVector3DataSize(),\r\n        size = Float32Array.BYTES_PER_ELEMENT * mat4Length + Uint32Array.BYTES_PER_ELEMENT * 2,\r\n        buffer: any = null,\r\n        count = DataBufferConfig.renderCommandBufferCount;\r\n\r\n    buffer = createSharedArrayBufferOrArrayBuffer(count * size + Float32Array.BYTES_PER_ELEMENT * (mat3Length + mat4Length * 2 + cameraPositionLength));\r\n\r\n    createTypeArrays(buffer, DataBufferConfig, RenderCommandBufferData);\r\n\r\n    RenderCommandBufferData.buffer = buffer;\r\n}\r\n","import { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport curry from \"wonder-lodash/curry\";\r\nimport { Map } from \"immutable\";\r\nimport {\r\n    getMaterial\r\n} from \"../../core/entityObject/gameObject/GameObjectSystem\";\r\nimport { it, requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport {\r\n    buildRenderCommandBufferForDrawData\r\n} from \"../utils/command_buffer/lightRenderComandBufferUtils\";\r\nimport { ClassUtils } from \"../../utils/ClassUtils\";\r\nimport {\r\n    createRenderCommandBufferData as createRenderCommandBufferDataUtils,\r\n    initData as initDataUtils\r\n} from \"../utils/worker/logic_file/command_buffer/lightRenderComandBufferUtils\";\r\n\r\nexport const createRenderCommandBufferData = curry(requireCheckFunc((state: Map<any, any>, GlobalTempData: any, GameObjectData: any, ThreeDTransformData: any, CameraControllerData: any, CameraData: any, MaterialData: any, GeometryData: any, SceneData: any, RenderCommandBufferData: any, renderGameObjectArray: Array<GameObject>) => {\r\n    it(\"renderGameObject should be light material gameObject\", () => {\r\n        for (let gameObject of renderGameObjectArray) {\r\n            expect(ClassUtils.getClassNameByInstance(getMaterial(gameObject.uid, GameObjectData))).equal(\"LightMaterial\")\r\n        }\r\n    })\r\n}, (state: Map<any, any>, GlobalTempData: any, GameObjectData: any, ThreeDTransformData: any, CameraControllerData: any, CameraData: any, MaterialData: any, GeometryData: any, SceneData: any, RenderCommandBufferData: any, renderGameObjectArray: Array<GameObject>) => {\r\n    return createRenderCommandBufferDataUtils(state, GlobalTempData, GameObjectData, ThreeDTransformData, CameraControllerData, CameraData, MaterialData, GeometryData, SceneData, RenderCommandBufferData, renderGameObjectArray, (count: number, buffer: any, materialIndices: Float32Array, geometryIndices: Float32Array, mMatrices: Float32Array) => {\r\n        return buildRenderCommandBufferForDrawData(count, materialIndices, geometryIndices, mMatrices);\r\n    })\r\n}), 11)\r\n\r\nexport const initData = initDataUtils;\r\n","import { DataBufferConfig } from \"../../../../../config/DataBufferConfig\";\r\nimport { it, requireCheckFunc } from \"../../../../../definition/typescript/decorator/contract\";\r\nimport { Map } from \"immutable\";\r\nimport { GameObject } from \"../../../../../core/entityObject/gameObject/GameObject\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { getComponent, getMaterial, getTransform } from \"../../../../../core/entityObject/gameObject/GameObjectSystem\";\r\nimport { ClassUtils } from \"../../../../../utils/ClassUtils\";\r\nimport { initData as initBasicRenderComandBufferData } from \"./basicRenderComandBufferUtils\";\r\nimport { initData as initLightRenderComandBufferData } from \"./lightRenderComandBufferUtils\";\r\nimport { getCurrentCamera } from \"../../../../../core/entityObject/scene/SceneSystem\";\r\nimport { getComponentIdFromClass } from \"../../../../../component/ComponentComponentIdManager\";\r\nimport { CameraController } from \"../../../../../component/camera/CameraController\";\r\nimport { getPMatrix, getWorldToCameraMatrix } from \"../../../../../component/camera/CameraControllerSystem\";\r\nimport { getNormalMatrix, getPosition } from \"../../../../../component/transform/ThreeDTransformSystem\";\r\n\r\nexport const createRenderCommandBufferData = requireCheckFunc((state: Map<any, any>, createBasicRenderCommandBufferData: Function, createLightRenderCommandBufferData: Function, GlobalTempData: any, GameObjectData: any, ThreeDTransformData: any, CameraControllerData: any, CameraData: any, MaterialData: any, GeometryData: any, SceneData: any, BasicRenderCommandBufferData: any, LightRenderCommandBufferData: any, renderGameObjectArray: Array<GameObject>) => {\r\n    it(\"renderGameObjectArray.length should not exceed RenderCommandBufferData->buffer's count\", () => {\r\n        expect(renderGameObjectArray.length).lte(DataBufferConfig.renderCommandBufferCount)\r\n    })\r\n}, (state: Map<any, any>, createBasicRenderCommandBufferData: Function, createLightRenderCommandBufferData: Function, GlobalTempData: any, GameObjectData: any, ThreeDTransformData: any, CameraControllerData: any, CameraData: any, MaterialData: any, GeometryData: any, SceneData: any, BasicRenderCommandBufferData: any, LightRenderCommandBufferData: any, renderGameObjectArray: Array<GameObject>) => {\r\n    var basicMaterialGameObjectArr: Array<GameObject> = [],\r\n        lightMaterialGameObjectArr: Array<GameObject> = [],\r\n        vMatrix: Float32Array = null,\r\n        pMatrix: Float32Array = null,\r\n        cameraPosition: Float32Array = null,\r\n        normalMatrix: Float32Array = null,\r\n        currentCameraUId = getCurrentCamera(SceneData).uid,\r\n        currentCameraComponent = getComponent(currentCameraUId, getComponentIdFromClass(CameraController), GameObjectData),\r\n        currentCameraIndex = currentCameraComponent.index,\r\n        currentCameraTransform = getTransform(currentCameraUId, GameObjectData);\r\n\r\n    vMatrix = getWorldToCameraMatrix(currentCameraIndex, ThreeDTransformData, GameObjectData, CameraControllerData, CameraData).values;\r\n    pMatrix = getPMatrix(currentCameraIndex, CameraData).values;\r\n    cameraPosition = getPosition(currentCameraTransform, ThreeDTransformData).values;\r\n    normalMatrix = getNormalMatrix(currentCameraTransform, GlobalTempData, ThreeDTransformData).values;\r\n\r\n    for (let gameObject of renderGameObjectArray) {\r\n        let material = getMaterial(gameObject.uid, GameObjectData);\r\n\r\n        if (ClassUtils.getClassNameByInstance(material) === \"BasicMaterial\") {\r\n            basicMaterialGameObjectArr.push(gameObject);\r\n        }\r\n        else {\r\n            lightMaterialGameObjectArr.push(gameObject);\r\n        }\r\n    }\r\n\r\n    return {\r\n        cameraData: {\r\n            vMatrix: vMatrix,\r\n            pMatrix: pMatrix,\r\n            cameraPosition: cameraPosition,\r\n            normalMatrix: normalMatrix\r\n        },\r\n        basicData: createBasicRenderCommandBufferData(state, GlobalTempData, GameObjectData, ThreeDTransformData, CameraControllerData, CameraData, MaterialData, GeometryData, SceneData, BasicRenderCommandBufferData, basicMaterialGameObjectArr),\r\n        lightData: createLightRenderCommandBufferData(state, GlobalTempData, GameObjectData, ThreeDTransformData, CameraControllerData, CameraData, MaterialData, GeometryData, SceneData, LightRenderCommandBufferData, lightMaterialGameObjectArr)\r\n    }\r\n});\r\n\r\nexport const initData = (DataBufferConfig: any, BasicRenderCommandBufferData: any, LightRenderCommandBufferData: any) => {\r\n    initBasicRenderComandBufferData(DataBufferConfig, BasicRenderCommandBufferData);\r\n    initLightRenderComandBufferData(DataBufferConfig, LightRenderCommandBufferData);\r\n}\r\n","import { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport curry from \"wonder-lodash/curry\";\r\nimport { Map } from \"immutable\";\r\nimport {\r\n    createRenderCommandBufferData as createBasicRenderCommandBufferData,\r\n    initData as initBasicRenderCommandBufferSystemData\r\n} from \"./BasicRenderCommandBufferSystem\";\r\nimport {\r\n    createRenderCommandBufferData as createLightRenderCommandBufferData,\r\n    initData as initLightRenderCommandBufferSystemData\r\n} from \"./LightRenderCommandBufferSystem\";\r\nimport {\r\n    createRenderCommandBufferData as createRenderCommandBufferDataUtils,\r\n    initData as initDataUtils\r\n} from \"../utils/worker/logic_file/command_buffer/renderComandBufferUtils\";\r\n\r\nexport const createRenderCommandBufferData = curry((state: Map<any, any>, GlobalTempData: any, GameObjectData: any, ThreeDTransformData: any, CameraControllerData: any, CameraData: any, MaterialData: any, GeometryData: any, SceneData: any, BasicRenderCommandBufferData: any, LightRenderCommandBufferData: any, renderGameObjectArray: Array<GameObject>) => {\r\n    return createRenderCommandBufferDataUtils(state, createBasicRenderCommandBufferData, createLightRenderCommandBufferData, GlobalTempData, GameObjectData, ThreeDTransformData, CameraControllerData, CameraData, MaterialData, GeometryData, SceneData, BasicRenderCommandBufferData, LightRenderCommandBufferData, renderGameObjectArray);\r\n}, 12)\r\n\r\nexport const initData = initDataUtils;\r\n","export enum EWorkerOperateType {\r\n    INIT_CONFIG,\r\n    INIT_DATA,\r\n    INIT_GL,\r\n    INIT_VIEWPORT,\r\n    INIT_CLEARCOLOR,\r\n    INIT_MATERIAL_GEOMETRY_LIGHT_TEXTURE,\r\n    DRAW\r\n}\r\n","export enum EGeometryWorkerDataOperateType {\r\n    ADD,\r\n    RESET\r\n}","import { getRenderWorkerFilePath, isSupportRenderWorkerAndSharedArrayBuffer } from \"../device/WorkerDetectSystem\";\r\n\r\nexport const getRenderWorker = (WorkerInstanceData: any) => {\r\n    return WorkerInstanceData.renderWorker;\r\n}\r\n\r\nexport const setRenderWorker = (worker: Worker, WorkerInstanceData: any) => {\r\n    WorkerInstanceData.renderWorker = worker;\r\n}\r\n\r\nexport const createWorker = (workerFilePath: string) => {\r\n    return new Worker(workerFilePath);\r\n}\r\n\r\nexport var initWorkInstances = null;\r\n\r\nif (isSupportRenderWorkerAndSharedArrayBuffer()) {\r\n    initWorkInstances = (WorkerInstanceData) => {\r\n        setRenderWorker(createWorker(getRenderWorkerFilePath()), WorkerInstanceData);\r\n    }\r\n}\r\nelse {\r\n    initWorkInstances = (WorkerInstanceData) => {\r\n    }\r\n}\r\n","import { Component } from \"../Component\";\r\nimport { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { checkComponentShouldAlive, isComponentIndexNotRemoved } from \"../ComponentSystem\";\r\n\r\n@registerClass(\"Light\")\r\nexport abstract class Light extends Component {\r\n}\r\n\r\nexport const checkLightShouldAlive = (component: Light) => {\r\n    checkComponentShouldAlive(component, null, (component: Light) => {\r\n        return isComponentIndexNotRemoved(component);\r\n    })\r\n}\r\n","export const getColorDataSize = () => 3;\r\n\r\nexport const getDirtyDataSize = () => 1;\r\n\r\nexport const isDirty = (value) => value === 0;\r\n\r\nexport const cleanDirty = (index: number, isDirtys: Uint8Array) => {\r\n    isDirtys[index] = 1;\r\n}\r\n\r\n","import { Color } from \"../../structure/Color\";\r\nimport { deleteBySwap } from \"../../utils/arrayUtils\";\r\nimport { getTransform } from \"../../core/entityObject/gameObject/GameObjectSystem\";\r\nimport { getPosition as getThreeDTransformPosition } from \"../transform/ThreeDTransformSystem\";\r\nimport {\r\n    addComponentToGameObjectMap, deleteComponentBySwapArray, generateComponentIndex, getComponentGameObject\r\n} from \"../ComponentSystem\";\r\nimport { ensureFunc, it, requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { Light } from \"./Light\";\r\nimport { checkIndexShouldEqualCount } from \"../utils/contractUtils\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport { setColor3Data } from \"../utils/operateBufferDataUtils\";\r\nimport { IUIdEntity } from \"../../core/entityObject/gameObject/IUIdEntity\";\r\nimport { deleteBySwapAndReset } from \"../../utils/typeArrayUtils\";\r\nimport { getColorDataSize } from \"../../renderer/utils/worker/render_file/light/specifyLightUtils\";\r\nimport { registerEvent } from \"../../event/EventManagerSystem\";\r\nimport { Map } from \"immutable\";\r\n\r\nexport const create = requireCheckFunc((light: Light, SpecifyLightData: any) => {\r\n    checkIndexShouldEqualCount(SpecifyLightData);\r\n}, (light: Light, SpecifyLightData: any) => {\r\n    var index = generateComponentIndex(SpecifyLightData);\r\n\r\n    light.index = index;\r\n\r\n    SpecifyLightData.count += 1;\r\n\r\n    SpecifyLightData.lightMap[index] = light;\r\n\r\n    return light;\r\n})\r\n\r\nexport const addComponent = (component: Light, gameObject: GameObject, SpecifyLightData: any) => {\r\n    addComponentToGameObjectMap(SpecifyLightData.gameObjectMap, component.index, gameObject);\r\n}\r\n\r\n// export const getColorArr3 = (index: number, SpecifyLightData: any) => {\r\n//     return SpecifyLightData.renderDataMap[index].colorArr;\r\n// }\r\n\r\nexport const setColor = (index: number, color: Color, colors: Float32Array) => {\r\n    setColor3Data(index, color, colors);\r\n}\r\n\r\nexport const disposeComponent = ensureFunc((lastComponentIndex: number, sourceIndex: number, SpecifyLightData: any) => {\r\n    checkIndexShouldEqualCount(SpecifyLightData);\r\n}, (sourceIndex: number, SpecifyLightData: any) => {\r\n    var colorDataSize = getColorDataSize(),\r\n        lastComponentIndex: number = null;\r\n\r\n    SpecifyLightData.count -= 1;\r\n    SpecifyLightData.index -= 1;\r\n\r\n    lastComponentIndex = SpecifyLightData.count;\r\n\r\n    deleteBySwap(sourceIndex, lastComponentIndex, SpecifyLightData.gameObjectMap);\r\n\r\n    deleteComponentBySwapArray(sourceIndex, lastComponentIndex, SpecifyLightData.lightMap);\r\n\r\n    deleteBySwapAndReset(sourceIndex * colorDataSize, lastComponentIndex * colorDataSize, SpecifyLightData.colors, colorDataSize, SpecifyLightData.defaultColorArr);\r\n\r\n    return lastComponentIndex;\r\n})\r\n\r\nexport const initData = (buffer, SpecifyLightData: any) => {\r\n    SpecifyLightData.index = 0;\r\n    SpecifyLightData.count = 0;\r\n\r\n    SpecifyLightData.lightMap = [];\r\n    SpecifyLightData.gameObjectMap = [];\r\n\r\n    SpecifyLightData.defaultColorArr = createDefaultColor().toArray3();\r\n    SpecifyLightData.defaultDirty = 0;\r\n\r\n    SpecifyLightData.buffer = buffer;\r\n}\r\n\r\nexport const createDefaultColor = () => {\r\n    return Color.create().setColorByNum(\"#ffffff\");\r\n}\r\n\r\nexport const getPosition = (index: number, ThreeDTransformData: any, GameObjectData: any, SpecifyLightData: any) => {\r\n    return getThreeDTransformPosition(getTransform(getGameObject(index, SpecifyLightData).uid, GameObjectData), ThreeDTransformData);\r\n}\r\n\r\nexport const getGameObject = (index: number, SpecifyLightData: any) => {\r\n    return getComponentGameObject(SpecifyLightData.gameObjectMap, index);\r\n}\r\n\r\nexport const markDirty = (index: number, isDirtys: Uint8Array) => {\r\n    isDirtys[index] = 0;\r\n}\r\n\r\nexport const bindChangePositionEvent = (SpecifyLightData: any, state: Map<any, any>) => {\r\n    var eventName = \"changePosition\";\r\n\r\n    for (let i = 0, count = SpecifyLightData.count; i < count; i++) {\r\n        const _markPositionDirty =() => {\r\n            markDirty(i, SpecifyLightData.isPositionDirtys);\r\n        }\r\n\r\n        registerEvent(eventName, _markPositionDirty);\r\n    }\r\n\r\n    return state;\r\n}\r\n","import { IUIdEntity } from \"../../core/entityObject/gameObject/IUIdEntity\";\r\nimport { Component } from \"../Component\";\r\n\r\nexport class SpecifyLightData {\r\n    public static index: number = null;\r\n    public static count: number = null;\r\n\r\n    public static buffer: any = null;\r\n\r\n    public static colors: Float32Array = null;\r\n    public static isColorDirtys: Uint8Array = null;\r\n\r\n    public static gameObjectMap: Array<IUIdEntity> = null;\r\n    public static lightMap: Array<Component> = null;\r\n\r\n    public static defaultColorArr: Array<number> = null;\r\n    public static defaultDirty: number = null;\r\n}\r\n\r\n","import { SpecifyLightData } from \"./SpecifyLightData\";\r\nimport { DirectionLightGLSLDataStructure } from \"../../renderer/type/dataType\";\r\n\r\nexport abstract class DirectionLightData extends SpecifyLightData {\r\n    public static intensities: Float32Array = null;\r\n    public static isPositionDirtys: Uint8Array = null;\r\n    public static isIntensityDirtys: Uint8Array = null;\r\n\r\n    public static defaultIntensity: number = null;\r\n}\r\n","import { DirectionLightData } from \"../../../component/light/DirectionLightData\";\r\n\r\nexport class WebGL2DirectionLightData extends DirectionLightData {\r\n}\r\n","import { DirectionLightGLSLDataStructure } from \"../../type/dataType\";\r\nimport { DirectionLightData } from \"../../../component/light/DirectionLightData\";\r\n\r\nexport class WebGL1DirectionLightData extends DirectionLightData {\r\n    public static lightGLSLDataStructureMemberNameArr: Array<DirectionLightGLSLDataStructure> = null;\r\n}\r\n","import { EWebGLVersion } from \"../enum/EWebGLVersion\";\r\n\r\nexport class WebGLDetectData {\r\n    public static version: EWebGLVersion = null;\r\n}\r\n\r\n","import { getOnlyWebgl1Context, getOnlyWebgl2Context } from \"../../structure/ViewSystem\";\r\nimport { DomQuery } from \"wonder-commonlib/dist/es2015/utils/DomQuery\";\r\nimport { EWebGLVersion } from \"../enum/EWebGLVersion\";\r\nimport { WebGLDetectData } from \"./WebGLDetectData\";\r\nimport { root } from \"../../definition/Variable\";\r\nimport { isWebgl1 as isWebgl1Utils, isWebgl2 as isWebgl2Utils } from \"../utils/worker/render_file/device/webglDetectUtils\";\r\n\r\nexport const detect = (WebGLDetectData: any) => {\r\n    /*!\r\n     for unit test\r\n     */\r\n    if (typeof root.webglVersion !== \"undefined\") {\r\n        if (root.webglVersion === 1) {\r\n            WebGLDetectData.version = EWebGLVersion.WEBGL1;\r\n        }\r\n        else {\r\n            WebGLDetectData.version = EWebGLVersion.WEBGL2;\r\n        }\r\n\r\n        return;\r\n    }\r\n\r\n    let canvas = DomQuery.create(\"<canvas></canvas>\").get(0),\r\n        options: any = {},\r\n        gl = getOnlyWebgl2Context(options, canvas);\r\n\r\n    if (!gl) {\r\n        gl = getOnlyWebgl1Context(options, canvas);\r\n\r\n        if (!gl) {\r\n            return null;\r\n        }\r\n        else {\r\n            WebGLDetectData.version = EWebGLVersion.WEBGL1;\r\n        }\r\n    }\r\n    else {\r\n        WebGLDetectData.version = EWebGLVersion.WEBGL2;\r\n    }\r\n}\r\n\r\nexport const isWebgl1 = () => isWebgl1Utils(WebGLDetectData);\r\n\r\nexport const isWebgl2 = () => isWebgl2Utils(WebGLDetectData);\r\n\r\nexport const getVersion = (WebGLDetectData: any) => WebGLDetectData.version;\r\n\r\ndetect(WebGLDetectData);\r\n","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { checkLightShouldAlive, Light } from \"./Light\";\r\nimport {\r\n    create, getColor, getIntensity, getPosition, setColor,\r\n    setIntensity\r\n} from \"./DirectionLightSystem\";\r\nimport { Color } from \"../../structure/Color\";\r\nimport { requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { ThreeDTransformData } from \"../transform/ThreeDTransformData\";\r\nimport { GameObjectData } from \"../../core/entityObject/gameObject/GameObjectData\";\r\nimport { getGameObject } from \"./SpecifyLightSystem\";\r\nimport { WebGL2DirectionLightData } from \"../../renderer/webgl2/light/DirectionLightData\";\r\nimport { WebGL1DirectionLightData } from \"../../renderer/webgl1/light/DirectionLightData\";\r\nimport { isWebgl1 } from \"../../renderer/device/WebGLDetectSystem\";\r\n\r\n@registerClass(\"DirectionLight\")\r\nexport class DirectionLight extends Light {\r\n}\r\n\r\nexport var createDirectionLight = null;\r\n\r\nexport var getDirectionLightGameObject = null;\r\n\r\nexport var getDirectionLightPosition = null;\r\n\r\nexport var getDirectionLightColor = null;\r\n\r\nexport var setDirectionLightColor = null;\r\n\r\nexport var getDirectionLightIntensity = null;\r\n\r\nexport var setDirectionLightIntensity = null;\r\n\r\nif (isWebgl1()) {\r\n    createDirectionLight = () => {\r\n        return create(WebGL1DirectionLightData);\r\n    }\r\n\r\n    getDirectionLightGameObject = requireCheckFunc((component: DirectionLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (component: DirectionLight) => {\r\n        return getGameObject(component.index, WebGL1DirectionLightData);\r\n    })\r\n\r\n    getDirectionLightPosition = requireCheckFunc((component: DirectionLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (component: DirectionLight) => {\r\n        return getPosition(component.index, ThreeDTransformData, GameObjectData, WebGL1DirectionLightData);\r\n    })\r\n\r\n    getDirectionLightColor = requireCheckFunc((component: DirectionLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: DirectionLight) => {\r\n        return getColor(light.index, WebGL1DirectionLightData);\r\n    })\r\n\r\n    setDirectionLightColor = requireCheckFunc((component: DirectionLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: DirectionLight, color: Color) => {\r\n        setColor(light.index, color, WebGL1DirectionLightData);\r\n    })\r\n\r\n    getDirectionLightIntensity = requireCheckFunc((component: DirectionLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: DirectionLight) => {\r\n        return getIntensity(light.index, WebGL1DirectionLightData);\r\n    })\r\n\r\n    setDirectionLightIntensity = requireCheckFunc((component: DirectionLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: DirectionLight, value: number) => {\r\n        setIntensity(light.index, value, WebGL1DirectionLightData);\r\n    })\r\n}\r\nelse {\r\n    createDirectionLight = () => {\r\n        return create(WebGL2DirectionLightData);\r\n    }\r\n\r\n    getDirectionLightGameObject = requireCheckFunc((component: DirectionLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (component: DirectionLight) => {\r\n        return getGameObject(component.index, WebGL2DirectionLightData);\r\n    })\r\n\r\n    getDirectionLightPosition = requireCheckFunc((component: DirectionLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (component: DirectionLight) => {\r\n        return getPosition(component.index, ThreeDTransformData, GameObjectData, WebGL2DirectionLightData);\r\n    })\r\n\r\n    getDirectionLightColor = requireCheckFunc((component: DirectionLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: DirectionLight) => {\r\n        return getColor(light.index, WebGL2DirectionLightData);\r\n    })\r\n\r\n    setDirectionLightColor = requireCheckFunc((component: DirectionLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: DirectionLight, color: Color) => {\r\n        setColor(light.index, color, WebGL2DirectionLightData);\r\n    })\r\n\r\n    getDirectionLightIntensity = requireCheckFunc((component: DirectionLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: DirectionLight) => {\r\n        return getIntensity(light.index, WebGL2DirectionLightData);\r\n    })\r\n\r\n    setDirectionLightIntensity = requireCheckFunc((component: DirectionLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: DirectionLight, value: number) => {\r\n        setIntensity(light.index, value, WebGL2DirectionLightData);\r\n    })\r\n}\r\n","import { getColorDataSize as getSpecifyLightColorDataSize } from \"../worker/render_file/light/specifyLightUtils\";\r\n\r\nexport const getColorDataSize = getSpecifyLightColorDataSize;\r\n\r\nexport const getIntensityDataSize = () => 1;\r\n\r\n","import { getColorArr3 as getColorArr3Utils, getSingleSizeData } from \"../../../common/operateBufferDataUtils\";\r\nimport { getColor3Data } from \"../../../../../component/utils/operateBufferDataUtils\";\r\nimport { Color } from \"../../../../../structure/Color\";\r\nimport { getColorDataSize, getIntensityDataSize } from \"../../../light/directionLightUtils\";\r\nimport { cleanDirty, getDirtyDataSize, isDirty } from \"./specifyLightUtils\";\r\n// import { getColorDataSize as getSpecifyLightColorDataSize } from \"../../../light/specifyLightUtils\";\r\n\r\nexport const getColor = (index: number, DirectionLightDataFromSystem: any) => {\r\n    return getColor3Data(index, DirectionLightDataFromSystem.colors);\r\n}\r\n\r\nexport const getColorArr3 = (index: number, DirectionLightDataFromSystem: any) => {\r\n    return getColorArr3Utils(index, DirectionLightDataFromSystem);\r\n}\r\n\r\nexport const getIntensity = (index: number, DirectionLightDataFromSystem: any) => {\r\n    return getSingleSizeData(index, DirectionLightDataFromSystem.intensities);\r\n}\r\n\r\nexport const createTypeArrays = (buffer: any, count: number, DirectionLightDataFromSystem: any) => {\r\n    var offset = 0;\r\n\r\n    DirectionLightDataFromSystem.colors = new Float32Array(buffer, offset, count * getColorDataSize());\r\n    offset += count * Float32Array.BYTES_PER_ELEMENT * getColorDataSize();\r\n\r\n    DirectionLightDataFromSystem.intensities = new Float32Array(buffer, offset, count * getIntensityDataSize());\r\n    offset += count * Float32Array.BYTES_PER_ELEMENT * getIntensityDataSize();\r\n\r\n    DirectionLightDataFromSystem.isPositionDirtys = new Uint8Array(buffer, offset, count * getDirtyDataSize());\r\n    offset += count * Uint8Array.BYTES_PER_ELEMENT * getDirtyDataSize();\r\n\r\n    DirectionLightDataFromSystem.isColorDirtys = new Uint8Array(buffer, offset, count * getDirtyDataSize());\r\n    offset += count * Uint8Array.BYTES_PER_ELEMENT * getDirtyDataSize();\r\n\r\n    DirectionLightDataFromSystem.isIntensityDirtys = new Uint8Array(buffer, offset, count * getDirtyDataSize());\r\n    offset += count * Uint8Array.BYTES_PER_ELEMENT * getDirtyDataSize();\r\n}\r\n\r\nexport const isPositionDirty = (index: number, DirectionLightDataFromSystem: any) => {\r\n    return isDirty(getSingleSizeData(index, DirectionLightDataFromSystem.isPositionDirtys));\r\n}\r\n\r\nexport const isColorDirty = (index: number, DirectionLightDataFromSystem: any) => {\r\n    return isDirty(getSingleSizeData(index, DirectionLightDataFromSystem.isColorDirtys));\r\n}\r\n\r\nexport const isIntensityDirty = (index: number, DirectionLightDataFromSystem: any) => {\r\n    return isDirty(getSingleSizeData(index, DirectionLightDataFromSystem.isIntensityDirtys));\r\n}\r\n\r\nexport const cleanPositionDirty = (index: number, DirectionLightDataFromSystem: any) => {\r\n    cleanDirty(index, DirectionLightDataFromSystem.isPositionDirtys);\r\n}\r\n\r\nexport const cleanColorDirty = (index: number, DirectionLightDataFromSystem: any) => {\r\n    cleanDirty(index, DirectionLightDataFromSystem.isColorDirtys);\r\n}\r\n\r\nexport const cleanIntensityDirty = (index: number, DirectionLightDataFromSystem: any) => {\r\n    cleanDirty(index, DirectionLightDataFromSystem.isIntensityDirtys);\r\n}\r\n","import { DataBufferConfig } from \"../../../config/DataBufferConfig\";\r\n\r\nexport const getAmbientLightBufferCount = () => {\r\n    return DataBufferConfig.ambientLightDataBufferCount;\r\n}\r\n\r\nexport const getDirectionLightBufferCount = () => {\r\n    return DataBufferConfig.directionLightDataBufferCount;\r\n}\r\n\r\nexport const getPointLightBufferCount = () => {\r\n    return DataBufferConfig.pointLightDataBufferCount;\r\n}\r\n","import { DirectionLight } from \"./DirectionLight\";\r\nimport { Color } from \"../../structure/Color\";\r\nimport {\r\n    create as createSpecifyLight,\r\n    disposeComponent as disposeSpecifyLightComponent,\r\n    initData as initSpecifyLightData,\r\n    setColor as setSpecifyLightColor,\r\n    createDefaultColor, getPosition as getSpecifyLightPosition,\r\n    bindChangePositionEvent, markDirty\r\n} from \"./SpecifyLightSystem\";\r\nimport { Light } from \"./Light\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport {\r\n    cleanColorDirty as cleanColorDirtyUtils, cleanIntensityDirty as cleanIntensityDirtyUtils,\r\n    cleanPositionDirty as cleanPositionDirtyUtils,\r\n    createTypeArrays, getColorArr3 as getColorArr3Utils,\r\n    getIntensity as getIntensityUtils, isColorDirty as isColorDirtyUtils, isIntensityDirty as isIntensityDirtyUtils, isPositionDirty as isPositionDirtyUtils\r\n} from \"../../renderer/utils/worker/render_file/light/directionLightUtils\";\r\nimport { ensureFunc, it } from \"../../definition/typescript/decorator/contract\";\r\nimport { getColor3Data } from \"../utils/operateBufferDataUtils\";\r\nimport { createSharedArrayBufferOrArrayBuffer } from \"../../utils/arrayBufferUtils\";\r\nimport { deleteOneItemBySwapAndReset, setTypeArrayValue } from \"../../utils/typeArrayUtils\";\r\nimport { getDirectionLightBufferCount } from \"../../renderer/utils/light/bufferUtils\";\r\nimport { getColorDataSize, getIntensityDataSize } from \"../../renderer/utils/light/directionLightUtils\";\r\nimport { getDirtyDataSize } from \"../../renderer/utils/worker/render_file/light/specifyLightUtils\";\r\nimport { Map } from \"immutable\";\r\nimport { isInit } from \"../../core/DirectorSystem\";\r\nimport { DirectorData } from \"../../core/DirectorData\";\r\nimport { expect } from \"wonder-expect.js\";\r\n\r\nexport const create = ensureFunc((light: DirectionLight, DirectionLightData: any) => {\r\n    it(\"shouldn't create after Director->init\", () => {\r\n        expect(isInit(DirectorData)).false;\r\n    });\r\n}, (DirectionLightData: any) => {\r\n    var light = new DirectionLight();\r\n\r\n    light = createSpecifyLight(light, DirectionLightData);\r\n\r\n    return light;\r\n})\r\n\r\nexport const getPosition = (index: number, ThreeDTransformData: any, GameObjectData: any, DirectionLightData: any) => {\r\n    return getSpecifyLightPosition(index, ThreeDTransformData, GameObjectData, DirectionLightData);\r\n}\r\n\r\nexport const getAllPositionData = (ThreeDTransformData: any, GameObjectData: any, DirectionLightData: any): Array<Float32Array> => {\r\n    var positionArr: Array<Float32Array> = [];\r\n\r\n    for (let i = 0, count = DirectionLightData.count; i < count; i++) {\r\n        positionArr.push(getPosition(i, ThreeDTransformData, GameObjectData, DirectionLightData).values);\r\n    }\r\n\r\n    return positionArr;\r\n}\r\n\r\nexport const getColor = (index: number, DirectionLightData: any) => {\r\n    return getColor3Data(index, DirectionLightData.colors);\r\n}\r\n\r\nexport const getColorArr3 = getColorArr3Utils;\r\n\r\nexport const setColor = (index: number, color: Color, DirectionLightData: any) => {\r\n    setSpecifyLightColor(index, color, DirectionLightData.colors);\r\n\r\n    markDirty(index, DirectionLightData.isColorDirtys);\r\n}\r\n\r\nexport const getIntensity = getIntensityUtils;\r\n\r\nexport const setIntensity = (index: number, intensity: number, DirectionLightData: any) => {\r\n    var size = getIntensityDataSize(),\r\n        i = index * size;\r\n\r\n    setTypeArrayValue(DirectionLightData.intensities, i, intensity);\r\n\r\n    markDirty(index, DirectionLightData.isIntensityDirtys);\r\n}\r\n\r\nexport const disposeComponent = (component: Light, DirectionLightData: any) => {\r\n    var intensityDataSize = getIntensityDataSize(),\r\n        dirtyDataSize = getDirtyDataSize(),\r\n        sourceIndex = component.index,\r\n        lastComponentIndex: number = null;\r\n\r\n    lastComponentIndex = disposeSpecifyLightComponent(sourceIndex, DirectionLightData);\r\n\r\n    deleteOneItemBySwapAndReset(sourceIndex * intensityDataSize, lastComponentIndex * intensityDataSize, DirectionLightData.intensities, DirectionLightData.defaultIntensity);\r\n\r\n    deleteOneItemBySwapAndReset(sourceIndex * dirtyDataSize, lastComponentIndex * dirtyDataSize, DirectionLightData.isPositionDirtys, DirectionLightData.defaultDirty);\r\n    deleteOneItemBySwapAndReset(sourceIndex * dirtyDataSize, lastComponentIndex * dirtyDataSize, DirectionLightData.isColorDirtys, DirectionLightData.defaultDirty);\r\n    deleteOneItemBySwapAndReset(sourceIndex * dirtyDataSize, lastComponentIndex * dirtyDataSize, DirectionLightData.isIntensityDirtys, DirectionLightData.defaultDirty);\r\n}\r\n\r\nexport const initDataHelper = (DirectionLightData: any) => {\r\n    var count = getDirectionLightBufferCount(),\r\n        size = Float32Array.BYTES_PER_ELEMENT * (getColorDataSize() + getIntensityDataSize()) + Uint8Array.BYTES_PER_ELEMENT + (getDirtyDataSize() * 3),\r\n        buffer: any = null;\r\n\r\n    buffer = createSharedArrayBufferOrArrayBuffer(count * size);\r\n\r\n    initSpecifyLightData(buffer, DirectionLightData);\r\n\r\n    createTypeArrays(buffer, count, DirectionLightData);\r\n\r\n    DirectionLightData.defaultIntensity = 1;\r\n\r\n    _setDefaultTypeArrData(count, DirectionLightData);\r\n}\r\n\r\nconst _setDefaultTypeArrData =(count: number, DirectionLightData: any) => {\r\n    var color = createDefaultColor(),\r\n        intensity = DirectionLightData.defaultIntensity;\r\n\r\n    for (let i = 0; i < count; i++) {\r\n        setColor(i, color, DirectionLightData);\r\n        setIntensity(i, intensity, DirectionLightData);\r\n    }\r\n}\r\n\r\nexport const init = (DirectionLightData: any, state: Map<any, any>) => {\r\n    return bindChangePositionEvent(DirectionLightData, state);\r\n}\r\n\r\nexport const isPositionDirty = isPositionDirtyUtils;\r\n\r\nexport const isColorDirty = isColorDirtyUtils;\r\n\r\nexport const isIntensityDirty = isIntensityDirtyUtils;\r\n\r\nexport const cleanPositionDirty = cleanPositionDirtyUtils;\r\n\r\nexport const cleanColorDirty = cleanColorDirtyUtils;\r\n\r\nexport const cleanIntensityDirty = cleanIntensityDirtyUtils;\r\n","import { SpecifyLightData } from \"./SpecifyLightData\";\r\n\r\nexport abstract class PointLightData extends SpecifyLightData {\r\n    public static intensities: Float32Array = null;\r\n    public static constants: Float32Array = null;\r\n    public static linears: Float32Array = null;\r\n    public static quadratics: Float32Array = null;\r\n    public static ranges: Uint16Array = null;\r\n    public static isPositionDirtys: Uint8Array = null;\r\n    public static isIntensityDirtys: Uint8Array = null;\r\n    public static isAttenuationDirtys: Uint8Array = null;\r\n\r\n    public static defaultIntensity: number = null;\r\n    public static defaultConstant: number = null;\r\n    public static defaultLinear: number = null;\r\n    public static defaultQuadratic: number = null;\r\n    public static defaultRange: number = null;\r\n}\r\n","import { PointLightGLSLDataStructure } from \"../../type/dataType\";\r\nimport { PointLightData } from \"../../../component/light/PointLightData\";\r\n\r\nexport class WebGL1PointLightData extends PointLightData {\r\n    public static lightGLSLDataStructureMemberNameArr: Array<PointLightGLSLDataStructure> = null;\r\n}\r\n","import { PointLightData } from \"../../../component/light/PointLightData\";\r\n\r\nexport class WebGL2PointLightData extends PointLightData {\r\n}\r\n","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { checkLightShouldAlive, Light } from \"./Light\";\r\nimport {\r\n    create, getColor, getConstant, getIntensity, getLinear, getPosition, getQuadratic, getRange, setColor, setConstant,\r\n    setIntensity, setLinear, setQuadratic, setRange, setRangeLevel\r\n} from \"./PointLightSystem\";\r\nimport { Color } from \"../../structure/Color\";\r\nimport { requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { ThreeDTransformData } from \"../transform/ThreeDTransformData\";\r\nimport { GameObjectData } from \"../../core/entityObject/gameObject/GameObjectData\";\r\nimport { getGameObject } from \"./SpecifyLightSystem\";\r\nimport { isWebgl1 } from \"../../renderer/device/WebGLDetectSystem\";\r\nimport { WebGL1PointLightData } from \"../../renderer/webgl1/light/PointLightData\";\r\nimport { WebGL2PointLightData } from \"../../renderer/webgl2/light/PointLightData\";\r\n\r\n@registerClass(\"PointLight\")\r\nexport class PointLight extends Light {\r\n}\r\n\r\nexport var createPointLight = null;\r\n\r\nexport var getPointLightGameObject = null;\r\n\r\nexport var getPointLightPosition = null;\r\n\r\nexport var getPointLightColor = null;\r\n\r\nexport var setPointLightColor = null;\r\n\r\nexport var getPointLightIntensity = null;\r\n\r\nexport var setPointLightIntensity = null;\r\n\r\nexport var getPointLightConstant = null;\r\n\r\nexport var setPointLightConstant = null;\r\n\r\nexport var getPointLightLinear = null;\r\n\r\nexport var setPointLightLinear = null;\r\n\r\nexport var getPointLightQuadratic = null;\r\n\r\nexport var setPointLightQuadratic = null;\r\n\r\nexport var getPointLightRange = null;\r\n\r\nexport var setPointLightRange = null;\r\n\r\nexport var setPointLightRangeLevel = null;\r\n\r\nif (isWebgl1()) {\r\n    createPointLight = () => {\r\n        return create(WebGL1PointLightData);\r\n    }\r\n\r\n    getPointLightGameObject = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (component: PointLight) => {\r\n        return getGameObject(component.index, WebGL1PointLightData);\r\n    })\r\n\r\n    getPointLightPosition = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (component: PointLight) => {\r\n        return getPosition(component.index, ThreeDTransformData, GameObjectData, WebGL1PointLightData);\r\n    })\r\n\r\n    getPointLightColor = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight) => {\r\n        return getColor(light.index, WebGL1PointLightData);\r\n    })\r\n\r\n    setPointLightColor = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight, color: Color) => {\r\n        setColor(light.index, color, WebGL1PointLightData);\r\n    })\r\n\r\n    getPointLightIntensity = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight) => {\r\n        return getIntensity(light.index, WebGL1PointLightData);\r\n    })\r\n\r\n    setPointLightIntensity = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight, value: number) => {\r\n        setIntensity(light.index, value, WebGL1PointLightData);\r\n    })\r\n\r\n    getPointLightConstant = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight) => {\r\n        return getConstant(light.index, WebGL1PointLightData);\r\n    })\r\n\r\n    setPointLightConstant = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight, value: number) => {\r\n        setConstant(light.index, value, WebGL1PointLightData);\r\n    })\r\n\r\n    getPointLightLinear = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight) => {\r\n        return getLinear(light.index, WebGL1PointLightData);\r\n    })\r\n\r\n    setPointLightLinear = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight, value: number) => {\r\n        setLinear(light.index, value, WebGL1PointLightData);\r\n    })\r\n\r\n    getPointLightQuadratic = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight) => {\r\n        return getQuadratic(light.index, WebGL1PointLightData);\r\n    })\r\n\r\n    setPointLightQuadratic = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight, value: number) => {\r\n        setQuadratic(light.index, value, WebGL1PointLightData);\r\n    })\r\n\r\n    getPointLightRange = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight) => {\r\n        return getRange(light.index, WebGL1PointLightData);\r\n    })\r\n\r\n    setPointLightRange = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight, value: number) => {\r\n        setRange(light.index, value, WebGL1PointLightData);\r\n    })\r\n\r\n    setPointLightRangeLevel = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight, value: number) => {\r\n        setRangeLevel(light.index, value, WebGL1PointLightData);\r\n    })\r\n}\r\nelse {\r\n    createPointLight = () => {\r\n        return create(WebGL2PointLightData);\r\n    }\r\n\r\n    getPointLightGameObject = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (component: PointLight) => {\r\n        return getGameObject(component.index, WebGL2PointLightData);\r\n    })\r\n\r\n    getPointLightPosition = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (component: PointLight) => {\r\n        return getPosition(component.index, ThreeDTransformData, GameObjectData, WebGL2PointLightData);\r\n    })\r\n\r\n    getPointLightColor = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight) => {\r\n        return getColor(light.index, WebGL2PointLightData);\r\n    })\r\n\r\n    setPointLightColor = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight, color: Color) => {\r\n        setColor(light.index, color, WebGL2PointLightData);\r\n    })\r\n\r\n    getPointLightIntensity = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight) => {\r\n        return getIntensity(light.index, WebGL2PointLightData);\r\n    })\r\n\r\n    setPointLightIntensity = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight, value: number) => {\r\n        setIntensity(light.index, value, WebGL2PointLightData);\r\n    })\r\n\r\n    getPointLightConstant = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight) => {\r\n        return getConstant(light.index, WebGL2PointLightData);\r\n    })\r\n\r\n    setPointLightConstant = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight, value: number) => {\r\n        setConstant(light.index, value, WebGL2PointLightData);\r\n    })\r\n\r\n    getPointLightLinear = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight) => {\r\n        return getLinear(light.index, WebGL2PointLightData);\r\n    })\r\n\r\n    setPointLightLinear = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight, value: number) => {\r\n        setLinear(light.index, value, WebGL2PointLightData);\r\n    })\r\n\r\n    getPointLightQuadratic = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight) => {\r\n        return getQuadratic(light.index, WebGL2PointLightData);\r\n    })\r\n\r\n    setPointLightQuadratic = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight, value: number) => {\r\n        setQuadratic(light.index, value, WebGL2PointLightData);\r\n    })\r\n\r\n    getPointLightRange = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight) => {\r\n        return getRange(light.index, WebGL2PointLightData);\r\n    })\r\n\r\n    setPointLightRange = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight, value: number) => {\r\n        setRange(light.index, value, WebGL2PointLightData);\r\n    })\r\n\r\n    setPointLightRangeLevel = requireCheckFunc((component: PointLight) => {\r\n        checkLightShouldAlive(component);\r\n    }, (light: PointLight, value: number) => {\r\n        setRangeLevel(light.index, value, WebGL2PointLightData);\r\n    })\r\n}\r\n","import { getColorArr3 as getColorArr3Utils, getSingleSizeData } from \"../../../common/operateBufferDataUtils\";\r\nimport { getColor3Data } from \"../../../../../component/utils/operateBufferDataUtils\";\r\nimport { cleanDirty, getDirtyDataSize, isDirty } from \"./specifyLightUtils\";\r\nimport { getColorDataSize as getSpecifyLightColorDataSize } from \"./specifyLightUtils\";\r\nimport { Color } from \"../../../../../structure/Color\";\r\n\r\nexport const getColor = (index: number, PointLightDataFromSystem: any) => {\r\n    return getColor3Data(index, PointLightDataFromSystem.colors);\r\n}\r\n\r\nexport const getColorArr3 = (index: number, PointLightDataFromSystem: any) => {\r\n    return getColorArr3Utils(index, PointLightDataFromSystem);\r\n}\r\n\r\nexport const getIntensity = (index: number, PointLightDataFromSystem: any) => {\r\n    return getSingleSizeData(index, PointLightDataFromSystem.intensities);\r\n}\r\n\r\nexport const getConstant = (index: number, PointLightDataFromSystem: any) => {\r\n    return getSingleSizeData(index, PointLightDataFromSystem.constants);\r\n}\r\n\r\nexport const getLinear = (index: number, PointLightDataFromSystem: any) => {\r\n    return getSingleSizeData(index, PointLightDataFromSystem.linears);\r\n}\r\n\r\nexport const getQuadratic = (index: number, PointLightDataFromSystem: any) => {\r\n    return getSingleSizeData(index, PointLightDataFromSystem.quadratics);\r\n}\r\n\r\nexport const getRange = (index: number, PointLightDataFromSystem: any) => {\r\n    return getSingleSizeData(index, PointLightDataFromSystem.ranges);\r\n}\r\n\r\nexport const getColorDataSize = getSpecifyLightColorDataSize;\r\n\r\nexport const getIntensityDataSize = () => 1;\r\n\r\nexport const getConstantDataSize = () => 1;\r\n\r\nexport const getLinearDataSize = () => 1;\r\n\r\nexport const getQuadraticDataSize = () => 1;\r\n\r\nexport const getRangeDataSize = () => 1;\r\n\r\nexport const createTypeArrays = (buffer: any, count: number, PointLightDataFromSystem: any) => {\r\n    var offset = 0;\r\n\r\n    PointLightDataFromSystem.colors = new Float32Array(buffer, offset, count * getColorDataSize());\r\n    offset += count * Float32Array.BYTES_PER_ELEMENT * getColorDataSize();\r\n\r\n    PointLightDataFromSystem.intensities = new Float32Array(buffer, offset, count * getIntensityDataSize());\r\n    offset += count * Float32Array.BYTES_PER_ELEMENT * getIntensityDataSize();\r\n\r\n    PointLightDataFromSystem.constants = new Float32Array(buffer, offset, count * getConstantDataSize());\r\n    offset += count * Float32Array.BYTES_PER_ELEMENT * getConstantDataSize();\r\n\r\n    PointLightDataFromSystem.linears = new Float32Array(buffer, offset, count * getLinearDataSize());\r\n    offset += count * Float32Array.BYTES_PER_ELEMENT * getLinearDataSize();\r\n\r\n    PointLightDataFromSystem.quadratics = new Float32Array(buffer, offset, count * getQuadraticDataSize());\r\n    offset += count * Float32Array.BYTES_PER_ELEMENT * getQuadraticDataSize();\r\n\r\n    PointLightDataFromSystem.ranges = new Float32Array(buffer, offset, count * getRangeDataSize());\r\n    offset += count * Float32Array.BYTES_PER_ELEMENT * getRangeDataSize();\r\n\r\n    PointLightDataFromSystem.isPositionDirtys = new Uint8Array(buffer, offset, count * getDirtyDataSize());\r\n    offset += count * Uint8Array.BYTES_PER_ELEMENT * getDirtyDataSize();\r\n\r\n    PointLightDataFromSystem.isColorDirtys = new Uint8Array(buffer, offset, count * getDirtyDataSize());\r\n    offset += count * Uint8Array.BYTES_PER_ELEMENT * getDirtyDataSize();\r\n\r\n    PointLightDataFromSystem.isIntensityDirtys = new Uint8Array(buffer, offset, count * getDirtyDataSize());\r\n    offset += count * Uint8Array.BYTES_PER_ELEMENT * getDirtyDataSize();\r\n\r\n    PointLightDataFromSystem.isAttenuationDirtys = new Uint8Array(buffer, offset, count * getDirtyDataSize());\r\n    offset += count * Uint8Array.BYTES_PER_ELEMENT * getDirtyDataSize();\r\n}\r\n\r\nexport const isPositionDirty = (index: number, PointLightDataFromSystem: any) => {\r\n    return isDirty(getSingleSizeData(index, PointLightDataFromSystem.isPositionDirtys));\r\n}\r\n\r\nexport const isColorDirty = (index: number, PointLightDataFromSystem: any) => {\r\n    return isDirty(getSingleSizeData(index, PointLightDataFromSystem.isColorDirtys));\r\n}\r\n\r\nexport const isIntensityDirty = (index: number, PointLightDataFromSystem: any) => {\r\n    return isDirty(getSingleSizeData(index, PointLightDataFromSystem.isIntensityDirtys));\r\n}\r\n\r\nexport const isAttenuationDirty = (index: number, PointLightDataFromSystem: any) => {\r\n    return isDirty(getSingleSizeData(index, PointLightDataFromSystem.isAttenuationDirtys));\r\n}\r\n\r\nexport const cleanPositionDirty = (index: number, PointLightDataFromSystem: any) => {\r\n    cleanDirty(index, PointLightDataFromSystem.isPositionDirtys);\r\n}\r\n\r\nexport const cleanColorDirty = (index: number, PointLightDataFromSystem: any) => {\r\n    cleanDirty(index, PointLightDataFromSystem.isColorDirtys);\r\n}\r\n\r\nexport const cleanIntensityDirty = (index: number, PointLightDataFromSystem: any) => {\r\n    cleanDirty(index, PointLightDataFromSystem.isIntensityDirtys);\r\n}\r\n\r\nexport const cleanAttenuationDirty = (index: number, PointLightDataFromSystem: any) => {\r\n    cleanDirty(index, PointLightDataFromSystem.isAttenuationDirtys);\r\n}\r\n","import { PointLight } from \"./PointLight\";\r\nimport { Color } from \"../../structure/Color\";\r\nimport {\r\n    create as createSpecifyLight,\r\n    disposeComponent as disposeSpecifyLightComponent,\r\n    initData as initSpecifyLightData,\r\n    setColor as setSpecifyLightColor,\r\n    createDefaultColor, getPosition as getSpecifyLightPosition, markDirty, bindChangePositionEvent\r\n} from \"./SpecifyLightSystem\";\r\nimport { Light } from \"./Light\";\r\nimport { ensureFunc, it } from \"../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { getColor3Data } from \"../utils/operateBufferDataUtils\";\r\nimport { createSharedArrayBufferOrArrayBuffer } from \"../../utils/arrayBufferUtils\";\r\nimport { deleteOneItemBySwapAndReset, setSingleValue } from \"../../utils/typeArrayUtils\";\r\nimport {\r\n    getConstant as getConstantUtils,\r\n    getLinear as getLinearUtils,\r\n    getQuadratic as getQuadraticUtils, getRange as getRangeUtils,\r\n    createTypeArrays, getColorArr3 as getColorArr3Utils,\r\n    getIntensity as getIntensityUtils, isColorDirty as isColorDirtyUtils, isIntensityDirty as isIntensityDirtyUtils,\r\n    isAttenuationDirty as isAttenuationDirtyUtils, cleanColorDirty as cleanColorDirtyUtils,\r\n    cleanIntensityDirty as cleanIntensityDirtyUtils, cleanAttenuationDirty as cleanAttenuationDirtyUtils,\r\n    cleanPositionDirty as cleanPositionDirtyUtils, isPositionDirty as isPositionDirtyUtils, getColorDataSize,\r\n    getIntensityDataSize, getConstantDataSize, getQuadraticDataSize, getRangeDataSize\r\n} from \"../../renderer/utils/worker/render_file/light/pointLightUtils\";\r\nimport { Log } from \"../../utils/Log\";\r\nimport { getPointLightBufferCount } from \"../../renderer/utils/light/bufferUtils\";\r\nimport { isInit } from \"../../core/DirectorSystem\";\r\nimport { DirectorData } from \"../../core/DirectorData\";\r\nimport {\r\n    getDirtyDataSize\r\n} from \"../../renderer/utils/worker/render_file/light/specifyLightUtils\";\r\nimport { getLinearDataSize } from \"../../renderer/utils/worker/render_file/light/pointLightUtils\";\r\nimport { Map } from \"immutable\";\r\n\r\nexport const create = ensureFunc((light: PointLight, PointLightData: any) => {\r\n    //todo check: shouldn't create after init(direction, ambient)\r\n    it(\"shouldn't create after Director->init\", () => {\r\n        expect(isInit(DirectorData)).false;\r\n    });\r\n}, (PointLightData: any) => {\r\n    var light = new PointLight();\r\n\r\n    light = createSpecifyLight(light, PointLightData);\r\n\r\n    return light;\r\n})\r\n\r\nexport const getPosition = (index: number, ThreeDTransformData: any, GameObjectData: any, PointLightData: any) => {\r\n    return getSpecifyLightPosition(index, ThreeDTransformData, GameObjectData, PointLightData);\r\n}\r\n\r\nexport const getAllPositionData = (ThreeDTransformData: any, GameObjectData: any, PointLightData: any): Array<Float32Array> => {\r\n    var positionArr: Array<Float32Array> = [];\r\n\r\n    for (let i = 0, count = PointLightData.count; i < count; i++) {\r\n        positionArr.push(getPosition(i, ThreeDTransformData, GameObjectData, PointLightData).values);\r\n    }\r\n\r\n    return positionArr;\r\n}\r\n\r\nexport const getColor = (index: number, PointLightData: any) => {\r\n    return getColor3Data(index, PointLightData.colors);\r\n}\r\n\r\nexport const getColorArr3 = getColorArr3Utils;\r\n\r\nexport const setColor = (index: number, color: Color, PointLightData: any) => {\r\n    setSpecifyLightColor(index, color, PointLightData.colors);\r\n\r\n    markDirty(index, PointLightData.isColorDirtys);\r\n}\r\n\r\nexport const getIntensity = getIntensityUtils;\r\n\r\nexport const setIntensity = (index: number, value: number, PointLightData: any) => {\r\n    setSingleValue(PointLightData.intensities, index, value);\r\n\r\n    markDirty(index, PointLightData.isIntensityDirtys);\r\n}\r\n\r\nexport const getConstant = getConstantUtils;\r\n\r\nexport const setConstant = (index: number, value: number, PointLightData: any) => {\r\n    setSingleValue(PointLightData.constants, index, value);\r\n\r\n    markDirty(index, PointLightData.isAttenuationDirtys);\r\n}\r\n\r\nexport const getLinear = getLinearUtils;\r\n\r\nexport const setLinear = (index: number, value: number, PointLightData: any) => {\r\n    setSingleValue(PointLightData.linears, index, value);\r\n\r\n    markDirty(index, PointLightData.isAttenuationDirtys);\r\n}\r\n\r\nexport const getQuadratic = getQuadraticUtils;\r\n\r\nexport const setQuadratic = (index: number, value: number, PointLightData: any) => {\r\n    setSingleValue(PointLightData.quadratics, index, value);\r\n\r\n    markDirty(index, PointLightData.isAttenuationDirtys);\r\n}\r\n\r\nexport const getRange = getRangeUtils;\r\n\r\nexport const setRange = (index: number, value: number, PointLightData: any) => {\r\n    setSingleValue(PointLightData.ranges, index, value);\r\n\r\n    markDirty(index, PointLightData.isAttenuationDirtys);\r\n}\r\n\r\nexport const setRangeLevel = (index: number, value: number, PointLightData: any) => {\r\n    switch (value) {\r\n        case 0:\r\n            setRange(index, 7, PointLightData);\r\n            setLinear(index, 0.7, PointLightData);\r\n            setQuadratic(index, 1.8, PointLightData);\r\n            break;\r\n        case 1:\r\n            setRange(index, 13, PointLightData);\r\n            setLinear(index, 0.35, PointLightData);\r\n            setQuadratic(index, 0.44, PointLightData);\r\n            break;\r\n        case 2:\r\n            setRange(index, 20, PointLightData);\r\n            setLinear(index, 0.22, PointLightData);\r\n            setQuadratic(index, 0.20, PointLightData);\r\n            break;\r\n        case 3:\r\n            setRange(index, 32, PointLightData);\r\n            setLinear(index, 0.14, PointLightData);\r\n            setQuadratic(index, 0.07, PointLightData);\r\n            break;\r\n        case 4:\r\n            setRange(index, 50, PointLightData);\r\n            setLinear(index, 0.09, PointLightData);\r\n            setQuadratic(index, 0.032, PointLightData);\r\n            break;\r\n        case 5:\r\n            setRange(index, 65, PointLightData);\r\n            setLinear(index, 0.07, PointLightData);\r\n            setQuadratic(index, 0.017, PointLightData);\r\n            break;\r\n        case 6:\r\n            setRange(index, 100, PointLightData);\r\n            setLinear(index, 0.045, PointLightData);\r\n            setQuadratic(index, 0.0075, PointLightData);\r\n            break;\r\n        case 7:\r\n            setRange(index, 160, PointLightData);\r\n            setLinear(index, 0.027, PointLightData);\r\n            setQuadratic(index, 0.0028, PointLightData);\r\n            break;\r\n        case 8:\r\n            setRange(index, 200, PointLightData);\r\n            setLinear(index, 0.022, PointLightData);\r\n            setQuadratic(index, 0.0019, PointLightData);\r\n            break;\r\n        case 9:\r\n            setRange(index, 325, PointLightData);\r\n            setLinear(index, 0.014, PointLightData);\r\n            setQuadratic(index, 0.0007, PointLightData);\r\n            break;\r\n        case 10:\r\n            setRange(index, 600, PointLightData);\r\n            setLinear(index, 0.007, PointLightData);\r\n            setQuadratic(index, 0.0002, PointLightData);\r\n            break;\r\n        case 11:\r\n            setRange(index, 3250, PointLightData);\r\n            setLinear(index, 0.0014, PointLightData);\r\n            setQuadratic(index, 0.000007, PointLightData);\r\n            break;\r\n        default:\r\n            Log.error(true, \"over point light range\");\r\n            break;\r\n    }\r\n\r\n    markDirty(index, PointLightData.isAttenuationDirtys);\r\n}\r\n\r\nexport const initDataHelper = (PointLightData: any) => {\r\n    var count = getPointLightBufferCount(),\r\n        size = Float32Array.BYTES_PER_ELEMENT * (getColorDataSize() + getIntensityDataSize() + getConstantDataSize() + getLinearDataSize() + getQuadraticDataSize() + getRangeDataSize()) + Uint8Array.BYTES_PER_ELEMENT * (getDirtyDataSize() * 4),\r\n        buffer: any = null;\r\n\r\n    buffer = createSharedArrayBufferOrArrayBuffer(count * size);\r\n\r\n    initSpecifyLightData(buffer, PointLightData);\r\n\r\n    createTypeArrays(buffer, count, PointLightData);\r\n\r\n    PointLightData.defaultIntensity = 1;\r\n    PointLightData.defaultConstant = 1;\r\n    PointLightData.defaultLinear = 0.07;\r\n    PointLightData.defaultQuadratic = 0.017;\r\n    PointLightData.defaultRange = 65;\r\n\r\n    _setDefaultTypeArrData(count, PointLightData);\r\n}\r\n\r\nconst _setDefaultTypeArrData =(count: number, PointLightData: any) => {\r\n    var color = createDefaultColor(),\r\n        intensity = PointLightData.defaultIntensity,\r\n        constant = PointLightData.defaultConstant,\r\n        linear = PointLightData.defaultLinear,\r\n        quadratic = PointLightData.defaultQuadratic,\r\n        range = PointLightData.defaultRange;\r\n\r\n    /*!\r\n    no need to set default dirty\r\n     */\r\n\r\n    for (let i = 0; i < count; i++) {\r\n        setColor(i, color, PointLightData);\r\n        setIntensity(i, intensity, PointLightData);\r\n        setConstant(i, constant, PointLightData);\r\n        setLinear(i, linear, PointLightData);\r\n        setQuadratic(i, quadratic, PointLightData);\r\n        setRange(i, range, PointLightData);\r\n    }\r\n}\r\n\r\nexport const disposeComponent = (component: Light, PointLightData: any) => {\r\n    var intensityDataSize = getIntensityDataSize(),\r\n        constantDataSize = getConstantDataSize(),\r\n        linearDataSize = getLinearDataSize(),\r\n        quadraticDataSize = getQuadraticDataSize(),\r\n        rangeDataSize = getRangeDataSize(),\r\n        dirtyDataSize = getDirtyDataSize(),\r\n        sourceIndex = component.index,\r\n        lastComponentIndex: number = null;\r\n\r\n    lastComponentIndex = disposeSpecifyLightComponent(sourceIndex, PointLightData);\r\n\r\n    deleteOneItemBySwapAndReset(sourceIndex * intensityDataSize, lastComponentIndex * intensityDataSize, PointLightData.intensities, PointLightData.defaultIntensity);\r\n    deleteOneItemBySwapAndReset(sourceIndex * constantDataSize, lastComponentIndex * constantDataSize, PointLightData.constants, PointLightData.defaultConstant);\r\n    deleteOneItemBySwapAndReset(sourceIndex * linearDataSize, lastComponentIndex * linearDataSize, PointLightData.linears, PointLightData.defaultLinear);\r\n    deleteOneItemBySwapAndReset(sourceIndex * quadraticDataSize, lastComponentIndex * quadraticDataSize, PointLightData.quadratics, PointLightData.defaultQuadratic);\r\n    deleteOneItemBySwapAndReset(sourceIndex * rangeDataSize, lastComponentIndex * rangeDataSize, PointLightData.ranges, PointLightData.defaultRange);\r\n\r\n    deleteOneItemBySwapAndReset(sourceIndex * dirtyDataSize, lastComponentIndex * dirtyDataSize, PointLightData.isPositionDirtys, PointLightData.defaultDirty);\r\n    deleteOneItemBySwapAndReset(sourceIndex * dirtyDataSize, lastComponentIndex * dirtyDataSize, PointLightData.isColorDirtys, PointLightData.defaultDirty);\r\n    deleteOneItemBySwapAndReset(sourceIndex * dirtyDataSize, lastComponentIndex * dirtyDataSize, PointLightData.isIntensityDirtys, PointLightData.defaultDirty);\r\n    deleteOneItemBySwapAndReset(sourceIndex * dirtyDataSize, lastComponentIndex * dirtyDataSize, PointLightData.isAttenuationDirtys, PointLightData.defaultDirty);\r\n\r\n    return lastComponentIndex;\r\n}\r\n\r\nexport const init = (PointLightData: any, state: Map<any, any>) => {\r\n    return bindChangePositionEvent(PointLightData, state);\r\n}\r\n\r\nexport const isPositionDirty = isPositionDirtyUtils;\r\n\r\nexport const isColorDirty = isColorDirtyUtils;\r\n\r\nexport const isIntensityDirty = isIntensityDirtyUtils;\r\n\r\nexport const isAttenuationDirty = isAttenuationDirtyUtils;\r\n\r\nexport const cleanPositionDirty = cleanPositionDirtyUtils;\r\n\r\nexport const cleanColorDirty = cleanColorDirtyUtils;\r\n\r\nexport const cleanIntensityDirty = cleanIntensityDirtyUtils;\r\n\r\nexport const cleanAttenuationDirty = cleanAttenuationDirtyUtils;\r\n\r\n","export enum ERenderWorkerState {\r\n    DEFAULT,\r\n    INIT_COMPLETE,\r\n    DRAW_WAIT,\r\n    DRAW_COMPLETE\r\n}\r\n","import curry from \"wonder-lodash/curry\";\r\nimport { EWorkerOperateType } from \"../../both_file/EWorkerOperateType\";\r\nimport {\r\n    clearDisposedGeometryIndexArray,\r\n    clearWorkerInfoList, getDisposedGeometryIndexArrayData, hasDisposedGeometryIndexArrayData, hasNewPointData,\r\n    isReallocate\r\n} from \"../../../../component/geometry/GeometrySystem\";\r\nimport { EGeometryWorkerDataOperateType } from \"../../../enum/EGeometryWorkerDataOperateType\";\r\nimport { clearWorkerInitList, hasNewInitedMaterial } from \"../../../../component/material/MaterialSystem\";\r\nimport { RenderCommandBufferForDrawData } from \"../../../utils/worker/render_file/type/dataType\";\r\nimport { getRenderWorker } from \"../../../../worker/WorkerInstanceSystem\";\r\nimport { getAllPositionData as getAllDirectionLightPositionData } from \"../../../../component/light/DirectionLightSystem\";\r\nimport { getAllPositionData as getPointLightAllPositionData } from \"../../../../component/light/PointLightSystem\";\r\nimport {\r\n    clearDisposedTextureDataMap, clearNeedAddedSourceArr, clearNeedInitTextureDataArr,\r\n    convertNeedInitedSourceMapToImageDataArr,\r\n    getDisposedTextureDataMap,\r\n    getNeedAddedSourceArr,\r\n    getNeedInitedTextureDataArr,\r\n    getUniformSamplerNameMap,\r\n    hasDisposedTextureDataMap, hasNeedInitTextureDataArr\r\n} from \"../../../texture/TextureSystem\";\r\nimport { ERenderWorkerState } from \"../../both_file/ERenderWorkerState\";\r\nimport { getMaterialTextureList } from \"../../../texture/MapManagerSystem\";\r\n\r\nexport const sendDrawData = curry((DomQuery:any, WorkerInstanceData: any, MapManagerData:any, TextureData: any, MaterialData: any, GeometryData: any, ThreeDTransformData: any, GameObjectData: any, AmbientLightData: any, DirectionLightData: any, PointLightData: any, data: RenderCommandBufferForDrawData) => {\r\n    var geometryData = null,\r\n        geometryDisposeData = null,\r\n        textureDisposeData = null,\r\n        materialData = null,\r\n        lightData = null,\r\n        textureData = null,\r\n        transferList:Array<ArrayBuffer> = [];\r\n\r\n    geometryData = _buildSendGeometryData(GeometryData);\r\n\r\n    if (hasDisposedGeometryIndexArrayData(GeometryData)) {\r\n        geometryDisposeData = {\r\n            disposedGeometryIndexArray: getDisposedGeometryIndexArrayData(GeometryData)\r\n        };\r\n    }\r\n\r\n    if (hasDisposedTextureDataMap(TextureData)) {\r\n        textureDisposeData = {\r\n            disposedTextureDataMap: getDisposedTextureDataMap(TextureData)\r\n        };\r\n    }\r\n\r\n    if (hasNewInitedMaterial(MaterialData)) {\r\n        materialData = {\r\n            buffer: MaterialData.buffer,\r\n            workerInitList: MaterialData.workerInitList\r\n        };\r\n    }\r\n\r\n    lightData = _buildSendLightData(ThreeDTransformData, GameObjectData, DirectionLightData, PointLightData);\r\n\r\n    if(hasNeedInitTextureDataArr(TextureData)){\r\n        textureData = _buildSendTextureData(DomQuery, MapManagerData, TextureData);\r\n\r\n        transferList = transferList.concat(textureData.needAddedImageDataArr.map(({arrayBuffer}) => {\r\n            return arrayBuffer as ArrayBuffer;\r\n        }));\r\n    }\r\n\r\n    getRenderWorker(WorkerInstanceData).postMessage({\r\n        operateType: EWorkerOperateType.DRAW,\r\n        renderCommandBufferData: data,\r\n        materialData: materialData,\r\n        geometryData: geometryData,\r\n        lightData: lightData,\r\n        textureData: textureData,\r\n        disposeData: {\r\n            geometryDisposeData: geometryDisposeData,\r\n            textureDisposeData: textureDisposeData\r\n        }\r\n    }, transferList);\r\n\r\n    _clearData(GeometryData, MaterialData, TextureData);\r\n})\r\n\r\nconst _buildSendGeometryData = (GeometryData:any) => {\r\n    if (hasNewPointData(GeometryData)) {\r\n        return {\r\n            buffer: GeometryData.buffer,\r\n            type: EGeometryWorkerDataOperateType.ADD,\r\n            verticesInfoList: GeometryData.verticesWorkerInfoList,\r\n            normalsInfoList: GeometryData.normalsWorkerInfoList,\r\n            texCoordsInfoList: GeometryData.texCoordsWorkerInfoList,\r\n            indicesInfoList: GeometryData.indicesWorkerInfoList\r\n        };\r\n    }\r\n    else if (isReallocate(GeometryData)) {\r\n        return {\r\n            buffer: GeometryData.buffer,\r\n            type: EGeometryWorkerDataOperateType.RESET,\r\n            verticesInfoList: GeometryData.verticesInfoList,\r\n            normalsInfoList: GeometryData.normalsInfoList,\r\n            texCoordsInfoList: GeometryData.texCoordsInfoList,\r\n            indicesInfoList: GeometryData.indicesInfoList\r\n        };\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\nconst _buildSendLightData = (ThreeDTransformData:any, GameObjectData:any, DirectionLightData:any, PointLightData:any) => {\r\n    return {\r\n        directionLightData: {\r\n            positionArr: getAllDirectionLightPositionData(ThreeDTransformData, GameObjectData, DirectionLightData)\r\n        },\r\n        pointLightData: {\r\n            positionArr: getPointLightAllPositionData(ThreeDTransformData, GameObjectData, PointLightData)\r\n        }\r\n    }\r\n}\r\n\r\nconst _buildSendTextureData = (DomQuery:any, MapManagerData:any, TextureData:any) => {\r\n        let needInitedTextureDataArr = getNeedInitedTextureDataArr(TextureData),\r\n            needAddedImageDataArr = convertNeedInitedSourceMapToImageDataArr(getNeedAddedSourceArr(TextureData), needInitedTextureDataArr, DomQuery);\r\n\r\n        return {\r\n            index: TextureData.index,\r\n\r\n            needAddedImageDataArr: needAddedImageDataArr,\r\n            uniformSamplerNameMap: getUniformSamplerNameMap(TextureData),\r\n            materialTextureList: getMaterialTextureList(MapManagerData),\r\n\r\n            needInitedTextureIndexArr: needInitedTextureDataArr\r\n        };\r\n}\r\n\r\nconst _clearData = (GeometryData:any, MaterialData:any, TextureData:any) => {\r\n    clearWorkerInfoList(GeometryData);\r\n    clearDisposedGeometryIndexArray(GeometryData);\r\n    clearDisposedTextureDataMap(TextureData);\r\n    clearNeedInitTextureDataArr(TextureData);\r\n    clearNeedAddedSourceArr(TextureData);\r\n    clearWorkerInitList(MaterialData);\r\n}\r\n\r\nexport const initData = (SendDrawRenderCommandBufferData: any) => {\r\n    SendDrawRenderCommandBufferData.isInitComplete = false;\r\n    SendDrawRenderCommandBufferData.state = ERenderWorkerState.DEFAULT;\r\n}\r\n","export class ArrayBufferData {\r\n    public static vertexBuffers: Array<WebGLBuffer> = null;\r\n    public static normalBuffers: Array<WebGLBuffer> = null;\r\n    public static texCoordBuffers: Array<WebGLBuffer> = null;\r\n}\r\n","export class IndexBufferData {\r\n    public static buffers: Array<WebGLBuffer> = null;\r\n}\r\n\r\n","export enum ELightModel {\r\n    BLINN = 1,\r\n    PHONG = 2,\r\n    CONSTANT = 3\r\n}\r\n\r\n","import { Color } from \"../../../../structure/Color\";\r\nimport { ELightModel } from \"../../../../component/material/ELightModel\";\r\n\r\nexport const render_config = {\r\n    \"clearColor\": Color.create(\"#000000\"),\r\n\r\n    //todo refactor: be defer render component's attribute?\r\n    \"defer\": {\r\n        \"lightModel\": ELightModel.PHONG\r\n    }\r\n}\r\n\r\nexport interface IRenderConfig {\r\n    clearColor: Color;\r\n    defer: {\r\n        lightModel: ELightModel;\r\n    }\r\n}\r\n\r\n","import { GameObject } from \"../gameObject/GameObject\";\r\n\r\nexport class SceneData {\r\n    public static cameraArray: Array<GameObject> = null;\r\n}\r\n","import { ERenderWorkerState } from \"../../both_file/ERenderWorkerState\";\r\n\r\nexport class SendDrawRenderCommandBufferData {\r\n    public static state: ERenderWorkerState = null;\r\n\r\n    public static isInitComplete: boolean = null;\r\n}","export class WorkerInstanceData {\r\n    public static renderWorker: Worker = null;\r\n\r\n}\r\n","export class SpecifyMaterialData {\r\n    public static index: number = null;\r\n}\r\n\r\n","import { SpecifyMaterialData } from \"./SpecifyMaterialData\";\r\n\r\nexport class BasicMaterialData extends SpecifyMaterialData {\r\n}\r\n","import { SpecifyMaterialData } from \"./SpecifyMaterialData\";\r\nimport { Color } from \"../../structure/Color\";\r\n\r\nexport class LightMaterialData extends SpecifyMaterialData {\r\n    public static specularColors: Float32Array = null;\r\n    public static emissionColors: Float32Array = null;\r\n    public static shininess: Float32Array = null;\r\n    public static shadings: Uint8Array = null;\r\n    public static lightModels: Uint8Array = null;\r\n    public static hasDiffuseMaps: Uint8Array = null;\r\n    public static hasSpecularMaps: Uint8Array = null;\r\n\r\n    public static defaultShininess: number = null;\r\n    public static defaultShading: number = null;\r\n    public static defaultLightModel: number = null;\r\n    public static defaultHasMap: number = null;\r\n\r\n    public static emptyColor: Color = null;\r\n    public static emptyColorArr: Array<number> = null;\r\n}\r\n","import { SpecifyLightData } from \"./SpecifyLightData\";\r\n\r\nexport class AmbientLightData extends SpecifyLightData {\r\n\r\n}\r\n","import { Map } from \"immutable\";\r\nimport { ESide } from \"../../../../enum/ESide\";\r\n\r\nexport const initState = (state: Map<any, any>, getGL: Function, setSide: Function, DeviceManagerDataFromSystem: any) => {\r\n    var gl = getGL(DeviceManagerDataFromSystem, state);\r\n\r\n    setSide(gl, ESide.FRONT, DeviceManagerDataFromSystem);\r\n}\r\n\r\n","import { MaterialTextureList, TextureOffsetMap } from \"../type/dataType\";\r\n\r\nexport class MapManagerData {\r\n    public static buffer: SharedArrayBuffer = null;\r\n\r\n    public static textureIndices: Uint32Array = null;\r\n    public static textureCounts: Uint8Array = null;\r\n\r\n    public static materialTextureList:MaterialTextureList  = null;\r\n    public static textureOffsetMap:TextureOffsetMap  = null;\r\n}\r\n","export class TextureCacheData {\r\n    public static bindTextureUnitCache: Array<number> = null;\r\n}\r\n\r\n","export class GBufferData {\r\n    public static gBuffer: WebGLFramebuffer = null;\r\n    public static positionTarget: WebGLTexture = null;\r\n    public static normalTarget: WebGLTexture = null;\r\n    public static colorTarget: WebGLTexture = null;\r\n    public static depthTexture: WebGLTexture = null;\r\n}\r\n","import { isValueExist } from \"../../utils/stateUtils\";\r\n\r\nexport const isConfigDataExist = (configData: any) => {\r\n    return isValueExist(configData);\r\n}\r\n\r\n","import { it, requireCheckFunc } from \"../../../../../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { createMap, isNotValidMapValue } from \"../../../../../../utils/objectUtils\";\r\nimport { UniformCacheMap, UniformShaderLocationMap, VaoConfigMap } from \"../../../../../type/dataType\";\r\nimport { Log } from \"../../../../../../utils/Log\";\r\nimport { Vector3 } from \"../../../../../../math/Vector3\";\r\nimport { EBufferType } from \"../../../../../enum/EBufferType\";\r\nimport { VaoConfigData } from \"../../../../../type/dataType\";\r\nimport { IWebGL2ShaderLibContentGenerator } from \"../../../../../worker/webgl2/both_file/data/shaderLib_generator\";\r\nimport { forEach } from \"../../../../../../utils/arrayUtils\";\r\nimport { isConfigDataExist } from \"../../../../renderConfigUtils\";\r\n\r\nexport const sendBuffer = (gl: WebGLRenderingContext, type: string, pos: number, buffer: WebGLBuffer, geometryIndex: number, GLSLSenderDataFromSystem: any, ArrayBufferData: any) => {\r\n    var vertexAttribHistory = GLSLSenderDataFromSystem.vertexAttribHistory;\r\n\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\r\n    gl.vertexAttribPointer(pos, _getBufferSizeByType(type), gl[EBufferType.FLOAT], false, 0, 0);\r\n\r\n    if (vertexAttribHistory[pos] !== true) {\r\n        gl.enableVertexAttribArray(pos);\r\n\r\n        vertexAttribHistory[pos] = true;\r\n    }\r\n}\r\n\r\nconst _getBufferSizeByType =(type: string) => {\r\n    var size: number = null;\r\n\r\n    switch (type) {\r\n        case \"vec2\":\r\n            size = 2;\r\n            break;\r\n        case \"vec3\":\r\n            size = 3;\r\n            break;\r\n        default:\r\n            Log.error(true, Log.info.FUNC_INVALID(`type:${type}`));\r\n            break;\r\n    }\r\n\r\n    return size;\r\n}\r\n\r\nexport const sendMatrix3 = (gl: WebGLRenderingContext, program: WebGLProgram, name: string, data: Float32Array, uniformLocationMap: UniformShaderLocationMap, getUniformLocation: Function, isUniformLocationNotExist: Function) => {\r\n    _sendUniformData<Float32Array>(gl, program, name, data, uniformLocationMap, getUniformLocation, isUniformLocationNotExist, (pos, data) => {\r\n        gl.uniformMatrix3fv(pos, false, data);\r\n    })\r\n}\r\n\r\nexport const sendMatrix4 = (gl: WebGLRenderingContext, program: WebGLProgram, name: string, data: Float32Array, uniformLocationMap: UniformShaderLocationMap, getUniformLocation: Function, isUniformLocationNotExist: Function) => {\r\n    _sendUniformData<Float32Array>(gl, program, name, data, uniformLocationMap, getUniformLocation, isUniformLocationNotExist, (pos, data) => {\r\n        gl.uniformMatrix4fv(pos, false, data);\r\n    })\r\n}\r\n\r\nexport const sendVector3 = (gl: WebGLRenderingContext, shaderIndex: number, program: WebGLProgram, name: string, data: Vector3, uniformCacheMap: UniformCacheMap, uniformLocationMap: UniformShaderLocationMap, getUniformLocation: Function, isUniformLocationNotExist: Function) => {\r\n    var recordedData: any = _getUniformCache(shaderIndex, name, uniformCacheMap),\r\n        x = data.x,\r\n        y = data.y,\r\n        z = data.z;\r\n\r\n    if (recordedData && recordedData.x == x && recordedData.y == y && recordedData.z == z) {\r\n        return;\r\n    }\r\n\r\n    _setUniformCache(shaderIndex, name, data, uniformCacheMap);\r\n\r\n    _sendUniformData<Vector3>(gl, program, name, data, uniformLocationMap, getUniformLocation, isUniformLocationNotExist, (pos, data) => {\r\n        gl.uniform3f(pos, x, y, z);\r\n    })\r\n}\r\n\r\nexport const sendInt = requireCheckFunc((gl: WebGLRenderingContext, shaderIndex: number, program: WebGLProgram, name: string, data: number, uniformCacheMap: UniformCacheMap, uniformLocationMap: UniformShaderLocationMap, getUniformLocation: Function, isUniformLocationNotExist: Function, glFunc: Function) => {\r\n    it(\"data should be number\", () => {\r\n        expect(data).be.a(\"number\");\r\n    });\r\n}, (gl: WebGLRenderingContext, shaderIndex: number, program: WebGLProgram, name: string, data: number, uniformCacheMap: UniformCacheMap, uniformLocationMap: UniformShaderLocationMap, getUniformLocation: Function, isUniformLocationNotExist: Function, glFunc: Function) => {\r\n    var recordedData: any = _getUniformCache(shaderIndex, name, uniformCacheMap);\r\n\r\n    if (recordedData === data) {\r\n        return;\r\n    }\r\n\r\n    _setUniformCache(shaderIndex, name, data, uniformCacheMap);\r\n\r\n    _sendUniformData<number>(gl, program, name, data, uniformLocationMap, getUniformLocation, isUniformLocationNotExist, (pos, data) => {\r\n        gl.uniform1i(pos, data);\r\n    })\r\n})\r\n\r\nexport const sendFloat1 = requireCheckFunc((gl: WebGLRenderingContext, shaderIndex: number, program: WebGLProgram, name: string, data: number, uniformCacheMap: UniformCacheMap, uniformLocationMap: UniformShaderLocationMap, getUniformLocation: Function, isUniformLocationNotExist: Function, glFunc: Function) => {\r\n    it(\"data should be number\", () => {\r\n        expect(data).be.a(\"number\");\r\n    });\r\n}, (gl: WebGLRenderingContext, shaderIndex: number, program: WebGLProgram, name: string, data: number, uniformCacheMap: UniformCacheMap, uniformLocationMap: UniformShaderLocationMap, getUniformLocation: Function, isUniformLocationNotExist: Function, glFunc: Function) => {\r\n    var recordedData: any = _getUniformCache(shaderIndex, name, uniformCacheMap);\r\n\r\n    if (recordedData === data) {\r\n        return;\r\n    }\r\n\r\n    _setUniformCache(shaderIndex, name, data, uniformCacheMap);\r\n\r\n    _sendUniformData<number>(gl, program, name, data, uniformLocationMap, getUniformLocation, isUniformLocationNotExist, (pos, data) => {\r\n        gl.uniform1f(pos, data);\r\n    })\r\n})\r\n\r\nexport const sendFloat3 = (gl: WebGLRenderingContext, shaderIndex: number, program: WebGLProgram, name: string, data: Array<number> | Float32Array, uniformCacheMap: UniformCacheMap, uniformLocationMap: UniformShaderLocationMap, getUniformLocation: Function, isUniformLocationNotExist: Function) => {\r\n    var recordedData: any = _getUniformCache(shaderIndex, name, uniformCacheMap),\r\n        x = data[0],\r\n        y = data[1],\r\n        z = data[2];\r\n\r\n    if (recordedData && recordedData[0] == x && recordedData[1] == y && recordedData[2] == z) {\r\n        return;\r\n    }\r\n\r\n    _setUniformCache(shaderIndex, name, data, uniformCacheMap);\r\n\r\n    _sendUniformData<Array<number> | Float32Array>(gl, program, name, data, uniformLocationMap, getUniformLocation, isUniformLocationNotExist, (pos, data) => {\r\n        gl.uniform3f(pos, x, y, z);\r\n    })\r\n}\r\n\r\nconst _getUniformCache =(shaderIndex: number, name: string, uniformCacheMap: UniformCacheMap) => {\r\n    var cache = uniformCacheMap[shaderIndex];\r\n\r\n    if (_isCacheNotExist(cache)) {\r\n        cache = {};\r\n        uniformCacheMap[shaderIndex] = cache;\r\n\r\n        return null;\r\n    }\r\n\r\n    return cache[name];\r\n}\r\n\r\nconst _isCacheNotExist =(cache: any) => isNotValidMapValue(cache);\r\n\r\nconst _setUniformCache =(shaderIndex: number, name: string, data: any, uniformCacheMap: UniformCacheMap) => {\r\n    uniformCacheMap[shaderIndex][name] = data;\r\n}\r\n\r\nconst _sendUniformData =<T>(gl: WebGLRenderingContext, program: WebGLProgram, name: string, data: T, uniformLocationMap: UniformShaderLocationMap, getUniformLocation: Function, isUniformLocationNotExist: Function, send: (pos: WebGLUniformLocation, data: T) => void) => {\r\n    var pos = getUniformLocation(gl, program, name, uniformLocationMap);\r\n\r\n    if (isUniformLocationNotExist(pos)) {\r\n        return;\r\n    }\r\n\r\n    send(pos, data);\r\n}\r\n\r\nexport const initData = (GLSLSenderDataFromSystem: any) => {\r\n    GLSLSenderDataFromSystem.vaoConfigMap = createMap();\r\n\r\n    GLSLSenderDataFromSystem.sendUniformConfigMap = createMap();\r\n    GLSLSenderDataFromSystem.sendUniformFuncConfigMap = createMap();\r\n    GLSLSenderDataFromSystem.vertexAttribHistory = [];\r\n    GLSLSenderDataFromSystem.uniformCacheMap = createMap();\r\n}\r\n\r\nexport const setVaoConfigData = requireCheckFunc((data: VaoConfigData, name: string, value: any) => {\r\n    it(\"shouldn't exist duplicate data\", () => {\r\n        expect(data[name]).not.exist;\r\n    });\r\n}, (data: VaoConfigData, name: string, value: any) => {\r\n    data[name] = value;\r\n})\r\n","import { ensureFunc, it, requireCheckFunc } from \"../../../../../../../definition/typescript/decorator/contract\";\r\nimport {\r\n    IWebGL2SendUniformConfig,\r\n    IWebGL2ShaderLibConfig,\r\n    IWebGL2ShaderLibContentGenerator\r\n} from \"../../../../../../worker/webgl2/both_file/data/shaderLib_generator\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { forEach, hasDuplicateItems } from \"../../../../../../../utils/arrayUtils\";\r\nimport { isConfigDataExist } from \"../../../../../../utils/renderConfigUtils\";\r\nimport { createMap } from \"../../../../../../../utils/objectUtils\";\r\nimport {\r\n    initData as initDataUtils,\r\n    setVaoConfigData\r\n} from \"../../../../../../utils/worker/render_file/shader/glslSender/glslSenderUtils\";\r\nimport { VaoConfigData, VaoConfigMap } from \"../../../../../../type/dataType\";\r\nimport { Log } from \"../../../../../../../utils/Log\";\r\n\r\n\r\nexport const addSendUniformConfig = ensureFunc((returnVal, shaderIndex: number, materialShaderLibNameArr: Array<string>, shaderLibData: IWebGL2ShaderLibConfig, GLSLSenderDataFromSystem: any) => {\r\n    it(\"sendUniformConfigMap should not has duplicate attribute name\", () => {\r\n        expect(hasDuplicateItems(GLSLSenderDataFromSystem.sendUniformConfigMap[shaderIndex])).false;\r\n    });\r\n}, requireCheckFunc((shaderIndex: number, materialShaderLibNameArr: Array<string>, shaderLibData: IWebGL2ShaderLibConfig, GLSLSenderDataFromSystem: any) => {\r\n    it(\"sendUniformConfigMap[shaderIndex] should not be defined\", () => {\r\n        expect(GLSLSenderDataFromSystem.sendUniformConfigMap[shaderIndex]).not.exist;\r\n    });\r\n}, (shaderIndex: number, materialShaderLibNameArr: Array<string>, shaderLibData: IWebGL2ShaderLibContentGenerator, GLSLSenderDataFromSystem: any) => {\r\n    var sendUniformDataArr: Array<IWebGL2SendUniformConfig> = [],\r\n        sendUniformFuncDataArr: Array<Function> = [];\r\n\r\n    forEach(materialShaderLibNameArr, (shaderLibName: string) => {\r\n        var sendData = shaderLibData[shaderLibName].send;\r\n\r\n        if (isConfigDataExist(sendData)) {\r\n            if (isConfigDataExist(sendData.uniform)) {\r\n                sendUniformDataArr = sendUniformDataArr.concat(sendData.uniform);\r\n            }\r\n\r\n            if (isConfigDataExist(sendData.uniformFunc)) {\r\n                sendUniformFuncDataArr = sendUniformFuncDataArr.concat(sendData.uniformFunc);\r\n            }\r\n        }\r\n    });\r\n\r\n    GLSLSenderDataFromSystem.sendUniformConfigMap[shaderIndex] = sendUniformDataArr;\r\n    GLSLSenderDataFromSystem.sendUniformFuncConfigMap[shaderIndex] = sendUniformFuncDataArr;\r\n}))\r\n\r\nexport const addVaoConfig = requireCheckFunc((shaderIndex: number, materialShaderLibNameArr: Array<string>, shaderLibData: IWebGL2ShaderLibContentGenerator, vaoConfigMap: VaoConfigMap) => {\r\n    it(\"vaoConfigMap[shaderIndex] should not be defined\", () => {\r\n        expect(vaoConfigMap[shaderIndex]).not.exist;\r\n    });\r\n}, (shaderIndex: number, materialShaderLibNameArr: Array<string>, shaderLibData: IWebGL2ShaderLibContentGenerator, vaoConfigMap: VaoConfigMap, {\r\n    getVertices,\r\n    getNormals,\r\n    getTexCoords,\r\n    getIndices\r\n}) => {\r\n        var vaoConfigData: VaoConfigData = <any>{};\r\n\r\n        forEach(materialShaderLibNameArr, (shaderLibName: string) => {\r\n            var sendData = shaderLibData[shaderLibName].send;\r\n\r\n            if (isConfigDataExist(sendData) && isConfigDataExist(sendData.attribute)) {\r\n                forEach(sendData.attribute, ({\r\n                                             buffer,\r\n                    location\r\n                                         }) => {\r\n                    switch (buffer) {\r\n                        case \"vertex\":\r\n                            setVaoConfigData(vaoConfigData, \"positionLocation\", location);\r\n                            setVaoConfigData(vaoConfigData, \"getVertices\", getVertices);\r\n                            break;\r\n                        case \"normal\":\r\n                            setVaoConfigData(vaoConfigData, \"normalLocation\", location);\r\n                            setVaoConfigData(vaoConfigData, \"getNormals\", getNormals);\r\n                            break;\r\n                        case \"texCoord\":\r\n                            setVaoConfigData(vaoConfigData, \"texCoordLocation\", location);\r\n                            setVaoConfigData(vaoConfigData, \"getTexCoords\", getTexCoords);\r\n                            break;\r\n                        default:\r\n                            Log.error(true, Log.info.FUNC_INVALID(`bufferName:${buffer}`));\r\n                            break;\r\n                    }\r\n                })\r\n            }\r\n        })\r\n\r\n        setVaoConfigData(vaoConfigData, \"getIndices\", getIndices);\r\n\r\n        vaoConfigMap[shaderIndex] = vaoConfigData;\r\n    })\r\n\r\nexport const getVaoConfig = (shaderIndex: number, GLSLSenderDataFromSystem: any) => GLSLSenderDataFromSystem.vaoConfigMap[shaderIndex];\r\n\r\nexport const initData = (GLSLSenderDataFromSystem: any) => {\r\n    initDataUtils(GLSLSenderDataFromSystem);\r\n\r\n    GLSLSenderDataFromSystem.uboBindingPoint = 0;\r\n    GLSLSenderDataFromSystem.uboBindingPointMap = createMap();\r\n    GLSLSenderDataFromSystem.oneUboDataList = [];\r\n    GLSLSenderDataFromSystem.frameUboDataList = [];\r\n    GLSLSenderDataFromSystem.ambientLightUboDataList = [];\r\n    GLSLSenderDataFromSystem.directionLightUboDataList = [];\r\n    GLSLSenderDataFromSystem.pointLightUboDataList = [];\r\n}\r\n","import { GLSLChunk } from \"../../shader/chunk/ShaderChunk\";\r\nimport { EGPUPrecision } from \"../../enum/EGPUPrecision\";\r\nimport { getPrecision } from \"../device/gpuDetectUtils\";\r\nimport { IMaterialShaderLibGroup, IShaderLibItem, MaterialShaderLibConfig } from \"../../data/material_config_interface\";\r\nimport { InitShaderDataMap } from \"../../type/utilsType\";\r\nimport { forEach } from \"../../../utils/arrayUtils\";\r\nimport { isString } from \"../../../utils/JudgeUtils\";\r\nimport { it, requireCheckFunc } from \"../../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport {\r\n    IGLSLConfig, IGLSLDefineListItem, ISendUniformConfig,\r\n    IShaderLibContentGenerator,\r\n    IDefineUniformConfig\r\n} from \"../../data/shaderLib_generator_interface\";\r\nimport { isConfigDataExist } from \"../renderConfigUtils\";\r\nimport { compose, filterArray, forEachArray } from \"../../../utils/functionalUtils\";\r\n\r\nexport const getPrecisionSource = (lowp_fragment: GLSLChunk, mediump_fragment: GLSLChunk, highp_fragment: GLSLChunk, GPUDetectData: any) => {\r\n    var precision = getPrecision(GPUDetectData),\r\n        result = null;\r\n\r\n    switch (precision) {\r\n        case EGPUPrecision.HIGHP:\r\n            result = highp_fragment.top;\r\n            break;\r\n        case EGPUPrecision.MEDIUMP:\r\n            result = mediump_fragment.top;\r\n            break;\r\n        case EGPUPrecision.LOWP:\r\n            result = lowp_fragment.top;\r\n            break;\r\n        default:\r\n            result = \"\";\r\n            break;\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nexport const getMaterialShaderLibNameArr = (materialShaderLibConfig: MaterialShaderLibConfig, materialShaderLibGroup: IMaterialShaderLibGroup, materialIndex: number, initShaderFuncDataMap: any, initShaderDataMap: InitShaderDataMap) => {\r\n    var nameArr: Array<string> = [];\r\n\r\n    forEach(materialShaderLibConfig, (item: string | IShaderLibItem) => {\r\n        if (isString(item)) {\r\n            nameArr.push(item as string);\r\n        }\r\n        else {\r\n            let i = item as IShaderLibItem;\r\n\r\n            switch (i.type) {\r\n                case \"group\":\r\n                    nameArr = nameArr.concat(materialShaderLibGroup[i.value]);\r\n                    break;\r\n                case \"branch\":\r\n                    let shaderLibName = _execBranch(i, materialIndex, initShaderFuncDataMap, initShaderDataMap);\r\n\r\n                    if (_isShaderLibNameExist(shaderLibName)) {\r\n                        nameArr.push(shaderLibName);\r\n                    }\r\n            }\r\n        }\r\n    });\r\n\r\n    return nameArr;\r\n}\r\n\r\nconst _execBranch =requireCheckFunc((i: IShaderLibItem, materialIndex: number, initShaderFuncDataMap: any, initShaderDataMap: InitShaderDataMap) => {\r\n    it(\"branch should exist\", () => {\r\n        expect(i.branch).exist;\r\n    });\r\n}, (i: IShaderLibItem, materialIndex: number, initShaderFuncDataMap: any, initShaderDataMap: InitShaderDataMap) => {\r\n    return i.branch(materialIndex, initShaderFuncDataMap, initShaderDataMap);\r\n})\r\n\r\nconst _isShaderLibNameExist =(name: string) => !!name;\r\n\r\nexport const getEmptyFuncGLSLConfig = () => {\r\n    return {\r\n        \"top\": \"\",\r\n        \"varDeclare\": \"\",\r\n        \"funcDeclare\": \"\",\r\n        \"funcDefine\": \"\",\r\n        \"body\": \"\",\r\n        \"defineList\": []\r\n    }\r\n}\r\n\r\nexport const buildSourceDefine = (defineList: Array<IGLSLDefineListItem>, initShaderDataMap: InitShaderDataMap) => {\r\n    var result = \"\";\r\n\r\n    for (let item of defineList) {\r\n        if (item.valueFunc === void 0) {\r\n            result += `#define ${item.name}\\n`;\r\n        }\r\n        else {\r\n            result += `#define ${item.name} ${item.valueFunc(initShaderDataMap)}\\n`;\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nexport const getGLSLPartData = (glslConfig: IGLSLConfig, partName: string) => {\r\n    var partConfig = glslConfig[partName];\r\n\r\n    if (isConfigDataExist(partConfig)) {\r\n        return partConfig;\r\n    }\r\n    else if (isConfigDataExist(glslConfig.source)) {\r\n        return glslConfig.source[partName];\r\n    }\r\n\r\n    return \"\";\r\n}\r\n\r\nexport const getGLSLDefineListData = (glslConfig: IGLSLConfig) => {\r\n    var partConfig = glslConfig.defineList;\r\n\r\n    if (isConfigDataExist(partConfig)) {\r\n        return partConfig;\r\n    }\r\n\r\n    return [];\r\n}\r\n\r\nexport const getFuncGLSLPartData = (glslConfig: IGLSLConfig, partName: string) => {\r\n    return glslConfig[partName];\r\n}\r\n\r\nexport const getFuncGLSLDefineListData = (glslConfig: IGLSLConfig) => {\r\n    return glslConfig.defineList;\r\n}\r\n\r\nconst _isInSource =(key: string, source: string) => {\r\n    return source.indexOf(key) > -1;\r\n}\r\n\r\nexport const generateUniformSource = (materialShaderLibNameArr: Array<string>, shaderLibData: IShaderLibContentGenerator, sourceVarDeclare: string, sourceFuncDefine: string, sourceBody: string) => {\r\n    var result = \"\",\r\n        generateFunc = compose(\r\n            forEachArray(({ name, type }) => {\r\n                result += `uniform ${_generateUniformSourceType(type)} ${name};\\n`;\r\n            }),\r\n            filterArray(({ name }) => {\r\n                return _isInSource(name, sourceVarDeclare) || _isInSource(name, sourceFuncDefine) || _isInSource(name, sourceBody);\r\n            })\r\n        );\r\n\r\n    forEach(materialShaderLibNameArr, (shaderLibName: string) => {\r\n        var sendData = shaderLibData[shaderLibName].send,\r\n            uniform: Array<ISendUniformConfig> = null,\r\n            uniformDefine: Array<IDefineUniformConfig> = null;\r\n\r\n        if (!isConfigDataExist(sendData)) {\r\n            return;\r\n        }\r\n\r\n        uniform = sendData.uniform;\r\n        uniformDefine = sendData.uniformDefine;\r\n\r\n        if (isConfigDataExist(uniform)) {\r\n            generateFunc(uniform);\r\n        }\r\n\r\n        if (isConfigDataExist(uniformDefine)) {\r\n            generateFunc(uniformDefine);\r\n        }\r\n    });\r\n\r\n    return result;\r\n}\r\n\r\nconst _generateUniformSourceType =(type: string) => {\r\n    var sourceType: string = null;\r\n\r\n    switch (type) {\r\n        case \"float3\":\r\n            sourceType = \"vec3\";\r\n            break;\r\n        default:\r\n            sourceType = type;\r\n            break;\r\n    }\r\n\r\n    return sourceType;\r\n}\r\n","import { IMaterialConfig, MaterialShaderLibConfig } from \"./material_config_interface\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { ensureFunc, it, requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\n\r\nexport const getMaterialShaderLibConfig = ensureFunc((shaderLibConfig: MaterialShaderLibConfig, shaderName: string, material_config: IMaterialConfig) => {\r\n    it(\"shaderLib config should be array\", () => {\r\n        expect(shaderLibConfig).exist;\r\n        expect(shaderLibConfig).be.a(\"array\");\r\n    });\r\n}, requireCheckFunc((shaderName: string, material_config: IMaterialConfig) => {\r\n    // var materialData = material_config.materials[materialClassName];\r\n    //\r\n    // it(\"materialClassName should be defined\", () => {\r\n    //     expect(materialData).exist;\r\n    // })\r\n}, (shaderName: string, material_config: IMaterialConfig) => {\r\n    return material_config.shaders.materialShaders[shaderName];\r\n}))\r\n\r\n\r\n","import { Map } from \"immutable\";\r\nimport { isNotUndefined } from \"../../../utils/JudgeUtils\";\r\nimport { IWebGL2ShaderLibContentGenerator } from \"../../worker/webgl2/both_file/data/shaderLib_generator\";\r\nimport { IWebGL1ShaderLibContentGenerator } from \"../../worker/webgl1/both_file/data/shaderLib_generator\";\r\nimport { IMaterialConfig, IShaderLibItem, MaterialShaderLibConfig } from \"../../data/material_config_interface\";\r\nimport { InitShaderDataMap } from \"../../type/utilsType\";\r\nimport { WebGL1InitShaderFuncDataMap } from \"../../webgl1/type/utilsType\";\r\nimport { IWebGL2InitShaderFuncDataMap } from \"../../webgl2/utils/worker/render_file/interface/IUtils\";\r\nimport { getMaterialShaderLibNameArr } from \"./shaderSourceBuildUtils\";\r\nimport { getMaterialShaderLibConfig } from \"../../data/MaterialConfigSystem\";\r\n\r\nexport const initMaterialShader = (state: Map<any, any>, materialIndex: number | null, shaderName: string, material_config: IMaterialConfig, shaderLib_generator: IWebGL1ShaderLibContentGenerator | IWebGL2ShaderLibContentGenerator, init: Function, initShaderFuncDataMap: WebGL1InitShaderFuncDataMap | IWebGL2InitShaderFuncDataMap, initShaderDataMap: InitShaderDataMap) => {\r\n    var {\r\n            ShaderDataFromSystem,\r\n        } = initShaderDataMap,\r\n        materialShaderLibNameArr = null,\r\n        shaderIndex: number = null,\r\n        key = ShaderDataFromSystem.shaderLibNameMap[materialIndex];\r\n\r\n    if (!key) {\r\n        materialShaderLibNameArr = getMaterialShaderLibNameArr(getMaterialShaderLibConfig(shaderName, material_config), material_config.shaderLibGroups, materialIndex, initShaderFuncDataMap, initShaderDataMap);\r\n\r\n        key = _buildShaderIndexMapKey(materialShaderLibNameArr);\r\n\r\n        ShaderDataFromSystem.shaderLibNameMap[materialIndex] = key;\r\n    }\r\n\r\n    shaderIndex = ShaderDataFromSystem.shaderIndexMap[key];\r\n\r\n    if (_isShaderIndexExist(shaderIndex)) {\r\n        return shaderIndex;\r\n    }\r\n\r\n    if (!materialShaderLibNameArr) {\r\n        materialShaderLibNameArr = getMaterialShaderLibNameArr(getMaterialShaderLibConfig(shaderName, material_config), material_config.shaderLibGroups, materialIndex, initShaderFuncDataMap, initShaderDataMap);\r\n    }\r\n\r\n    shaderIndex = init(state, materialIndex, materialShaderLibNameArr, material_config, shaderLib_generator, initShaderFuncDataMap, initShaderDataMap);\r\n\r\n    ShaderDataFromSystem.shaderIndexMap[key] = shaderIndex;\r\n\r\n    return shaderIndex;\r\n}\r\n\r\nexport const initNoMaterialShader = (state: Map<any, any>, shaderName: string, materialShaderLibConfig: MaterialShaderLibConfig, material_config: IMaterialConfig, shaderLib_generator: IWebGL1ShaderLibContentGenerator | IWebGL2ShaderLibContentGenerator, init: Function, initShaderFuncDataMap: WebGL1InitShaderFuncDataMap | IWebGL2InitShaderFuncDataMap, initShaderDataMap: InitShaderDataMap) => {\r\n    var {\r\n            ShaderDataFromSystem,\r\n        } = initShaderDataMap,\r\n        materialShaderLibNameArr = null,\r\n        shaderIndex: number = null,\r\n        key = ShaderDataFromSystem.shaderIndexByShaderNameMap[shaderName];\r\n\r\n    if (!key) {\r\n        materialShaderLibNameArr = getMaterialShaderLibNameArr(materialShaderLibConfig, material_config.shaderLibGroups, null, initShaderFuncDataMap, initShaderDataMap);\r\n\r\n        key = _buildShaderIndexMapKey(materialShaderLibNameArr);\r\n\r\n        ShaderDataFromSystem.shaderIndexByShaderNameMap[shaderName] = key;\r\n    }\r\n\r\n    shaderIndex = ShaderDataFromSystem.shaderIndexMap[key];\r\n\r\n    if (_isShaderIndexExist(shaderIndex)) {\r\n        return shaderIndex;\r\n    }\r\n\r\n    if (!materialShaderLibNameArr) {\r\n        materialShaderLibNameArr = getMaterialShaderLibNameArr(materialShaderLibConfig, material_config.shaderLibGroups, null, initShaderFuncDataMap, initShaderDataMap);\r\n    }\r\n\r\n    shaderIndex = init(state, null, materialShaderLibNameArr, material_config, shaderLib_generator, initShaderFuncDataMap, initShaderDataMap);\r\n\r\n    ShaderDataFromSystem.shaderIndexMap[key] = shaderIndex;\r\n\r\n    return shaderIndex;\r\n}\r\n\r\nconst _buildShaderIndexMapKey =(materialShaderLibNameArr: Array<string>) => materialShaderLibNameArr.join(\"\");\r\n\r\nconst _isShaderIndexExist =(shaderIndex: number) => isNotUndefined(shaderIndex);\r\n\r\nexport const genereateShaderIndex = (ShaderDataFromSystem: any) => {\r\n    var index = ShaderDataFromSystem.index;\r\n\r\n    ShaderDataFromSystem.index += 1;\r\n\r\n    return index;\r\n}\r\n","import { isValidMapValue } from \"../../../../utils/objectUtils\";\r\nimport { ensureFunc, it } from \"../../../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { Log } from \"../../../../utils/Log\";\r\n\r\nexport const registerProgram = (shaderIndex: number, ProgramDataFromSystem: any, program: WebGLProgram) => {\r\n    ProgramDataFromSystem.programMap[shaderIndex] = program;\r\n}\r\n\r\nexport const isProgramExist = (program: WebGLProgram) => isValidMapValue(program);\r\n\r\nexport const initShader = (program: WebGLProgram, vsSource: string, fsSource: string, gl: WebGLRenderingContext) => {\r\n    var vs = _compileShader(gl, vsSource, gl.createShader(gl.VERTEX_SHADER)),\r\n        fs = _compileShader(gl, fsSource, gl.createShader(gl.FRAGMENT_SHADER));\r\n\r\n    //dispose?\r\n    // if (this.glProgram) {\r\n    //     this.dispose();\r\n    // }\r\n\r\n\r\n    gl.attachShader(program, vs);\r\n    gl.attachShader(program, fs);\r\n\r\n\r\n    /*!\r\n     if warn:\"Attribute 0 is disabled. This has significant performance penalty\" when run,\r\n     then do this before linkProgram:\r\n     gl.bindAttribLocation( this.glProgram, 0, \"a_position\");\r\n\r\n\r\n\r\n     can reference here:\r\n     http://stackoverflow.com/questions/20305231/webgl-warning-attribute-0-is-disabled-this-has-significant-performance-penalt?answertab=votes#tab-top\r\n\r\n\r\n     OpenGL requires attribute zero to be enabled otherwise it will not render anything.\r\n     On the other hand OpenGL ES 2.0 on which WebGL is based does not. So, to emulate OpenGL ES 2.0 on top of OpenGL if you don't enable attribute 0 the browser has to make a buffer for you large enough for the number of vertices you've requested to be drawn, fill it with the correct value (see gl.vertexAttrib),\r\n     attach it to attribute zero, and enable it.\r\n\r\n     It does all this behind the scenes but it's important for you to know that it takes time to create and fill that buffer. There are optimizations the browser can make but in the general case,\r\n     if you were to assume you were running on OpenGL ES 2.0 and used attribute zero as a constant like you are supposed to be able to do, without the warning you'd have no idea of the work the browser is doing on your behalf to emulate that feature of OpenGL ES 2.0 that is different from OpenGL.\r\n\r\n     require your particular case the warning doesn't have much meaning. It looks like you are only drawing a single point. But it would not be easy for the browser to figure that out so it just warns you anytime you draw and attribute 0 is not enabled.\r\n     */\r\n    /*!\r\n     Always have vertex attrib 0 array enabled. If you draw with vertex attrib 0 array disabled, you will force the browser to do complicated emulation when running on desktop OpenGL (e.g. on Mac OSX). This is because in desktop OpenGL, nothing gets drawn if vertex attrib 0 is not array-enabled. You can use bindAttribLocation() to force a vertex attribute to use location 0, and use enableVertexAttribArray() to make it array-enabled.\r\n     */\r\n    gl.bindAttribLocation(program, 0, \"a_position\");\r\n\r\n\r\n    _linkProgram(gl, program);\r\n\r\n    /*!\r\n     should detach and delete shaders after linking the program\r\n\r\n     explain:\r\n     The shader object, due to being attached to the program object, will continue to exist even if you delete the shader object. It will only be deleted by the system when it is no longer attached to any program object (and when the user has asked to delete it, of course).\r\n\r\n     \"Deleting\" the shader, as with all OpenGL objects, merely sets a flag that says you don't need it any more. OpenGL will keep it around for as long as it needs it itself, and will do the actual delete any time later (most likely, but not necessarily, after the program is deleted).\r\n     */\r\n    gl.deleteShader(vs);\r\n    gl.deleteShader(fs);\r\n}\r\n\r\nconst _linkProgram =ensureFunc((returnVal, gl: WebGLRenderingContext, program: WebGLProgram) => {\r\n    it(`link program error:${gl.getProgramInfoLog(program)}`, () => {\r\n        expect(gl.getProgramParameter(program, gl.LINK_STATUS)).true;\r\n    })\r\n}, (gl: WebGLRenderingContext, program: WebGLProgram) => {\r\n    gl.linkProgram(program);\r\n})\r\n\r\nconst _compileShader =(gl: WebGLRenderingContext, glslSource: string, shader: WebGLShader) => {\r\n    gl.shaderSource(shader, glslSource);\r\n    gl.compileShader(shader);\r\n\r\n    if (gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n        return shader;\r\n    }\r\n    else {\r\n        Log.log(gl.getShaderInfoLog(shader));\r\n        // Log.log(\"attributes:\\n\", this.attributes);\r\n        // Log.log(\"uniforms:\\n\", this.uniforms);\r\n        Log.log(\"source:\\n\", glslSource);\r\n    }\r\n}\r\n","import { TypeArr } from \"../../../../../type/dataType\";\r\n\r\nexport const bindUniformBlock = (gl: any, program: WebGLProgram, blockName: string, bindingPoint: number) => {\r\n    var uniformLocation = gl.getUniformBlockIndex(program, blockName);\r\n\r\n    gl.uniformBlockBinding(program, uniformLocation, bindingPoint);\r\n}\r\n\r\nexport const bindUniformBufferBase = (gl: any, buffer: WebGLBuffer, bindingPoint: number) => {\r\n    gl.bindBufferBase(gl.UNIFORM_BUFFER, bindingPoint, buffer);\r\n}\r\n\r\nexport const bufferStaticData = (gl: any, data: TypeArr) => {\r\n    gl.bufferData(gl.UNIFORM_BUFFER, data, gl.STATIC_DRAW);\r\n}\r\n\r\nexport const bufferDynamicData = (gl: any, data: TypeArr) => {\r\n    gl.bufferData(gl.UNIFORM_BUFFER, data, gl.DYNAMIC_DRAW);\r\n}\r\n\r\nexport const bufferSubDynamicData = (gl: any, offset: number, data: TypeArr) => {\r\n    gl.bufferSubData(gl.UNIFORM_BUFFER, offset, data);\r\n}\r\n\r\n","import { Map } from \"immutable\";\r\nimport {\r\n    detectCapabilty, detectExtension as detectExtensionSystem, getExtension\r\n} from \"../../../../../utils/device/gpuDetectUtils\";\r\n\r\nexport const detect = (getGL: Function, DeviceManagerDataFromSystem: any, GPUDetectDataFromSystem: any, state: Map<any, any>, ) => {\r\n    var gl = getGL(DeviceManagerDataFromSystem, state);\r\n\r\n    _detectExtension(state, gl, GPUDetectDataFromSystem);\r\n    _detectCapabilty(state, gl, GPUDetectDataFromSystem);\r\n\r\n    return state;\r\n}\r\n\r\nconst _detectExtension =(state: Map<any, any>, gl: any, GPUDetectDataFromSystem: any) => {\r\n    detectExtensionSystem(state, gl, GPUDetectDataFromSystem);\r\n\r\n    GPUDetectDataFromSystem.extensionColorBufferFloat = getExtension(\"EXT_color_buffer_float\", state, gl);\r\n}\r\n\r\nconst _detectCapabilty =(state: Map<any, any>, gl: any, GPUDetectDataFromSystem: any) => {\r\n    detectCapabilty(state, gl, GPUDetectDataFromSystem);\r\n\r\n    GPUDetectDataFromSystem.maxUniformBufferBindings = gl.getParameter(gl.MAX_UNIFORM_BUFFER_BINDINGS);\r\n}\r\n\r\nexport const getMaxUniformBufferBindings = (GPUDetectDataFromSystem: any) => GPUDetectDataFromSystem.maxUniformBufferBindings;\r\n\r\nexport const hasExtensionColorBufferFloat = (GPUDetectDataFromSystem: any) => !!GPUDetectDataFromSystem.extensionColorBufferFloat;\r\n\r\nexport const initData = (GPUDetectDataFromSystem: any) => {\r\n    GPUDetectDataFromSystem.maxTextureUnit = null;\r\n    GPUDetectDataFromSystem.maxTextureSize = null;\r\n    GPUDetectDataFromSystem.maxCubemapTextureSize = null;\r\n    GPUDetectDataFromSystem.maxAnisotropy = null;\r\n    GPUDetectDataFromSystem.maxBoneCount = null;\r\n    GPUDetectDataFromSystem.maxUniformBufferBindings = null;\r\n    GPUDetectDataFromSystem.extensionCompressedTextureS3TC = null;\r\n    GPUDetectDataFromSystem.extensionTextureFilterAnisotropic = null;\r\n    GPUDetectDataFromSystem.extensionInstancedArrays = null;\r\n    GPUDetectDataFromSystem.extensionUintIndices = null;\r\n    GPUDetectDataFromSystem.extensionDepthTexture = null;\r\n    GPUDetectDataFromSystem.extensionVao = null;\r\n    GPUDetectDataFromSystem.extensionStandardDerivatives = null;\r\n    GPUDetectDataFromSystem.extensionColorBufferFloat = null;\r\n    GPUDetectDataFromSystem.precision = null;\r\n}\r\n","import { isValidMapValue } from \"../../../../../../utils/objectUtils\";\r\nimport { ensureFunc, it } from \"../../../../../../definition/typescript/decorator/contract\";\r\nimport { UboBindingPointMap, UboMultiBufferDataList, UboSingleBufferDataList } from \"../../../../type/dataType\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { forEach, hasDuplicateItems, isValidVal } from \"../../../../../../utils/arrayUtils\";\r\nimport {\r\n    IWebGL2ShaderLibConfig,\r\n    IWebGL2UboConfig, IWebGL2UboTypeArrayConfig\r\n} from \"../../../../../worker/webgl2/both_file/data/shaderLib_generator\";\r\nimport { Log } from \"../../../../../../utils/Log\";\r\nimport { isConfigDataExist } from \"../../../../../utils/renderConfigUtils\";\r\nimport {\r\n    bindUniformBlock, bindUniformBufferBase, bufferDynamicData, bufferStaticData,\r\n    bufferSubDynamicData\r\n} from \"./uboUtils\";\r\nimport { InitShaderDataMap } from \"../../../../../type/utilsType\";\r\nimport { IRenderConfig } from \"../../../../../worker/both_file/data/render_config\";\r\nimport { set } from \"../../../../../../utils/typeArrayUtils\";\r\nimport { CameraRenderCommandBufferForDrawData } from \"../../../../../utils/worker/render_file/type/dataType\";\r\nimport {\r\n    IWebGL2AmbientLightValueDataMap,\r\n    IWebGL2DirectionLightValueDataMap, IWebGL2SendUniformDataAmbientLightDataMap,\r\n    IWebGL2SendUniformDataDirectionLightDataMap,\r\n    IWebGL2SendUniformDataPointLightDataMap\r\n} from \"../interface/IUtils\";\r\nimport { getMaxUniformBufferBindings } from \"../device/gpuDetectUtils\";\r\nimport { IWebGL2DrawDataMap, IWebGL2PointLightValueDataMap } from \"../interface/IUtils\";\r\n\r\nexport const init = (gl: any, render_config: IRenderConfig, {\r\n    oneUboDataList,\r\n    uboBindingPointMap\r\n}) => {\r\n    _bindOneUboData(gl, render_config, oneUboDataList, uboBindingPointMap);\r\n}\r\n\r\nconst _bindOneUboData =(gl: any, render_config: IRenderConfig, oneUboDataList: UboSingleBufferDataList, uboBindingPointMap: UboBindingPointMap) => {\r\n    _bindSingleBufferUboData(gl, render_config, oneUboDataList, null, uboBindingPointMap);\r\n}\r\n\r\nconst _buildUboDataMap =(uniformBlockBinding: number, buffer: WebGLBuffer, typeArray: Float32Array) => {\r\n    return {\r\n        uniformBlockBinding: uniformBlockBinding,\r\n        buffer: buffer,\r\n        typeArray: typeArray\r\n    };\r\n}\r\n\r\nconst _buildUboFuncMap =(bindUniformBufferBase: Function, bufferStaticData: Function, bufferDynamicData: Function, bufferSubDynamicData: Function, set: Function) => {\r\n    return {\r\n        bindUniformBufferBase: bindUniformBufferBase,\r\n        bufferStaticData: bufferStaticData,\r\n        bufferDynamicData: bufferDynamicData,\r\n        bufferSubDynamicData: bufferSubDynamicData,\r\n        set: set\r\n    }\r\n}\r\n\r\nconst _buildGlobalRenderDataMap =(render_config: IRenderConfig) => {\r\n    return {\r\n        render_config: render_config\r\n    }\r\n}\r\n\r\nexport const bindFrameUboData = (gl: any, render_config: IRenderConfig, cameraData: CameraRenderCommandBufferForDrawData, {\r\n    frameUboDataList,\r\n    uboBindingPointMap\r\n}) => {\r\n    _bindSingleBufferUboData(gl, render_config, frameUboDataList, cameraData, uboBindingPointMap);\r\n}\r\n\r\nexport const bindAmbientLightUboData = (gl: any, ambientLightIndex: number, sendUniformDataAmbientLightDataMap: IWebGL2SendUniformDataAmbientLightDataMap, ambientLightValueMap: IWebGL2AmbientLightValueDataMap, drawDataMap: IWebGL2DrawDataMap, {\r\n    ambientLightUboDataList,\r\n    uboBindingPointMap\r\n}) => {\r\n    _bindLightUboData(gl, ambientLightIndex, sendUniformDataAmbientLightDataMap, ambientLightValueMap, drawDataMap, ambientLightUboDataList, uboBindingPointMap);\r\n}\r\n\r\nexport const bindDirectionLightUboData = (gl: any, directionLightIndex: number, sendUniformDataDirectionLightDataMap: IWebGL2SendUniformDataDirectionLightDataMap, directionLightValueMap: IWebGL2DirectionLightValueDataMap, drawDataMap: IWebGL2DrawDataMap, {\r\n    directionLightUboDataList,\r\n    uboBindingPointMap\r\n}) => {\r\n    _bindLightUboData(gl, directionLightIndex, sendUniformDataDirectionLightDataMap, directionLightValueMap, drawDataMap, directionLightUboDataList, uboBindingPointMap);\r\n}\r\n\r\nexport const bindPointLightUboData = (gl: any, pointLightIndex: number, sendUniformDataPointLightDataMap: IWebGL2SendUniformDataPointLightDataMap, pointLightValueMap: IWebGL2PointLightValueDataMap, drawDataMap: IWebGL2DrawDataMap, {\r\n    pointLightUboDataList,\r\n    uboBindingPointMap\r\n}) => {\r\n    _bindLightUboData(gl, pointLightIndex, sendUniformDataPointLightDataMap, pointLightValueMap, drawDataMap, pointLightUboDataList, uboBindingPointMap);\r\n}\r\n\r\nconst _bindLightUboData =(gl: any, lightIndex: number, sendUniformDataLightDataMap: IWebGL2SendUniformDataAmbientLightDataMap | IWebGL2SendUniformDataDirectionLightDataMap | IWebGL2SendUniformDataPointLightDataMap, lightValueMap: IWebGL2AmbientLightValueDataMap | IWebGL2DirectionLightValueDataMap | IWebGL2PointLightValueDataMap, drawDataMap: IWebGL2DrawDataMap, lightUboDataList, uboBindingPointMap) => {\r\n    var uboFuncMap = _buildUboFuncMap(bindUniformBufferBase, bufferStaticData, bufferDynamicData, bufferSubDynamicData, set);\r\n\r\n    forEach(lightUboDataList, ({\r\n                                   name,\r\n        typeArrays,\r\n        buffers,\r\n        setBufferDataFunc\r\n                               }) => {\r\n        var bindingPoint = uboBindingPointMap[name],\r\n            typeArray = typeArrays[lightIndex],\r\n            buffer = buffers[lightIndex],\r\n            uboDataMap = _buildUboDataMap(bindingPoint, buffer, typeArray);\r\n\r\n        setBufferDataFunc(gl, lightIndex, uboDataMap, uboFuncMap, sendUniformDataLightDataMap, lightValueMap);\r\n    });\r\n}\r\n\r\nconst _bindSingleBufferUboData =(gl: any, render_config: IRenderConfig, singleBufferUboDataList: UboSingleBufferDataList, cameraData: CameraRenderCommandBufferForDrawData, uboBindingPointMap: UboBindingPointMap) => {\r\n    var uboFuncMap = _buildUboFuncMap(bindUniformBufferBase, bufferStaticData, bufferDynamicData, bufferSubDynamicData, set),\r\n        globalRenderDataMap = _buildGlobalRenderDataMap(render_config);\r\n\r\n    forEach(singleBufferUboDataList, ({\r\n                                          name,\r\n        typeArray,\r\n        buffer,\r\n        setBufferDataFunc\r\n                                      }) => {\r\n        var bindingPoint = uboBindingPointMap[name],\r\n            uboDataMap = _buildUboDataMap(bindingPoint, buffer, typeArray);\r\n\r\n        setBufferDataFunc(gl, uboDataMap, uboFuncMap, cameraData, globalRenderDataMap);\r\n    });\r\n}\r\n\r\nexport const handleUboConfig = (gl: any, shaderIndex: number, program: WebGLProgram, materialShaderLibNameArr: Array<string>, shaderLibData: IWebGL2ShaderLibConfig, initShaderDataMap: InitShaderDataMap, GLSLSenderDataFromSystem: any, GPUDetectDataFromSystem: any) => {\r\n    forEach(materialShaderLibNameArr, (shaderLibName: string) => {\r\n        var sendData = shaderLibData[shaderLibName].send;\r\n\r\n        if (isConfigDataExist(sendData)) {\r\n            if (isConfigDataExist(sendData.uniformUbo)) {\r\n                forEach(sendData.uniformUbo, (data: IWebGL2UboConfig) => {\r\n                    var name = data.name,\r\n                        bindingPoint: number = null,\r\n                        uboBindingPointMap = GLSLSenderDataFromSystem.uboBindingPointMap,\r\n                        uboBindingPoint = uboBindingPointMap[name];\r\n\r\n                    if (isValidMapValue(uboBindingPoint)) {\r\n                        return;\r\n                    }\r\n\r\n                    bindingPoint = _setUniqueBindingPoint(name, GLSLSenderDataFromSystem, GPUDetectDataFromSystem);\r\n\r\n                    bindUniformBlock(gl, program, name, bindingPoint);\r\n\r\n                    _addInitedUboFuncConfig(gl, data, initShaderDataMap, GLSLSenderDataFromSystem);\r\n                })\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nconst _setUniqueBindingPoint =ensureFunc((uboBindingPoint: number, name: string, GLSLSenderDataFromSystem: any, GPUDetectDataFromSystem: any) => {\r\n    it(\"uboBindingPoint shouldn't exceed maxUniformBufferBindings\", () => {\r\n        expect(uboBindingPoint).lte(getMaxUniformBufferBindings(GPUDetectDataFromSystem));\r\n    });\r\n}, (name: string, GLSLSenderDataFromSystem: any, GPUDetectDataFromSystem: any) => {\r\n    var uboBindingPointMap = GLSLSenderDataFromSystem.uboBindingPointMap,\r\n        uboBindingPoint: number = GLSLSenderDataFromSystem.uboBindingPoint;\r\n\r\n    uboBindingPointMap[name] = uboBindingPoint;\r\n\r\n    GLSLSenderDataFromSystem.uboBindingPoint += 1;\r\n\r\n    return uboBindingPoint;\r\n})\r\n\r\nconst _addInitedUboFuncConfig =ensureFunc((list: UboSingleBufferDataList | UboMultiBufferDataList) => {\r\n    it(\"list shouldn't has duplicate ubo data\", () => {\r\n        expect(hasDuplicateItems(list)).false;\r\n    });\r\n}, (gl: any, {\r\n    name,\r\n    typeArray,\r\n    setBufferDataFunc,\r\n    frequence\r\n}, {\r\n        AmbientLightDataFromSystem,\r\n        DirectionLightDataFromSystem,\r\n        PointLightDataFromSystem\r\n    }, GLSLSenderDataFromSystem: any) => {\r\n        var list = null;\r\n\r\n        switch (frequence) {\r\n            case \"one\":\r\n                list = GLSLSenderDataFromSystem.oneUboDataList;\r\n\r\n                list.push(_createSingleBufferData(gl, name, typeArray, setBufferDataFunc));\r\n                break;\r\n            case \"frame\":\r\n                list = GLSLSenderDataFromSystem.frameUboDataList;\r\n\r\n                list.push(_createSingleBufferData(gl, name, typeArray, setBufferDataFunc));\r\n                break;\r\n            case \"ambientLight\":\r\n                list = _addLightInitedUboFuncConfig(gl, GLSLSenderDataFromSystem.ambientLightUboDataList, typeArray, AmbientLightDataFromSystem.count, name, setBufferDataFunc);\r\n                break;\r\n            case \"directionLight\":\r\n                list = _addLightInitedUboFuncConfig(gl, GLSLSenderDataFromSystem.directionLightUboDataList, typeArray, DirectionLightDataFromSystem.count, name, setBufferDataFunc);\r\n                break;\r\n            case \"pointLight\":\r\n                list = _addLightInitedUboFuncConfig(gl, GLSLSenderDataFromSystem.pointLightUboDataList, typeArray, PointLightDataFromSystem.count, name, setBufferDataFunc);\r\n                break;\r\n            default:\r\n                Log.error(Log.info.FUNC_UNKNOW(`frequence: ${frequence}`));\r\n                break;\r\n        }\r\n\r\n        return list;\r\n    })\r\n\r\nconst _addLightInitedUboFuncConfig =(gl: any, list: UboMultiBufferDataList, typeArray: IWebGL2UboTypeArrayConfig, lightCount: number, name: string, setBufferDataFunc: Function) => {\r\n    var buffers: Array<WebGLBuffer> = [],\r\n        typeArrays: Array<Float32Array> = [];\r\n\r\n    for (let i = 0; i < lightCount; i++) {\r\n        typeArrays.push(_createTypeArray(typeArray));\r\n        buffers.push(gl.createBuffer());\r\n    }\r\n\r\n    list.push({\r\n        name: name,\r\n        typeArrays: typeArrays,\r\n        buffers: buffers,\r\n        setBufferDataFunc: setBufferDataFunc\r\n    });\r\n\r\n    return list;\r\n}\r\n\r\nconst _createSingleBufferData =(gl: any, name: string, typeArray: IWebGL2UboTypeArrayConfig, setBufferDataFunc: Function) => {\r\n    return {\r\n        name: name,\r\n        typeArray: _createTypeArray(typeArray),\r\n        buffer: gl.createBuffer(),\r\n        setBufferDataFunc: setBufferDataFunc\r\n    };\r\n}\r\n\r\nconst _createTypeArray =({\r\n                            length\r\n                        }) => {\r\n    return new Float32Array(length);\r\n}\r\n","import { createMap, deleteVal } from \"../../../../../utils/objectUtils\";\r\nimport { isNotValidVal } from \"../../../../../utils/arrayUtils\";\r\nimport { VaoMap, VboArrayMap } from \"../../../../type/dataType\";\r\n\r\nexport const removeVao = (gl: any, index: number, vaoMap: VaoMap, vboArrayMap: VboArrayMap) => {\r\n    var vboArray = vboArrayMap[index];\r\n\r\n    /*!\r\n     no need to consider the memory problem caused by not-used val in vaoMap, because geometry index will be repeat(geometry memory will be reallocated)\r\n     */\r\n    deleteVal(index, vaoMap);\r\n    deleteVal(index, vboArrayMap);\r\n\r\n    if (isNotValidVal(vboArray)) {\r\n        return;\r\n\r\n    }\r\n    for (let vbo of vboArray) {\r\n        gl.deleteBuffer(vbo);\r\n    }\r\n}\r\n\r\nexport const initData = (VaoDataFromSystem: any) => {\r\n    VaoDataFromSystem.vaoMap = createMap();\r\n    VaoDataFromSystem.vboArrayMap = createMap();\r\n}\r\n","import { WebGLVertexArrayObject } from \"../../../../../extend/interface\";\r\nimport { removeVao } from \"../../../../../utils/worker/render_file/vao/vaoUtils\";\r\nimport { VaoMap, VboArrayMap } from \"../../../../../type/dataType\";\r\n\r\nexport const createVao = (gl: any) => {\r\n    return gl.createVertexArray();\r\n}\r\n\r\nexport const bindVao = (gl: any, vao: WebGLVertexArrayObject) => {\r\n    gl.bindVertexArray(vao);\r\n}\r\n\r\nexport const unbindVao = (gl: any) => {\r\n    gl.bindVertexArray(null);\r\n}\r\n\r\nexport const disposeVao = (gl: any, geometryIndex: number, vaoMap: VaoMap, vboArrayMap: VboArrayMap) => {\r\n    gl.deleteVertexArray(vaoMap[geometryIndex]);\r\n\r\n    removeVao(gl, geometryIndex, vaoMap, vboArrayMap);\r\n}\r\n","import { createMap } from \"../../../../../../../utils/objectUtils\";\r\n\r\nexport const setEmptyLocationMap = (shaderIndex: number, LocationDataFromSystem: any) => {\r\n    LocationDataFromSystem.uniformLocationMap[shaderIndex] = createMap();\r\n}\r\n\r\nexport const initData = (LocationDataFromSystem: any) => {\r\n    LocationDataFromSystem.uniformLocationMap = createMap();\r\n}\r\n","import { addSendUniformConfig, addVaoConfig } from \"./glslSender/glslSenderUtils\";\r\nimport {\r\n    IWebGL2ShaderLibConfig,\r\n    IWebGL2ShaderLibContentGenerator\r\n} from \"../../../../../worker/webgl2/both_file/data/shaderLib_generator\";\r\nimport { InitShaderDataMap } from \"../../../../../type/utilsType\";\r\nimport { Map } from \"immutable\";\r\nimport {\r\n    IMaterialConfig, IShaderLibItem,\r\n    MaterialShaderLibConfig\r\n} from \"../../../../../data/material_config_interface\";\r\nimport {\r\n    genereateShaderIndex, initMaterialShader as initMaterialShaderUtils, initNoMaterialShader as initNoMaterialShaderUtils\r\n} from \"../../../../../utils/shader/shaderUtils\";\r\nimport { getProgram } from \"../../../../../utils/worker/render_file/shader/program/programUtils\";\r\nimport { initShader, registerProgram } from \"../../../../../utils/shader/program/programUtils\";\r\nimport { handleUboConfig } from \"../ubo/uboManagerUtils\";\r\nimport { IWebGL2InitShaderFuncDataMap } from \"../interface/IUtils\";\r\nimport { WebGLVertexArrayObject } from \"../../../../../extend/interface\";\r\nimport { bindVao as bindVaoUtils, createVao, unbindVao } from \"../vao/vaoUtils\";\r\nimport {\r\n    createAndInitArrayBuffer,\r\n    createAndInitIndexBuffer\r\n} from \"../../../../../utils/worker/render_file/shader/shaderUtils\";\r\nimport { setEmptyLocationMap } from \"./location/locationUtils\";\r\nimport { createMap } from \"../../../../../../utils/objectUtils\";\r\nimport { VaoMap, VboArrayMap } from \"../../../../../type/dataType\";\r\n\r\nexport const getNoMaterialShaderIndex = (shaderName: string, ShaderDataFromSystem: any) => {\r\n    return ShaderDataFromSystem.shaderIndexByShaderNameMap[shaderName];\r\n}\r\n\r\nexport const initNoMaterialShader = (state: Map<any, any>, shaderName: string, materialShaderLibConfig: MaterialShaderLibConfig, material_config: IMaterialConfig, shaderLib_generator: IWebGL2ShaderLibContentGenerator, initShaderFuncDataMap: IWebGL2InitShaderFuncDataMap, initShaderDataMap: InitShaderDataMap) => {\r\n    var shaderIndex = initNoMaterialShaderUtils(state, shaderName, materialShaderLibConfig, material_config, shaderLib_generator, _init, initShaderFuncDataMap, initShaderDataMap);\r\n\r\n    initShaderDataMap.ShaderDataFromSystem.shaderIndexByShaderNameMap[shaderName] = shaderIndex;\r\n\r\n    return shaderIndex;\r\n}\r\n\r\nexport const initMaterialShader = (state: Map<any, any>, materialIndex: number, shaderName: string, material_config: IMaterialConfig, shaderLib_generator: IWebGL2ShaderLibContentGenerator, initShaderFuncDataMap: IWebGL2InitShaderFuncDataMap, initShaderDataMap: InitShaderDataMap) => {\r\n    return initMaterialShaderUtils(state, materialIndex, shaderName, material_config, shaderLib_generator, _init, initShaderFuncDataMap, initShaderDataMap);\r\n}\r\n\r\nconst _init =(state: Map<any, any>, materialIndex: number | null, materialShaderLibNameArr: Array<string>, material_config: IMaterialConfig, shaderLib_generator: IWebGL2ShaderLibContentGenerator, initShaderFuncDataMap: IWebGL2InitShaderFuncDataMap, initShaderDataMap: InitShaderDataMap) => {\r\n    var {\r\n            ShaderDataFromSystem,\r\n        DeviceManagerDataFromSystem,\r\n        ProgramDataFromSystem,\r\n        LocationDataFromSystem,\r\n        GLSLSenderDataFromSystem,\r\n        GPUDetectDataFromSystem\r\n        } = initShaderDataMap,\r\n        {\r\n            buildGLSLSource,\r\n            getGL\r\n        } = initShaderFuncDataMap,\r\n        shaderIndex = genereateShaderIndex(ShaderDataFromSystem),\r\n        program = getProgram(shaderIndex, ProgramDataFromSystem),\r\n        shaderLibDataFromSystem: IWebGL2ShaderLibConfig = null,\r\n        gl = null;\r\n\r\n    shaderLibDataFromSystem = shaderLib_generator.shaderLibs;\r\n\r\n    let {\r\n        vsSource,\r\n        fsSource\r\n    } = buildGLSLSource(materialIndex, materialShaderLibNameArr, shaderLibDataFromSystem, initShaderDataMap);\r\n\r\n    gl = getGL(DeviceManagerDataFromSystem, state);\r\n\r\n    program = gl.createProgram();\r\n\r\n    registerProgram(shaderIndex, ProgramDataFromSystem, program);\r\n    initShader(program, vsSource, fsSource, gl);\r\n\r\n    setEmptyLocationMap(shaderIndex, LocationDataFromSystem);\r\n\r\n    addVaoConfig(shaderIndex, materialShaderLibNameArr, shaderLibDataFromSystem, GLSLSenderDataFromSystem.vaoConfigMap, initShaderFuncDataMap);\r\n    addSendUniformConfig(shaderIndex, materialShaderLibNameArr, shaderLibDataFromSystem, GLSLSenderDataFromSystem);\r\n\r\n    handleUboConfig(gl, shaderIndex, program, materialShaderLibNameArr, shaderLibDataFromSystem, initShaderDataMap, GLSLSenderDataFromSystem, GPUDetectDataFromSystem);\r\n\r\n    return shaderIndex;\r\n}\r\n\r\nexport const bindVao = (gl: WebGLRenderingContext, vao: WebGLVertexArrayObject, ProgramDataFromSystem: any) => {\r\n    if (ProgramDataFromSystem.lastBindedVao === vao) {\r\n        return;\r\n    }\r\n\r\n    ProgramDataFromSystem.lastBindedVao = vao;\r\n\r\n    bindVaoUtils(gl, vao);\r\n}\r\n\r\nexport const createAndInitVao = (gl: any, geometryIndex: number, vaoMap: VaoMap, vboArrayMap: VboArrayMap, {\r\n    positionLocation,\r\n    normalLocation,\r\n    texCoordLocation,\r\n\r\n    getVertices,\r\n    getNormals,\r\n    getTexCoords,\r\n    getIndices\r\n}, GeometryDataFromSystem: any) => {\r\n    var vao = createVao(gl),\r\n        buffers = [];\r\n\r\n    vaoMap[geometryIndex] = vao;\r\n\r\n    bindVaoUtils(gl, vao);\r\n\r\n    if (!!getVertices) {\r\n        buffers.push(createAndInitArrayBuffer(gl, getVertices(geometryIndex, GeometryDataFromSystem), positionLocation, 3));\r\n    }\r\n\r\n    if (!!getNormals) {\r\n        buffers.push(createAndInitArrayBuffer(gl, getNormals(geometryIndex, GeometryDataFromSystem), normalLocation, 3));\r\n    }\r\n\r\n    if (!!getTexCoords) {\r\n        buffers.push(createAndInitArrayBuffer(gl, getTexCoords(geometryIndex, GeometryDataFromSystem), texCoordLocation, 2));\r\n    }\r\n\r\n    buffers.push(createAndInitIndexBuffer(gl, getIndices(geometryIndex, GeometryDataFromSystem)));\r\n\r\n    unbindVao(gl);\r\n\r\n    vboArrayMap[geometryIndex] = buffers;\r\n\r\n    return vao;\r\n}\r\n\r\nexport const initData = (ShaderDataFromSystem: any) => {\r\n    ShaderDataFromSystem.index = 0;\r\n    ShaderDataFromSystem.count = 0;\r\n\r\n    ShaderDataFromSystem.shaderIndexMap = createMap();\r\n    ShaderDataFromSystem.shaderIndexByShaderNameMap = createMap();\r\n    ShaderDataFromSystem.shaderLibNameMap = createMap();\r\n}\r\n\r\n","export const webgl2_main_begin: string = \"void main(void){\\n\";\r\nexport const webgl2_main_end: string = \"}\\n\";\r\n\r\nexport const webgl2_setPos_mvp: string = \"gl_Position = cameraUbo.pMatrix * cameraUbo.vMatrix * mMatrix * vec4(a_position, 1.0);\\n\"\r\n","export const empty:GLSLChunk = {top:\"\", define:\"\", varDeclare:\"\", funcDeclare:\"\", funcDefine:\"\", body:\"\"};\nexport const NULL:number = -1.0;\nexport const common_define:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const common_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const common_function:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"mat2 transpose(mat2 m) {\\n  return mat2(  m[0][0], m[1][0],   // new col 0\\n                m[0][1], m[1][1]    // new col 1\\n             );\\n  }\\nmat3 transpose(mat3 m) {\\n  return mat3(  m[0][0], m[1][0], m[2][0],  // new col 0\\n                m[0][1], m[1][1], m[2][1],  // new col 1\\n                m[0][2], m[1][2], m[2][2]   // new col 1\\n             );\\n  }\\n\\n//bool isRenderListEmpty(int isRenderListEmpty){\\n//  return isRenderListEmpty == 1;\\n//}\\n\",body: \"\"};\nexport const common_vertex:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const highp_fragment:GLSLChunk = {top: \"precision highp float;\\nprecision highp int;\\n\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const lowp_fragment:GLSLChunk = {top: \"precision lowp float;\\nprecision lowp int;\\n\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const mediump_fragment:GLSLChunk = {top: \"precision mediump float;\\nprecision mediump int;\\n\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const modelMatrix_noInstance_vertex:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"mat4 getModelMatrix(){\\n    return u_mMatrix;\\n}\\n\",body: \"mat4 mMatrix = getModelMatrix();\\n\"};\nexport const webgl1_noShadowMap_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"vec3 getShadowVisibility() {\\n        return vec3(1.0);\\n    }\\n\",body: \"\"};\nexport const webgl1_basic_end_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"gl_FragColor = vec4(totalColor.rgb, totalColor.a * u_opacity);\\n\"};\nexport const webgl1_basic_materialColor_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"vec4 totalColor = vec4(u_color, 1.0);\\n\"};\nexport const frontLight_common:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"vec3 getDirectionLightDirByLightPos(vec3 lightPos);\\nvec3 getPointLightDirByLightPos(vec3 lightPos);\\nvec3 getPointLightDirByLightPos(vec3 lightPos, vec3 worldPosition);\\n\",funcDefine: \"vec3 getDirectionLightDirByLightPos(vec3 lightPos){\\n    return lightPos - vec3(0.0);\\n}\\nvec3 getPointLightDirByLightPos(vec3 lightPos){\\n    return lightPos - v_worldPosition;\\n}\\nvec3 getPointLightDirByLightPos(vec3 lightPos, vec3 worldPosition){\\n    return lightPos - worldPosition;\\n}\\n\",body: \"\"};\nexport const frontLight_common_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"varying vec3 v_worldPosition;\\n#if POINT_LIGHTS_COUNT > 0\\nstruct PointLight {\\n    vec3 position;\\n    vec3 color;\\n    float intensity;\\n\\n    float range;\\n    float constant;\\n    float linear;\\n    float quadratic;\\n};\\nuniform PointLight u_pointLights[POINT_LIGHTS_COUNT];\\n\\n#endif\\n\\n\\n#if DIRECTION_LIGHTS_COUNT > 0\\nstruct DirectionLight {\\n    vec3 position;\\n\\n    float intensity;\\n\\n    vec3 color;\\n};\\nuniform DirectionLight u_directionLights[DIRECTION_LIGHTS_COUNT];\\n#endif\\n\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const frontLight_common_vertex:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"varying vec3 v_worldPosition;\\n#if POINT_LIGHTS_COUNT > 0\\n    struct PointLight {\\n    vec3 position;\\n    vec3 color;\\n    float intensity;\\n\\n    float range;\\n    float constant;\\n    float linear;\\n    float quadratic;\\n};\\nuniform PointLight u_pointLights[POINT_LIGHTS_COUNT];\\n\\n#endif\\n\\n\\n#if DIRECTION_LIGHTS_COUNT > 0\\n    struct DirectionLight {\\n    vec3 position;\\n\\n    float intensity;\\n\\n    vec3 color;\\n};\\nuniform DirectionLight u_directionLights[DIRECTION_LIGHTS_COUNT];\\n#endif\\n\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const frontLight_end_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"gl_FragColor = totalColor;\\n\"};\nexport const frontLight_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"float getBlinnShininess(float shininess, vec3 normal, vec3 lightDir, vec3 viewDir, float dotResultBetweenNormAndLight){\\n        vec3 halfAngle = normalize(lightDir + viewDir);\\n        float blinnTerm = dot(normal, halfAngle);\\n\\n        blinnTerm = clamp(blinnTerm, 0.0, 1.0);\\n        blinnTerm = dotResultBetweenNormAndLight != 0.0 ? blinnTerm : 0.0;\\n        blinnTerm = pow(blinnTerm, shininess);\\n\\n        return blinnTerm;\\n}\\n\\nfloat getPhongShininess(float shininess, vec3 normal, vec3 lightDir, vec3 viewDir, float dotResultBetweenNormAndLight){\\n        vec3 reflectDir = reflect(-lightDir, normal);\\n        float phongTerm = dot(viewDir, reflectDir);\\n\\n        phongTerm = clamp(phongTerm, 0.0, 1.0);\\n        phongTerm = dotResultBetweenNormAndLight != 0.0 ? phongTerm : 0.0;\\n        phongTerm = pow(phongTerm, shininess);\\n\\n        return phongTerm;\\n}\\n\\nvec3 calcLight(vec3 lightDir, vec3 color, float intensity, float attenuation, vec3 normal, vec3 viewDir)\\n{\\n        vec3 materialLight = getMaterialLight();\\n        vec3 materialDiffuse = getMaterialDiffuse();\\n        vec3 materialSpecular = u_specular;\\n        vec3 materialEmission = getMaterialEmission();\\n\\n        float specularStrength = getSpecularStrength();\\n\\n        float dotResultBetweenNormAndLight = dot(normal, lightDir);\\n        float diff = max(dotResultBetweenNormAndLight, 0.0);\\n\\n        vec3 emissionColor = materialEmission;\\n\\n        vec3 ambientColor = (u_ambient + materialLight) * materialDiffuse.rgb;\\n\\n\\n        if(u_lightModel == 3){\\n            return emissionColor + ambientColor;\\n        }\\n\\n//        vec4 diffuseColor = vec4(color * materialDiffuse.rgb * diff * intensity, materialDiffuse.a);\\n        vec3 diffuseColor = color * materialDiffuse.rgb * diff * intensity;\\n\\n        float spec = 0.0;\\n\\n        if(u_lightModel == 2){\\n                spec = getPhongShininess(u_shininess, normal, lightDir, viewDir, diff);\\n        }\\n        else if(u_lightModel == 1){\\n                spec = getBlinnShininess(u_shininess, normal, lightDir, viewDir, diff);\\n        }\\n\\n        vec3 specularColor = spec * materialSpecular * specularStrength * intensity;\\n\\n//        return vec4(emissionColor + ambientColor + attenuation * (diffuseColor.rgb + specularColor), diffuseColor.a);\\n        return emissionColor + ambientColor + attenuation * (diffuseColor.rgb + specularColor);\\n}\\n\\n\\n\\n\\n#if POINT_LIGHTS_COUNT > 0\\n        vec3 calcPointLight(vec3 lightDir, PointLight light, vec3 normal, vec3 viewDir)\\n{\\n        //lightDir is not normalize computing distance\\n        float distance = length(lightDir);\\n\\n        float attenuation = 0.0;\\n\\n        if(distance < light.range)\\n        {\\n            attenuation = 1.0 / (light.constant + light.linear * distance + light.quadratic * (distance * distance));\\n        }\\n\\n        lightDir = normalize(lightDir);\\n\\n        return calcLight(lightDir, light.color, light.intensity, attenuation, normal, viewDir);\\n}\\n#endif\\n\\n\\n\\n#if DIRECTION_LIGHTS_COUNT > 0\\n        vec3 calcDirectionLight(vec3 lightDir, DirectionLight light, vec3 normal, vec3 viewDir)\\n{\\n        float attenuation = 1.0;\\n\\n        lightDir = normalize(lightDir);\\n\\n        return calcLight(lightDir, light.color, light.intensity, attenuation, normal, viewDir);\\n}\\n#endif\\n\\n\\n\\nvec4 calcTotalLight(vec3 norm, vec3 viewDir){\\n    vec4 totalLight = vec4(0.0, 0.0, 0.0, 1.0);\\n\\n    #if POINT_LIGHTS_COUNT > 0\\n                for(int i = 0; i < POINT_LIGHTS_COUNT; i++){\\n                totalLight += vec4(calcPointLight(getPointLightDir(i), u_pointLights[i], norm, viewDir), 0.0);\\n        }\\n    #endif\\n\\n    #if DIRECTION_LIGHTS_COUNT > 0\\n                for(int i = 0; i < DIRECTION_LIGHTS_COUNT; i++){\\n                totalLight += vec4(calcDirectionLight(getDirectionLightDir(i), u_directionLights[i], norm, viewDir), 0.0);\\n        }\\n    #endif\\n\\n        return totalLight;\\n}\\n\",body: \"vec3 normal = normalize(getNormal());\\n\\n#ifdef BOTH_SIdE\\nnormal = normal * (-1.0 + 2.0 * float(gl_FrontFacing));\\n#endif\\n\\nvec3 viewDir = normalize(getViewDir());\\n\\nvec4 totalColor = calcTotalLight(normal, viewDir);\\n\\ntotalColor.a *= u_opacity;\\n\\ntotalColor.rgb = totalColor.rgb * getShadowVisibility();\\n\"};\nexport const frontLight_setWorldPosition_vertex:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"v_worldPosition = vec3(mMatrix * vec4(a_position, 1.0));\\n\"};\nexport const frontLight_vertex:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"gl_Position = u_pMatrix * u_vMatrix * vec4(v_worldPosition, 1.0);\\n\"};\nexport const webgl1_normalMatrix_noInstance_vertex:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"mat3 normalMatrix = u_normalMatrix;\\n\"};\nexport const webgl1_basic_map_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"varying vec2 v_mapCoord0;\\n\",funcDeclare: \"\",funcDefine: \"\",body: \"totalColor *= texture2D(u_sampler2D, v_mapCoord0);\\n\"};\nexport const webgl1_basic_map_vertex:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"varying vec2 v_mapCoord0;\\n\",funcDeclare: \"\",funcDefine: \"\",body: \"//    vec2 sourceTexCoord0 = a_texCoord * u_map0SourceRegion.zw + u_map0SourceRegion.xy;\\n//\\n//    v_mapCoord0 = sourceTexCoord0 * u_map0RepeatRegion.zw + u_map0RepeatRegion.xy;\\n\\n    v_mapCoord0 = a_texCoord;\\n\"};\nexport const webgl1_diffuseMap_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"varying vec2 v_diffuseMapTexCoord;\\n\",funcDeclare: \"\",funcDefine: \"vec3 getMaterialDiffuse() {\\n        return texture2D(u_diffuseMapSampler, v_diffuseMapTexCoord).rgb;\\n    }\\n\",body: \"\"};\nexport const webgl1_diffuseMap_vertex:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"varying vec2 v_diffuseMapTexCoord;\\n\",funcDeclare: \"\",funcDefine: \"\",body: \"//todo optimize(combine, reduce compute numbers)\\n    //todo BasicTexture extract textureMatrix\\n//    vec2 sourceTexCoord = a_texCoord * u_diffuseMapSourceRegion.zw + u_diffuseMapSourceRegion.xy;\\n//    v_diffuseMapTexCoord = sourceTexCoord * u_diffuseMapRepeatRegion.zw + u_diffuseMapRepeatRegion.xy;\\n\\n    v_diffuseMapTexCoord = a_texCoord;\\n\"};\nexport const webgl1_noDiffuseMap_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"vec3 getMaterialDiffuse() {\\n        return u_diffuse;\\n    }\\n\",body: \"\"};\nexport const webgl1_noEmissionMap_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"vec3 getMaterialEmission() {\\n        return u_emission;\\n    }\\n\",body: \"\"};\nexport const webgl1_noLightMap_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"vec3 getMaterialLight() {\\n        return vec3(0.0);\\n    }\\n\",body: \"\"};\nexport const webgl1_noNormalMap_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"varying vec3 v_normal;\\n\",funcDeclare: \"vec3 getNormal();\\n\\n\",funcDefine: \"vec3 getNormal(){\\n    return v_normal;\\n}\\n\\n#if POINT_LIGHTS_COUNT > 0\\nvec3 getPointLightDir(int index){\\n    //workaround '[] : Index expression must be constant' error\\n    for (int x = 0; x <= POINT_LIGHTS_COUNT; x++) {\\n        if(x == index){\\n            return getPointLightDirByLightPos(u_pointLights[x].position);\\n        }\\n    }\\n    /*!\\n    solve error in window7 chrome/firefox:\\n    not all control paths return a value.\\n    failed to create d3d shaders\\n    */\\n    return vec3(0.0);\\n}\\n#endif\\n\\n#if DIRECTION_LIGHTS_COUNT > 0\\nvec3 getDirectionLightDir(int index){\\n    //workaround '[] : Index expression must be constant' error\\n    for (int x = 0; x <= DIRECTION_LIGHTS_COUNT; x++) {\\n        if(x == index){\\n            return getDirectionLightDirByLightPos(u_directionLights[x].position);\\n        }\\n    }\\n\\n    /*!\\n    solve error in window7 chrome/firefox:\\n    not all control paths return a value.\\n    failed to create d3d shaders\\n    */\\n    return vec3(0.0);\\n}\\n#endif\\n\\n\\nvec3 getViewDir(){\\n    return normalize(u_cameraPos - v_worldPosition);\\n}\\n\",body: \"\"};\nexport const webgl1_noNormalMap_vertex:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"varying vec3 v_normal;\\n\",funcDeclare: \"\",funcDefine: \"\",body: \"v_normal = normalize(normalMatrix * a_normal);\\n\"};\nexport const webgl1_noSpecularMap_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"float getSpecularStrength() {\\n        return 1.0;\\n    }\\n\",body: \"\"};\nexport const webgl1_specularMap_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"varying vec2 v_specularMapTexCoord;\\n\",funcDeclare: \"\",funcDefine: \"float getSpecularStrength() {\\n        return texture2D(u_specularMapSampler, v_specularMapTexCoord).r;\\n    }\\n\",body: \"\"};\nexport const webgl1_specularMap_vertex:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"varying vec2 v_specularMapTexCoord;\\n\",funcDeclare: \"\",funcDefine: \"\",body: \"v_specularMapTexCoord = a_texCoord;\\n\"};\nexport const webgl2_deferLightPass_directionLight_noNormalMap_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"vec3 getDirectionLightDir(){\\n    return getDirectionLightDirByLightPos(directionLightUbo.lightPosition.xyz);\\n}\\n\",body: \"\"};\nexport const webgl2_deferLightPass_pointLight_noNormalMap_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"vec3 getPointLightDir(vec3 worldPosition){\\n    return getPointLightDirByLightPos(pointLightUbo.lightPosition.xyz, worldPosition);\\n}\\n\",body: \"\"};\nexport const webgl2_noShadowMap_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"vec3 getShadowVisibility() {\\n        return vec3(1.0);\\n    }\\n\",body: \"\"};\nexport const webgl2_basic_end_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"out vec4 fragColor;\\n\",funcDeclare: \"\",funcDefine: \"\",body: \"fragColor = vec4(totalColor.rgb, totalColor.a * u_opacity);\\n\"};\nexport const webgl2_basic_materialColor_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"vec4 totalColor = vec4(u_color, 1.0);\\n\"};\nexport const webgl2_basic_vertex:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const ubo_light:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"layout(std140) uniform LightUbo {\\n/*! vec4(lightModel, 0.0, 0.0, 0.0) */\\n    vec4 lightModel;\\n} lightUbo;\\n\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const ubo_camera:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"layout(std140) uniform CameraUbo {\\n    mat4 vMatrix;\\n    mat4 pMatrix;\\n    vec4 cameraPos;\\n    vec4 normalMatrixCol1;\\n    vec4 normalMatrixCol2;\\n    vec4 normalMatrixCol3;\\n} cameraUbo;\\n\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const version:GLSLChunk = {top: \"#version 300 es\\n\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const webgl2_common_define:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const webgl2_common_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const webgl2_common_function:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const webgl2_common_vertex:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const webgl2_basic_map_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"in vec2 v_mapCoord0;\\n\",funcDeclare: \"\",funcDefine: \"\",body: \"totalColor *= texture(u_sampler2D, v_mapCoord0);\\n\"};\nexport const webgl2_basic_map_vertex:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"out vec2 v_mapCoord0;\\n\",funcDeclare: \"\",funcDefine: \"\",body: \"//    vec2 sourceTexCoord0 = a_texCoord * u_map0SourceRegion.zw + u_map0SourceRegion.xy;\\n//\\n//    v_mapCoord0 = sourceTexCoord0 * u_map0RepeatRegion.zw + u_map0RepeatRegion.xy;\\n\\n    v_mapCoord0 = a_texCoord;\\n\"};\nexport const gbuffer_common_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"in vec3 v_worldPosition;\\n\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const gbuffer_common_vertex:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"out vec3 v_worldPosition;\\n\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const gbuffer_end_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"layout(location=0) out vec4 gbufferPosition;\\nlayout(location=1) out vec4 gbufferNormal;\\nlayout(location=2) out vec4 gbufferColor;\\n\",funcDeclare: \"\",funcDefine: \"\",body: \"gbufferPosition.xyz = v_worldPosition;\\n    gbufferPosition.w = u_shininess;\\n    gbufferNormal.xyz = getNormal();\\n    gbufferNormal.w = 1.0;\\n    gbufferColor.xyz = getMaterialDiffuse();\\n    gbufferColor.w = getSpecularStrength();\\n\"};\nexport const gbuffer_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const gbuffer_setWorldPosition_vertex:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"v_worldPosition = vec3(mMatrix * vec4(a_position, 1.0));\\n\"};\nexport const gbuffer_vertex:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"//todo use u_vpMatrix\\n    gl_Position = cameraUbo.pMatrix * cameraUbo.vMatrix * vec4(v_worldPosition, 1.0);\\n//    gl_Position = u_vpMatrix * vec4(v_worldPosition, 1.0);\\n\"};\nexport const deferLightPass_common:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"in vec2 v_texcoord;\\n\",funcDeclare: \"\",funcDefine: \"\",body: \"vec4 colorData = texture(u_colorBuffer, v_texcoord);\\n\\n            vec3 diffuseColor = colorData.xyz;\\n\"};\nexport const deferLightPass_directionLight_pointLight_common:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"float getBlinnShininess(float shininess, vec3 normal, vec3 lightDir, vec3 viewDir, float dotResultBetweenNormAndLight){\\n        vec3 halfAngle = normalize(lightDir + viewDir);\\n        float blinnTerm = dot(normal, halfAngle);\\n\\n        blinnTerm = clamp(blinnTerm, 0.0, 1.0);\\n        blinnTerm = dotResultBetweenNormAndLight != 0.0 ? blinnTerm : 0.0;\\n        blinnTerm = pow(blinnTerm, shininess);\\n\\n        return blinnTerm;\\n}\\n\\nfloat getPhongShininess(float shininess, vec3 normal, vec3 lightDir, vec3 viewDir, float dotResultBetweenNormAndLight){\\n        vec3 reflectDir = reflect(-lightDir, normal);\\n        float phongTerm = dot(viewDir, reflectDir);\\n\\n        phongTerm = clamp(phongTerm, 0.0, 1.0);\\n        phongTerm = dotResultBetweenNormAndLight != 0.0 ? phongTerm : 0.0;\\n        phongTerm = pow(phongTerm, shininess);\\n\\n        return phongTerm;\\n}\\n\\n\\n//todo optimize specular color\\nvec3 getSpecularColor(vec3 diffuseColor)\\n{\\n    return diffuseColor;\\n}\\n\\n\",body: \"vec4 positionData = texture(u_positionBuffer,\\nv_texcoord);\\n\\n            vec3 position = positionData.xyz;\\n            float shininess = positionData.w;\\n\\n\\n            vec3 normal = normalize(texture(u_normalBuffer, v_texcoord).rgb);\\n\\n            float specularStrength  = colorData.w;\\n\\n\\n\\nvec3 viewDir = normalize(getViewDir(position));\\n\"};\nexport const deferLightPass_end_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"out vec4 fragColor;\\n\",funcDeclare: \"\",funcDefine: \"\",body: \"fragColor = totalColor;\\n\"};\nexport const deferLightPass_vertex:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"out vec2 v_texcoord;\\n\",funcDeclare: \"\",funcDefine: \"\",body: \"\\n        v_texcoord = a_texCoord * 0.5 + vec2(0.5);\\n\\n    gl_Position = vec4(a_position, 1.0);\\n\"};\nexport const webgl2_normalMatrix_noInstance_vertex:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"\",body: \"mat3 normalMatrix = mat3(\\nvec3(cameraUbo.normalMatrixCol1),\\nvec3(cameraUbo.normalMatrixCol2),\\nvec3(cameraUbo.normalMatrixCol3)\\n);\\n\"};\nexport const webgl2_diffuseMap_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"in vec2 v_diffuseMapTexCoord;\\n\",funcDeclare: \"\",funcDefine: \"vec3 getMaterialDiffuse() {\\n        return texture(u_diffuseMapSampler, v_diffuseMapTexCoord).rgb;\\n    }\\n\",body: \"\"};\nexport const webgl2_diffuseMap_vertex:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"//\tvarying vec2 v_diffuseMapTexCoord;\\n\tout vec2 v_diffuseMapTexCoord;\\n\",funcDeclare: \"\",funcDefine: \"\",body: \"//todo optimize(combine, reduce compute numbers)\\n    //todo BasicTexture extract textureMatrix\\n//    vec2 sourceTexCoord = a_texCoord * u_diffuseMapSourceRegion.zw + u_diffuseMapSourceRegion.xy;\\n//    v_diffuseMapTexCoord = sourceTexCoord * u_diffuseMapRepeatRegion.zw + u_diffuseMapRepeatRegion.xy;\\n\\n    v_diffuseMapTexCoord = a_texCoord;\\n\"};\nexport const webgl2_gbuffer_noNormalMap_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"in vec3 v_normal;\\n\",funcDeclare: \"vec3 getNormal();\\n\\n\",funcDefine: \"vec3 getNormal(){\\n    return v_normal;\\n}\\n\\n\",body: \"\"};\nexport const webgl2_gbuffer_noNormalMap_vertex:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"out vec3 v_normal;\\n\",funcDeclare: \"\",funcDefine: \"\",body: \"v_normal = normalize(normalMatrix * a_normal);\\n\"};\nexport const webgl2_noDiffuseMap_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"vec3 getMaterialDiffuse() {\\n        return u_diffuse;\\n    }\\n\",body: \"\"};\nexport const webgl2_noSpecularMap_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"float getSpecularStrength() {\\n        return 1.0;\\n    }\\n\",body: \"\"};\nexport const webgl2_specularMap_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"in vec2 v_specularMapTexCoord;\\n\",funcDeclare: \"\",funcDefine: \"float getSpecularStrength() {\\n        return texture(u_specularMapSampler, v_specularMapTexCoord).r;\\n    }\\n\",body: \"\"};\nexport const webgl2_specularMap_vertex:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"out vec2 v_specularMapTexCoord;\\n\",funcDeclare: \"\",funcDefine: \"\",body: \"v_specularMapTexCoord = a_texCoord;\\n\"};\nexport const deferLightPass_ambientLight_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"vec3 calcLight(vec3 materialDiffuse)\\n{\\n    vec3 materialLight = getMaterialLight();\\n    return (ambientLightUbo.lightColorData.xyz + materialLight) * materialDiffuse;\\n}\\n\\nvec3 calcAmbientLight(vec3 diffuseColor)\\n{\\n    return calcLight(diffuseColor);\\n}\\n\\nvec4 calcTotalLight(vec3 diffuseColor){\\n    return vec4(calcAmbientLight(diffuseColor), 1.0);\\n}\\n\",body: \"vec4 totalColor = calcTotalLight(diffuseColor);\\n\"};\nexport const ubo_ambientLight:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"layout(std140) uniform AmbientLightUbo {\\n/*! vec4(colorVec3, 0.0) */\\nvec4 lightColorData;\\n} ambientLightUbo;\\n\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const deferLightPass_directionLight_common:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"vec3 getDirectionLightDirByLightPos(vec3 lightPos){\\n    return lightPos - vec3(0.0);\\n}\\n\",body: \"\"};\nexport const deferLightPass_directionLight_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"vec3 calcLight(vec3 lightDir, vec3 color, float intensity, vec3 normal, vec3 viewDir, vec3 materialDiffuse, float specularStrength, float shininess)\\n{\\n        vec3 materialLight = getMaterialLight();\\n        vec3 materialSpecular = getSpecularColor(materialDiffuse);\\n\\n        vec3 materialEmission = getMaterialEmission();\\n\\n        float dotResultBetweenNormAndLight = dot(normal, lightDir);\\n        float diff = max(dotResultBetweenNormAndLight, 0.0);\\n\\n        vec3 emissionColor = materialEmission;\\n\\n//        vec3 ambientColor = (u_ambient + materialLight) * materialDiffuse;\\n//        vec3 ambientColor = vec3(0.0);\\n\\n        float lightModel = lightUbo.lightModel.x;\\n\\n        if(lightModel == 3.0){\\n//            return emissionColor + ambientColor;\\n            return emissionColor;\\n        }\\n\\n        vec3 diffuseColor = color * materialDiffuse * diff * intensity;\\n\\n        float spec = 0.0;\\n\\n        if(lightModel == 2.0){\\n                spec = getPhongShininess(shininess, normal, lightDir, viewDir, diff);\\n        }\\n        else if(lightModel == 1.0){\\n                spec = getBlinnShininess(shininess, normal, lightDir, viewDir, diff);\\n        }\\n\\n        vec3 specularColor = spec * materialSpecular * specularStrength * intensity;\\n\\n//        return emissionColor + ambientColor + attenuation * (diffuseColor + specularColor);\\n        return emissionColor + diffuseColor + specularColor;\\n}\\n\\n\\n\\n        vec3 calcDirectionLight(vec3 lightDir, vec3 normal, vec3 viewDir, vec3 diffuseColor, float specularStrength, float shininess)\\n{\\n        //lightDir is not normalize computing distance\\n        float distance = length(lightDir);\\n\\n        lightDir = normalize(lightDir);\\n\\n        vec4 lightColorData = directionLightUbo.lightColorData;\\n\\n        return calcLight(lightDir, lightColorData.xyz, lightColorData.w, normal, viewDir, diffuseColor, specularStrength, shininess);\\n}\\n\\nvec4 calcTotalLight(vec3 normal, vec3 viewDir, vec3 diffuseColor, float specularStrength, float shininess){\\n    vec4 totalLight = vec4(0.0, 0.0, 0.0, 1.0);\\n\\n                totalLight += vec4(calcDirectionLight(getDirectionLightDir(), normal, viewDir, diffuseColor, specularStrength, shininess), 0.0);\\n\\n        return totalLight;\\n}\\n\",body: \"vec4 totalColor = calcTotalLight(normal, viewDir, diffuseColor, specularStrength, shininess);\\n\"};\nexport const ubo_directionLight:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"layout(std140) uniform DirectionLightUbo {\\nvec4 lightPosition;\\n/*! vec4(colorVec3, intensity) */\\nvec4 lightColorData;\\n} directionLightUbo;\\n\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const deferLightPass_pointLight_common:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"vec3 getPointLightDirByLightPos(vec3 lightPos, vec3 worldPosition){\\n    return lightPos - worldPosition;\\n}\\n\",body: \"\"};\nexport const deferLightPass_pointLight_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"vec3 calcLight(vec3 lightDir, vec3 color, float intensity, float attenuation, vec3 normal, vec3 viewDir, vec3 materialDiffuse, float specularStrength, float shininess)\\n{\\n        vec3 materialLight = getMaterialLight();\\n        vec3 materialSpecular = getSpecularColor(materialDiffuse);\\n\\n        vec3 materialEmission = getMaterialEmission();\\n\\n        float dotResultBetweenNormAndLight = dot(normal, lightDir);\\n        float diff = max(dotResultBetweenNormAndLight, 0.0);\\n\\n        vec3 emissionColor = materialEmission;\\n\\n//        vec3 ambientColor = (u_ambient + materialLight) * materialDiffuse;\\n//        vec3 ambientColor = vec3(0.0);\\n\\n        float lightModel = lightUbo.lightModel.x;\\n\\n        if(lightModel == 3.0){\\n//            return emissionColor + ambientColor;\\n            return emissionColor;\\n        }\\n\\n        vec3 diffuseColor = color * materialDiffuse * diff * intensity;\\n\\n        float spec = 0.0;\\n\\n        if(lightModel == 2.0){\\n                spec = getPhongShininess(shininess, normal, lightDir, viewDir, diff);\\n        }\\n        else if(lightModel == 1.0){\\n                spec = getBlinnShininess(shininess, normal, lightDir, viewDir, diff);\\n        }\\n\\n        vec3 specularColor = spec * materialSpecular * specularStrength * intensity;\\n\\n//        return emissionColor + ambientColor + attenuation * (diffuseColor + specularColor);\\n        return emissionColor + attenuation * (diffuseColor + specularColor);\\n}\\n\\n\\n\\n        vec3 calcPointLight(vec3 lightDir, vec3 normal, vec3 viewDir, vec3 diffuseColor, float specularStrength, float shininess)\\n{\\n        //lightDir is not normalize computing distance\\n        float distance = length(lightDir);\\n\\n        float attenuation = 0.0;\\n\\n        vec4 lightData = pointLightUbo.lightData;\\n\\n//        mat3 normalMatrix = cameraUbo.normalMatrix;\\n\\n//        if(normalMatrix[0][3] == 0.0){\\n//            return vec3(0.5);\\n//        }\\n\\n        if(distance >= lightData.w){\\n            return vec3(0.0);\\n        }\\n\\n        attenuation = 1.0 / (lightData.x + lightData.y * distance + lightData.z * (distance * distance));\\n\\n        lightDir = normalize(lightDir);\\n\\n        vec4 lightColorData = pointLightUbo.lightColorData;\\n\\n        return calcLight(lightDir, lightColorData.xyz, lightColorData.w, attenuation, normal, viewDir, diffuseColor, specularStrength, shininess);\\n}\\n\\nvec4 calcTotalLight(vec3 normal, vec3 position, vec3 viewDir, vec3 diffuseColor, float specularStrength, float shininess){\\n    vec4 totalLight = vec4(0.0, 0.0, 0.0, 1.0);\\n\\n                totalLight += vec4(calcPointLight(getPointLightDir(position), normal, viewDir, diffuseColor, specularStrength, shininess), 0.0);\\n\\n        return totalLight;\\n}\\n\",body: \"vec4 totalColor = calcTotalLight(normal, position, viewDir, diffuseColor, specularStrength, shininess);\\n\"};\nexport const ubo_pointLight:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"layout(std140) uniform PointLightUbo {\\nvec4 lightPosition;\\n/*! vec4(colorVec3, intensity) */\\nvec4 lightColorData;\\n/*! vec4(constant, linear, quadratic, radius) */\\nvec4 lightData;\\n} pointLightUbo;\\n\",funcDeclare: \"\",funcDefine: \"\",body: \"\"};\nexport const webgl2_deferLightPass_noNormalMap_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"vec3 getViewDir(vec3 worldPosition){\\n    return normalize(cameraUbo.cameraPos.xyz - worldPosition);\\n}\\n\",body: \"\"};\nexport const webgl2_noEmissionMap_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"vec3 getMaterialEmission() {\\n    //todo support emission color\\n//        return u_emission;\\n        return vec3(0.0);\\n    }\\n\",body: \"\"};\nexport const webgl2_noLightMap_fragment:GLSLChunk = {top: \"\",define: \"\",varDeclare: \"\",funcDeclare: \"\",funcDefine: \"vec3 getMaterialLight() {\\n        return vec3(0.0);\\n    }\\n\",body: \"\"};\nexport type GLSLChunk = {top:string;define:string;varDeclare:string;funcDeclare:string;funcDefine:string;body:string;}\n","import { isConfigDataExist } from \"../../../../../utils/renderConfigUtils\";\r\nimport { webgl2_main_begin, webgl2_main_end } from \"../../../../shader/snippet/ShaderSnippet\";\r\nimport { highp_fragment, lowp_fragment, mediump_fragment, version } from \"../../../../../shader/chunk/ShaderChunk\";\r\nimport { ExtendUtils } from \"wonder-commonlib/dist/es2015/utils/ExtendUtils\";\r\nimport { it, requireCheckFunc } from \"../../../../../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { forEach } from \"../../../../../../utils/arrayUtils\";\r\nimport { BuildGLSLSourceFuncFuncDataMap } from \"../../../../../type/dataType\";\r\nimport { InitShaderDataMap } from \"../../../../../type/utilsType\";\r\nimport {\r\n    IWebGL2GLSLConfig, IWebGL2GLSLFuncConfig,\r\n    IWebGL2ShaderLibContentGenerator\r\n} from \"../../../../../worker/webgl2/both_file/data/shaderLib_generator\";\r\nimport {\r\n    buildSourceDefine,\r\n    generateUniformSource, getEmptyFuncGLSLConfig, getFuncGLSLDefineListData, getFuncGLSLPartData,\r\n    getGLSLDefineListData, getGLSLPartData,\r\n    getPrecisionSource\r\n} from \"../../../../../utils/shader/shaderSourceBuildUtils\";\r\nimport { IWebGL2InitShaderFuncDataMap } from \"../interface/IUtils\";\r\n\r\nexport const buildGLSLSource = requireCheckFunc((materialIndex: number, materialShaderLibNameArr: Array<string>, shaderLibData: IWebGL2ShaderLibContentGenerator, funcDataMap: BuildGLSLSourceFuncFuncDataMap, initShaderDataMap: IWebGL2InitShaderFuncDataMap) => {\r\n    it(\"shaderLib should be defined\", () => {\r\n        forEach(materialShaderLibNameArr, (shaderLibName: string) => {\r\n            expect(shaderLibData[shaderLibName]).exist;\r\n        })\r\n    });\r\n}, (materialIndex: number, materialShaderLibNameArr: Array<string>, shaderLibData: IWebGL2ShaderLibContentGenerator, funcDataMap: BuildGLSLSourceFuncFuncDataMap, initShaderDataMap: InitShaderDataMap) => {\r\n    var vsTop: string = \"\",\r\n        vsDefine: string = \"\",\r\n        vsVarDeclare: string = \"\",\r\n        vsFuncDeclare: string = \"\",\r\n        vsFuncDefine: string = \"\",\r\n        vsBody: string = \"\",\r\n        fsTop: string = \"\",\r\n        fsDefine: string = \"\",\r\n        fsVarDeclare: string = \"\",\r\n        fsFuncDeclare: string = \"\",\r\n        fsFuncDefine: string = \"\",\r\n        fsBody: string = \"\";\r\n    const _setVs =(getGLSLPartData: Function, getGLSLDefineListData: Function, vs: IWebGL2GLSLConfig) => {\r\n        vsTop += getGLSLPartData(vs, \"top\");\r\n        vsDefine += buildSourceDefine(getGLSLDefineListData(vs), initShaderDataMap) + getGLSLPartData(vs, \"define\");\r\n        vsVarDeclare += getGLSLPartData(vs, \"varDeclare\");\r\n        vsFuncDeclare += getGLSLPartData(vs, \"funcDeclare\");\r\n        vsFuncDefine += getGLSLPartData(vs, \"funcDefine\");\r\n        vsBody += getGLSLPartData(vs, \"body\");\r\n    },\r\n        _setFs = (getGLSLPartData: Function, getGLSLDefineListData: Function, fs: IWebGL2GLSLConfig) => {\r\n            fsTop += getGLSLPartData(fs, \"top\");\r\n            fsDefine += buildSourceDefine(getGLSLDefineListData(fs), initShaderDataMap) + getGLSLPartData(fs, \"define\");\r\n            fsVarDeclare += getGLSLPartData(fs, \"varDeclare\");\r\n            fsFuncDeclare += getGLSLPartData(fs, \"funcDeclare\");\r\n            fsFuncDefine += getGLSLPartData(fs, \"funcDefine\");\r\n            fsBody += getGLSLPartData(fs, \"body\");\r\n        };\r\n\r\n    vsBody += webgl2_main_begin;\r\n    fsBody += webgl2_main_begin;\r\n\r\n    vsTop += version.top;\r\n\r\n    fsTop += version.top;\r\n    fsTop += getPrecisionSource(lowp_fragment, mediump_fragment, highp_fragment, initShaderDataMap.GPUDetectDataFromSystem);\r\n\r\n    forEach(materialShaderLibNameArr, (shaderLibName: string) => {\r\n        var glslData = shaderLibData[shaderLibName].glsl,\r\n            vs: IWebGL2GLSLConfig = null,\r\n            fs: IWebGL2GLSLConfig = null,\r\n            func: Function = null;\r\n\r\n        if (!isConfigDataExist(glslData)) {\r\n            return;\r\n        }\r\n\r\n        vs = glslData.vs;\r\n        fs = glslData.fs;\r\n        func = glslData.func;\r\n\r\n        if (isConfigDataExist(vs)) {\r\n            _setVs(getGLSLPartData, getGLSLDefineListData, vs);\r\n        }\r\n\r\n        if (isConfigDataExist(fs)) {\r\n            _setFs(getGLSLPartData, getGLSLDefineListData, fs);\r\n        }\r\n\r\n        if (isConfigDataExist(func)) {\r\n            let funcConfig: IWebGL2GLSLFuncConfig = func(materialIndex, funcDataMap, initShaderDataMap);\r\n\r\n            if (isConfigDataExist(funcConfig)) {\r\n                let vs = funcConfig.vs,\r\n                    fs = funcConfig.fs;\r\n\r\n                if (isConfigDataExist(vs)) {\r\n                    vs = ExtendUtils.extend(getEmptyFuncGLSLConfig(), vs);\r\n\r\n                    _setVs(getFuncGLSLPartData, getFuncGLSLDefineListData, vs);\r\n                }\r\n\r\n                if (isConfigDataExist(fs)) {\r\n                    fs = ExtendUtils.extend(getEmptyFuncGLSLConfig(), fs);\r\n\r\n                    _setFs(getFuncGLSLPartData, getFuncGLSLDefineListData, fs);\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    vsBody += webgl2_main_end;\r\n    fsBody += webgl2_main_end;\r\n\r\n    vsTop += _generateAttributeSource(materialShaderLibNameArr, shaderLibData);\r\n    vsTop += generateUniformSource(materialShaderLibNameArr, shaderLibData, vsVarDeclare, vsFuncDefine, vsBody);\r\n    fsTop += generateUniformSource(materialShaderLibNameArr, shaderLibData, fsVarDeclare, fsFuncDefine, fsBody);\r\n\r\n    return {\r\n        vsSource: vsTop + vsDefine + vsVarDeclare + vsFuncDeclare + vsFuncDefine + vsBody,\r\n        fsSource: fsTop + fsDefine + fsVarDeclare + fsFuncDeclare + fsFuncDefine + fsBody\r\n    }\r\n})\r\n\r\nconst _generateAttributeSource =(materialShaderLibNameArr: Array<string>, shaderLibData: IWebGL2ShaderLibContentGenerator) => {\r\n    var result = \"\";\r\n\r\n    forEach(materialShaderLibNameArr, (shaderLibName: string) => {\r\n        var sendData = shaderLibData[shaderLibName].send,\r\n            attributeData = null;\r\n\r\n        if (!isConfigDataExist(sendData) || !isConfigDataExist(sendData.attribute)) {\r\n            return;\r\n        }\r\n\r\n        attributeData = sendData.attribute;\r\n\r\n        forEach(attributeData, ({\r\n                                    name,\r\n            type,\r\n            location\r\n                                }) => {\r\n            result += `layout(location=${location}) in ${type} ${name};\\n`;\r\n        });\r\n    });\r\n\r\n    return result;\r\n}\r\n","import { IWebGL2ShaderLibContentGenerator } from \"../../worker/webgl2/both_file/data/shaderLib_generator\";\r\nimport { MaterialDataMap } from \"../../type/dataType\";\r\nimport { getAlphaTest, isTestAlpha } from \"../../../component/material/MaterialSystem\";\r\nimport { buildGLSLSource as buildGLSLSourceUtils } from \"../utils/worker/render_file/shader/shaderSourceBuildUtils\";\r\n\r\nexport const buildGLSLSource = (materialIndex: number, materialShaderLibNameArr: Array<string>, shaderLibData: IWebGL2ShaderLibContentGenerator, MaterialDataMap: MaterialDataMap) => {\r\n    return buildGLSLSourceUtils(materialIndex, materialShaderLibNameArr, shaderLibData, {\r\n        getAlphaTest: getAlphaTest,\r\n        isTestAlpha: isTestAlpha\r\n    }, MaterialDataMap);\r\n}\r\n","import { ShaderIndexMap, ShaderLibNameMap } from \"../../../../../type/dataType\";\r\n\r\nexport abstract class WebGL1ShaderDataCommon {\r\n    public static index: number = null;\r\n    public static count: number = null;\r\n\r\n    public static shaderIndexMap: ShaderIndexMap = null;\r\n    public static shaderLibNameMap: ShaderLibNameMap = null;\r\n}\r\n","import { WebGL1ShaderDataCommon } from \"../utils/worker/render_file/shader/ShaderDataCommon\";\r\n\r\nexport class WebGL1ShaderData extends WebGL1ShaderDataCommon {\r\n}\r\n","import { ShaderIndexByShaderNameMap, ShaderIndexMap, ShaderLibNameMap } from \"../../../../../type/dataType\";\r\n\r\nexport abstract class WebGL2ShaderDataCommon {\r\n    public static index: number = null;\r\n    public static count: number = null;\r\n\r\n    public static shaderIndexMap: ShaderIndexMap = null;\r\n    public static shaderIndexByShaderNameMap: ShaderIndexByShaderNameMap = null;\r\n    public static shaderLibNameMap: ShaderLibNameMap = null;\r\n}\r\n","import { WebGL2ShaderDataCommon } from \"../utils/worker/render_file/shader/ShaderDataCommon\";\r\n\r\nexport class WebGL2ShaderData extends WebGL2ShaderDataCommon {\r\n}\r\n","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { checkShouldAlive, Material } from \"./Material\";\r\nimport { create, initMaterial, setSpecularMap, setDiffuseMap } from \"./LightMaterialSystem\";\r\nimport { MaterialData } from \"./MaterialData\";\r\nimport { getAlphaTest, getColor, getOpacity, setAlphaTest, setColor, setOpacity } from \"./MaterialSystem\";\r\nimport { Color } from \"../../structure/Color\";\r\nimport { requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { LightMaterialData } from \"./LightMaterialData\";\r\nimport { EShading } from \"./EShading\";\r\nimport {\r\n    getEmissionColor, getLightModel, getShading, getShininess, getSpecularColor, setEmissionColor, setLightModel,\r\n    setShading,\r\n    setShininess,\r\n    setSpecularColor\r\n} from \"./LightMaterialSystem\";\r\nimport { getState } from \"../../core/DirectorSystem\";\r\nimport { DirectorData } from \"../../core/DirectorData\";\r\nimport { Texture } from \"../../renderer/texture/Texture\";\r\nimport { MapManagerData } from \"../../renderer/texture/MapManagerData\";\r\nimport { TextureData } from \"../../renderer/texture/TextureData\";\r\nimport { WebGL1ShaderData } from \"../../renderer/webgl1/shader/ShaderData\";\r\nimport { WebGL2ShaderData } from \"../../renderer/webgl2/shader/ShaderData\";\r\nimport { isWebgl1 } from \"../../renderer/device/WebGLDetectSystem\";\r\n\r\n@registerClass(\"LightMaterial\")\r\nexport class LightMaterial extends Material {\r\n}\r\n\r\nexport var createLightMaterial = null;\r\n\r\nif (isWebgl1()) {\r\n    createLightMaterial = () => {\r\n        return create(WebGL1ShaderData, MaterialData, LightMaterialData);\r\n    }\r\n}\r\nelse {\r\n    createLightMaterial = () => {\r\n        return create(WebGL2ShaderData, MaterialData, LightMaterialData);\r\n    }\r\n}\r\n\r\nexport const initLightMaterial = (material: LightMaterial) => {\r\n    initMaterial(material.index, getState(DirectorData));\r\n}\r\n\r\nexport const getLightMaterialColor = requireCheckFunc((material: LightMaterial) => {\r\n    checkShouldAlive(material);\r\n}, (material: LightMaterial) => {\r\n    return getColor(material.index, MaterialData);\r\n})\r\n\r\nexport const setLightMaterialColor = requireCheckFunc((material: LightMaterial) => {\r\n    checkShouldAlive(material);\r\n}, (material: LightMaterial, color: Color) => {\r\n    setColor(material.index, color, MaterialData);\r\n})\r\n\r\nexport const getLightMaterialOpacity = requireCheckFunc((material: LightMaterial) => {\r\n    checkShouldAlive(material);\r\n}, (material: LightMaterial) => {\r\n    return getOpacity(material.index, MaterialData);\r\n})\r\n\r\nexport const setLightMaterialOpacity = requireCheckFunc((material: LightMaterial) => {\r\n    checkShouldAlive(material);\r\n}, (material: LightMaterial, opacity: number) => {\r\n    setOpacity(material.index, opacity, MaterialData);\r\n})\r\n\r\nexport const getLightMaterialAlphaTest = requireCheckFunc((material: LightMaterial) => {\r\n    checkShouldAlive(material);\r\n}, (material: LightMaterial) => {\r\n    return getAlphaTest(material.index, MaterialData);\r\n})\r\n\r\nexport const setLightMaterialAlphaTest = requireCheckFunc((material: LightMaterial) => {\r\n    checkShouldAlive(material);\r\n}, (material: LightMaterial, alphaTest: number) => {\r\n    setAlphaTest(material.index, alphaTest, MaterialData);\r\n})\r\n\r\nexport const getLightMaterialSpecularColor = requireCheckFunc((material: LightMaterial) => {\r\n    checkShouldAlive(material);\r\n}, (material: LightMaterial) => {\r\n    return getSpecularColor(material.index, LightMaterialData);\r\n})\r\n\r\nexport const setLightMaterialSpecularColor = requireCheckFunc((material: LightMaterial) => {\r\n    checkShouldAlive(material);\r\n}, (material: LightMaterial, color: Color) => {\r\n    setSpecularColor(material.index, color, LightMaterialData);\r\n})\r\n\r\nexport const getLightMaterialEmissionColor = requireCheckFunc((material: LightMaterial) => {\r\n    checkShouldAlive(material);\r\n}, (material: LightMaterial) => {\r\n    return getEmissionColor(material.index, LightMaterialData);\r\n})\r\n\r\nexport const setLightMaterialEmissionColor = requireCheckFunc((material: LightMaterial) => {\r\n    checkShouldAlive(material);\r\n}, (material: LightMaterial, color: Color) => {\r\n    setEmissionColor(material.index, color, LightMaterialData);\r\n})\r\n\r\nexport const getLightMaterialShininess = requireCheckFunc((material: LightMaterial) => {\r\n    checkShouldAlive(material);\r\n}, (material: LightMaterial) => {\r\n    return getShininess(material.index, LightMaterialData);\r\n})\r\n\r\nexport const setLightMaterialShininess = requireCheckFunc((material: LightMaterial) => {\r\n    checkShouldAlive(material);\r\n}, (material: LightMaterial, shininess: number) => {\r\n    setShininess(material.index, shininess, LightMaterialData);\r\n})\r\n\r\nexport const getLightMaterialShading = requireCheckFunc((material: LightMaterial) => {\r\n    checkShouldAlive(material);\r\n}, (material: LightMaterial) => {\r\n    return getShading(material.index, LightMaterialData);\r\n})\r\n\r\nexport const setLightMaterialShading = requireCheckFunc((material: LightMaterial) => {\r\n    checkShouldAlive(material);\r\n}, (material: LightMaterial, shading: EShading) => {\r\n    setShading(material.index, shading, LightMaterialData);\r\n})\r\n\r\nexport const getLightMaterialLightModel = requireCheckFunc((material: LightMaterial) => {\r\n    checkShouldAlive(material);\r\n}, (material: LightMaterial) => {\r\n    return getLightModel(material.index, LightMaterialData);\r\n})\r\n\r\nexport const setLightMaterialLightModel = requireCheckFunc((material: LightMaterial) => {\r\n    checkShouldAlive(material);\r\n}, (material: LightMaterial, lightModel: number) => {\r\n    setLightModel(material.index, lightModel, LightMaterialData);\r\n})\r\n\r\nexport const setLightMaterialDiffuseMap = requireCheckFunc((material: LightMaterial) => {\r\n    checkShouldAlive(material);\r\n}, (material: LightMaterial, map: Texture) => {\r\n    setDiffuseMap(material.index, map, MapManagerData, TextureData);\r\n})\r\n\r\nexport const setLightMaterialSpecularMap = requireCheckFunc((material: LightMaterial) => {\r\n    checkShouldAlive(material);\r\n}, (material: LightMaterial, map: Texture) => {\r\n    setSpecularMap(material.index, map, MapManagerData, TextureData);\r\n})\r\n","export const initData = (startIndex: number, SpecifyMaterialData: any) => {\r\n    SpecifyMaterialData.index = startIndex;\r\n}\r\n","import { LightMaterial } from \"./LightMaterial\";\r\nimport {\r\n    addComponent as addMaterialComponent,\r\n    create as createMaterial, createDefaultColor, disposeComponent as disposeMaterialComponent,\r\n    initMaterial as initMaterialBase,\r\n    setColorData\r\n} from \"./MaterialSystem\";\r\nimport {\r\n    getColorDataSize\r\n} from \"../../renderer/utils/worker/render_file/material/materialUtils\";\r\nimport { deleteBySwapAndReset, deleteOneItemBySwapAndReset, setTypeArrayValue } from \"../../utils/typeArrayUtils\";\r\nimport { Color } from \"../../structure/Color\";\r\nimport { EShading } from \"./EShading\";\r\nimport { ELightModel } from \"./ELightModel\";\r\nimport {\r\n    computeLightBufferIndex,\r\n    createTypeArrays as createTypeArraysUtils, getClassName,\r\n    getEmissionColorArr3 as getEmissionColorArr3Utils,\r\n    getLightModel as getLightModelUtils, getLightModelDataSize, getMapSize, getNotHasMapValue,\r\n    getShading as getShadingUtils,\r\n    getShadingDataSize,\r\n    getShininess as getShininessUtils, getShininessDataSize,\r\n    getSpecularColorArr3 as getSpecularColorArr3Utils, hasDiffuseMap as hasDiffuseMapUtils,\r\n    hasSpecularMap as hasSpecularMapUtils, markHasMap, markNotHasMap,\r\n} from \"../../renderer/utils/worker/render_file/material/lightMaterialUtils\";\r\nimport { Material } from \"./Material\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport { MaterialData } from \"./MaterialData\";\r\nimport { Map } from \"immutable\";\r\nimport { initData as initSpecifyMaterialData } from \"./SpecifyMaterialSystem\";\r\nimport { getLightMaterialBufferCount } from \"../../renderer/utils/worker/render_file/material/bufferUtils\";\r\nimport { ensureFunc, it } from \"../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { generateComponentIndex } from \"../ComponentSystem\";\r\nimport { LightMaterialData } from \"./LightMaterialData\";\r\nimport { getColor3Data } from \"../utils/operateBufferDataUtils\";\r\nimport { MapManagerData } from \"../../renderer/texture/MapManagerData\";\r\nimport { Texture } from \"../../renderer/texture/Texture\";\r\nimport { getMapCount, initMapManager, setMap } from \"../../renderer/texture/MapManagerSystem\";\r\nimport { getLightMaterialBufferStartIndex } from \"../../renderer/utils/material/bufferUtils\";\r\nimport { getGL } from \"../../renderer/device/DeviceManagerSystem\";\r\nimport { TextureData } from \"../../renderer/texture/TextureData\";\r\nimport { DeviceManagerData } from \"../../renderer/device/DeviceManagerData\";\r\n\r\nexport const create = ensureFunc((component: Material) => {\r\n    it(\"index should <= max count\", () => {\r\n        expect(component.index).lte(getLightMaterialBufferStartIndex() + getLightMaterialBufferCount());\r\n    });\r\n}, (ShaderData: any, MaterialData: any, LightMaterialData: any) => {\r\n    var material = new LightMaterial(),\r\n        index = generateComponentIndex(LightMaterialData);\r\n\r\n    material.index = index;\r\n\r\n    material = createMaterial(index, material, ShaderData, MaterialData);\r\n\r\n    return material;\r\n})\r\n\r\nexport const getSpecularColor = (index: number, LightMaterialData: any) => {\r\n    return getColor3Data(computeLightBufferIndex(index), LightMaterialData.specularColors);\r\n}\r\n\r\nexport const getSpecularColorArr3 = (index: number, LightMaterialData: any) => {\r\n    return getSpecularColorArr3Utils(computeLightBufferIndex(index), LightMaterialData);\r\n}\r\n\r\nexport const setSpecularColor = (index: number, color: Color, LightMaterialData: any) => {\r\n    setColorData(computeLightBufferIndex(index), color, LightMaterialData.specularColors);\r\n}\r\n\r\nexport const setDiffuseMap = (index: number, map: Texture, MapManagerData: any, TextureData: any) => {\r\n    setMap(index, map, \"u_diffuseMapSampler\", MapManagerData, TextureData);\r\n\r\n    markHasMap(index, LightMaterialData.hasDiffuseMaps);\r\n}\r\n\r\nexport const setSpecularMap = (index: number, map: Texture, MapManagerData: any, TextureData: any) => {\r\n    setMap(index, map, \"u_specularMapSampler\", MapManagerData, TextureData);\r\n\r\n    markHasMap(index, LightMaterialData.hasSpecularMaps);\r\n}\r\n\r\n//todo add normal map, light map...\r\n\r\nexport const getEmissionColor = (index: number, LightMaterialData: any) => {\r\n    return getColor3Data(computeLightBufferIndex(index), LightMaterialData.emissionColors);\r\n}\r\n\r\nexport const getEmissionColorArr3 = (index: number, LightMaterialData: any) => {\r\n    return getEmissionColorArr3Utils(computeLightBufferIndex(index), LightMaterialData);\r\n}\r\n\r\nexport const setEmissionColor = (index: number, color: Color, LightMaterialData: any) => {\r\n    setColorData(computeLightBufferIndex(index), color, LightMaterialData.emissionColors);\r\n}\r\n\r\nexport const getShininess = (index: number, LightMaterialDataFromSystem: any) => {\r\n    return getShininessUtils(computeLightBufferIndex(index), LightMaterialDataFromSystem);\r\n}\r\n\r\nexport const setShininess = (index: number, shininess: number, LightMaterialData: any) => {\r\n    setTypeArrayValue(LightMaterialData.shininess, computeLightBufferIndex(index), shininess);\r\n}\r\n\r\nexport const getShading = (index: number, LightMaterialDataFromSystem: any) => {\r\n    return getShadingUtils(computeLightBufferIndex(index), LightMaterialDataFromSystem);\r\n}\r\n\r\nexport const setShading = (index: number, shading: EShading, LightMaterialData: any) => {\r\n    setTypeArrayValue(LightMaterialData.shadings, computeLightBufferIndex(index), shading);\r\n}\r\n\r\nexport const getLightModel = (index: number, LightMaterialDataFromSystem: any) => {\r\n    return getLightModelUtils(computeLightBufferIndex(index), LightMaterialDataFromSystem);\r\n}\r\n\r\nexport const setLightModel = (index: number, lightModel: ELightModel, LightMaterialData: any) => {\r\n    setTypeArrayValue(LightMaterialData.lightModels, computeLightBufferIndex(index), lightModel);\r\n}\r\n\r\nexport const hasDiffuseMap = (index: number, LightMaterialData: any) => {\r\n    return hasDiffuseMapUtils(computeLightBufferIndex(index), LightMaterialData);\r\n}\r\n\r\nexport const hasSpecularMap = (index: number, LightMaterialData: any) => {\r\n    return hasSpecularMapUtils(computeLightBufferIndex(index), LightMaterialData);\r\n}\r\n\r\nexport const initMaterialWithoutInitMap = (index: number, state: Map<any, any>) => {\r\n    initMaterialBase(index, state, getClassName(), MaterialData);\r\n}\r\n\r\nexport const initMaterial = (index: number, state: Map<any, any>) => {\r\n    initMaterialBase(index, state, getClassName(), MaterialData);\r\n\r\n    initMapManager(getGL(DeviceManagerData, state), index, MapManagerData, TextureData);\r\n}\r\n\r\nexport const addComponent = (component: Material, gameObject: GameObject) => {\r\n    addMaterialComponent(component, gameObject, MaterialData);\r\n}\r\n\r\nexport const disposeComponent = (component: Material) => {\r\n    var sourceIndex = component.index,\r\n        lightMaterialSourceIndex = computeLightBufferIndex(sourceIndex),\r\n        lastComponentIndex: number = null,\r\n        lightMaterialLastComponentIndex: number = null,\r\n        colorDataSize = getColorDataSize(),\r\n        shininessDataSize = getShininessDataSize(),\r\n        shadingDataSize = getShadingDataSize(),\r\n        lightModelDataSize = getLightModelDataSize(),\r\n        mapSize = getMapSize();\r\n\r\n    LightMaterialData.index -= 1;\r\n\r\n    lastComponentIndex = LightMaterialData.index;\r\n\r\n    lightMaterialLastComponentIndex = computeLightBufferIndex(lastComponentIndex);\r\n\r\n    disposeMaterialComponent(sourceIndex, lastComponentIndex, MapManagerData, MaterialData);\r\n\r\n    deleteBySwapAndReset(lightMaterialSourceIndex * colorDataSize, lightMaterialLastComponentIndex * colorDataSize, LightMaterialData.specularColors, colorDataSize, MaterialData.defaultColorArr);\r\n    deleteBySwapAndReset(lightMaterialSourceIndex * colorDataSize, lightMaterialLastComponentIndex * colorDataSize, LightMaterialData.emissionColors, colorDataSize, LightMaterialData.emptyColorArr);\r\n\r\n    deleteOneItemBySwapAndReset(lightMaterialSourceIndex * shadingDataSize, lightMaterialLastComponentIndex * shadingDataSize, LightMaterialData.shadings, LightMaterialData.defaultShading);\r\n    deleteOneItemBySwapAndReset(lightMaterialSourceIndex * shininessDataSize, lightMaterialLastComponentIndex * shininessDataSize, LightMaterialData.shininess, LightMaterialData.defaultShininess);\r\n    deleteOneItemBySwapAndReset(lightMaterialSourceIndex * lightModelDataSize, lightMaterialLastComponentIndex * lightModelDataSize, LightMaterialData.lightModels, LightMaterialData.defaultLightModel);\r\n    deleteOneItemBySwapAndReset(lightMaterialSourceIndex * mapSize, lightMaterialLastComponentIndex * mapSize, LightMaterialData.hasDiffuseMaps, LightMaterialData.defaultHasMap);\r\n    deleteOneItemBySwapAndReset(lightMaterialSourceIndex * mapSize, lightMaterialLastComponentIndex * mapSize, LightMaterialData.hasSpecularMaps, LightMaterialData.defaultHasMap);\r\n}\r\n\r\nexport const initData = (LightMaterialData: any) => {\r\n    initSpecifyMaterialData(getLightMaterialBufferStartIndex(), LightMaterialData);\r\n\r\n    LightMaterialData.emptyColor = _createEmptyColor();\r\n    LightMaterialData.emptyColorArr = LightMaterialData.emptyColor.toVector3().toArray();\r\n}\r\n\r\nexport const createTypeArrays = (buffer: any, offset: number, count: number, LightMaterialData: any) => {\r\n    var returnedOffset = createTypeArraysUtils(buffer, offset, count, LightMaterialData);\r\n\r\n    _setLightMaterialDefaultTypeArrData(count, LightMaterialData);\r\n\r\n    return returnedOffset;\r\n}\r\n\r\nexport const setDefaultData = (LightMaterialData: any) => {\r\n    LightMaterialData.defaultShininess = 32;\r\n    LightMaterialData.defaultShading = 0;\r\n    LightMaterialData.defaultLightModel = ELightModel.PHONG;\r\n    LightMaterialData.defaultHasMap = getNotHasMapValue();\r\n}\r\n\r\nconst _setLightMaterialDefaultTypeArrData =(count: number, LightMaterialData: any) => {\r\n    var startIndex = getLightMaterialBufferStartIndex(),\r\n        color = createDefaultColor(),\r\n        emptyColor = LightMaterialData.emptyColor,\r\n        shading = LightMaterialData.defaultShading,\r\n        lightModel = LightMaterialData.defaultLightModel,\r\n        shininess = LightMaterialData.defaultShininess,\r\n        hasMap = LightMaterialData.defaultHasMap;\r\n\r\n    count += startIndex;\r\n\r\n    for (let i = startIndex; i < count; i++) {\r\n        setSpecularColor(i, color, LightMaterialData);\r\n        setEmissionColor(i, emptyColor, LightMaterialData);\r\n        setShininess(i, shininess, LightMaterialData);\r\n        setShading(i, shading, LightMaterialData);\r\n        setLightModel(i, lightModel, LightMaterialData);\r\n        markNotHasMap(i, LightMaterialData.hasDiffuseMaps);\r\n        markNotHasMap(i, LightMaterialData.hasSpecularMaps);\r\n    }\r\n}\r\n\r\nconst _createEmptyColor =() => {\r\n    var color = Color.create(\"rgb(0,0,0)\");\r\n\r\n    return color;\r\n}\r\n\r\n","import { isSupportRenderWorkerAndSharedArrayBuffer } from \"../../../device/WorkerDetectSystem\";\r\nimport { Map } from \"immutable\";\r\nimport { IWebGL2ShaderLibContentGenerator } from \"../../worker/webgl2/both_file/data/shaderLib_generator\";\r\nimport { InitShaderDataMap } from \"../../type/utilsType\";\r\nimport { getGL } from \"../../device/DeviceManagerSystem\";\r\nimport { getMapCount } from \"../../texture/MapManagerSystem\";\r\nimport {\r\n    initNoMaterialShader as initNoMaterialShaderUtils, initMaterialShader as initMaterialShaderUtils, initData as initDataUtils\r\n} from \"../utils/worker/render_file/shader/shaderUtils\";\r\nimport { buildGLSLSource } from \"./ShaderSourceBuildSystem\";\r\nimport { IMaterialConfig, MaterialShaderLibConfig } from \"../../data/material_config_interface\";\r\nimport { hasDiffuseMap, hasSpecularMap } from \"../../../component/material/LightMaterialSystem\";\r\nimport { getIndices, getNormals, getTexCoords, getVertices } from \"../../../component/geometry/GeometrySystem\";\r\n\r\nexport var initNoMaterialShader = null;\r\n\r\nexport var initMaterialShader = null;\r\n\r\nif (!isSupportRenderWorkerAndSharedArrayBuffer()) {\r\n    initNoMaterialShader = (state: Map<any, any>, shaderName: string, materialShaderLibConfig: MaterialShaderLibConfig, material_config: IMaterialConfig, shaderLib_generator: IWebGL2ShaderLibContentGenerator, initShaderDataMap: InitShaderDataMap) => {\r\n        initNoMaterialShaderUtils(state, shaderName, materialShaderLibConfig, material_config, shaderLib_generator, _buildInitShaderFuncDataMap(), initShaderDataMap);\r\n    };\r\n\r\n    initMaterialShader = (state: Map<any, any>, materialIndex: number, shaderName: string, material_config: IMaterialConfig, shaderLib_generator: IWebGL2ShaderLibContentGenerator, initShaderDataMap: InitShaderDataMap) => {\r\n        return initMaterialShaderUtils(state, materialIndex, shaderName, material_config, shaderLib_generator, _buildInitShaderFuncDataMap(), initShaderDataMap);\r\n    };\r\n\r\n    const _buildInitShaderFuncDataMap =() => {\r\n        return {\r\n            buildGLSLSource: buildGLSLSource,\r\n            getGL: getGL,\r\n            getMapCount: getMapCount,\r\n            hasSpecularMap: hasSpecularMap,\r\n            hasDiffuseMap: hasDiffuseMap,\r\n\r\n            getVertices: getVertices,\r\n            getNormals: getNormals,\r\n            getTexCoords: getTexCoords,\r\n            getIndices: getIndices\r\n        }\r\n    }\r\n}\r\n\r\nexport const initData = initDataUtils;\r\n","export const webgl1_main_begin: string = \"void main(void){\\n\";\r\nexport const webgl1_main_end: string = \"}\\n\";\r\n\r\nexport const webgl1_setPos_mvp: string = \"gl_Position = u_pMatrix * u_vMatrix * mMatrix * vec4(a_position, 1.0);\\n\"\r\n","import {\r\n    webgl1_basic_materialColor_fragment, webgl1_basic_end_fragment,\r\n    common_define, common_fragment, common_function, common_vertex,\r\n    GLSLChunk, modelMatrix_noInstance_vertex,\r\n    webgl1_normalMatrix_noInstance_vertex,\r\n    frontLight_common, frontLight_end_fragment,\r\n    frontLight_setWorldPosition_vertex, frontLight_vertex, frontLight_common_vertex, frontLight_common_fragment,\r\n    webgl1_noShadowMap_fragment,\r\n    webgl1_noDiffuseMap_fragment, webgl1_noEmissionMap_fragment, webgl1_noLightMap_fragment, webgl1_noNormalMap_fragment, webgl1_noNormalMap_vertex,\r\n    webgl1_noSpecularMap_fragment,\r\n    frontLight_fragment,\r\n    webgl1_basic_map_vertex,\r\n    webgl1_basic_map_fragment,\r\n    webgl1_diffuseMap_vertex, webgl1_diffuseMap_fragment,\r\n    webgl1_specularMap_vertex, webgl1_specularMap_fragment,\r\n} from \"../../../../shader/chunk/ShaderChunk\";\r\nimport { UniformCacheMap, UniformLocationMap } from \"../../../../type/dataType\";\r\nimport { webgl1_setPos_mvp } from \"../../../../webgl1/shader/snippet/ShaderSnippet\";\r\nimport {\r\n    IDefineUniformConfig,\r\n    IGLSLConfig, IGLSLDefineListItem, ISendUniformConfig,\r\n    IShaderLibContentGenerator\r\n} from \"../../../../data/shaderLib_generator_interface\";\r\n\r\nconst _lightDefineList =[\r\n    {\r\n        \"name\": \"DIRECTION_LIGHTS_COUNT\",\r\n        \"valueFunc\": ({\r\n                          DirectionLightDataFromSystem\r\n                      }) => {\r\n            return DirectionLightDataFromSystem.count;\r\n        }\r\n    },\r\n    {\r\n        \"name\": \"POINT_LIGHTS_COUNT\",\r\n        \"valueFunc\": ({\r\n                          PointLightDataFromSystem\r\n                      }) => {\r\n            return PointLightDataFromSystem.count;\r\n        }\r\n    }\r\n]\r\n\r\nexport const webgl1_shaderLib_generator = {\r\n    \"shaderLibs\": {\r\n        \"CommonShaderLib\": {\r\n            \"glsl\": {\r\n                \"vs\": {\r\n                    \"source\": common_vertex,\r\n                    \"define\": common_define.define + common_vertex.define,\r\n                    \"funcDefine\": common_function.funcDefine + common_vertex.funcDefine\r\n                },\r\n                \"fs\": {\r\n                    \"source\": common_fragment,\r\n                    \"define\": common_define.define + common_fragment.define,\r\n                    \"funcDefine\": common_function.funcDefine + common_fragment.funcDefine\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"uniform\": [\r\n                    {\r\n                        \"name\": \"u_vMatrix\",\r\n                        \"field\": \"vMatrix\",\r\n                        \"type\": \"mat4\"\r\n                    },\r\n                    {\r\n                        \"name\": \"u_pMatrix\",\r\n                        \"field\": \"pMatrix\",\r\n                        \"type\": \"mat4\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        \"ModelMatrixNoInstanceShaderLib\": {\r\n            \"glsl\": {\r\n                \"vs\": {\r\n                    \"source\": modelMatrix_noInstance_vertex,\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"uniform\": [\r\n                    {\r\n                        \"name\": \"u_mMatrix\",\r\n                        \"field\": \"mMatrix\",\r\n                        \"type\": \"mat4\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        \"VerticeCommonShaderLib\": {\r\n            \"send\": {\r\n                \"attribute\": [\r\n                    {\r\n                        \"name\": \"a_position\",\r\n                        \"buffer\": \"vertex\",\r\n                        \"type\": \"vec3\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n\r\n\r\n\r\n\r\n        \"BasicMaterialColorShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": webgl1_basic_materialColor_fragment\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"uniform\": [\r\n                    {\r\n                        \"name\": \"u_color\",\r\n                        \"from\": \"basicMaterial\",\r\n                        \"field\": \"color\",\r\n                        \"type\": \"float3\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        \"BasicShaderLib\": {\r\n            \"glsl\": {\r\n                \"vs\": {\r\n                    \"body\": webgl1_setPos_mvp\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"uniform\": [\r\n                    {\r\n                        \"name\": \"u_opacity\",\r\n                        \"from\": \"basicMaterial\",\r\n                        \"field\": \"opacity\",\r\n                        \"type\": \"float\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        \"BasicEndShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": webgl1_basic_end_fragment\r\n                },\r\n                \"func\": (materialIndex: number, {\r\n                    getAlphaTest,\r\n                    isTestAlpha\r\n                }, {\r\n                    MaterialDataFromSystem\r\n                }) => {\r\n                    var alphaTest = getAlphaTest(materialIndex, MaterialDataFromSystem);\r\n\r\n                    if (isTestAlpha(alphaTest)) {\r\n                        return {\r\n                            \"fs\": {\r\n                                \"body\": `if (gl_FragColor.a < ${alphaTest}){\r\n    discard;\r\n}\\n` + webgl1_basic_end_fragment.body\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    return void 0;\r\n                }\r\n            }\r\n        },\r\n\r\n        \"BasicMapShaderLib\": {\r\n            \"glsl\": {\r\n                \"vs\": {\r\n                    \"source\": webgl1_basic_map_vertex\r\n                },\r\n                \"fs\": {\r\n                    \"source\": webgl1_basic_map_fragment\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"attribute\": [\r\n                    {\r\n                        \"name\": \"a_texCoord\",\r\n                        \"buffer\": \"texCoord\",\r\n                        \"type\": \"vec2\"\r\n                    }\r\n                ],\r\n                \"uniformDefine\": [\r\n                    {\r\n                        \"name\": \"u_sampler2D\",\r\n                        \"type\": \"sampler2D\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n\r\n\r\n\r\n        \"NormalMatrixNoInstanceShaderLib\": {\r\n            \"glsl\": {\r\n                \"vs\": {\r\n                    \"source\": webgl1_normalMatrix_noInstance_vertex\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"uniform\": [\r\n                    {\r\n                        \"name\": \"u_normalMatrix\",\r\n                        \"field\": \"normalMatrix\",\r\n                        \"type\": \"mat3\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        \"NormalCommonShaderLib\": {\r\n            \"send\": {\r\n                \"attribute\": [\r\n                    {\r\n                        \"name\": \"a_normal\",\r\n                        \"buffer\": \"normal\",\r\n                        \"type\": \"vec3\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        \"LightCommonShaderLib\": {\r\n            \"glsl\": {\r\n                \"vs\": {\r\n                    \"source\": frontLight_common_vertex,\r\n                    \"funcDeclare\": frontLight_common.funcDeclare,\r\n                    \"funcDefine\": frontLight_common.funcDefine\r\n                },\r\n                \"fs\": {\r\n                    \"source\": frontLight_common_fragment,\r\n                    \"funcDeclare\": frontLight_common.funcDeclare,\r\n                    \"funcDefine\": frontLight_common.funcDefine\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"uniform\": [\r\n                    {\r\n                        \"name\": \"u_specular\",\r\n                        \"from\": \"lightMaterial\",\r\n                        \"field\": \"specularColor\",\r\n                        \"type\": \"float3\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        \"LightSetWorldPositionShaderLib\": {\r\n            \"glsl\": {\r\n                \"vs\": {\r\n                    \"source\": frontLight_setWorldPosition_vertex\r\n                }\r\n            }\r\n        },\r\n\r\n        \"CommonLightMapShaderLib\": {\r\n            \"send\": {\r\n                \"attribute\": [\r\n                    {\r\n                        \"name\": \"a_texCoord\",\r\n                        \"buffer\": \"texCoord\",\r\n                        \"type\": \"vec2\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n\r\n\r\n        \"DiffuseMapShaderLib\": {\r\n            \"glsl\": {\r\n                \"vs\": {\r\n                    \"source\": webgl1_diffuseMap_vertex\r\n                },\r\n                \"fs\": {\r\n                    \"source\": webgl1_diffuseMap_fragment\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"uniformDefine\": [\r\n                    {\r\n                        \"name\": \"u_diffuseMapSampler\",\r\n                        \"type\": \"sampler2D\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        \"NoDiffuseMapShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": webgl1_noDiffuseMap_fragment\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"uniform\": [\r\n                    {\r\n                        \"name\": \"u_diffuse\",\r\n                        \"from\": \"lightMaterial\",\r\n                        \"field\": \"color\",\r\n                        \"type\": \"float3\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        \"SpecularMapShaderLib\": {\r\n            \"glsl\": {\r\n                \"vs\": {\r\n                    \"source\": webgl1_specularMap_vertex\r\n                },\r\n                \"fs\": {\r\n                    \"source\": webgl1_specularMap_fragment\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"uniformDefine\": [\r\n                    {\r\n                        \"name\": \"u_specularMapSampler\",\r\n                        \"type\": \"sampler2D\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        \"NoSpecularMapShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": webgl1_noSpecularMap_fragment\r\n                }\r\n            }\r\n        },\r\n        \"NoLightMapShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": webgl1_noLightMap_fragment\r\n                }\r\n            }\r\n        },\r\n        \"NoEmissionMapShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": webgl1_noEmissionMap_fragment\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"uniform\": [\r\n                    {\r\n                        \"name\": \"u_emission\",\r\n                        \"from\": \"lightMaterial\",\r\n                        \"field\": \"emissionColor\",\r\n                        \"type\": \"float3\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        \"NoNormalMapShaderLib\": {\r\n            \"glsl\": {\r\n                \"vs\": {\r\n                    \"source\": webgl1_noNormalMap_vertex\r\n                },\r\n                \"fs\": {\r\n                    \"source\": webgl1_noNormalMap_fragment\r\n                }\r\n            }\r\n        },\r\n        \"NoShadowMapShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": webgl1_noShadowMap_fragment\r\n                }\r\n            }\r\n        },\r\n\r\n        \"LightShaderLib\": {\r\n            \"glsl\": {\r\n                \"vs\": {\r\n                    \"source\": frontLight_vertex,\r\n                    \"defineList\": _lightDefineList\r\n                },\r\n                \"fs\": {\r\n                    \"source\": frontLight_fragment,\r\n                    \"defineList\": _lightDefineList\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"uniform\": [\r\n                    {\r\n                        \"name\": \"u_shininess\",\r\n                        \"from\": \"lightMaterial\",\r\n                        \"field\": \"shininess\",\r\n                        \"type\": \"float\"\r\n                    },\r\n                    {\r\n                        \"name\": \"u_opacity\",\r\n                        \"from\": \"lightMaterial\",\r\n                        \"field\": \"opacity\",\r\n                        \"type\": \"float\"\r\n                    },\r\n                    {\r\n                        \"name\": \"u_lightModel\",\r\n                        \"from\": \"lightMaterial\",\r\n                        \"field\": \"lightModel\",\r\n                        \"type\": \"int\"\r\n                    },\r\n                    {\r\n                        \"name\": \"u_cameraPos\",\r\n                        \"from\": \"cmd\",\r\n                        \"field\": \"cameraPosition\",\r\n                        \"type\": \"float3\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n\r\n        \"AmbientLightShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"varDeclare\": \"uniform vec3 u_ambient;\"\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"uniformFunc\": (gl: WebGLRenderingContext, shaderIndex: number, program: WebGLProgram, {\r\n                    glslSenderData: {\r\n                        sendFloat3\r\n                    },\r\n                    ambientLightData: {\r\n                        getColorArr3,\r\n\r\n                        isColorDirty,\r\n\r\n                        cleanColorDirty,\r\n\r\n                        AmbientLightDataFromSystem\r\n                    }\r\n                }, uniformLocationMap: UniformLocationMap, uniformCacheMap: UniformCacheMap) => {\r\n                    for (let i = 0, count = AmbientLightDataFromSystem.count; i < count; i++) {\r\n\r\n                        if (isColorDirty(i, AmbientLightDataFromSystem)) {\r\n                            sendFloat3(gl, shaderIndex, program, \"u_ambient\", getColorArr3(i, AmbientLightDataFromSystem), uniformCacheMap, uniformLocationMap);\r\n\r\n                            cleanColorDirty(i, AmbientLightDataFromSystem);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        \"PointLightShaderLib\": {\r\n            \"send\": {\r\n                \"uniformFunc\": (gl: WebGLRenderingContext, shaderIndex: number, program: WebGLProgram,\r\n                    {\r\n                                    glslSenderData: {\r\n                                        sendFloat1,\r\n                        sendFloat3\r\n                                    },\r\n                        pointLightData: {\r\n                                        getColorArr3,\r\n                            getIntensity,\r\n                            getConstant,\r\n                            getLinear,\r\n                            getQuadratic,\r\n                            getRange,\r\n                            getPosition,\r\n\r\n                            isPositionDirty,\r\n                            isColorDirty,\r\n                            isIntensityDirty,\r\n                            isAttenuationDirty,\r\n\r\n                            cleanPositionDirty,\r\n                            cleanColorDirty,\r\n                            cleanIntensityDirty,\r\n                            cleanAttenuationDirty,\r\n\r\n                            PointLightDataFromSystem\r\n                                    }\r\n                                }, uniformLocationMap: UniformLocationMap, uniformCacheMap: UniformCacheMap) => {\r\n                    for (let i = 0, count = PointLightDataFromSystem.count; i < count; i++) {\r\n                        if (isPositionDirty(i, PointLightDataFromSystem)) {\r\n                            sendFloat3(gl, shaderIndex, program, PointLightDataFromSystem.lightGLSLDataStructureMemberNameArr[i].position, getPosition(i, PointLightDataFromSystem), uniformCacheMap, uniformLocationMap);\r\n\r\n                            cleanPositionDirty(i, PointLightDataFromSystem);\r\n                        }\r\n\r\n                        if (isColorDirty(i, PointLightDataFromSystem)) {\r\n                            sendFloat3(gl, shaderIndex, program, PointLightDataFromSystem.lightGLSLDataStructureMemberNameArr[i].color, getColorArr3(i, PointLightDataFromSystem), uniformCacheMap, uniformLocationMap);\r\n\r\n                            cleanColorDirty(i, PointLightDataFromSystem);\r\n                        }\r\n\r\n                        if (isIntensityDirty(i, PointLightDataFromSystem)) {\r\n                            sendFloat1(gl, shaderIndex, program, PointLightDataFromSystem.lightGLSLDataStructureMemberNameArr[i].intensity, getIntensity(i, PointLightDataFromSystem), uniformCacheMap, uniformLocationMap);\r\n\r\n                            cleanIntensityDirty(i, PointLightDataFromSystem);\r\n                        }\r\n\r\n                        if (isAttenuationDirty(i, PointLightDataFromSystem)) {\r\n                            sendFloat1(gl, shaderIndex, program, PointLightDataFromSystem.lightGLSLDataStructureMemberNameArr[i].constant, getConstant(i, PointLightDataFromSystem), uniformCacheMap, uniformLocationMap);\r\n                            sendFloat1(gl, shaderIndex, program, PointLightDataFromSystem.lightGLSLDataStructureMemberNameArr[i].linear, getLinear(i, PointLightDataFromSystem), uniformCacheMap, uniformLocationMap);\r\n                            sendFloat1(gl, shaderIndex, program, PointLightDataFromSystem.lightGLSLDataStructureMemberNameArr[i].quadratic, getQuadratic(i, PointLightDataFromSystem), uniformCacheMap, uniformLocationMap);\r\n                            sendFloat1(gl, shaderIndex, program, PointLightDataFromSystem.lightGLSLDataStructureMemberNameArr[i].range, getRange(i, PointLightDataFromSystem), uniformCacheMap, uniformLocationMap);\r\n\r\n                            cleanAttenuationDirty(i, PointLightDataFromSystem);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        \"DirectionLightShaderLib\": {\r\n            \"send\": {\r\n                \"uniformFunc\": (gl: WebGLRenderingContext, shaderIndex: number, program: WebGLProgram,\r\n                    {\r\n                                    glslSenderData: {\r\n\r\n                                        sendFloat1,\r\n                        sendFloat3\r\n                                    },\r\n                        directionLightData: {\r\n                                        getColorArr3,\r\n                            getIntensity,\r\n                            getPosition,\r\n\r\n                            isPositionDirty,\r\n                            isColorDirty,\r\n                            isIntensityDirty,\r\n\r\n                            cleanPositionDirty,\r\n                            cleanColorDirty,\r\n                            cleanIntensityDirty,\r\n\r\n                            DirectionLightDataFromSystem\r\n                                    }\r\n                                }, uniformLocationMap: UniformLocationMap, uniformCacheMap: UniformCacheMap) => {\r\n                    for (let i = 0, count = DirectionLightDataFromSystem.count; i < count; i++) {\r\n                        if (isPositionDirty(i, DirectionLightDataFromSystem)) {\r\n                            sendFloat3(gl, shaderIndex, program, DirectionLightDataFromSystem.lightGLSLDataStructureMemberNameArr[i].position, getPosition(i, DirectionLightDataFromSystem), uniformCacheMap, uniformLocationMap);\r\n\r\n                            cleanPositionDirty(i, DirectionLightDataFromSystem);\r\n                        }\r\n\r\n                        if (isColorDirty(i, DirectionLightDataFromSystem)) {\r\n                            sendFloat3(gl, shaderIndex, program, DirectionLightDataFromSystem.lightGLSLDataStructureMemberNameArr[i].color, getColorArr3(i, DirectionLightDataFromSystem), uniformCacheMap, uniformLocationMap);\r\n\r\n                            cleanColorDirty(i, DirectionLightDataFromSystem);\r\n                        }\r\n\r\n                        if (isIntensityDirty(i, DirectionLightDataFromSystem)) {\r\n                            sendFloat1(gl, shaderIndex, program, DirectionLightDataFromSystem.lightGLSLDataStructureMemberNameArr[i].intensity, getIntensity(i, DirectionLightDataFromSystem), uniformCacheMap, uniformLocationMap);\r\n\r\n                            cleanIntensityDirty(i, DirectionLightDataFromSystem);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n\r\n\r\n\r\n        \"LightEndShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": frontLight_end_fragment\r\n                },\r\n                \"func\": (materialIndex: number, {\r\n                    getAlphaTest,\r\n                    isTestAlpha\r\n                }, {\r\n                             MaterialDataFromSystem\r\n                         }) => {\r\n                    var alphaTest = getAlphaTest(materialIndex, MaterialDataFromSystem);\r\n\r\n                    if (isTestAlpha(alphaTest)) {\r\n                        return {\r\n                            \"fs\": {\r\n                                \"body\": `if (gl_FragColor.a < ${alphaTest}){\r\n    discard;\r\n}\\n` + frontLight_end_fragment.body\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    return void 0;\r\n                }\r\n            }\r\n        },\r\n\r\n\r\n\r\n        \"EndShaderLib\": {\r\n        }\r\n    }\r\n}\r\n\r\nexport interface IWebGL1ShaderLibContentGenerator extends IShaderLibContentGenerator {\r\n    [shaderLibName: string]: IWebGL1ShaderLibConfig\r\n}\r\n\r\nexport interface IWebGL1ShaderLibConfig {\r\n    glsl?: {\r\n        vs?: IWebGL1GLSLConfig,\r\n        fs?: IWebGL1GLSLConfig,\r\n        func?: (materialIWebGL1ndex: number) => IWebGL1GLSLFuncConfig | null\r\n    },\r\n    send?: IWebGL1ShaderLibSendConfig\r\n}\r\n\r\nexport interface IWebGL1GLSLConfig extends IGLSLConfig {\r\n}\r\n\r\nexport interface IWebGL1GLSLFuncConfig {\r\n    vs?: IWebGL1GLSLFuncGLSLConfig,\r\n    fs?: IWebGL1GLSLFuncGLSLConfig\r\n}\r\n\r\nexport interface IWebGL1GLSLFuncGLSLConfig {\r\n    top?: string;\r\n    varDeclare?: string;\r\n    funcDeclare?: string;\r\n    funcDefine?: string;\r\n    body?: string;\r\n    define?: string;\r\n}\r\n\r\nexport interface IWebGL1GLSLDefineListItem extends IGLSLDefineListItem {\r\n}\r\n\r\nexport interface IWebGL1ShaderLibSendConfig {\r\n    attribute?: Array<IWebGL1SendAttributeConfig>;\r\n    uniform?: Array<IWebGL1SendUniformConfig>;\r\n    uniformDefine?: Array<IWebGL1DefineUniformConfig>;\r\n    uniformFunc?: Function;\r\n}\r\n\r\nexport interface IWebGL1SendAttributeConfig {\r\n    name: string;\r\n    buffer: \"vertex\" | \"normal\" | \"texCoord\";\r\n    type: \"vec2\" | \"vec3\";\r\n}\r\n\r\nexport type WebGL1UniformType = \"int\" | \"float\" | \"float3\" | \"vec3\" | \"mat3\" | \"mat4\" | \"sampler2D\";\r\n\r\nexport interface IWebGL1DefineUniformConfig extends IDefineUniformConfig {\r\n    name: string;\r\n    type: WebGL1UniformType;\r\n}\r\n\r\nexport interface IWebGL1SendUniformConfig extends ISendUniformConfig {\r\n    name: string;\r\n    field: string;\r\n    type: WebGL1UniformType;\r\n    fieldType?: \"structure\";\r\n    from?: \"cmd\" | \"basicMaterial\" | \"lightMaterial\" | \"ambientLight\" | \"pointLight\" | \"directionLight\";\r\n}\r\n","import {\r\n    webgl2_basic_materialColor_fragment, webgl2_basic_end_fragment, webgl2_basic_vertex,\r\n    webgl2_common_define, webgl2_common_fragment, webgl2_common_function, webgl2_common_vertex,\r\n    GLSLChunk, modelMatrix_noInstance_vertex,\r\n    webgl2_normalMatrix_noInstance_vertex,\r\n    // light_common, lightEnd_fragment,\r\n    // light_setWorldPosition_vertex, light_vertex, lightCommon_vertex, lightCommon_fragment,\r\n    webgl2_noShadowMap_fragment,\r\n    webgl2_noDiffuseMap_fragment, webgl2_noEmissionMap_fragment,\r\n    webgl2_noLightMap_fragment,\r\n    webgl2_gbuffer_noNormalMap_fragment, webgl2_gbuffer_noNormalMap_vertex,\r\n    webgl2_noSpecularMap_fragment,\r\n    // light_fragment,\r\n    webgl2_basic_map_vertex,\r\n    webgl2_basic_map_fragment,\r\n    webgl2_diffuseMap_vertex, webgl2_diffuseMap_fragment,\r\n    webgl2_specularMap_vertex, webgl2_specularMap_fragment,\r\n\r\n    // light_model_ubo,\r\n    // webgl2_common_ubo,\r\n    gbuffer_common_vertex,\r\n    gbuffer_common_fragment,\r\n    gbuffer_setWorldPosition_vertex,\r\n    gbuffer_vertex,\r\n    gbuffer_fragment,\r\n    gbuffer_end_fragment,\r\n\r\n    deferLightPass_common,\r\n    deferLightPass_vertex,\r\n    deferLightPass_end_fragment,\r\n    webgl2_deferLightPass_noNormalMap_fragment,\r\n\r\n\r\n    deferLightPass_ambientLight_fragment,\r\n\r\n\r\n    deferLightPass_directionLight_pointLight_common,\r\n\r\n    deferLightPass_directionLight_common,\r\n    deferLightPass_directionLight_fragment,\r\n    webgl2_deferLightPass_directionLight_noNormalMap_fragment,\r\n\r\n\r\n    deferLightPass_pointLight_common,\r\n    deferLightPass_pointLight_fragment,\r\n    webgl2_deferLightPass_pointLight_noNormalMap_fragment,\r\n\r\n    ubo_camera,\r\n    ubo_light,\r\n    ubo_ambientLight,\r\n    ubo_directionLight,\r\n    ubo_pointLight\r\n\r\n} from \"../../../../shader/chunk/ShaderChunk\";\r\nimport { webgl2_setPos_mvp } from \"../../../../webgl2/shader/snippet/ShaderSnippet\";\r\nimport {\r\n    IDefineUniformConfig,\r\n    IGLSLConfig, IGLSLDefineListItem, ISendUniformConfig,\r\n    IShaderLibContentGenerator\r\n} from \"../../../../data/shaderLib_generator_interface\";\r\nimport { UniformCacheMap, UniformLocationMap } from \"../../../../type/dataType\";\r\n\r\nexport const webgl2_shaderLib_generator = {\r\n    \"shaderLibs\": {\r\n        \"CommonShaderLib\": {\r\n            \"glsl\": {\r\n                \"vs\": {\r\n                    \"source\": webgl2_common_vertex,\r\n                    \"define\": webgl2_common_define.define + webgl2_common_vertex.define,\r\n                    \"funcDefine\": webgl2_common_function.funcDefine + webgl2_common_vertex.funcDefine\r\n                },\r\n                \"fs\": {\r\n                    \"source\": webgl2_common_fragment,\r\n                    \"define\": webgl2_common_define.define + webgl2_common_fragment.define,\r\n                    \"funcDefine\": webgl2_common_function.funcDefine + webgl2_common_fragment.funcDefine\r\n                }\r\n            },\r\n            \"send\": {\r\n            }\r\n        },\r\n        \"ModelMatrixNoInstanceShaderLib\": {\r\n            \"glsl\": {\r\n                \"vs\": {\r\n                    \"source\": modelMatrix_noInstance_vertex,\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"uniform\": [\r\n                    {\r\n                        \"name\": \"u_mMatrix\",\r\n                        \"field\": \"mMatrix\",\r\n                        \"type\": \"mat4\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        \"VerticeCommonShaderLib\": {\r\n            \"send\": {\r\n                \"attribute\": [\r\n                    {\r\n                        \"name\": \"a_position\",\r\n                        \"buffer\": \"vertex\",\r\n                        \"type\": \"vec3\",\r\n                        \"location\": 0\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        \"CameraUboShaderLib\": {\r\n            \"glsl\": {\r\n                \"vs\": {\r\n                    \"source\": ubo_camera\r\n                },\r\n                \"fs\": {\r\n                    \"source\": ubo_camera\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"uniformUbo\": [\r\n                    {\r\n                        \"name\": \"CameraUbo\",\r\n                        \"typeArray\": {\r\n                            \"type\": \"float32\",\r\n                            \"length\": 16 * 2 + 4 + 16\r\n                        },\r\n                        \"setBufferDataFunc\": (gl, {\r\n                            uniformBlockBinding,\r\n                            buffer,\r\n                            typeArray\r\n                        }, {\r\n                                                  bindUniformBufferBase,\r\n                                bufferDynamicData,\r\n                                set\r\n                                              }, {\r\n                                                  vMatrix,\r\n                                pMatrix,\r\n                                cameraPosition,\r\n                                normalMatrix\r\n                                              }) => {\r\n                            bindUniformBufferBase(gl, buffer, uniformBlockBinding);\r\n\r\n                            set(typeArray, vMatrix);\r\n                            set(typeArray, pMatrix, 16);\r\n                            set(typeArray, cameraPosition, 32);\r\n\r\n                            /*! refer to https://stackoverflow.com/questions/23628259/how-to-properly-pad-and-align-data-in-opengl-for-std430-layout */\r\n                            set(typeArray, [normalMatrix[0], normalMatrix[1], normalMatrix[2], 0], 36);\r\n                            set(typeArray, [normalMatrix[3], normalMatrix[4], normalMatrix[5], 0], 40);\r\n                            set(typeArray, [normalMatrix[6], normalMatrix[7], normalMatrix[8], 0], 44);\r\n\r\n                            bufferDynamicData(gl, typeArray);\r\n                        },\r\n                        \"frequence\": \"frame\",\r\n                        \"usage\": \"dynamic\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        \"LightUboShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"varDeclare\": ubo_light.varDeclare\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"uniformUbo\": [\r\n                    {\r\n                        \"name\": \"LightUbo\",\r\n                        \"typeArray\": {\r\n                            \"type\": \"float32\",\r\n                            \"length\": 4\r\n                        },\r\n                        \"setBufferDataFunc\": (gl, {\r\n                            uniformBlockBinding,\r\n                            buffer,\r\n                            typeArray\r\n                        }, {\r\n                                                  bindUniformBufferBase,\r\n                                bufferStaticData,\r\n                                set\r\n                                              }, drawRenderCommandBufferDataMap, {\r\n                                                  render_config\r\n                                              }) => {\r\n                            bindUniformBufferBase(gl, buffer, uniformBlockBinding);\r\n\r\n                            set(typeArray, [render_config.defer.lightModel]);\r\n\r\n                            bufferStaticData(gl, typeArray);\r\n                        },\r\n                        \"frequence\": \"one\",\r\n                        \"usage\": \"static\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        \"AmbientLightUboShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": ubo_ambientLight\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"uniformUbo\": [\r\n                    {\r\n                        \"name\": \"AmbientLightUbo\",\r\n                        \"typeArray\": {\r\n                            \"type\": \"float32\",\r\n                            \"length\": 4 * 1\r\n                        },\r\n                        \"setBufferDataFunc\": (gl, ambientLightIndex, {\r\n                                                  uniformBlockBinding,\r\n                            buffer,\r\n                            typeArray\r\n                                              }, {\r\n                                                  bindUniformBufferBase,\r\n                                bufferDynamicData,\r\n                                set\r\n                                              }, {\r\n                                                  cleanColorDirty,\r\n\r\n                                AmbientLightDataFromSystem\r\n                                              },\r\n                            {\r\n                                                  colorArr3,\r\n\r\n                                isColorDirty\r\n                                              }\r\n                        ) => {\r\n                            var isDirtyFlag = false;\r\n\r\n                            if (isColorDirty) {\r\n                                isDirtyFlag = true;\r\n\r\n                                set(typeArray, colorArr3, 0);\r\n\r\n                                cleanColorDirty(ambientLightIndex, AmbientLightDataFromSystem);\r\n                            }\r\n\r\n                            bindUniformBufferBase(gl, buffer, uniformBlockBinding);\r\n\r\n                            if (isDirtyFlag) {\r\n                                bufferDynamicData(gl, typeArray);\r\n                            }\r\n                        },\r\n                        \"frequence\": \"ambientLight\",\r\n                        \"usage\": \"dynamic\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        \"DirectionLightUboShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": ubo_directionLight\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"uniformUbo\": [\r\n                    {\r\n                        \"name\": \"DirectionLightUbo\",\r\n                        \"typeArray\": {\r\n                            \"type\": \"float32\",\r\n                            \"length\": 4 * 2\r\n                        },\r\n                        \"setBufferDataFunc\": (gl, directionLightIndex, {\r\n                                                  uniformBlockBinding,\r\n                            buffer,\r\n                            typeArray\r\n                                              }, {\r\n                                                  bindUniformBufferBase,\r\n                                bufferDynamicData,\r\n                                set\r\n                                              }, {\r\n                                                  cleanPositionDirty,\r\n                                cleanColorDirty,\r\n                                cleanIntensityDirty,\r\n\r\n                                DirectionLightDataFromSystem\r\n                                              },\r\n                            {\r\n                                                  position,\r\n                                colorArr3,\r\n                                intensity,\r\n\r\n                                isPositionDirty,\r\n                                isColorDirty,\r\n                                isIntensityDirty\r\n                                              }\r\n                        ) => {\r\n                            var isDirtyFlag = false;\r\n\r\n                            if (isPositionDirty) {\r\n                                isDirtyFlag = true;\r\n\r\n                                set(typeArray, position);\r\n\r\n                                cleanPositionDirty(directionLightIndex, DirectionLightDataFromSystem);\r\n                            }\r\n\r\n                            if (isColorDirty) {\r\n                                isDirtyFlag = true;\r\n\r\n                                set(typeArray, colorArr3, 4);\r\n\r\n                                cleanColorDirty(directionLightIndex, DirectionLightDataFromSystem);\r\n                            }\r\n\r\n                            if (isIntensityDirty) {\r\n                                set(typeArray, [intensity], 7);\r\n\r\n                                isDirtyFlag = true;\r\n\r\n                                cleanIntensityDirty(directionLightIndex, DirectionLightDataFromSystem);\r\n                            }\r\n\r\n                            bindUniformBufferBase(gl, buffer, uniformBlockBinding);\r\n\r\n                            if (isDirtyFlag) {\r\n                                bufferDynamicData(gl, typeArray);\r\n                            }\r\n                        },\r\n                        \"frequence\": \"directionLight\",\r\n                        \"usage\": \"dynamic\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        \"PointLightUboShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": ubo_pointLight\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"uniformUbo\": [\r\n                    {\r\n                        \"name\": \"PointLightUbo\",\r\n                        \"typeArray\": {\r\n                            \"type\": \"float32\",\r\n                            \"length\": 4 * 3\r\n                        },\r\n                        \"setBufferDataFunc\": (gl, pointLightIndex, {\r\n                                                  uniformBlockBinding,\r\n                            buffer,\r\n                            typeArray\r\n                                              }, {\r\n                                                  bindUniformBufferBase,\r\n                                bufferDynamicData,\r\n                                set\r\n                                              }, {\r\n                                                  cleanPositionDirty,\r\n                                cleanColorDirty,\r\n                                cleanIntensityDirty,\r\n                                cleanAttenuationDirty,\r\n\r\n                                PointLightDataFromSystem\r\n                                              },\r\n                            {\r\n                                                  position,\r\n                                colorArr3,\r\n                                intensity,\r\n                                constant,\r\n                                linear,\r\n                                quadratic,\r\n                                radius,\r\n\r\n                                isIntensityDirty,\r\n                                isOtherValueDirty\r\n                                              }\r\n                        ) => {\r\n                            var isDirtyFlag = false;\r\n\r\n                            if (isIntensityDirty) {\r\n                                set(typeArray, [intensity], 7);\r\n\r\n                                isDirtyFlag = true;\r\n\r\n                                cleanIntensityDirty(pointLightIndex, PointLightDataFromSystem);\r\n                            }\r\n\r\n                            if (isOtherValueDirty) {\r\n                                isDirtyFlag = true;\r\n\r\n                                set(typeArray, position);\r\n                                set(typeArray, colorArr3, 4);\r\n                                set(typeArray, [constant, linear, quadratic, radius], 8);\r\n\r\n\r\n                                cleanPositionDirty(pointLightIndex, PointLightDataFromSystem);\r\n                                cleanColorDirty(pointLightIndex, PointLightDataFromSystem);\r\n                                cleanAttenuationDirty(pointLightIndex, PointLightDataFromSystem);\r\n                            }\r\n\r\n                            bindUniformBufferBase(gl, buffer, uniformBlockBinding);\r\n\r\n                            if (isDirtyFlag) {\r\n                                bufferDynamicData(gl, typeArray);\r\n                            }\r\n                        },\r\n                        \"frequence\": \"pointLight\",\r\n                        \"usage\": \"dynamic\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        \"BasicMaterialColorShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": webgl2_basic_materialColor_fragment\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"uniform\": [\r\n                    {\r\n                        \"name\": \"u_color\",\r\n                        \"from\": \"basicMaterial\",\r\n                        \"field\": \"color\",\r\n                        \"type\": \"float3\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        \"BasicShaderLib\": {\r\n            \"glsl\": {\r\n                \"vs\": {\r\n                    \"varDeclare\": webgl2_basic_vertex.varDeclare,\r\n\r\n\r\n                    \"body\": webgl2_setPos_mvp\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"uniform\": [\r\n                    {\r\n                        \"name\": \"u_opacity\",\r\n                        \"from\": \"basicMaterial\",\r\n                        \"field\": \"opacity\",\r\n                        \"type\": \"float\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        \"BasicEndShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": webgl2_basic_end_fragment\r\n                },\r\n                \"func\": (materialIndex: number, {\r\n                    getAlphaTest,\r\n                    isTestAlpha\r\n                }, {\r\n                             MaterialDataFromSystem\r\n                         }) => {\r\n                    var alphaTest = getAlphaTest(materialIndex, MaterialDataFromSystem);\r\n\r\n                    if (isTestAlpha(alphaTest)) {\r\n                        return {\r\n                            \"fs\": {\r\n                                \"body\": `if (gl_FragColor.a < ${alphaTest}){\r\n    discard;\r\n}\\n` + webgl2_basic_end_fragment.body\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    return void 0;\r\n                }\r\n            }\r\n        },\r\n\r\n        \"BasicMapShaderLib\": {\r\n            \"glsl\": {\r\n                \"vs\": {\r\n                    \"source\": webgl2_basic_map_vertex\r\n                },\r\n                \"fs\": {\r\n                    \"source\": webgl2_basic_map_fragment\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"attribute\": [\r\n                    {\r\n                        \"name\": \"a_texCoord\",\r\n                        \"buffer\": \"texCoord\",\r\n                        \"type\": \"vec2\",\r\n                        \"location\": 1\r\n                    }\r\n                ],\r\n                \"uniformDefine\": [\r\n                    {\r\n                        \"name\": \"u_sampler2D\",\r\n                        \"type\": \"sampler2D\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        \"NormalMatrixNoInstanceShaderLib\": {\r\n            \"glsl\": {\r\n                \"vs\": {\r\n                    \"source\": webgl2_normalMatrix_noInstance_vertex\r\n                }\r\n            },\r\n            \"send\": {\r\n            }\r\n        },\r\n        \"NormalCommonShaderLib\": {\r\n            \"send\": {\r\n                \"attribute\": [\r\n                    {\r\n                        \"name\": \"a_normal\",\r\n                        \"buffer\": \"normal\",\r\n                        \"type\": \"vec3\",\r\n                        \"location\": 1\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        \"GBufferCommonShaderLib\": {\r\n            \"glsl\": {\r\n                \"vs\": {\r\n                    \"source\": gbuffer_common_vertex\r\n                },\r\n                \"fs\": {\r\n                    \"source\": gbuffer_common_fragment\r\n                }\r\n            }\r\n        },\r\n        \"GBufferSetWorldPositionShaderLib\": {\r\n            \"glsl\": {\r\n                \"vs\": {\r\n                    \"source\": gbuffer_setWorldPosition_vertex\r\n                }\r\n            }\r\n        },\r\n\r\n        \"CommonLightMapShaderLib\": {\r\n            \"send\": {\r\n                \"attribute\": [\r\n                    {\r\n                        \"name\": \"a_texCoord\",\r\n                        \"buffer\": \"texCoord\",\r\n                        \"type\": \"vec2\",\r\n                        \"location\": 2\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n\r\n\r\n        \"DiffuseMapShaderLib\": {\r\n            \"glsl\": {\r\n                \"vs\": {\r\n                    \"source\": webgl2_diffuseMap_vertex\r\n                },\r\n                \"fs\": {\r\n                    \"source\": webgl2_diffuseMap_fragment\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"uniformDefine\": [\r\n                    {\r\n                        \"name\": \"u_diffuseMapSampler\",\r\n                        \"type\": \"sampler2D\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        \"NoDiffuseMapShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": webgl2_noDiffuseMap_fragment\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"uniform\": [\r\n                    {\r\n                        \"name\": \"u_diffuse\",\r\n                        \"from\": \"lightMaterial\",\r\n                        \"field\": \"color\",\r\n                        \"type\": \"float3\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        \"SpecularMapShaderLib\": {\r\n            \"glsl\": {\r\n                \"vs\": {\r\n                    \"source\": webgl2_specularMap_vertex\r\n                },\r\n                \"fs\": {\r\n                    \"source\": webgl2_specularMap_fragment\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"uniformDefine\": [\r\n                    {\r\n                        \"name\": \"u_specularMapSampler\",\r\n                        \"type\": \"sampler2D\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        \"NoSpecularMapShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": webgl2_noSpecularMap_fragment\r\n                }\r\n            }\r\n        },\r\n        \"GBufferNoNormalMapShaderLib\": {\r\n            \"glsl\": {\r\n                \"vs\": {\r\n                    \"source\": webgl2_gbuffer_noNormalMap_vertex\r\n                },\r\n                \"fs\": {\r\n                    \"source\": webgl2_gbuffer_noNormalMap_fragment\r\n                }\r\n            }\r\n        },\r\n\r\n        \"GBufferShaderLib\": {\r\n            \"glsl\": {\r\n                \"vs\": {\r\n                    \"source\": gbuffer_vertex\r\n                },\r\n                \"fs\": {\r\n                    \"source\": gbuffer_fragment\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"uniform\": [\r\n                    {\r\n                        \"name\": \"u_shininess\",\r\n                        \"from\": \"lightMaterial\",\r\n                        \"field\": \"shininess\",\r\n                        \"type\": \"float\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n\r\n\r\n        \"GBufferEndShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": gbuffer_end_fragment\r\n                },\r\n            }\r\n        },\r\n\r\n\r\n\r\n\r\n        \"DeferLightPassCommonShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": deferLightPass_common\r\n                }\r\n            }\r\n        },\r\n\r\n        \"NoLightMapShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": webgl2_noLightMap_fragment\r\n                }\r\n            }\r\n        },\r\n        \"NoEmissionMapShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": webgl2_noEmissionMap_fragment\r\n                }\r\n            }\r\n            // \"send\": {\r\n            //     \"uniform\": [\r\n            //         {\r\n            //             \"name\": \"u_emission\",\r\n            //             \"from\": \"lightMaterial\",\r\n            //             \"field\": \"emissionColor\",\r\n            //             \"type\": \"float3\"\r\n            //         }\r\n            //     ]\r\n            // }\r\n        },\r\n        \"NoShadowMapShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": webgl2_noShadowMap_fragment\r\n                }\r\n            }\r\n        },\r\n\r\n        \"DeferLightPassNoNormalMapShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": webgl2_deferLightPass_noNormalMap_fragment\r\n                }\r\n            }\r\n        },\r\n\r\n        \"DeferLightPassShaderLib\": {\r\n            \"glsl\": {\r\n                \"vs\": {\r\n                    \"source\": deferLightPass_vertex\r\n                }\r\n            },\r\n            \"send\": {\r\n                \"attribute\": [\r\n                    {\r\n                        \"name\": \"a_position\",\r\n                        \"buffer\": \"vertex\",\r\n                        \"type\": \"vec3\",\r\n                        \"location\": 0\r\n                    },\r\n                    {\r\n                        \"name\": \"a_texCoord\",\r\n                        \"buffer\": \"texCoord\",\r\n                        \"type\": \"vec2\",\r\n                        \"location\": 1\r\n                    }\r\n                ],\r\n                \"uniformDefine\": [\r\n                    {\r\n                        \"name\": \"u_positionBuffer\",\r\n                        \"type\": \"sampler2D\"\r\n                    },\r\n                    {\r\n                        \"name\": \"u_normalBuffer\",\r\n                        \"type\": \"sampler2D\"\r\n                    },\r\n                    {\r\n                        \"name\": \"u_colorBuffer\",\r\n                        \"type\": \"sampler2D\"\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n\r\n        \"DeferLightPassEndShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": deferLightPass_end_fragment\r\n                },\r\n            }\r\n        },\r\n\r\n\r\n\r\n        // \"DeferAmbientLightShaderLib\": {\r\n        //     \"glsl\": {\r\n        //         \"fs\": {\r\n        //             \"varDeclare\": \"uniform vec3 u_ambient;\"\r\n        //         }\r\n        //     },\r\n        //     \"send\": {\r\n        //         \"uniformFunc\": (gl: WebGLRenderingContext, shaderIndex: number, program: WebGLProgram, {\r\n        //             glslSenderData: {\r\n        //                 sendFloat3\r\n        //             },\r\n        //             ambientLightData: {\r\n        //                 getColorArr3,\r\n        //\r\n        //                 isColorDirty,\r\n        //\r\n        //                 cleanColorDirty,\r\n        //\r\n        //                 AmbientLightDataFromSystem\r\n        //             }\r\n        //         }, uniformLocationMap: UniformLocationMap, uniformCacheMap: UniformCacheMap) => {\r\n        //             for (let i = 0, count = AmbientLightDataFromSystem.count; i < count; i++) {\r\n        //\r\n        //                 if(isColorDirty(i, AmbientLightDataFromSystem)) {\r\n        //                     sendFloat3(gl, shaderIndex, program, \"u_ambient\", getColorArr3(i, AmbientLightDataFromSystem), uniformCacheMap, uniformLocationMap);\r\n        //\r\n        //                     cleanColorDirty(i, AmbientLightDataFromSystem);\r\n        //                 }\r\n        //             }\r\n        //         }\r\n        //     }\r\n        // },\r\n\r\n        \"DeferAmbientLightPassShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": deferLightPass_ambientLight_fragment\r\n                }\r\n            },\r\n            \"send\": {\r\n            }\r\n        },\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        \"DeferDirectionLightPointLightPassCommonShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": deferLightPass_directionLight_pointLight_common\r\n                }\r\n            }\r\n        },\r\n\r\n\r\n\r\n        \"DeferDirectionLightPassCommonShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": deferLightPass_directionLight_common\r\n                }\r\n            }\r\n        },\r\n        \"DeferDirectionLightPassNoNormalMapShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": webgl2_deferLightPass_directionLight_noNormalMap_fragment\r\n                }\r\n            }\r\n        },\r\n        \"DeferDirectionLightPassShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": deferLightPass_directionLight_fragment\r\n                }\r\n            },\r\n            \"send\": {\r\n            }\r\n        },\r\n\r\n\r\n\r\n\r\n\r\n        \"DeferPointLightPassCommonShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": deferLightPass_pointLight_common\r\n                }\r\n            }\r\n        },\r\n        \"DeferPointLightPassNoNormalMapShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": webgl2_deferLightPass_pointLight_noNormalMap_fragment\r\n                }\r\n            }\r\n        },\r\n        \"DeferPointLightPassShaderLib\": {\r\n            \"glsl\": {\r\n                \"fs\": {\r\n                    \"source\": deferLightPass_pointLight_fragment\r\n                }\r\n            },\r\n            \"send\": {\r\n            }\r\n        },\r\n\r\n\r\n\r\n\r\n\r\n\r\n        \"EndShaderLib\": {\r\n        }\r\n    }\r\n}\r\n\r\nexport interface IWebGL2ShaderLibContentGenerator extends IShaderLibContentGenerator {\r\n    [shaderLibName: string]: IWebGL2ShaderLibConfig\r\n}\r\n\r\nexport interface IWebGL2ShaderLibConfig {\r\n    glsl?: {\r\n        vs?: IWebGL2GLSLConfig,\r\n        fs?: IWebGL2GLSLConfig,\r\n        func?: (materialIWebGL2ndex: number) => IWebGL2GLSLFuncConfig | null\r\n    },\r\n    send?: IWebGL2ShaderLibSendConfig\r\n}\r\n\r\nexport interface IWebGL2GLSLConfig extends IGLSLConfig {\r\n}\r\n\r\nexport interface IWebGL2GLSLFuncConfig {\r\n    vs?: IWebGL2GLSLFuncGLSLConfig,\r\n    fs?: IWebGL2GLSLFuncGLSLConfig\r\n}\r\n\r\nexport interface IWebGL2GLSLFuncGLSLConfig {\r\n    top?: string;\r\n    varDeclare?: string;\r\n    funcDeclare?: string;\r\n    funcDefine?: string;\r\n    body?: string;\r\n    define?: string;\r\n}\r\n\r\nexport interface IWebGL2GLSLDefineListItem extends IGLSLDefineListItem {\r\n    name: string;\r\n    valueFunc?: Function;\r\n}\r\n\r\nexport interface IWebGL2ShaderLibSendConfig {\r\n    attribute?: Array<IWebGL2SendAttributeConfig>;\r\n    uniform?: Array<IWebGL2SendUniformConfig>;\r\n    uniformDefine?: Array<IWebGL2DefineUniformConfig>;\r\n    uniformFunc?: Function;\r\n    uniformUbo?: Array<IWebGL2UboConfig>;\r\n}\r\n\r\nexport interface IWebGL2SendAttributeConfig {\r\n    name: string;\r\n    buffer: \"vertex\" | \"normal\" | \"texCoord\";\r\n    type: \"vec2\" | \"vec3\";\r\n    location: number;\r\n}\r\n\r\nexport type WebGL2UniformType = \"int\" | \"float\" | \"float3\" | \"vec3\" | \"mat3\" | \"mat4\" | \"sampler2D\";\r\n\r\nexport interface IWebGL2DefineUniformConfig extends IDefineUniformConfig {\r\n    name: string;\r\n    type: WebGL2UniformType;\r\n}\r\n\r\nexport interface IWebGL2SendUniformConfig extends ISendUniformConfig {\r\n    name: string;\r\n    field: string;\r\n    type: WebGL2UniformType;\r\n    fieldType?: \"structure\";\r\n    from?: \"cmd\" | \"basicMaterial\" | \"lightMaterial\" | \"ambientLight\" | \"pointLight\" | \"directionLight\";\r\n}\r\n\r\nexport interface IWebGL2UboConfig {\r\n    name: string;\r\n    typeArray: IWebGL2UboTypeArrayConfig;\r\n    frequence: \"one\" | \"frame\" | \"pointLight\" | \"directionLight\";\r\n    usage: \"static\" | \"dynamic\";\r\n    setBufferDataFunc: Function;\r\n}\r\n\r\nexport interface IWebGL2UboTypeArrayConfig {\r\n    type: string;\r\n    length: number;\r\n}\r\n","export const webgl1_material_config = {\r\n    \"shaders\": {\r\n        \"materialShaders\": {\r\n            \"BasicRender\": [\r\n                { \"type\": \"group\", \"value\": \"engineMaterialTop\" },\r\n\r\n                \"BasicMaterialColorShaderLib\",\r\n                \"BasicShaderLib\",\r\n\r\n                {\r\n                    \"type\": \"branch\",\r\n                    \"branch\": (materialIndex, {\r\n                        getMapCount\r\n                    }, {\r\n                                   MapManagerDataFromSystem\r\n                               }) => {\r\n                        if (getMapCount(materialIndex, MapManagerDataFromSystem) === 1) {\r\n                            return \"BasicMapShaderLib\";\r\n                        }\r\n                    }\r\n                },\r\n\r\n\r\n                \"BasicEndShaderLib\",\r\n\r\n                { \"type\": \"group\", \"value\": \"engineMaterialEnd\" }\r\n            ],\r\n            \"FrontRenderLight\": [\r\n                { \"type\": \"group\", \"value\": \"engineMaterialTop\" },\r\n\r\n                \"NormalMatrixNoInstanceShaderLib\",\r\n                \"NormalCommonShaderLib\",\r\n                \"LightCommonShaderLib\",\r\n                \"LightSetWorldPositionShaderLib\",\r\n\r\n                {\r\n                    \"type\": \"branch\",\r\n                    \"branch\": (materialIndex, {\r\n                        hasDiffuseMap,\r\n                        hasSpecularMap\r\n                    }, {\r\n                                   LightMaterialDataFromSystem\r\n                               }) => {\r\n                        if (hasDiffuseMap(materialIndex, LightMaterialDataFromSystem)\r\n                            || hasSpecularMap(materialIndex, LightMaterialDataFromSystem)) {\r\n                            return \"CommonLightMapShaderLib\";\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    \"type\": \"branch\",\r\n                    \"branch\": (materialIndex, {\r\n                        hasDiffuseMap\r\n                    }, {\r\n                                   LightMaterialDataFromSystem\r\n                               }) => {\r\n                        if (hasDiffuseMap(materialIndex, LightMaterialDataFromSystem)) {\r\n                            return \"DiffuseMapShaderLib\";\r\n                        }\r\n\r\n                        return \"NoDiffuseMapShaderLib\";\r\n                    }\r\n                },\r\n                {\r\n                    \"type\": \"branch\",\r\n                    \"branch\": (materialIndex, {\r\n                        hasSpecularMap\r\n                    }, {\r\n                                   LightMaterialDataFromSystem\r\n                               }) => {\r\n                        if (hasSpecularMap(materialIndex, LightMaterialDataFromSystem)) {\r\n                            return \"SpecularMapShaderLib\";\r\n                        }\r\n\r\n                        return \"NoSpecularMapShaderLib\";\r\n                    }\r\n                },\r\n\r\n                \"NoLightMapShaderLib\",\r\n                \"NoEmissionMapShaderLib\",\r\n                \"NoNormalMapShaderLib\",\r\n                \"NoShadowMapShaderLib\",\r\n                \"LightShaderLib\",\r\n                \"AmbientLightShaderLib\",\r\n                \"PointLightShaderLib\",\r\n                \"DirectionLightShaderLib\",\r\n                \"LightEndShaderLib\",\r\n                { \"type\": \"group\", \"value\": \"engineMaterialEnd\" }\r\n            ]\r\n        },\r\n        \"noMaterialShaders\": {\r\n        }\r\n    },\r\n    \"shaderLibGroups\": {\r\n        \"engineMaterialTop\": [\r\n            \"CommonShaderLib\",\r\n            \"ModelMatrixNoInstanceShaderLib\",\r\n            \"VerticeCommonShaderLib\"\r\n        ],\r\n        \"engineMaterialEnd\": [\r\n            \"EndShaderLib\"\r\n        ]\r\n    }\r\n}\r\n","export const webgl2_material_config = {\r\n    \"shaders\": {\r\n        \"materialShaders\": {\r\n            \"BasicRender\": [\r\n                { \"type\": \"group\", \"value\": \"engineMaterialTop\" },\r\n\r\n                \"BasicMaterialColorShaderLib\",\r\n                \"BasicShaderLib\",\r\n\r\n                {\r\n                    \"type\": \"branch\",\r\n                    \"branch\": (materialIndex, {\r\n                        getMapCount\r\n                    }, {\r\n                                   MapManagerDataFromSystem\r\n                               }) => {\r\n                        if (getMapCount(materialIndex, MapManagerDataFromSystem) === 1) {\r\n                            return \"BasicMapShaderLib\";\r\n                        }\r\n                    }\r\n                },\r\n\r\n\r\n                \"BasicEndShaderLib\",\r\n\r\n                { \"type\": \"group\", \"value\": \"engineMaterialEnd\" }\r\n            ],\r\n            \"FrontRenderLight\": [\r\n                { \"type\": \"group\", \"value\": \"engineMaterialTop\" },\r\n\r\n                \"NormalMatrixNoInstanceShaderLib\",\r\n                \"NormalCommonShaderLib\",\r\n                \"LightCommonShaderLib\",\r\n                \"LightSetWorldPositionShaderLib\",\r\n\r\n                {\r\n                    \"type\": \"branch\",\r\n                    \"branch\": (materialIndex, {\r\n                        hasDiffuseMap,\r\n                        hasSpecularMap\r\n                    }, {\r\n                                   LightMaterialDataFromSystem\r\n                               }) => {\r\n                        if (hasDiffuseMap(LightMaterialDataFromSystem)\r\n                            || hasSpecularMap(LightMaterialDataFromSystem)) {\r\n                            return \"CommonLightMapShaderLib\";\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    \"type\": \"branch\",\r\n                    \"branch\": (materialIndex, {\r\n                        hasDiffuseMap\r\n                    }, {\r\n                                   LightMaterialDataFromSystem\r\n                               }) => {\r\n                        if (hasDiffuseMap(LightMaterialDataFromSystem)) {\r\n                            return \"DiffuseMapShaderLib\";\r\n                        }\r\n\r\n                        return \"NoDiffuseMapShaderLib\";\r\n                    }\r\n                },\r\n                {\r\n                    \"type\": \"branch\",\r\n                    \"branch\": (materialIndex, {\r\n                        hasSpecularMap\r\n                    }, {\r\n                                   LightMaterialDataFromSystem\r\n                               }) => {\r\n                        if (hasSpecularMap(LightMaterialDataFromSystem)) {\r\n                            return \"SpecularMapShaderLib\";\r\n                        }\r\n\r\n                        return \"NoSpecularMapShaderLib\";\r\n                    }\r\n                },\r\n\r\n                \"NoLightMapShaderLib\",\r\n                \"NoEmissionMapShaderLib\",\r\n                \"NoNormalMapShaderLib\",\r\n                \"NoShadowMapShaderLib\",\r\n                \"LightShaderLib\",\r\n                \"PointLightShaderLib\",\r\n                \"LightEndShaderLib\",\r\n                { \"type\": \"group\", \"value\": \"engineMaterialEnd\" }\r\n            ],\r\n            \"GBuffer\": [\r\n                { \"type\": \"group\", \"value\": \"engineMaterialTop\" },\r\n\r\n                \"NormalMatrixNoInstanceShaderLib\",\r\n                \"NormalCommonShaderLib\",\r\n                \"GBufferCommonShaderLib\",\r\n                \"GBufferSetWorldPositionShaderLib\",\r\n\r\n                {\r\n                    \"type\": \"branch\",\r\n                    \"branch\": (materialIndex, {\r\n                        hasDiffuseMap,\r\n                        hasSpecularMap\r\n                    }, {\r\n                                   LightMaterialDataFromSystem\r\n                               }) => {\r\n                        if (hasDiffuseMap(materialIndex, LightMaterialDataFromSystem)\r\n                            || hasSpecularMap(materialIndex, LightMaterialDataFromSystem)) {\r\n                            return \"CommonLightMapShaderLib\";\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    \"type\": \"branch\",\r\n                    \"branch\": (materialIndex, {\r\n                        hasDiffuseMap\r\n                    }, {\r\n                                   LightMaterialDataFromSystem\r\n                               }) => {\r\n                        if (hasDiffuseMap(materialIndex, LightMaterialDataFromSystem)) {\r\n                            return \"DiffuseMapShaderLib\";\r\n                        }\r\n\r\n                        return \"NoDiffuseMapShaderLib\";\r\n                    }\r\n                },\r\n                {\r\n                    \"type\": \"branch\",\r\n                    \"branch\": (materialIndex, {\r\n                        hasSpecularMap\r\n                    }, {\r\n                                   LightMaterialDataFromSystem\r\n                               }) => {\r\n                        if (hasSpecularMap(materialIndex, LightMaterialDataFromSystem)) {\r\n                            return \"SpecularMapShaderLib\";\r\n                        }\r\n\r\n                        return \"NoSpecularMapShaderLib\";\r\n                    }\r\n                },\r\n\r\n                \"GBufferNoNormalMapShaderLib\",\r\n                \"GBufferShaderLib\",\r\n                \"GBufferEndShaderLib\",\r\n                { \"type\": \"group\", \"value\": \"engineMaterialEnd\" }\r\n            ]\r\n        },\r\n        \"noMaterialShaders\": {\r\n            \"DeferAmbientLightPass\": [\r\n                { \"type\": \"group\", \"value\": \"deferLightPassIndexZeroUbo\" },\r\n\r\n                \"AmbientLightUboShaderLib\",\r\n\r\n                \"DeferLightPassCommonShaderLib\",\r\n\r\n                \"NoLightMapShaderLib\",\r\n\r\n                \"DeferLightPassShaderLib\",\r\n                \"DeferAmbientLightPassShaderLib\",\r\n\r\n                \"DeferLightPassEndShaderLib\"\r\n            ],\r\n            \"DeferDirectionLightPass\": [\r\n                { \"type\": \"group\", \"value\": \"deferLightPassIndexZeroUbo\" },\r\n                { \"type\": \"group\", \"value\": \"deferLightPassUbo\" },\r\n\r\n                \"DirectionLightUboShaderLib\",\r\n\r\n                \"DeferLightPassCommonShaderLib\",\r\n                \"DeferDirectionLightPointLightPassCommonShaderLib\",\r\n                \"DeferDirectionLightPassCommonShaderLib\",\r\n\r\n                { \"type\": \"group\", \"value\": \"deferLightPassLightMap\" },\r\n                \"DeferDirectionLightPassNoNormalMapShaderLib\",\r\n\r\n\r\n                \"DeferLightPassShaderLib\",\r\n                \"DeferDirectionLightPassShaderLib\",\r\n\r\n\r\n                \"DeferLightPassEndShaderLib\"\r\n            ],\r\n            \"DeferPointLightPass\": [\r\n                { \"type\": \"group\", \"value\": \"deferLightPassIndexZeroUbo\" },\r\n                { \"type\": \"group\", \"value\": \"deferLightPassUbo\" },\r\n\r\n                \"PointLightUboShaderLib\",\r\n\r\n                \"DeferLightPassCommonShaderLib\",\r\n                \"DeferDirectionLightPointLightPassCommonShaderLib\",\r\n                \"DeferPointLightPassCommonShaderLib\",\r\n\r\n                { \"type\": \"group\", \"value\": \"deferLightPassLightMap\" },\r\n                \"DeferPointLightPassNoNormalMapShaderLib\",\r\n\r\n\r\n                \"DeferLightPassShaderLib\",\r\n                \"DeferPointLightPassShaderLib\",\r\n\r\n\r\n                \"DeferLightPassEndShaderLib\"\r\n            ]\r\n        }\r\n    },\r\n    \"shaderLibGroups\": {\r\n        \"engineMaterialTop\": [\r\n            \"CommonShaderLib\",\r\n            \"ModelMatrixNoInstanceShaderLib\",\r\n            \"VerticeCommonShaderLib\",\r\n            \"CameraUboShaderLib\"\r\n        ],\r\n\r\n        \"deferLightPassIndexZeroUbo\": [\r\n            \"CameraUboShaderLib\"\r\n        ],\r\n        \"deferLightPassUbo\": [\r\n            \"LightUboShaderLib\"\r\n        ],\r\n        \"deferLightPassLightMap\": [\r\n            \"DeferLightPassNoNormalMapShaderLib\",\r\n            \"NoLightMapShaderLib\",\r\n            \"NoEmissionMapShaderLib\",\r\n            \"NoShadowMapShaderLib\"\r\n        ],\r\n        \"engineMaterialEnd\": [\r\n            \"EndShaderLib\"\r\n        ]\r\n    }\r\n}\r\n","import { ensureFunc } from \"../../../../../../../definition/typescript/decorator/contract\";\r\nimport { AttributeLocationMap } from \"../../../../../../type/dataType\";\r\nimport { createMap, isValidMapValue } from \"../../../../../../../utils/objectUtils\";\r\n\r\nexport const getAttribLocation = ensureFunc((pos: number, gl: WebGLRenderingContext, program: WebGLProgram, name: string, attributeLocationMap: AttributeLocationMap) => {\r\n    // it(`${name}'s attrib location should be number`, () => {\r\n    //     expect(pos).be.a(\"number\");\r\n    // });\r\n}, (gl: WebGLRenderingContext, program: WebGLProgram, name: string, attributeLocationMap: AttributeLocationMap) => {\r\n    var pos: number = null;\r\n\r\n    pos = attributeLocationMap[name];\r\n\r\n    if (isValidMapValue(pos)) {\r\n        return pos;\r\n    }\r\n\r\n    pos = gl.getAttribLocation(program, name);\r\n    attributeLocationMap[name] = pos;\r\n\r\n    return pos;\r\n})\r\n\r\nexport const isAttributeLocationNotExist = (pos: number) => {\r\n    return pos === -1;\r\n}\r\n\r\nexport const setEmptyLocationMap = (shaderIndex: number, LocationDataFromSystem: any) => {\r\n    LocationDataFromSystem.attributeLocationMap[shaderIndex] = createMap();\r\n    LocationDataFromSystem.uniformLocationMap[shaderIndex] = createMap();\r\n}\r\n\r\nexport const initData = (LocationDataFromSystem: any) => {\r\n    LocationDataFromSystem.attributeLocationMap = createMap();\r\n    LocationDataFromSystem.uniformLocationMap = createMap();\r\n}\r\n","import { ensureFunc, it, requireCheckFunc } from \"../../../../../../../definition/typescript/decorator/contract\";\r\nimport {\r\n    AttributeLocationMap, SendAttributeConfigMap, VaoConfigData,\r\n    VaoConfigMap\r\n} from \"../../../../../../type/dataType\";\r\nimport {\r\n    IWebGL1SendAttributeConfig, IWebGL1SendUniformConfig,\r\n    IWebGL1ShaderLibContentGenerator\r\n} from \"../../../../../../worker/webgl1/both_file/data/shaderLib_generator\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { forEach, hasDuplicateItems } from \"../../../../../../../utils/arrayUtils\";\r\nimport { isConfigDataExist } from \"../../../../../../utils/renderConfigUtils\";\r\nimport {\r\n    initData as initDataUtils,\r\n    setVaoConfigData\r\n} from \"../../../../../../utils/worker/render_file/shader/glslSender/glslSenderUtils\";\r\nimport { createMap } from \"../../../../../../../utils/objectUtils\";\r\nimport { Log } from \"../../../../../../../utils/Log\";\r\nimport { getAttribLocation } from \"../location/locationUtils\";\r\n\r\nexport const addSendAttributeConfig = ensureFunc((returnVal, shaderIndex: number, materialShaderLibNameArr: Array<string>, shaderLibData: IWebGL1ShaderLibContentGenerator, sendAttributeConfigMap: SendAttributeConfigMap) => {\r\n    it(\"sendAttributeConfigMap should not has duplicate attribute name\", () => {\r\n        expect(hasDuplicateItems(sendAttributeConfigMap[shaderIndex])).false;\r\n    });\r\n}, requireCheckFunc((shaderIndex: number, materialShaderLibNameArr: Array<string>, shaderLibData: IWebGL1ShaderLibContentGenerator, sendAttributeConfigMap: SendAttributeConfigMap) => {\r\n    it(\"sendAttributeConfigMap[shaderIndex] should not be defined\", () => {\r\n        expect(sendAttributeConfigMap[shaderIndex]).not.exist;\r\n    });\r\n}, (shaderIndex: number, materialShaderLibNameArr: Array<string>, shaderLibData: IWebGL1ShaderLibContentGenerator, sendAttributeConfigMap: SendAttributeConfigMap) => {\r\n    var sendDataArr: Array<IWebGL1SendAttributeConfig> = [];\r\n\r\n    forEach(materialShaderLibNameArr, (shaderLibName: string) => {\r\n        var sendData = shaderLibData[shaderLibName].send;\r\n\r\n        if (isConfigDataExist(sendData) && isConfigDataExist(sendData.attribute)) {\r\n            sendDataArr = sendDataArr.concat(sendData.attribute);\r\n        }\r\n    })\r\n\r\n    sendAttributeConfigMap[shaderIndex] = sendDataArr;\r\n}))\r\n\r\nexport const addSendUniformConfig = ensureFunc((returnVal, shaderIndex: number, materialShaderLibNameArr: Array<string>, shaderLibData: IWebGL1ShaderLibContentGenerator, GLSLSenderDataFromSystem: any) => {\r\n    it(\"sendUniformConfigMap should not has duplicate attribute name\", () => {\r\n        expect(hasDuplicateItems(GLSLSenderDataFromSystem.sendUniformConfigMap[shaderIndex])).false;\r\n    });\r\n}, requireCheckFunc((shaderIndex: number, materialShaderLibNameArr: Array<string>, shaderLibData: IWebGL1ShaderLibContentGenerator, GLSLSenderDataFromSystem: any) => {\r\n    it(\"sendUniformConfigMap[shaderIndex] should not be defined\", () => {\r\n        expect(GLSLSenderDataFromSystem.sendUniformConfigMap[shaderIndex]).not.exist;\r\n    });\r\n}, (shaderIndex: number, materialShaderLibNameArr: Array<string>, shaderLibData: IWebGL1ShaderLibContentGenerator, GLSLSenderDataFromSystem: any) => {\r\n    var sendUniformDataArr: Array<IWebGL1SendUniformConfig> = [],\r\n        sendUniformFuncDataArr: Array<Function> = [];\r\n\r\n    forEach(materialShaderLibNameArr, (shaderLibName: string) => {\r\n        var sendData = shaderLibData[shaderLibName].send;\r\n\r\n        if (isConfigDataExist(sendData)) {\r\n            if (isConfigDataExist(sendData.uniform)) {\r\n                sendUniformDataArr = sendUniformDataArr.concat(sendData.uniform);\r\n            }\r\n\r\n            if (isConfigDataExist(sendData.uniformFunc)) {\r\n                sendUniformFuncDataArr = sendUniformFuncDataArr.concat(sendData.uniformFunc);\r\n            }\r\n        }\r\n    });\r\n\r\n    GLSLSenderDataFromSystem.sendUniformConfigMap[shaderIndex] = sendUniformDataArr;\r\n    GLSLSenderDataFromSystem.sendUniformFuncConfigMap[shaderIndex] = sendUniformFuncDataArr;\r\n}))\r\n\r\nexport const addVaoConfig = requireCheckFunc((gl: any, shaderIndex: number, program: WebGLProgram, materialShaderLibNameArr: Array<string>, shaderLibData: IWebGL1ShaderLibContentGenerator, attributeLocationMap: AttributeLocationMap, vaoConfigMap: VaoConfigMap) => {\r\n    it(\"vaoConfigMap[shaderIndex] should not be defined\", () => {\r\n        expect(vaoConfigMap[shaderIndex]).not.exist;\r\n    });\r\n}, (gl: any, shaderIndex: number, program: WebGLProgram, materialShaderLibNameArr: Array<string>, shaderLibData: IWebGL1ShaderLibContentGenerator, attributeLocationMap: AttributeLocationMap, vaoConfigMap: VaoConfigMap, {\r\n    getVertices,\r\n    getNormals,\r\n    getTexCoords,\r\n    getIndices\r\n}) => {\r\n        var vaoConfigData: VaoConfigData = <any>{};\r\n\r\n        forEach(materialShaderLibNameArr, (shaderLibName: string) => {\r\n            var sendData = shaderLibData[shaderLibName].send;\r\n\r\n            if (isConfigDataExist(sendData) && isConfigDataExist(sendData.attribute)) {\r\n                forEach(sendData.attribute, ({\r\n                                             name,\r\n                    buffer\r\n                                         }) => {\r\n                    var location = getAttribLocation(gl, program, name, attributeLocationMap);\r\n\r\n                    switch (buffer) {\r\n                        case \"vertex\":\r\n                            setVaoConfigData(vaoConfigData, \"positionLocation\", location);\r\n                            setVaoConfigData(vaoConfigData, \"getVertices\", getVertices);\r\n                            break;\r\n                        case \"normal\":\r\n                            setVaoConfigData(vaoConfigData, \"normalLocation\", location);\r\n                            setVaoConfigData(vaoConfigData, \"getNormals\", getNormals);\r\n                            break;\r\n                        case \"texCoord\":\r\n                            setVaoConfigData(vaoConfigData, \"texCoordLocation\", location);\r\n                            setVaoConfigData(vaoConfigData, \"getTexCoords\", getTexCoords);\r\n                            break;\r\n                        default:\r\n                            Log.error(true, Log.info.FUNC_INVALID(`bufferName:${buffer}`));\r\n                            break;\r\n                    }\r\n                })\r\n            }\r\n        })\r\n\r\n        setVaoConfigData(vaoConfigData, \"getIndices\", getIndices);\r\n\r\n        vaoConfigMap[shaderIndex] = vaoConfigData;\r\n    })\r\n\r\nexport const initData = (GLSLSenderDataFromSystem: any) => {\r\n    initDataUtils(GLSLSenderDataFromSystem);\r\n\r\n    GLSLSenderDataFromSystem.sendAttributeConfigMap = createMap();\r\n    GLSLSenderDataFromSystem.attributeLocationMap = createMap();\r\n}\r\n\r\n","import { isValidVal } from \"../../../utils/arrayUtils\";\r\nimport { it, requireCheckFunc } from \"../../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\n\r\nexport const isBufferExist = (buffer: WebGLBuffer) => isValidVal(buffer);\r\n\r\nexport const disposeGeometryWorkerBuffers = requireCheckFunc((disposedIndexArray: Array<number>, GeometryDataFromSystem: any) => {\r\n    it(\"should not add data twice in one frame\", () => {\r\n        expect(GeometryDataFromSystem.disposedGeometryIndexArray.length).equal(0);\r\n    });\r\n}, (disposedIndexArray: Array<number>, GeometryDataFromSystem: any) => {\r\n    GeometryDataFromSystem.disposedGeometryIndexArray = disposedIndexArray;\r\n})\r\n","import { isBufferExist } from \"./bufferUtils\";\r\n\r\nexport const getOrCreateBuffer = (gl: WebGLRenderingContext, geometryIndex: number, getIndices: Function, GeometryWorkerData: any, IndexBufferDataFromSystem: any) => {\r\n    var buffers = IndexBufferDataFromSystem.buffers,\r\n        buffer = buffers[geometryIndex];\r\n\r\n    if (isBufferExist(buffer)) {\r\n        return buffer;\r\n    }\r\n\r\n    buffer = gl.createBuffer();\r\n\r\n    buffers[geometryIndex] = buffer;\r\n\r\n    _initBuffer(gl, getIndices(geometryIndex, GeometryWorkerData), buffer, IndexBufferDataFromSystem);\r\n\r\n    return buffer;\r\n}\r\n\r\nconst _initBuffer =(gl: WebGLRenderingContext, data: Uint16Array | Uint32Array, buffer: WebGLBuffer, IndexBufferDataFromSystem: any) => {\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffer);\r\n\r\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, data, gl.STATIC_DRAW);\r\n\r\n    _resetBindedBuffer(gl, IndexBufferDataFromSystem);\r\n}\r\n\r\nconst _resetBindedBuffer =(gl: WebGLRenderingContext, IndexBufferDataFromSystem: any) => {\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\r\n}\r\n\r\nexport const initData = (IndexBufferDataFromSystem: any) => {\r\n    IndexBufferDataFromSystem.buffers = [];\r\n}\r\n","import { WebGLVertexArrayObject } from \"../../../../../extend/interface\";\r\nimport { removeVao } from \"../../../../../utils/worker/render_file/vao/vaoUtils\";\r\nimport { VaoMap, VboArrayMap } from \"../../../../../type/dataType\";\r\n\r\nexport const createVao = (extension: any) => {\r\n    return extension.createVertexArrayOES();\r\n}\r\n\r\nexport const bindVao = (extension: any, vao: WebGLVertexArrayObject) => {\r\n    extension.bindVertexArrayOES(vao);\r\n}\r\n\r\nexport const unbindVao = (extension: any) => {\r\n    extension.bindVertexArrayOES(null);\r\n}\r\n\r\nexport const disposeVao = (gl: any, extension: any, geometryIndex: number, vaoMap: VaoMap, vboArrayMap: VboArrayMap) => {\r\n    extension.deleteVertexArrayOES(vaoMap[geometryIndex]);\r\n\r\n    removeVao(gl, geometryIndex, vaoMap, vboArrayMap);\r\n}\r\n","import { Map } from \"immutable\";\r\nimport { detectCapabilty, detectExtension as detectExtensionSystem } from \"../../../../../utils/device/gpuDetectUtils\";\r\n\r\nexport const detect = (getGL: Function, DeviceManagerDataFromSystem: any, GPUDetectDataFromSystem: any, state: Map<any, any>, ) => {\r\n    var gl = getGL(DeviceManagerDataFromSystem, state);\r\n\r\n    _detectExtension(state, gl, GPUDetectDataFromSystem);\r\n    detectCapabilty(state, gl, GPUDetectDataFromSystem);\r\n\r\n    return state;\r\n}\r\n\r\nconst _detectExtension =(state: Map<any, any>, gl: any, GPUDetectDataFromSystem: any) => {\r\n    detectExtensionSystem(state, gl, GPUDetectDataFromSystem);\r\n}\r\n\r\nexport const getExtensionVao = (GPUDetectDataFromSystem: any) => GPUDetectDataFromSystem.extensionVao;\r\n\r\nexport const initData = (GPUDetectDataFromSystem: any) => {\r\n    GPUDetectDataFromSystem.maxTextureUnit = null;\r\n    GPUDetectDataFromSystem.maxTextureSize = null;\r\n    GPUDetectDataFromSystem.maxCubemapTextureSize = null;\r\n    GPUDetectDataFromSystem.maxAnisotropy = null;\r\n    GPUDetectDataFromSystem.maxBoneCount = null;\r\n    GPUDetectDataFromSystem.maxUniformBufferBindings = null;\r\n    GPUDetectDataFromSystem.extensionCompressedTextureS3TC = null;\r\n    GPUDetectDataFromSystem.extensionTextureFilterAnisotropic = null;\r\n    GPUDetectDataFromSystem.extensionInstancedArrays = null;\r\n    GPUDetectDataFromSystem.extensionUintIndices = null;\r\n    GPUDetectDataFromSystem.extensionDepthTexture = null;\r\n    GPUDetectDataFromSystem.extensionVao = null;\r\n    GPUDetectDataFromSystem.extensionStandardDerivatives = null;\r\n    GPUDetectDataFromSystem.extensionColorBufferFloat = null;\r\n    GPUDetectDataFromSystem.precision = null;\r\n}\r\n","import { addSendAttributeConfig, addSendUniformConfig, addVaoConfig } from \"./glslSender/glslSenderUtils\";\r\nimport { IWebGL1ShaderLibConfig, IWebGL1ShaderLibContentGenerator } from \"../../../../../worker/webgl1/both_file/data/shaderLib_generator\";\r\nimport { InitShaderDataMap } from \"../../../../../type/utilsType\";\r\nimport { Map } from \"immutable\";\r\nimport { IMaterialConfig, IShaderLibItem, MaterialShaderLibConfig } from \"../../../../../data/material_config_interface\";\r\nimport {\r\n    genereateShaderIndex, initMaterialShader as initMaterialShaderUtils,\r\n    initNoMaterialShader as initNoMaterialShaderUtils\r\n} from \"../../../../../utils/shader/shaderUtils\";\r\nimport { getProgram } from \"../../../../../utils/worker/render_file/shader/program/programUtils\";\r\nimport { initShader, registerProgram } from \"../../../../../utils/shader/program/programUtils\";\r\nimport { getOrCreateBuffer } from \"../../../../../utils/buffer/indexBufferUtils\";\r\nimport { WebGL1InitShaderFuncDataMap } from \"../../../../type/utilsType\";\r\nimport { bindVao as bindVaoUtils, createVao, unbindVao } from \"../vao/vaoUtils\";\r\nimport { WebGLVertexArrayObject } from \"../../../../../extend/interface\";\r\nimport {\r\n    createAndInitArrayBuffer,\r\n    createAndInitIndexBuffer\r\n} from \"../../../../../utils/worker/render_file/shader/shaderUtils\";\r\nimport { hasExtension } from \"../../../../../utils/device/gpuDetectUtils\";\r\nimport { getExtensionVao } from \"../device/gpuDetectUtils\";\r\nimport { setEmptyLocationMap } from \"./location/locationUtils\";\r\nimport { createMap } from \"../../../../../../utils/objectUtils\";\r\nimport { VaoMap, VboArrayMap } from \"../../../../../type/dataType\";\r\n\r\nexport const initNoMaterialShader = (state: Map<any, any>, shaderName: string, materialShaderLibConfig: MaterialShaderLibConfig, material_config: IMaterialConfig, shaderLib_generator: IWebGL1ShaderLibContentGenerator, initShaderFuncDataMap: WebGL1InitShaderFuncDataMap, initShaderDataMap: InitShaderDataMap) => {\r\n    initNoMaterialShaderUtils(state, null, materialShaderLibConfig, material_config, shaderLib_generator, _init, initShaderFuncDataMap, initShaderDataMap);\r\n}\r\n\r\nexport const initMaterialShader = (state: Map<any, any>, materialIndex: number, shaderName: string, material_config: IMaterialConfig, shaderLib_generator: IWebGL1ShaderLibContentGenerator, initShaderFuncDataMap: WebGL1InitShaderFuncDataMap, initShaderDataMap: InitShaderDataMap) => {\r\n    return initMaterialShaderUtils(state, materialIndex, shaderName, material_config, shaderLib_generator, _init, initShaderFuncDataMap, initShaderDataMap);\r\n}\r\n\r\nconst _init =(state: Map<any, any>, materialIndex: number | null, materialShaderLibNameArr: Array<string>, material_config: IMaterialConfig, shaderLib_generator: IWebGL1ShaderLibContentGenerator, initShaderFuncDataMap: WebGL1InitShaderFuncDataMap, initShaderDataMap: InitShaderDataMap) => {\r\n    var {\r\n            ShaderDataFromSystem,\r\n        DeviceManagerDataFromSystem,\r\n        ProgramDataFromSystem,\r\n        LocationDataFromSystem,\r\n        GLSLSenderDataFromSystem,\r\n        GPUDetectDataFromSystem\r\n        } = initShaderDataMap,\r\n        shaderIndex = genereateShaderIndex(ShaderDataFromSystem),\r\n        program = getProgram(shaderIndex, ProgramDataFromSystem),\r\n        shaderLibDataFromSystem: IWebGL1ShaderLibConfig = null,\r\n        gl = null;\r\n\r\n    shaderLibDataFromSystem = shaderLib_generator.shaderLibs;\r\n\r\n    let {\r\n        vsSource,\r\n        fsSource\r\n    } = initShaderFuncDataMap.buildGLSLSource(materialIndex, materialShaderLibNameArr, shaderLibDataFromSystem, initShaderDataMap);\r\n\r\n    gl = initShaderFuncDataMap.getGL(DeviceManagerDataFromSystem, state);\r\n\r\n    program = gl.createProgram();\r\n\r\n    registerProgram(shaderIndex, ProgramDataFromSystem, program);\r\n    initShader(program, vsSource, fsSource, gl);\r\n\r\n    setEmptyLocationMap(shaderIndex, LocationDataFromSystem);\r\n\r\n    if (hasExtension(getExtensionVao(GPUDetectDataFromSystem))) {\r\n        addVaoConfig(gl, shaderIndex, program, materialShaderLibNameArr, shaderLibDataFromSystem, GLSLSenderDataFromSystem.attributeLocationMap, GLSLSenderDataFromSystem.vaoConfigMap, initShaderFuncDataMap);\r\n    }\r\n    else {\r\n        addSendAttributeConfig(shaderIndex, materialShaderLibNameArr, shaderLibDataFromSystem, GLSLSenderDataFromSystem.sendAttributeConfigMap);\r\n    }\r\n\r\n    addSendUniformConfig(shaderIndex, materialShaderLibNameArr, shaderLibDataFromSystem, GLSLSenderDataFromSystem);\r\n\r\n    return shaderIndex;\r\n}\r\n\r\nexport const bindIndexBuffer = (gl: WebGLRenderingContext, geometryIndex: number, getIndicesFunc: Function, ProgramDataFromSystem: any, GeometryDataFromSystem: any, IndexBufferDataFromSystem: any) => {\r\n    var buffer = getOrCreateBuffer(gl, geometryIndex, getIndicesFunc, GeometryDataFromSystem, IndexBufferDataFromSystem);\r\n\r\n    if (ProgramDataFromSystem.lastBindedIndexBuffer === buffer) {\r\n        return;\r\n    }\r\n\r\n    ProgramDataFromSystem.lastBindedIndexBuffer = buffer;\r\n\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffer);\r\n}\r\n\r\nexport const bindVao = (extension: any, vao: WebGLVertexArrayObject, ProgramDataFromSystem: any) => {\r\n    if (ProgramDataFromSystem.lastBindedVao === vao) {\r\n        return;\r\n    }\r\n\r\n    ProgramDataFromSystem.lastBindedVao = vao;\r\n\r\n    bindVaoUtils(extension, vao);\r\n}\r\n\r\nexport const createAndInitVao = (gl: any, extension: any, geometryIndex: number, vaoMap: VaoMap, vboArrayMap: VboArrayMap, {\r\n    positionLocation,\r\n    normalLocation,\r\n    texCoordLocation,\r\n\r\n    getVertices,\r\n    getNormals,\r\n    getTexCoords,\r\n    getIndices\r\n}, GeometryDataFromSystem: any) => {\r\n    var vao = createVao(extension),\r\n        buffers = [];\r\n\r\n    vaoMap[geometryIndex] = vao;\r\n\r\n    bindVaoUtils(extension, vao);\r\n\r\n    if (!!getVertices) {\r\n        buffers.push(createAndInitArrayBuffer(gl, getVertices(geometryIndex, GeometryDataFromSystem), positionLocation, 3));\r\n    }\r\n\r\n    if (!!getNormals) {\r\n        buffers.push(createAndInitArrayBuffer(gl, getNormals(geometryIndex, GeometryDataFromSystem), normalLocation, 3));\r\n    }\r\n\r\n    if (!!getTexCoords) {\r\n        buffers.push(createAndInitArrayBuffer(gl, getTexCoords(geometryIndex, GeometryDataFromSystem), texCoordLocation, 2));\r\n    }\r\n\r\n    buffers.push(createAndInitIndexBuffer(gl, getIndices(geometryIndex, GeometryDataFromSystem)));\r\n\r\n    unbindVao(extension);\r\n\r\n    vboArrayMap[geometryIndex] = buffers;\r\n\r\n    return vao;\r\n}\r\n\r\nexport const initData = (ShaderDataFromSystem: any) => {\r\n    ShaderDataFromSystem.index = 0;\r\n    ShaderDataFromSystem.count = 0;\r\n\r\n    ShaderDataFromSystem.shaderIndexMap = createMap();\r\n    ShaderDataFromSystem.shaderLibNameMap = createMap();\r\n}\r\n","import { isConfigDataExist } from \"../../../../../utils/renderConfigUtils\";\r\nimport { webgl1_main_begin, webgl1_main_end } from \"../../../../../webgl1/shader/snippet/ShaderSnippet\";\r\nimport { highp_fragment, lowp_fragment, mediump_fragment } from \"../../../../../shader/chunk/ShaderChunk\";\r\nimport { ExtendUtils } from \"wonder-commonlib/dist/es2015/utils/ExtendUtils\";\r\nimport { it, requireCheckFunc } from \"../../../../../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { forEach } from \"../../../../../../utils/arrayUtils\";\r\nimport { BuildGLSLSourceFuncFuncDataMap } from \"../../../../../type/dataType\";\r\nimport { InitShaderDataMap } from \"../../../../../type/utilsType\";\r\nimport {\r\n    IWebGL1GLSLConfig, IWebGL1GLSLFuncConfig, IWebGL1SendAttributeConfig,\r\n    IWebGL1ShaderLibContentGenerator\r\n} from \"../../../../../worker/webgl1/both_file/data/shaderLib_generator\";\r\nimport {\r\n    buildSourceDefine, generateUniformSource, getEmptyFuncGLSLConfig, getFuncGLSLDefineListData, getFuncGLSLPartData,\r\n    getGLSLDefineListData,\r\n    getGLSLPartData,\r\n    getPrecisionSource\r\n} from \"../../../../../utils/shader/shaderSourceBuildUtils\";\r\nimport { WebGL1InitShaderFuncDataMap } from \"../../../../type/utilsType\";\r\n\r\nexport const buildGLSLSource = requireCheckFunc((materialIndex: number, materialShaderLibNameArr: Array<string>, shaderLibData: IWebGL1ShaderLibContentGenerator, funcDataMap: BuildGLSLSourceFuncFuncDataMap, initShaderDataMap: WebGL1InitShaderFuncDataMap) => {\r\n    it(\"shaderLib should be defined\", () => {\r\n        forEach(materialShaderLibNameArr, (shaderLibName: string) => {\r\n            expect(shaderLibData[shaderLibName]).exist;\r\n        })\r\n    });\r\n}, (materialIndex: number, materialShaderLibNameArr: Array<string>, shaderLibData: IWebGL1ShaderLibContentGenerator, funcDataMap: BuildGLSLSourceFuncFuncDataMap, initShaderDataMap: InitShaderDataMap) => {\r\n    var vsTop: string = \"\",\r\n        vsDefine: string = \"\",\r\n        vsVarDeclare: string = \"\",\r\n        vsFuncDeclare: string = \"\",\r\n        vsFuncDefine: string = \"\",\r\n        vsBody: string = \"\",\r\n        fsTop: string = \"\",\r\n        fsDefine: string = \"\",\r\n        fsVarDeclare: string = \"\",\r\n        fsFuncDeclare: string = \"\",\r\n        fsFuncDefine: string = \"\",\r\n        fsBody: string = \"\";\r\n    const _setVs =(getGLSLPartData: Function, getGLSLDefineListData: Function, vs: IWebGL1GLSLConfig) => {\r\n        vsTop += getGLSLPartData(vs, \"top\");\r\n        vsDefine += buildSourceDefine(getGLSLDefineListData(vs), initShaderDataMap) + getGLSLPartData(vs, \"define\");\r\n        vsVarDeclare += getGLSLPartData(vs, \"varDeclare\");\r\n        vsFuncDeclare += getGLSLPartData(vs, \"funcDeclare\");\r\n        vsFuncDefine += getGLSLPartData(vs, \"funcDefine\");\r\n        vsBody += getGLSLPartData(vs, \"body\");\r\n    },\r\n        _setFs = (getGLSLPartData: Function, getGLSLDefineListData: Function, fs: IWebGL1GLSLConfig) => {\r\n            fsTop += getGLSLPartData(fs, \"top\");\r\n            fsDefine += buildSourceDefine(getGLSLDefineListData(fs), initShaderDataMap) + getGLSLPartData(fs, \"define\");\r\n            fsVarDeclare += getGLSLPartData(fs, \"varDeclare\");\r\n            fsFuncDeclare += getGLSLPartData(fs, \"funcDeclare\");\r\n            fsFuncDefine += getGLSLPartData(fs, \"funcDefine\");\r\n            fsBody += getGLSLPartData(fs, \"body\");\r\n        };\r\n\r\n    vsBody += webgl1_main_begin;\r\n    fsBody += webgl1_main_begin;\r\n\r\n    fsTop += getPrecisionSource(lowp_fragment, mediump_fragment, highp_fragment, initShaderDataMap.GPUDetectDataFromSystem);\r\n\r\n    forEach(materialShaderLibNameArr, (shaderLibName: string) => {\r\n        var glslData = shaderLibData[shaderLibName].glsl,\r\n            vs: IWebGL1GLSLConfig = null,\r\n            fs: IWebGL1GLSLConfig = null,\r\n            func: Function = null;\r\n\r\n        if (!isConfigDataExist(glslData)) {\r\n            return;\r\n        }\r\n\r\n        vs = glslData.vs;\r\n        fs = glslData.fs;\r\n        func = glslData.func;\r\n\r\n        if (isConfigDataExist(vs)) {\r\n            _setVs(getGLSLPartData, getGLSLDefineListData, vs);\r\n        }\r\n\r\n        if (isConfigDataExist(fs)) {\r\n            _setFs(getGLSLPartData, getGLSLDefineListData, fs);\r\n        }\r\n\r\n        if (isConfigDataExist(func)) {\r\n            let funcConfig: IWebGL1GLSLFuncConfig = func(materialIndex, funcDataMap, initShaderDataMap);\r\n\r\n            if (isConfigDataExist(funcConfig)) {\r\n                let vs = funcConfig.vs,\r\n                    fs = funcConfig.fs;\r\n\r\n                if (isConfigDataExist(vs)) {\r\n                    vs = ExtendUtils.extend(getEmptyFuncGLSLConfig(), vs);\r\n\r\n                    _setVs(getFuncGLSLPartData, getFuncGLSLDefineListData, vs);\r\n                }\r\n\r\n                if (isConfigDataExist(fs)) {\r\n                    fs = ExtendUtils.extend(getEmptyFuncGLSLConfig(), fs);\r\n\r\n                    _setFs(getFuncGLSLPartData, getFuncGLSLDefineListData, fs);\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    vsBody += webgl1_main_end;\r\n    fsBody += webgl1_main_end;\r\n\r\n    vsTop += _generateAttributeSource(materialShaderLibNameArr, shaderLibData);\r\n    vsTop += generateUniformSource(materialShaderLibNameArr, shaderLibData, vsVarDeclare, vsFuncDefine, vsBody);\r\n    fsTop += generateUniformSource(materialShaderLibNameArr, shaderLibData, fsVarDeclare, fsFuncDefine, fsBody);\r\n\r\n    return {\r\n        vsSource: vsTop + vsDefine + vsVarDeclare + vsFuncDeclare + vsFuncDefine + vsBody,\r\n        fsSource: fsTop + fsDefine + fsVarDeclare + fsFuncDeclare + fsFuncDefine + fsBody\r\n    }\r\n})\r\n\r\nconst _generateAttributeSource =(materialShaderLibNameArr: Array<string>, shaderLibData: IWebGL1ShaderLibContentGenerator) => {\r\n    var result = \"\";\r\n\r\n    forEach(materialShaderLibNameArr, (shaderLibName: string) => {\r\n        var sendData = shaderLibData[shaderLibName].send,\r\n            attributeData = null;\r\n\r\n        if (!isConfigDataExist(sendData) || !isConfigDataExist(sendData.attribute)) {\r\n            return;\r\n        }\r\n\r\n        attributeData = sendData.attribute;\r\n\r\n        forEach(attributeData, (data: IWebGL1SendAttributeConfig) => {\r\n            result += `attribute ${data.type} ${data.name};\\n`;\r\n        });\r\n    });\r\n\r\n    return result;\r\n}\r\n\r\n","import { IWebGL1ShaderLibContentGenerator } from \"../../worker/webgl1/both_file/data/shaderLib_generator\";\r\nimport { MaterialDataMap } from \"../../type/dataType\";\r\nimport { getAlphaTest, isTestAlpha } from \"../../../component/material/MaterialSystem\";\r\nimport { buildGLSLSource as buildGLSLSourceUtils } from \"../utils/worker/render_file/shader/shaderSourceBuildUtils\";\r\n\r\nexport const buildGLSLSource = (materialIndex: number, materialShaderLibNameArr: Array<string>, shaderLibData: IWebGL1ShaderLibContentGenerator, MaterialDataMap: MaterialDataMap) => {\r\n    return buildGLSLSourceUtils(materialIndex, materialShaderLibNameArr, shaderLibData, {\r\n        getAlphaTest: getAlphaTest,\r\n        isTestAlpha: isTestAlpha\r\n    }, MaterialDataMap);\r\n}\r\n","import { isSupportRenderWorkerAndSharedArrayBuffer } from \"../../../device/WorkerDetectSystem\";\r\nimport { Map } from \"immutable\";\r\nimport { IWebGL1ShaderLibContentGenerator } from \"../../worker/webgl1/both_file/data/shaderLib_generator\";\r\nimport { InitShaderDataMap } from \"../../type/utilsType\";\r\nimport { getGL } from \"../../device/DeviceManagerSystem\";\r\nimport { getMapCount } from \"../../texture/MapManagerSystem\";\r\nimport {\r\n    initNoMaterialShader as initNoMaterialShaderUtils, initMaterialShader as initMaterialShaderUtils,\r\n    bindIndexBuffer as bindIndexBufferUtils, initData as initDataUtils\r\n} from \"../utils/worker/render_file/shader/shaderUtils\";\r\nimport { buildGLSLSource } from \"./ShaderSourceBuildSystem\";\r\nimport { IMaterialConfig, MaterialShaderLibConfig } from \"../../data/material_config_interface\";\r\nimport { hasDiffuseMap, hasSpecularMap } from \"../../../component/material/LightMaterialSystem\";\r\nimport { getIndices, getNormals, getTexCoords, getVertices } from \"../../../component/geometry/GeometrySystem\";\r\n\r\nexport var initNoMaterialShader = null;\r\n\r\nexport var initMaterialShader = null;\r\n\r\nexport var bindIndexBuffer = null;\r\n\r\nif (!isSupportRenderWorkerAndSharedArrayBuffer()) {\r\n    initNoMaterialShader = (state: Map<any, any>, shaderName: string, materialShaderLibConfig: MaterialShaderLibConfig, material_config: IMaterialConfig, shaderLib_generator: IWebGL1ShaderLibContentGenerator, initShaderDataMap: InitShaderDataMap) => {\r\n        initNoMaterialShaderUtils(state, shaderName, materialShaderLibConfig, material_config, shaderLib_generator, _buildInitShaderFuncDataMap(), initShaderDataMap);\r\n    };\r\n\r\n    initMaterialShader = (state: Map<any, any>, materialIndex: number, shaderName: string, material_config: IMaterialConfig, shaderLib_generator: IWebGL1ShaderLibContentGenerator, initShaderDataMap: InitShaderDataMap) => {\r\n        return initMaterialShaderUtils(state, materialIndex, shaderName, material_config, shaderLib_generator, _buildInitShaderFuncDataMap(), initShaderDataMap);\r\n    };\r\n\r\n    bindIndexBuffer = (gl: WebGLRenderingContext, geometryIndex: number, ProgramData: any, GeometryData: any, IndexBufferData: any) => {\r\n        bindIndexBufferUtils(gl, geometryIndex, getIndices, ProgramData, GeometryData, IndexBufferData);\r\n    }\r\n\r\n    const _buildInitShaderFuncDataMap =() => {\r\n        return {\r\n            buildGLSLSource: buildGLSLSource,\r\n            getGL: getGL,\r\n            getMapCount: getMapCount,\r\n            hasSpecularMap: hasSpecularMap,\r\n            hasDiffuseMap: hasDiffuseMap,\r\n\r\n            getVertices: getVertices,\r\n            getNormals: getNormals,\r\n            getTexCoords: getTexCoords,\r\n            getIndices: getIndices\r\n        }\r\n    }\r\n}\r\n\r\nexport const initData = initDataUtils;\r\n","export const buildDrawDataMap = (GBufferDataFromSystem: any, DeferAmbientLightPassDataFromSystem: any, DeferDirectionLightPassDataFromSystem: any, DeferPointLightPassDataFromSystem: any) => {\r\n    return {\r\n        GBufferDataFromSystem: GBufferDataFromSystem,\r\n        DeferAmbientLightPassDataFromSystem: DeferAmbientLightPassDataFromSystem,\r\n        DeferDirectionLightPassDataFromSystem: DeferDirectionLightPassDataFromSystem,\r\n        DeferPointLightPassDataFromSystem: DeferPointLightPassDataFromSystem,\r\n    }\r\n}\r\n\r\nexport const buildDrawFuncDataMap = (sendAttributeData: Function, sendUniformData: Function, directlySendUniformData: Function, use: Function, hasIndices: Function, getIndicesCount: Function, getIndexType: Function, getIndexTypeSize: Function, getVerticesCount: Function, bindAndUpdate: Function, getMapCount: Function, getStartTextureIndex:Function, useShader: Function, bindGBuffer: Function, unbindGBuffer: Function, getNewTextureUnitIndex: Function) => {\r\n    return {\r\n        sendAttributeData: sendAttributeData,\r\n        sendUniformData: sendUniformData,\r\n        directlySendUniformData: directlySendUniformData,\r\n        use: use,\r\n        hasIndices: hasIndices,\r\n        getIndicesCount: getIndicesCount,\r\n        getIndexType: getIndexType,\r\n        getIndexTypeSize: getIndexTypeSize,\r\n        getVerticesCount: getVerticesCount,\r\n        bindAndUpdate: bindAndUpdate,\r\n        getMapCount: getMapCount,\r\n        getStartTextureIndex: getStartTextureIndex,\r\n        useShader: useShader,\r\n        bindGBuffer: bindGBuffer,\r\n        unbindGBuffer: unbindGBuffer,\r\n        getNewTextureUnitIndex: getNewTextureUnitIndex\r\n    }\r\n}\r\n","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { checkShouldAlive, Material } from \"./Material\";\r\nimport { create, initMaterial, setMap } from \"./BasicMaterialSystem\";\r\nimport { MaterialData } from \"./MaterialData\";\r\nimport { requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { BasicMaterialData } from \"./BasicMaterialData\";\r\nimport { getAlphaTest, getColor, getOpacity, setAlphaTest, setColor, setOpacity } from \"./MaterialSystem\";\r\nimport { Color } from \"../../structure/Color\";\r\nimport { Texture } from \"../../renderer/texture/Texture\";\r\nimport { MapManagerData } from \"../../renderer/texture/MapManagerData\";\r\nimport { getState } from \"../../core/DirectorSystem\";\r\nimport { DirectorData } from \"../../core/DirectorData\";\r\nimport { TextureData } from \"../../renderer/texture/TextureData\";\r\nimport { isWebgl1 } from \"../../renderer/device/WebGLDetectSystem\";\r\nimport { WebGL1ShaderData } from \"../../renderer/webgl1/shader/ShaderData\";\r\nimport { WebGL2ShaderData } from \"../../renderer/webgl2/shader/ShaderData\";\r\n\r\n@registerClass(\"BasicMaterial\")\r\nexport class BasicMaterial extends Material {\r\n}\r\n\r\nexport var createBasicMaterial = null;\r\n\r\nif (isWebgl1()) {\r\n    createBasicMaterial = () => {\r\n        return create(WebGL1ShaderData, MaterialData, BasicMaterialData);\r\n    }\r\n}\r\nelse {\r\n    createBasicMaterial = () => {\r\n        return create(WebGL2ShaderData, MaterialData, BasicMaterialData);\r\n    }\r\n}\r\n\r\nexport const initBasicMaterial = (material: BasicMaterial) => {\r\n    initMaterial(material.index, getState(DirectorData));\r\n}\r\n\r\nexport const getBasicMaterialColor = requireCheckFunc((material: BasicMaterial) => {\r\n    checkShouldAlive(material);\r\n}, (material: BasicMaterial) => {\r\n    return getColor(material.index, MaterialData);\r\n})\r\n\r\nexport const setBasicMaterialColor = requireCheckFunc((material: BasicMaterial) => {\r\n    checkShouldAlive(material);\r\n}, (material: BasicMaterial, color: Color) => {\r\n    setColor(material.index, color, MaterialData);\r\n})\r\n\r\nexport const getBasicMaterialOpacity = requireCheckFunc((material: BasicMaterial) => {\r\n    checkShouldAlive(material);\r\n}, (material: BasicMaterial) => {\r\n    return getOpacity(material.index, MaterialData);\r\n})\r\n\r\nexport const setBasicMaterialOpacity = requireCheckFunc((material: BasicMaterial) => {\r\n    checkShouldAlive(material);\r\n}, (material: BasicMaterial, opacity: number) => {\r\n    setOpacity(material.index, opacity, MaterialData);\r\n})\r\n\r\nexport const getBasicMaterialAlphaTest = requireCheckFunc((material: BasicMaterial) => {\r\n    checkShouldAlive(material);\r\n}, (material: BasicMaterial) => {\r\n    return getAlphaTest(material.index, MaterialData);\r\n})\r\n\r\nexport const setBasicMaterialAlphaTest = requireCheckFunc((material: BasicMaterial) => {\r\n    checkShouldAlive(material);\r\n}, (material: BasicMaterial, alphaTest: number) => {\r\n    setAlphaTest(material.index, alphaTest, MaterialData);\r\n})\r\n\r\nexport const setBasicMaterialMap = requireCheckFunc((material: BasicMaterial, map: Texture) => {\r\n    checkShouldAlive(material);\r\n}, (material: BasicMaterial, map: Texture) => {\r\n    setMap(material.index, map, MapManagerData, TextureData);\r\n})\r\n","export const createTypeArrays = (buffer: any, offset: number, count: number, BasicMaterialDataFromSystem: any) => {\r\n    return offset;\r\n}\r\n\r\nexport const getClassName = () => \"BasicMaterial\";\r\n","import { BasicMaterial } from \"./BasicMaterial\";\r\nimport {\r\n    addComponent as addMaterialComponent,\r\n    create as createMaterial, disposeComponent as disposeMaterialComponent,\r\n    initMaterial as initMaterialBase\r\n} from \"./MaterialSystem\";\r\nimport {\r\n    initData as initSpecifyMaterialData\r\n} from \"./SpecifyMaterialSystem\";\r\nimport { getBasicMaterialBufferCount } from \"../../renderer/utils/worker/render_file/material/bufferUtils\";\r\nimport { ensureFunc, it } from \"../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { Material } from \"./Material\";\r\nimport { generateComponentIndex } from \"../ComponentSystem\";\r\nimport { BasicMaterialData } from \"./BasicMaterialData\";\r\nimport { MaterialData } from \"./MaterialData\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport { Map } from \"immutable\";\r\nimport {\r\n    createTypeArrays as createTypeArraysUtils,\r\n    getClassName\r\n} from \"../../renderer/utils/worker/render_file/material/basicMaterialUtils\";\r\nimport { getMapCount, initMapManager, setMap as setMapMapManager } from \"../../renderer/texture/MapManagerSystem\";\r\nimport { Texture } from \"../../renderer/texture/Texture\";\r\nimport { MapManagerData } from \"../../renderer/texture/MapManagerData\";\r\nimport { getBasicMaterialBufferStartIndex } from \"../../renderer/utils/material/bufferUtils\";\r\nimport { getGL } from \"../../renderer/device/DeviceManagerSystem\";\r\nimport { DeviceManagerData } from \"../../renderer/device/DeviceManagerData\";\r\nimport { TextureData } from \"../../renderer/texture/TextureData\";\r\n\r\nexport const create = ensureFunc((component: Material) => {\r\n    it(\"index should <= max count\", () => {\r\n        expect(component.index).lte(getBasicMaterialBufferStartIndex() + getBasicMaterialBufferCount());\r\n    });\r\n}, (ShaderData: any, MaterialData: any, BasicMaterialData: any) => {\r\n    var material = new BasicMaterial(),\r\n        // materialClassName = \"BasicMaterial\",\r\n        index = generateComponentIndex(BasicMaterialData);\r\n\r\n    material.index = index;\r\n\r\n    material = createMaterial(index, material, ShaderData, MaterialData);\r\n\r\n    return material;\r\n})\r\n\r\nexport const initMaterialWithoutInitMap = (index: number, state: Map<any, any>) => {\r\n    initMaterialBase(index, state, getClassName(), MaterialData);\r\n}\r\n\r\nexport const initMaterial = (index: number, state: Map<any, any>) => {\r\n    initMaterialBase(index, state, getClassName(), MaterialData);\r\n\r\n    initMapManager(getGL(DeviceManagerData, state), index, MapManagerData, TextureData);\r\n}\r\n\r\n// export const getMap = (materialIndex: number, MapManagerData:any) => {\r\n//     return getMapByMapManager(materialIndex, MapManagerData);\r\n// }\r\n\r\n// export const addMap = ensureFunc((returnVal:any, materialIndex: number, map: Texture, MapManagerData: any, TextureData: any) => {\r\n//     it(\"only support one map\", () => {\r\n//         expect(getMapCount(materialIndex, MapManagerData)).equal(1);\r\n//     });\r\n// }, (materialIndex: number, map: Texture, MapManagerData: any, TextureData: any) => {\r\n//     var count = getMapCount(materialIndex, MapManagerData);\r\n//\r\n//     addMapByMapManager(materialIndex, map, count, `u_sampler2D${count}`, MapManagerData, TextureData);\r\n// })\r\n\r\nexport const setMap = (materialIndex: number, map: Texture, MapManagerData: any, TextureData: any) => {\r\n    setMapMapManager(materialIndex, map, _buildMapUniformSamplerName(), MapManagerData, TextureData);\r\n}\r\n\r\nconst _buildMapUniformSamplerName = () => \"u_sampler2D\";\r\n\r\nexport const addComponent = (component: Material, gameObject: GameObject) => {\r\n    addMaterialComponent(component, gameObject, MaterialData);\r\n}\r\n\r\nexport const disposeComponent = (component: Material) => {\r\n    var sourceIndex = component.index,\r\n        lastComponentIndex: number = null;\r\n\r\n    BasicMaterialData.index -= 1;\r\n\r\n    lastComponentIndex = BasicMaterialData.index;\r\n\r\n    disposeMaterialComponent(sourceIndex, lastComponentIndex, MapManagerData, MaterialData);\r\n\r\n    //not dispose shader(for reuse shader)(if dipose shader, should change render worker)\r\n}\r\n\r\nexport const createTypeArrays = (buffer: any, offset: number, count: number, BasicMaterialData: any) => {\r\n    return createTypeArraysUtils(buffer, offset, count, BasicMaterialData);\r\n}\r\n\r\nexport const initData = (BasicMaterialData: any) => {\r\n    initSpecifyMaterialData(getBasicMaterialBufferStartIndex(), BasicMaterialData);\r\n}\r\n\r\nexport const setDefaultData = (BasicMaterialData: any) => {\r\n}\r\n","import { IMaterialConfig } from \"../../renderer/data/material_config_interface\";\nimport { IShaderLibGenerator } from \"../../renderer/data/shaderLib_generator_interface\";\nimport { DeviceManagerData } from \"../../renderer/device/DeviceManagerData\";\nimport { MapManagerData } from \"../../renderer/texture/MapManagerData\";\nimport {\n    addComponent as addBasicMaterialComponent,\n    createTypeArrays as createBasicMaterialTypeArrays,\n    disposeComponent as disposeBasicMaterialComponent,\n    initMaterial as initBasicMaterial,\n    initData as initBasicMaterialData,\n    initMaterialWithoutInitMap as initBasicMaterialWithoutInitMap,\n    setDefaultData as setBasicMaterialDefaultData\n} from \"./BasicMaterialSystem\";\nimport {\n    addComponent as addLightMaterialComponent,\n    createTypeArrays as createLightMaterialTypeArrays,\n    disposeComponent as disposeLightMaterialComponent,\n    initMaterial as initLightMaterial,\n    initData as initLightMaterialData,\n    initMaterialWithoutInitMap as initLightMaterialWithoutInitMap,\n    setDefaultData as setLightMaterialDefaultData\n} from \"./LightMaterialSystem\";\nimport { createDefaultColor, setAlphaTest, setColor, setOpacity } from \"./MaterialSystem\";\nimport { initData as initMapManagerData, initMapManagers } from \"../../renderer/texture/MapManagerSystem\";\nimport {\n    addAddComponentHandle as addAddComponentHandleToMap,\n    addDisposeHandle as addDisposeHandleToMap,\n    addInitHandle as  addInitHandleToMap\n} from \"../ComponentSystem\";\nimport { Map } from \"immutable\";\nimport {\n    buildInitShaderDataMap, createTypeArrays,\n    initNoMaterialShaders, setShaderIndex\n} from \"../../renderer/utils/worker/render_file/material/materialUtils\";\nimport {\n    getBasicMaterialBufferStartIndex,\n    getLightMaterialBufferStartIndex\n} from \"../../renderer/utils/material/bufferUtils\";\nimport {\n    getBasicMaterialBufferCount, getBufferLength,\n    getBufferTotalCount, getLightMaterialBufferCount\n} from \"../../renderer/utils/worker/render_file/material/bufferUtils\";\nimport { createSharedArrayBufferOrArrayBuffer } from \"../../utils/arrayBufferUtils\";\n\nexport const init = (state: Map<any, any>, gl: WebGLRenderingContext, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, initNoMaterialShader: Function, TextureData: any, MaterialData: any, BasicMaterialData: any, LightMaterialData: any, AmbientLightData, DirectionLightData: any, PointLightData: any, GPUDetectData: any, GLSLSenderData: any, ProgramData: any, VaoData: any, LocationData: any, ShaderData: any) => {\n    initNoMaterialShaders(state, material_config, shaderLib_generator, initNoMaterialShader, buildInitShaderDataMap(DeviceManagerData, ProgramData, LocationData, GLSLSenderData, ShaderData, MapManagerData, MaterialData, BasicMaterialData, LightMaterialData, AmbientLightData, DirectionLightData, PointLightData, GPUDetectData, VaoData));\n\n    _initMaterials(state, getBasicMaterialBufferStartIndex(), initBasicMaterialWithoutInitMap, BasicMaterialData);\n    _initMaterials(state, getLightMaterialBufferStartIndex(), initLightMaterialWithoutInitMap, LightMaterialData);\n\n    initMapManagers(gl, TextureData);\n}\n\nconst _initMaterials = (state: Map<any, any>, startIndex: number, initSpecifyMaterialWithoutInitMap: Function, SpecifyMaterialData: any) => {\n    for (let i = startIndex; i < SpecifyMaterialData.index; i++) {\n        initSpecifyMaterialWithoutInitMap(i, state);\n    }\n}\n\nexport const initData = (TextureCacheData: any, TextureData: any, MapManagerData: any, MaterialData: any, BasicMaterialData: any, LightMaterialData: any) => {\n    MaterialData.materialMap = [];\n\n    MaterialData.gameObjectMap = [];\n\n    // MaterialData.shaderMap = [];\n\n    MaterialData.workerInitList = [];\n\n    _setMaterialDefaultData(MaterialData);\n\n    initBasicMaterialData(BasicMaterialData);\n    setBasicMaterialDefaultData(BasicMaterialData);\n\n    initLightMaterialData(LightMaterialData);\n    setLightMaterialDefaultData(LightMaterialData);\n\n    _initBufferData(MaterialData, BasicMaterialData, LightMaterialData);\n\n    initMapManagerData(TextureCacheData, TextureData, MapManagerData);\n}\n\nconst _setMaterialDefaultData = (MaterialData: any) => {\n    MaterialData.defaultShaderIndex = 0;\n    MaterialData.defaultColorArr = createDefaultColor().toVector3().toArray();\n    MaterialData.defaultOpacity = 1;\n    MaterialData.defaultAlphaTest = -1;\n}\n\nconst _initBufferData = (MaterialData: any, BasicMaterialData: any, LightMaterialData: any) => {\n    var buffer: any = null,\n        count = getBufferTotalCount(),\n        offset: number = null;\n\n    buffer = createSharedArrayBufferOrArrayBuffer(getBufferLength());\n\n    offset = createTypeArrays(buffer, count, MaterialData);\n\n    _setMaterialDefaultTypeArrData(count, MaterialData);\n\n    offset = createBasicMaterialTypeArrays(buffer, offset, getBasicMaterialBufferCount(), BasicMaterialData);\n    offset = createLightMaterialTypeArrays(buffer, offset, getLightMaterialBufferCount(), LightMaterialData);\n\n    MaterialData.buffer = buffer;\n}\n\nconst _setMaterialDefaultTypeArrData = (count: number, MaterialData: any) => {\n    var shaderIndex = MaterialData.defaultShaderIndex,\n        color = createDefaultColor(),\n        opacity = MaterialData.defaultOpacity,\n        alphaTest = MaterialData.defaultAlphaTest;\n\n    for (let i = 0; i < count; i++) {\n        setShaderIndex(i, shaderIndex, MaterialData);\n        setColor(i, color, MaterialData);\n        setOpacity(i, opacity, MaterialData);\n        setAlphaTest(i, alphaTest, MaterialData);\n    }\n}\n\nexport const addAddComponentHandle = (BasicMaterial: any, LightMaterial: any) => {\n    addAddComponentHandleToMap(BasicMaterial, addBasicMaterialComponent);\n    addAddComponentHandleToMap(LightMaterial, addLightMaterialComponent);\n}\n\nexport const addDisposeHandle = (BasicMaterial: any, LightMaterial: any) => {\n    addDisposeHandleToMap(BasicMaterial, disposeBasicMaterialComponent);\n    addDisposeHandleToMap(LightMaterial, disposeLightMaterialComponent);\n}\n\nexport const addInitHandle = (BasicMaterial: any, LightMaterial: any) => {\n    addInitHandleToMap(BasicMaterial, initBasicMaterial);\n    addInitHandleToMap(LightMaterial, initLightMaterial);\n}","import { Map as MapImmutable } from \"immutable\";\r\nimport { IShaderLibGenerator } from \"../../../renderer/data/shaderLib_generator_interface\";\r\nimport { IMaterialConfig } from \"../../../renderer/data/material_config_interface\";\r\nimport { WebGL2PointLightData } from \"../../../renderer/webgl2/light/PointLightData\";\r\nimport { init as initMaterial } from \"../../material/AllMaterialSystem\";\r\nimport { WebGL2DirectionLightData } from \"../../../renderer/webgl2/light/DirectionLightData\";\r\nimport { AmbientLightData } from \"../../light/AmbientLightData\";\r\n\r\nexport const init = (state: MapImmutable<any, any>, gl: WebGLRenderingContext, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, initNoMaterialShader: Function, TextureData: any, MaterialData: any, BasicMaterialData: any, LightMaterialData: any, GPUDetectData: any, GLSLSenderData: any, ProgramData: any, VaoData: any, LocationData: any, ShaderData: any) => {\r\n    initMaterial(state, gl, material_config, shaderLib_generator, initNoMaterialShader, TextureData, MaterialData, BasicMaterialData, LightMaterialData, AmbientLightData, WebGL2DirectionLightData, WebGL2PointLightData, GPUDetectData, GLSLSenderData, ProgramData, VaoData, LocationData, ShaderData);\r\n}\r\n","import { Map as MapImmutable } from \"immutable\";\r\nimport { IShaderLibGenerator } from \"../../../renderer/data/shaderLib_generator_interface\";\r\nimport { IMaterialConfig } from \"../../../renderer/data/material_config_interface\";\r\nimport { WebGL1PointLightData } from \"../../../renderer/webgl1/light/PointLightData\";\r\nimport { init as initMaterial } from \"../../material/AllMaterialSystem\";\r\nimport { WebGL1DirectionLightData } from \"../../../renderer/webgl1/light/DirectionLightData\";\r\nimport { AmbientLightData } from \"../../light/AmbientLightData\";\r\n\r\nexport const init = (state: MapImmutable<any, any>, gl: WebGLRenderingContext, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, initNoMaterialShader: Function, TextureData: any, MaterialData: any, BasicMaterialData: any, LightMaterialData: any, GPUDetectData: any, GLSLSenderData: any, ProgramData: any, VaoData: any, LocationData: any, ShaderData: any) => {\r\n    initMaterial(state, gl, material_config, shaderLib_generator, initNoMaterialShader, TextureData, MaterialData, BasicMaterialData, LightMaterialData, AmbientLightData, WebGL1DirectionLightData, WebGL1PointLightData, GPUDetectData, GLSLSenderData, ProgramData, VaoData, LocationData, ShaderData);\r\n}\r\n","export class GPUDetectDataCommon {\r\n    public static maxTextureUnit: number = null;\r\n    public static maxTextureSize: number = null;\r\n    public static maxCubemapTextureSize: number = null;\r\n    public static maxAnisotropy: number = null;\r\n    public static maxBoneCount: number = null;\r\n    public static maxUniformBufferBindings: number = null;\r\n    public static extensionCompressedTextureS3TC: any = null;\r\n    public static extensionTextureFilterAnisotropic: any = null;\r\n    public static extensionInstancedArrays: any = null;\r\n    public static extensionUintIndices: boolean = null;\r\n    public static extensionDepthTexture: boolean = null;\r\n    public static extensionVao: any = null;\r\n    public static extensionStandardDerivatives: boolean = null;\r\n    public static extensionColorBufferFloat: boolean = null;\r\n    public static precision: number = null;\r\n}\r\n\r\n","import { GPUDetectDataCommon } from \"../utils/worker/render_file/device/GPUDetectDataCommon\";\r\n\r\nexport class GPUDetectData extends GPUDetectDataCommon {\r\n\r\n}\r\n","export class BasicRenderCommandBufferData {\r\n    public static buffer: SharedArrayBuffer = null;\r\n\r\n    public static mMatrices: Float32Array = null;\r\n    public static materialIndices: Uint32Array = null;\r\n    public static geometryIndices: Uint32Array = null;\r\n}\r\n","export class LightRenderCommandBufferData {\r\n    public static buffer: SharedArrayBuffer = null;\r\n\r\n    public static mMatrices: Float32Array = null;\r\n    public static materialIndices: Uint32Array = null;\r\n    public static geometryIndices: Uint32Array = null;\r\n}\r\n","export class BasicDrawRenderCommandBufferData {\r\n    public static mMatrixFloatArrayForSend: Float32Array = null;\r\n    // public static vMatrixFloatArrayForSend: Float32Array = null;\r\n    // public static pMatrixFloatArrayForSend: Float32Array = null;\r\n}\r\n","export class LightDrawRenderCommandBufferData {\r\n    public static mMatrixFloatArrayForSend: Float32Array = null;\r\n    public static vMatrixFloatArrayForSend: Float32Array = null;\r\n    public static pMatrixFloatArrayForSend: Float32Array = null;\r\n    public static normalMatrixFloatArrayForSend: Float32Array = null;\r\n    public static cameraPositionForSend: Float32Array = null;\r\n}\r\n","import { getMatrix4DataSize } from \"../../../../utils/typeArrayUtils\";\r\n\r\nexport const initData = (BasicDrawRenderCommandBufferDataFromSystem: any) => {\r\n    var mat4Length = getMatrix4DataSize();\r\n\r\n    BasicDrawRenderCommandBufferDataFromSystem.mMatrixFloatArrayForSend = new Float32Array(mat4Length);\r\n    BasicDrawRenderCommandBufferDataFromSystem.vMatrixFloatArrayForSend = new Float32Array(mat4Length);\r\n    BasicDrawRenderCommandBufferDataFromSystem.pMatrixFloatArrayForSend = new Float32Array(mat4Length);\r\n}\r\n\r\nexport const buildRenderCommandUniformData = (mMatrices: Float32Array, vMatrices: Float32Array, pMatrices: Float32Array) => {\r\n    return {\r\n        mMatrix: mMatrices,\r\n        vMatrix: vMatrices,\r\n        pMatrix: pMatrices\r\n    }\r\n}\r\n","import { getMatrix3DataSize, getMatrix4DataSize, getVector3DataSize } from \"../../../../utils/typeArrayUtils\";\r\n\r\nexport const initData = (LightDrawRenderCommandBufferDataFromSystem: any) => {\r\n    var mat3Length = getMatrix3DataSize(),\r\n        mat4Length = getMatrix4DataSize(),\r\n        cameraPositionLength = getVector3DataSize();\r\n\r\n    LightDrawRenderCommandBufferDataFromSystem.mMatrixFloatArrayForSend = new Float32Array(mat4Length);\r\n    LightDrawRenderCommandBufferDataFromSystem.vMatrixFloatArrayForSend = new Float32Array(mat4Length);\r\n    LightDrawRenderCommandBufferDataFromSystem.pMatrixFloatArrayForSend = new Float32Array(mat4Length);\r\n    LightDrawRenderCommandBufferDataFromSystem.cameraPositionForSend = new Float32Array(cameraPositionLength);\r\n    LightDrawRenderCommandBufferDataFromSystem.normalMatrixFloatArrayForSend = new Float32Array(mat3Length);\r\n}\r\n\r\nexport const buildRenderCommandUniformData = (mMatrices: Float32Array, vMatrix: Float32Array, pMatrix: Float32Array, cameraPosition: Float32Array, normalMatrix: Float32Array) => {\r\n    return {\r\n        mMatrix: mMatrices,\r\n        vMatrix: vMatrix,\r\n        pMatrix: pMatrix,\r\n        cameraPosition: cameraPosition,\r\n        normalMatrix: normalMatrix\r\n    }\r\n}\r\n","import { IRenderConfig } from \"../../../../worker/both_file/data/render_config\";\r\nimport { setClearColor } from \"../../both_file/device/deviceManagerUtils\";\r\nimport { initData as initBasicDrawRenderCommandBufferData } from \"../../../draw/basic/basicDrawRenderCommandBufferUtils\";\r\nimport { initData as initLightDrawRenderCommandBufferData } from \"../../../draw/light/lightDrawRenderCommandBufferUtils\";\r\n\r\nexport const clearColor = (gl: WebGLRenderingContext, render_config: IRenderConfig, DeviceManagerDataFromSystem: any) => {\r\n    setClearColor(gl, render_config.clearColor, DeviceManagerDataFromSystem);\r\n}\r\n\r\nexport const initData = (BasicDrawRenderCommandBufferDataFromSystem: any, LightDrawRenderCommandBufferDataFromSystem: any) => {\r\n    initBasicDrawRenderCommandBufferData(BasicDrawRenderCommandBufferDataFromSystem);\r\n    initLightDrawRenderCommandBufferData(LightDrawRenderCommandBufferDataFromSystem);\r\n}\r\n","import curry from \"wonder-lodash/curry\";\r\nimport { Map } from \"immutable\";\r\nimport { IRenderConfig } from \"../worker/both_file/data/render_config\";\r\nimport { RenderCommandBufferForDrawData } from \"../utils/worker/render_file/type/dataType\";\r\nimport { getGL } from \"../device/DeviceManagerSystem\";\r\nimport { clearColor as clearColorUtils, initData as initDataUtils } from \"../utils/worker/render_file/draw/drawRenderCommandBufferUtils\";\r\n\r\nexport const clearColor = curry((state: Map<any, any>, render_config: IRenderConfig, DeviceManagerData: any, data: RenderCommandBufferForDrawData) => {\r\n    clearColorUtils(getGL(DeviceManagerData, state), render_config, DeviceManagerData);\r\n\r\n    return data;\r\n});\r\n\r\nexport const initData = initDataUtils;\r\n","import { GameObject } from \"../../../../core/entityObject/gameObject/GameObject\";\r\nimport { Map } from \"immutable\";\r\nimport {\r\n    getMaterial,\r\n} from \"../../../../core/entityObject/gameObject/GameObjectSystem\";\r\nimport { it, requireCheckFunc } from \"../../../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { ClassUtils } from \"../../../../utils/ClassUtils\";\r\nimport {\r\n    createRenderCommandBufferData as createRenderCommandBufferDataUtils,\r\n    initData as initDataUtils\r\n} from \"../../../utils/worker/logic_file/command_buffer/basicRenderComandBufferUtils\";\r\n\r\nexport const createRenderCommandBufferData = requireCheckFunc((state: Map<any, any>, GlobalTempData: any, GameObjectData: any, ThreeDTransformData: any, CameraControllerData: any, CameraData: any, MaterialData: any, GeometryData: any, SceneData: any, RenderCommandBufferData: any, renderGameObjectArray: Array<GameObject>) => {\r\n    it(\"renderGameObject should be basic material gameObject\", () => {\r\n        for (let gameObject of renderGameObjectArray) {\r\n            expect(ClassUtils.getClassNameByInstance(getMaterial(gameObject.uid, GameObjectData))).equal(\"BasicMaterial\")\r\n        }\r\n    })\r\n}, (state: Map<any, any>, GlobalTempData: any, GameObjectData: any, ThreeDTransformData: any, CameraControllerData: any, CameraData: any, MaterialData: any, GeometryData: any, SceneData: any, RenderCommandBufferData: any, renderGameObjectArray: Array<GameObject>) => {\r\n    return createRenderCommandBufferDataUtils(state, GlobalTempData, GameObjectData, ThreeDTransformData, CameraControllerData, CameraData, MaterialData, GeometryData, SceneData, RenderCommandBufferData, renderGameObjectArray, (count: number, buffer: any, materialIndices: Float32Array, geometryIndices: Float32Array, mMatrices: Float32Array, vMatrices: Float32Array, pMatrices: Float32Array) => {\r\n        return {\r\n            buffer: buffer,\r\n            count: count\r\n        }\r\n    });\r\n})\r\n\r\nexport const initData = initDataUtils;\r\n","import { GameObject } from \"../../../../core/entityObject/gameObject/GameObject\";\r\nimport curry from \"wonder-lodash/curry\";\r\nimport { Map } from \"immutable\";\r\nimport {\r\n    getMaterial\r\n} from \"../../../../core/entityObject/gameObject/GameObjectSystem\";\r\nimport { it, requireCheckFunc } from \"../../../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { ClassUtils } from \"../../../../utils/ClassUtils\";\r\nimport {\r\n    createRenderCommandBufferData as createRenderCommandBufferDataUtils,\r\n    initData as initDataUtils\r\n} from \"../../../utils/worker/logic_file/command_buffer/lightRenderComandBufferUtils\";\r\n\r\nexport const createRenderCommandBufferData = curry(requireCheckFunc((state: Map<any, any>, GlobalTempData: any, GameObjectData: any, ThreeDTransformData: any, CameraControllerData: any, CameraData: any, MaterialData: any, GeometryData: any, SceneData: any, RenderCommandBufferData: any, renderGameObjectArray: Array<GameObject>) => {\r\n    it(\"renderGameObject should be light material gameObject\", () => {\r\n        for (let gameObject of renderGameObjectArray) {\r\n            expect(ClassUtils.getClassNameByInstance(getMaterial(gameObject.uid, GameObjectData))).equal(\"LightMaterial\")\r\n        }\r\n    })\r\n}, (state: Map<any, any>, GlobalTempData: any, GameObjectData: any, ThreeDTransformData: any, CameraControllerData: any, CameraData: any, MaterialData: any, GeometryData: any, SceneData: any, RenderCommandBufferData: any, renderGameObjectArray: Array<GameObject>) => {\r\n    return createRenderCommandBufferDataUtils(state, GlobalTempData, GameObjectData, ThreeDTransformData, CameraControllerData, CameraData, MaterialData, GeometryData, SceneData, RenderCommandBufferData, renderGameObjectArray, (count: number, buffer: any, materialIndices: Float32Array, geometryIndices: Float32Array, mMatrices: Float32Array, vMatrices: Float32Array, pMatrices: Float32Array, cameraPositions: Float32Array, normalMatrices: Float32Array) => {\r\n        return {\r\n            buffer: buffer,\r\n            count: count\r\n        }\r\n    })\r\n}), 11)\r\n\r\nexport const initData = initDataUtils;\r\n","import { GameObject } from \"../../../../core/entityObject/gameObject/GameObject\";\r\nimport curry from \"wonder-lodash/curry\";\r\nimport { Map } from \"immutable\";\r\nimport {\r\n    createRenderCommandBufferData as createBasicRenderCommandBufferData,\r\n    initData as initBasicRenderCommandBufferSystemData\r\n} from \"./BasicRenderCommandBufferSystem\";\r\nimport {\r\n    createRenderCommandBufferData as createLightRenderCommandBufferData,\r\n    initData as initLightRenderCommandBufferSystemData\r\n} from \"./LightRenderCommandBufferSystem\";\r\nimport {\r\n    createRenderCommandBufferData as createRenderCommandBufferDataUtils,\r\n    initData as initDataUtils\r\n} from \"../../../utils/worker/logic_file/command_buffer/renderComandBufferUtils\";\r\n\r\nexport const createRenderCommandBufferData = curry((state: Map<any, any>, GlobalTempData: any, GameObjectData: any, ThreeDTransformData: any, CameraControllerData: any, CameraData: any, MaterialData: any, GeometryData: any, SceneData: any, BasicRenderCommandBufferData: any, LightRenderCommandBufferData: any, renderGameObjectArray: Array<GameObject>) => {\r\n    return createRenderCommandBufferDataUtils(state, createBasicRenderCommandBufferData, createLightRenderCommandBufferData, GlobalTempData, GameObjectData, ThreeDTransformData, CameraControllerData, CameraData, MaterialData, GeometryData, SceneData, BasicRenderCommandBufferData, LightRenderCommandBufferData, renderGameObjectArray);\r\n}, 12)\r\n\r\nexport const initData = initDataUtils;\r\n","//todo dispose gbuffer(textures...)\r\n\r\nexport const init = (gl: any, GBufferData: any) => {\r\n    //todo support pass emission color in gbuffer or not in\r\n\r\n    var gBuffer = gl.createFramebuffer();\r\n\r\n    gl.bindFramebuffer(gl.FRAMEBUFFER, gBuffer);\r\n\r\n    let positionTarget = _createPositionTarget(gl),\r\n        normalTarget = _createNormalTarget(gl),\r\n        colortarget = _createColorTarget(gl),\r\n        depthTexture = _createDepthTexture(gl);\r\n\r\n    gl.drawBuffers([\r\n        gl.COLOR_ATTACHMENT0,\r\n        gl.COLOR_ATTACHMENT1,\r\n        gl.COLOR_ATTACHMENT2\r\n    ]);\r\n\r\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n\r\n    GBufferData.gBuffer = gBuffer;\r\n    GBufferData.positionTarget = positionTarget;\r\n    GBufferData.normalTarget = normalTarget;\r\n    GBufferData.colorTarget = colortarget;\r\n    GBufferData.depthTexture = depthTexture;\r\n}\r\n\r\nconst _createPositionTarget =(gl: any) => {\r\n    var positionTarget = gl.createTexture();\r\n\r\n    gl.bindTexture(gl.TEXTURE_2D, positionTarget);\r\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n    //todo watch out gl.RGBA16F(vec4), gl.RG16F(vec2)!\r\n    gl.texStorage2D(gl.TEXTURE_2D, 1, gl.RGBA16F, gl.drawingBufferWidth, gl.drawingBufferHeight);\r\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, positionTarget, 0);\r\n\r\n    return positionTarget;\r\n}\r\n\r\nconst _createNormalTarget =(gl: any) => {\r\n    //todo use rbg16F?\r\n    // (should use EXT_color_buffer_half_float extension)\r\n    // refer to https://www.khronos.org/registry/webgl/extensions/EXT_color_buffer_float/\r\n    var normalTarget = gl.createTexture();\r\n\r\n    gl.bindTexture(gl.TEXTURE_2D, normalTarget);\r\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n    gl.texStorage2D(gl.TEXTURE_2D, 1, gl.RGBA16F, gl.drawingBufferWidth, gl.drawingBufferHeight);\r\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT1, gl.TEXTURE_2D, normalTarget, 0);\r\n\r\n    return normalTarget;\r\n}\r\n\r\nconst _createColorTarget =(gl: any) => {\r\n    var colorTarget = gl.createTexture();\r\n\r\n    gl.bindTexture(gl.TEXTURE_2D, colorTarget);\r\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n    gl.texStorage2D(gl.TEXTURE_2D, 1, gl.RGBA16F, gl.drawingBufferWidth, gl.drawingBufferHeight);\r\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT2, gl.TEXTURE_2D, colorTarget, 0);\r\n\r\n    return colorTarget;\r\n}\r\n\r\nconst _createDepthTexture =(gl: any) => {\r\n    var depthTexture = gl.createTexture();\r\n\r\n    gl.bindTexture(gl.TEXTURE_2D, depthTexture);\r\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n    gl.texStorage2D(gl.TEXTURE_2D, 1, gl.DEPTH_COMPONENT16, gl.drawingBufferWidth, gl.drawingBufferHeight);\r\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.TEXTURE_2D, depthTexture, 0);\r\n\r\n    return depthTexture;\r\n}\r\n\r\nexport const bindGBufferTargets = (gl: any, GBufferData: any) => {\r\n    gl.activeTexture(gl.TEXTURE0);\r\n    gl.bindTexture(gl.TEXTURE_2D, GBufferData.positionTarget);\r\n    gl.activeTexture(gl.TEXTURE1);\r\n    gl.bindTexture(gl.TEXTURE_2D, GBufferData.normalTarget);\r\n    gl.activeTexture(gl.TEXTURE2);\r\n    gl.bindTexture(gl.TEXTURE_2D, GBufferData.colorTarget);\r\n    gl.activeTexture(gl.TEXTURE3);\r\n}\r\n\r\nexport const sendGBufferTargetData = (gl: any, lightPassProgram: WebGLProgram) => {\r\n    var positionBufferLocation = gl.getUniformLocation(lightPassProgram, \"u_positionBuffer\"),\r\n        normalBufferLocation = gl.getUniformLocation(lightPassProgram, \"u_normalBuffer\"),\r\n        colorBufferLocation = gl.getUniformLocation(lightPassProgram, \"u_colorBuffer\");\r\n\r\n    gl.uniform1i(positionBufferLocation, 0);\r\n    gl.uniform1i(normalBufferLocation, 1);\r\n    gl.uniform1i(colorBufferLocation, 2);\r\n}\r\n\r\nexport const bindGBuffer = (gl: any, GBufferData: any) => {\r\n    gl.bindFramebuffer(gl.FRAMEBUFFER, GBufferData.gBuffer);\r\n}\r\n\r\nexport const unbindGBuffer = (gl: any) => {\r\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n}\r\n\r\nexport const getNewTextureUnitIndex = () => 3;\r\n","import { bindVao, createVao, unbindVao } from \"../../../../vao/vaoUtils\";\r\nimport {\r\n    createAndInitArrayBuffer,\r\n    createAndInitIndexBuffer\r\n} from \"../../../../../../../../utils/worker/render_file/shader/shaderUtils\";\r\nimport { getVaoConfig } from \"../../../../shader/glslSender/glslSenderUtils\";\r\nimport { it, requireCheckFunc } from \"../../../../../../../../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { createMap } from \"../../../../../../../../../utils/objectUtils\";\r\n\r\nexport const init = (gl: any, shaderIndex: number, GLSLSenderDataFromSystem: any, DeferLightPassDataFromSystem: any) => {\r\n    _setFullScreenQuadVaoData(gl, shaderIndex, GLSLSenderDataFromSystem, DeferLightPassDataFromSystem);\r\n}\r\n\r\nconst _setFullScreenQuadVaoData =requireCheckFunc((gl: any, shaderIndex: number, GLSLSenderDataFromSystem: any, DeferLightPassDataFromSystem: any) => {\r\n    it(\"positionLocation, texCoordLocation should be defined in vaoConfig data\", () => {\r\n        var vaoConfig = getVaoConfig(shaderIndex, GLSLSenderDataFromSystem);\r\n\r\n        expect(vaoConfig.positionLocation).be.a(\"number\");\r\n        expect(vaoConfig.texCoordLocation).be.a(\"number\");\r\n    });\r\n}, (gl: any, shaderIndex: number, GLSLSenderDataFromSystem: any, DeferLightPassDataFromSystem: any) => {\r\n    var fullScreenQuadVertexArray = createVao(gl),\r\n        fullScreenQuadData = _createFullScreenQuadData(),\r\n        {\r\n            positionLocation,\r\n            texCoordLocation\r\n        } = getVaoConfig(shaderIndex, GLSLSenderDataFromSystem);\r\n\r\n    bindVao(gl, fullScreenQuadVertexArray);\r\n\r\n    //todo create point light sphere for optimize(then no need to use scissor optimize)?\r\n    // var sphere = createSphere({\r\n    //     radius: 100\r\n    // });\r\n\r\n    createAndInitArrayBuffer(gl, fullScreenQuadData.positions, positionLocation, _getPositionSize());\r\n    createAndInitArrayBuffer(gl, fullScreenQuadData.texCoords, texCoordLocation, _getTexCoordSize());\r\n    createAndInitIndexBuffer(gl, fullScreenQuadData.indices);\r\n\r\n    unbindVao(gl);\r\n\r\n    DeferLightPassDataFromSystem.fullScreenQuadVertexArray = fullScreenQuadVertexArray;\r\n    DeferLightPassDataFromSystem.fullScreenQuadIndicesCount = fullScreenQuadData.indices.length;\r\n})\r\n\r\nconst _getPositionSize =() => 3;\r\n\r\nconst _getTexCoordSize =() => 2;\r\n\r\nconst _createFullScreenQuadData =() => {\r\n    var positions = new Float32Array([-1, 1, 0, -1, -1, 0, 1, -1, 0, 1, 1, 0]),\r\n        indices = new Uint16Array([0, 1, 2, 0, 2, 3]),\r\n        texCoords = new Float32Array([-1, 1, -1, -1, 1, -1, 1, 1]);\r\n\r\n    return {\r\n        positions: positions,\r\n        texCoords: texCoords,\r\n        indices: indices\r\n    }\r\n}\r\n\r\nexport const initData = (DeferAmbientLightPassDataFromSystem: any, DeferDirectionLightPassDataFromSystem: any, DeferPointLightPassDataFromSystem: any) => {\r\n    DeferPointLightPassDataFromSystem.scissorRegionArrayCacheMap = createMap();\r\n}\r\n","import { ensureFunc, it } from \"../../../../../../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { bindVao } from \"../../../../worker/render_file/shader/shaderUtils\";\r\n\r\nexport const sendAttributeData = (gl: any, ProgramDataFromSystem: any, {\r\n    fullScreenQuadVertexArray\r\n}) => {\r\n    bindVao(gl, fullScreenQuadVertexArray, ProgramDataFromSystem);\r\n}\r\n\r\nexport const drawFullScreenQuad = (gl: any, {\r\n    fullScreenQuadIndicesCount\r\n}) => {\r\n    gl.drawElements(gl.TRIANGLES, fullScreenQuadIndicesCount, gl.UNSIGNED_SHORT, 0);\r\n}\r\n\r\nexport const getScissorRegionArrayCache = ensureFunc((scissorRegionArray: Array<number>) => {\r\n    it(\"scissorRegionArray shouldn't be undefined\", () => {\r\n        expect(scissorRegionArray !== void 0).true;\r\n    });\r\n}, (pointLightIndex: number, DeferPointLightPassDataFromSystem: any) => DeferPointLightPassDataFromSystem.scissorRegionArrayCacheMap[pointLightIndex]);\r\n\r\nexport const setScissorRegionArrayCache = (pointLightIndex: number, DeferPointLightPassDataFromSystem: any, scissorRegionArrayCache: Array<number> | number) => DeferPointLightPassDataFromSystem.scissorRegionArrayCacheMap[pointLightIndex] = scissorRegionArrayCache;\r\n\r\n//todo dispose buffers\r\n\r\n","export enum EBlendEquation {\r\n    ADD = \"FUNC_ADD\",\r\n    SUBTRACT = \"FUNC_SUBTRACT\",\r\n    REVERSE_SUBTRAC = \"FUNC_REVERSE_SUBTRACT\"\r\n}\r\n","export enum EBlendFunc {\r\n    ZERO = \"ZEOR\",\r\n    ONE = \"ONE\",\r\n    SRC_COLOR = \"SRC_COLOR\",\r\n    ONE_MINUS_SRC_COLOR = \"ONE_MINUS_SRC_COLOR\",\r\n    DST_COLOR = \"DST_COLOR\",\r\n    ONE_MINUS_DST_COLOR = \"ONE_MINUS_DST_COLOR\",\r\n    SRC_ALPHA = \"SRC_ALPHA\",\r\n    SRC_ALPHA_SATURATE = \"SRC_ALPHA_SATURATE\",\r\n    ONE_MINUS_SRC_ALPHA = \"ONE_MINUS_SRC_ALPHA\",\r\n    DST_ALPHA = \"DST_ALPHA\",\r\n    ONE_MINUS_DST_ALPH = \"ONE_MINUS_DST_ALPHA\"\r\n}\r\n","import {\r\n    IWebGL2DrawDataMap,\r\n    IWebGL2SendUniformDataPointLightDataMap\r\n} from \"../../../worker/render_file/interface/IUtils\";\r\nimport { Map } from \"immutable\";\r\nimport { getViewport, setScissorTest } from \"../../../../../utils/worker/both_file/device/deviceManagerUtils\";\r\nimport {\r\n    drawFullScreenQuad,\r\n    getScissorRegionArrayCache, sendAttributeData,\r\n    setScissorRegionArrayCache\r\n} from \"../../../render/light/defer/light/deferLightPassUtils\";\r\nimport { getNoMaterialShaderIndex } from \"../../../worker/render_file/shader/shaderUtils\";\r\nimport { bindPointLightUboData } from \"../../../worker/render_file/ubo/uboManagerUtils\";\r\nimport { Vector4 } from \"../../../../../../math/Vector4\";\r\nimport { Vector2 } from \"../../../../../../math/Vector2\";\r\n\r\nexport const drawPointLightPass = (gl: any, state: Map<any, any>, use: Function, drawDataMap: IWebGL2DrawDataMap, pointLightData: IWebGL2SendUniformDataPointLightDataMap, pointLightCount: number, vMatrix: Float32Array, pMatrix: Float32Array, DeferPointLightPassDataFromSystem: any, ShaderDataFromSystem, ProgramDataFromSystem: any, LocationDataFromSystem: any, GLSLSenderDataFromSystem: any) => {\r\n    var {\r\n            x,\r\n        y,\r\n        width,\r\n        height\r\n        } = getViewport(state),\r\n        {\r\n            DeviceManagerDataFromSystem,\r\n            PointLightDataFromSystem\r\n        } = drawDataMap,\r\n        shaderIndex: number = null,\r\n        {\r\n            getPosition,\r\n\r\n            getColorArr3,\r\n            getIntensity,\r\n            getConstant,\r\n            getLinear,\r\n            getQuadratic,\r\n            computeRadius,\r\n\r\n            isPositionDirty,\r\n            isColorDirty,\r\n            isIntensityDirty,\r\n            isAttenuationDirty,\r\n\r\n            PointLightDataFromSystem\r\n        } = pointLightData,\r\n        position: Float32Array = null,\r\n        colorArr3: Array<number> = null,\r\n        intensity: number = null,\r\n        constant: number = null,\r\n        linear: number = null,\r\n        quadratic: number = null,\r\n        radius: number = null,\r\n        sc: Array<number> | number = null,\r\n        isScDirtyFlag: boolean = null;\r\n\r\n    _setState(gl, DeviceManagerDataFromSystem);\r\n\r\n    sendAttributeData(gl, ProgramDataFromSystem, DeferPointLightPassDataFromSystem);\r\n\r\n    shaderIndex = getNoMaterialShaderIndex(\"DeferPointLightPass\", ShaderDataFromSystem);\r\n\r\n    use(gl, shaderIndex, ProgramDataFromSystem, LocationDataFromSystem, GLSLSenderDataFromSystem);\r\n\r\n    for (let i = 0; i < pointLightCount; i++) {\r\n        let isIntensityDirtyFlag = isIntensityDirty(i, PointLightDataFromSystem),\r\n            isPositionDirtyFlag = isPositionDirty(i, PointLightDataFromSystem),\r\n            isColorDirtyFlag = isColorDirty(i, PointLightDataFromSystem),\r\n            isAttenuationDirtyFlag = isAttenuationDirty(i, PointLightDataFromSystem);\r\n\r\n        if (!isPositionDirtyFlag && !isColorDirtyFlag && !isAttenuationDirtyFlag) {\r\n            isScDirtyFlag = false;\r\n        }\r\n        else {\r\n            isScDirtyFlag = true;\r\n        }\r\n\r\n        if (!isScDirtyFlag) {\r\n            sc = getScissorRegionArrayCache(i, DeferPointLightPassDataFromSystem);\r\n        }\r\n        else {\r\n            position = getPosition(i, PointLightDataFromSystem);\r\n            colorArr3 = getColorArr3(i, PointLightDataFromSystem);\r\n            constant = getConstant(i, PointLightDataFromSystem);\r\n            linear = getLinear(i, PointLightDataFromSystem);\r\n            quadratic = getQuadratic(i, PointLightDataFromSystem);\r\n            radius = computeRadius(colorArr3, constant, linear, quadratic);\r\n\r\n            sc = _getScissorForLight(vMatrix, pMatrix, position, radius, width, height);\r\n\r\n            setScissorRegionArrayCache(i, DeferPointLightPassDataFromSystem, sc);\r\n        }\r\n\r\n        if (sc === _getNotInScreenVal()) {\r\n            continue;\r\n        }\r\n        else if (sc === _getFullScreenVal()) {\r\n            gl.scissor(x, y, width, height);\r\n        }\r\n        else {\r\n            gl.scissor(sc[0], sc[1], sc[2], sc[3]);\r\n        }\r\n\r\n        if (isIntensityDirtyFlag) {\r\n            intensity = getIntensity(i, PointLightDataFromSystem);\r\n        }\r\n\r\n        bindPointLightUboData(gl, i, pointLightData, _buildPointLightValueDataMap(position, colorArr3, intensity, constant, linear, quadratic, radius, isIntensityDirtyFlag, isScDirtyFlag), drawDataMap, GLSLSenderDataFromSystem);\r\n\r\n        drawFullScreenQuad(gl, DeferPointLightPassDataFromSystem);\r\n    }\r\n\r\n    _restoreState(gl, DeviceManagerDataFromSystem);\r\n}\r\n\r\nconst _setState =(gl: any, DeviceManagerDataFromSystem: any) => {\r\n    setScissorTest(gl, true, DeviceManagerDataFromSystem);\r\n\r\n}\r\n\r\nconst _restoreState =(gl: any, DeviceManagerDataFromSystem: any) => {\r\n    setScissorTest(gl, false, DeviceManagerDataFromSystem);\r\n}\r\n\r\nconst _getFullScreenVal =() => 1;\r\n\r\nconst _getNotInScreenVal =() => 2;\r\n\r\nconst _getBoxMinPointInScreenCoordinate =(lightPosition: Vector4, vMatrix: Float32Array, pMatrix: Float32Array, radius: number) => {\r\n    lightPosition.applyMatrix4(vMatrix, true);\r\n    lightPosition.x -= radius;\r\n    lightPosition.y -= radius;\r\n    lightPosition.z += radius;\r\n    lightPosition.applyMatrix4(pMatrix, true);\r\n    lightPosition.divideScalar(lightPosition.w);\r\n\r\n    return lightPosition;\r\n}\r\n\r\nconst _getBoxMaxPointInScreenCoordinate =(lightPosition: Vector4, vMatrix: Float32Array, pMatrix: Float32Array, radius: number) => {\r\n    lightPosition.applyMatrix4(vMatrix, true);\r\n    lightPosition.x += radius;\r\n    lightPosition.y += radius;\r\n    lightPosition.z += radius;\r\n    lightPosition.applyMatrix4(pMatrix, true);\r\n    lightPosition.divideScalar(lightPosition.w);\r\n\r\n    return lightPosition;\r\n}\r\n\r\nconst _getScissorForLight =(vMatrix: Float32Array, pMatrix: Float32Array, position: Float32Array, radius: number, width: number, height: number) => {\r\n    var a = Vector4.create(position[0], position[1], position[2], 1),\r\n        b = Vector4.create(position[0], position[1], position[2], 1),\r\n        minpt: Vector2 = null,\r\n        maxpt: Vector2 = null,\r\n        ret: Array<number> = [];\r\n    //todo optimize: use tiled-defer shading\r\n\r\n    a = _getBoxMinPointInScreenCoordinate(a, vMatrix, pMatrix, radius);\r\n    b = _getBoxMaxPointInScreenCoordinate(b, vMatrix, pMatrix, radius);\r\n\r\n    if (a.x > 1 && a.y > 1 && b.x < -1 && b.y < -1) {\r\n        return _getFullScreenVal();\r\n    }\r\n\r\n    minpt = Vector2.create(a.x, a.y);\r\n    maxpt = Vector2.create(b.x, b.y);\r\n\r\n    minpt.addScalar(1.0);\r\n    minpt.multiplyScalar(0.5);\r\n\r\n    maxpt.addScalar(1.0);\r\n    maxpt.multiplyScalar(0.5);\r\n\r\n    let x = minpt.x,\r\n        y = minpt.y,\r\n        ptWidth = maxpt.x - x,\r\n        ptHeight = maxpt.y - y;\r\n\r\n    if (ptWidth < 0 || ptHeight < 0 || (x + ptWidth) < 0 || (y + ptHeight) < 0) {\r\n        return _getNotInScreenVal();\r\n\r\n    }\r\n\r\n    ret[0] = Math.round(width * x);\r\n    ret[1] = Math.round(height * y);\r\n    ret[2] = Math.round(width * ptWidth);\r\n    ret[3] = Math.round(height * ptHeight);\r\n\r\n    return ret;\r\n};\r\n\r\nconst _buildPointLightValueDataMap =(position: Float32Array, colorArr3: Array<number>, intensity: number, constant: number, linear: number, quadratic: number, radius: number, isIntensityDirty: boolean, isOtherValueDirty: boolean) => {\r\n    return {\r\n        position: position,\r\n        colorArr3: colorArr3,\r\n        intensity: intensity,\r\n        constant: constant,\r\n        linear: linear,\r\n        quadratic: quadratic,\r\n        radius: radius,\r\n\r\n        isIntensityDirty: isIntensityDirty,\r\n        isOtherValueDirty: isOtherValueDirty\r\n    }\r\n}\r\n","import { Map } from \"immutable\";\r\nimport { IRenderConfig } from \"../../../../../worker/both_file/data/render_config\";\r\nimport { InitShaderDataMap } from \"../../../../../type/utilsType\";\r\nimport { getNoMaterialShaderIndex } from \"../../../worker/render_file/shader/shaderUtils\";\r\nimport { unbindVao } from \"../../../worker/render_file/vao/vaoUtils\";\r\nimport {\r\n    drawFullScreenQuad, getScissorRegionArrayCache,\r\n    sendAttributeData, setScissorRegionArrayCache\r\n} from \"../../../render/light/defer/light/deferLightPassUtils\";\r\nimport {\r\n    getViewport, setBlend, setBlendEquation, setBlendFunc, setDepthTest,\r\n    setDepthWrite, setScissorTest\r\n} from \"../../../../../utils/worker/both_file/device/deviceManagerUtils\";\r\nimport { bindDirectionLightUboData, bindPointLightUboData, bindAmbientLightUboData } from \"../../../worker/render_file/ubo/uboManagerUtils\";\r\nimport {\r\n    IWebGL2DrawDataMap, IWebGL2LightSendUniformDataDataMap, IWebGL2SendUniformDataAmbientLightDataMap,\r\n    IWebGL2SendUniformDataDirectionLightDataMap\r\n} from \"../../../worker/render_file/interface/IUtils\";\r\nimport { Vector4 } from \"../../../../../../math/Vector4\";\r\nimport { Vector2 } from \"../../../../../../math/Vector2\";\r\nimport { IWebGL2SendUniformDataPointLightDataMap } from \"../../../worker/render_file/interface/IUtils\";\r\nimport { EBlendEquation } from \"../../../../../enum/EBlendEquation\";\r\nimport { EBlendFunc } from \"../../../../../enum/EBlendFunc\";\r\nimport { drawPointLightPass } from \"./pointLightPassDrawUtils\";\r\n\r\nexport const drawLightPass = (gl: any, render_config: IRenderConfig, {\r\n    use,\r\n    unbindGBuffer\r\n}, drawDataMap: IWebGL2DrawDataMap, {\r\n                                DeferAmbientLightPassDataFromSystem,\r\n        DeferDirectionLightPassDataFromSystem,\r\n        DeferPointLightPassDataFromSystem\r\n                            }, initShaderDataMap: InitShaderDataMap, sendDataMap: IWebGL2LightSendUniformDataDataMap, vMatrix: Float32Array, pMatrix: Float32Array, state: Map<any, any>) => {\r\n    var {\r\n            ShaderDataFromSystem\r\n        } = initShaderDataMap,\r\n        {\r\n            DeviceManagerDataFromSystem,\r\n\r\n            AmbientLightDataFromSystem,\r\n            DirectionLightDataFromSystem,\r\n            PointLightDataFromSystem,\r\n\r\n            ProgramDataFromSystem,\r\n            LocationDataFromSystem,\r\n            GLSLSenderDataFromSystem\r\n        } = drawDataMap,\r\n        ambientLightCount = AmbientLightDataFromSystem.count,\r\n        directionLightCount = DirectionLightDataFromSystem.count,\r\n        pointLightCount = PointLightDataFromSystem.count;\r\n\r\n    unbindGBuffer(gl);\r\n\r\n    setDepthWrite(gl, false, DeviceManagerDataFromSystem);\r\n    setDepthTest(gl, false, DeviceManagerDataFromSystem);\r\n    setBlend(gl, true, DeviceManagerDataFromSystem);\r\n    setBlendEquation(gl, EBlendEquation.ADD, DeviceManagerDataFromSystem);\r\n    setBlendFunc(gl, EBlendFunc.ONE, EBlendFunc.ONE, DeviceManagerDataFromSystem);\r\n\r\n    if (_hasLight(ambientLightCount)) {\r\n        _drawAmbientLightPass(gl, use, drawDataMap, sendDataMap.ambientLightData, ambientLightCount, DeferAmbientLightPassDataFromSystem, ShaderDataFromSystem, ProgramDataFromSystem, LocationDataFromSystem, GLSLSenderDataFromSystem);\r\n    }\r\n\r\n    if (_hasLight(directionLightCount)) {\r\n        _drawDirectionLightPass(gl, use, drawDataMap, sendDataMap.directionLightData, directionLightCount, DeferDirectionLightPassDataFromSystem, ShaderDataFromSystem, ProgramDataFromSystem, LocationDataFromSystem, GLSLSenderDataFromSystem);\r\n    }\r\n\r\n    if (_hasLight(pointLightCount)) {\r\n        drawPointLightPass(gl, state, use, drawDataMap, sendDataMap.pointLightData, pointLightCount, vMatrix, pMatrix, DeferPointLightPassDataFromSystem, ShaderDataFromSystem, ProgramDataFromSystem, LocationDataFromSystem, GLSLSenderDataFromSystem);\r\n    }\r\n\r\n    unbindVao(gl);\r\n}\r\n\r\nconst _hasLight =(count: number) => count > 0;\r\n\r\nconst _drawAmbientLightPass =(gl: any, use: Function, drawDataMap: IWebGL2DrawDataMap, ambientLightData: IWebGL2SendUniformDataAmbientLightDataMap, ambientLightCount: number, DeferAmbientLightPassDataFromSystem: any, ShaderDataFromSystem, ProgramDataFromSystem: any, LocationDataFromSystem: any, GLSLSenderDataFromSystem: any) => {\r\n    var shaderIndex: number = null;\r\n\r\n    sendAttributeData(gl, ProgramDataFromSystem, DeferAmbientLightPassDataFromSystem);\r\n\r\n    shaderIndex = getNoMaterialShaderIndex(\"DeferAmbientLightPass\", ShaderDataFromSystem);\r\n\r\n    use(gl, shaderIndex, ProgramDataFromSystem, LocationDataFromSystem, GLSLSenderDataFromSystem);\r\n\r\n    let {\r\n        getColorArr3,\r\n\r\n        isColorDirty,\r\n\r\n        AmbientLightDataFromSystem\r\n    } = ambientLightData;\r\n\r\n    for (let i = 0; i < ambientLightCount; i++) {\r\n        let colorArr3: Array<number> = null,\r\n            isColorDirtyFlag = isColorDirty(i, AmbientLightDataFromSystem);\r\n\r\n        if (isColorDirtyFlag) {\r\n            colorArr3 = getColorArr3(i, AmbientLightDataFromSystem);\r\n        }\r\n\r\n        bindAmbientLightUboData(gl, i, ambientLightData, _buildAmbientLightValueDataMap(colorArr3, isColorDirtyFlag), drawDataMap, GLSLSenderDataFromSystem);\r\n\r\n        drawFullScreenQuad(gl, DeferAmbientLightPassDataFromSystem);\r\n    }\r\n}\r\n\r\nconst _buildAmbientLightValueDataMap =(colorArr3: Array<number>, isColorDirty: boolean) => {\r\n    return {\r\n        colorArr3: colorArr3,\r\n\r\n        isColorDirty: isColorDirty\r\n    }\r\n}\r\n\r\nconst _drawDirectionLightPass =(gl: any, use: Function, drawDataMap: IWebGL2DrawDataMap, directionLightData: IWebGL2SendUniformDataDirectionLightDataMap, directionLightCount: number, DeferDirectionLightPassDataFromSystem: any, ShaderDataFromSystem, ProgramDataFromSystem: any, LocationDataFromSystem: any, GLSLSenderDataFromSystem: any) => {\r\n    var shaderIndex: number = null;\r\n\r\n    sendAttributeData(gl, ProgramDataFromSystem, DeferDirectionLightPassDataFromSystem);\r\n\r\n    shaderIndex = getNoMaterialShaderIndex(\"DeferDirectionLightPass\", ShaderDataFromSystem);\r\n\r\n    use(gl, shaderIndex, ProgramDataFromSystem, LocationDataFromSystem, GLSLSenderDataFromSystem);\r\n\r\n    let {\r\n        getPosition,\r\n\r\n        getColorArr3,\r\n        getIntensity,\r\n\r\n        isPositionDirty,\r\n        isColorDirty,\r\n        isIntensityDirty,\r\n\r\n        DirectionLightDataFromSystem\r\n    } = directionLightData;\r\n\r\n    for (let i = 0; i < directionLightCount; i++) {\r\n        let position: Float32Array = null,\r\n            colorArr3: Array<number> = null,\r\n            intensity: number = null,\r\n            isIntensityDirtyFlag = isIntensityDirty(i, DirectionLightDataFromSystem),\r\n            isPositionDirtyFlag = isPositionDirty(i, DirectionLightDataFromSystem),\r\n            isColorDirtyFlag = isColorDirty(i, DirectionLightDataFromSystem);\r\n\r\n        if (isPositionDirtyFlag) {\r\n            position = getPosition(i, DirectionLightDataFromSystem);\r\n        }\r\n\r\n        if (isColorDirtyFlag) {\r\n            colorArr3 = getColorArr3(i, DirectionLightDataFromSystem);\r\n        }\r\n\r\n        if (isIntensityDirtyFlag) {\r\n            intensity = getIntensity(i, DirectionLightDataFromSystem);\r\n        }\r\n\r\n        bindDirectionLightUboData(gl, i, directionLightData, _buildDirectionLightValueDataMap(position, colorArr3, intensity, isPositionDirtyFlag, isColorDirtyFlag, isIntensityDirtyFlag), drawDataMap, GLSLSenderDataFromSystem);\r\n\r\n        drawFullScreenQuad(gl, DeferDirectionLightPassDataFromSystem);\r\n    }\r\n}\r\n\r\nconst _buildDirectionLightValueDataMap =(position: Float32Array, colorArr3: Array<number>, intensity: number, isPositionDirty: boolean, isColorDirty: boolean, isIntensityDirty: boolean) => {\r\n    return {\r\n        position: position,\r\n        colorArr3: colorArr3,\r\n        intensity: intensity,\r\n\r\n        isPositionDirty: isPositionDirty,\r\n        isColorDirty: isColorDirty,\r\n        isIntensityDirty: isIntensityDirty\r\n    }\r\n}\r\n","import { EDrawMode } from \"../../enum/EDrawMode\";\r\n\r\nexport const updateSendMatrixFloat32ArrayData = (sourceMatrices: Float32Array, matStartIndex: number, matEndIndex: number, targetMatrices: Float32Array) => {\r\n    for (let i = matStartIndex; i < matEndIndex; i++) {\r\n        targetMatrices[i - matStartIndex] = sourceMatrices[i];\r\n    }\r\n\r\n    return targetMatrices;\r\n}\r\n\r\nexport const drawElements = (gl: WebGLRenderingContext, geometryIndex: number, drawMode: EDrawMode, getIndicesCount: Function, getIndexType: Function, getIndexTypeSize: Function, GeometryDataFromSystem: any) => {\r\n    var startOffset: number = 0,\r\n        count = getIndicesCount(geometryIndex, GeometryDataFromSystem),\r\n        type = getIndexType(GeometryDataFromSystem),\r\n        typeSize = getIndexTypeSize(GeometryDataFromSystem);\r\n\r\n    gl.drawElements(gl[drawMode], count, gl[type], typeSize * startOffset);\r\n}\r\n\r\nexport const drawArray = (gl: WebGLRenderingContext, geometryIndex: number, drawMode: EDrawMode, getVerticesCount: Function, GeometryDataFromSystem: any) => {\r\n    var startOffset: number = 0,\r\n        count = getVerticesCount(geometryIndex, GeometryDataFromSystem);\r\n\r\n    gl.drawArrays(gl[drawMode], startOffset, count);\r\n}\r\n","import {\r\n    drawArray, drawElements,\r\n    updateSendMatrixFloat32ArrayData\r\n} from \"../../../../../utils/draw/drawRenderCommandBufferUtils\";\r\nimport { sendData } from \"../../../../../utils/worker/render_file/texture/mapManagerUtils\";\r\nimport { EDrawMode } from \"../../../../../enum/EDrawMode\";\r\nimport { IMaterialConfig } from \"../../../../../data/material_config_interface\";\r\nimport { Map } from \"immutable\";\r\nimport { IShaderLibGenerator } from \"../../../../../data/shaderLib_generator_interface\";\r\nimport { InitShaderDataMap } from \"../../../../../type/utilsType\";\r\nimport { BasicRenderUniformData, LightRenderUniformData } from \"../../../../../type/dataType\";\r\nimport { IWebGL2DrawFuncDataMap } from \"../../../../interface/IDraw\";\r\nimport {\r\n    IWebGL2BasicSendUniformDataDataMap, IWebGL2DrawDataMap,\r\n    IWebGL2LightSendUniformDataDataMap\r\n} from \"../interface/IUtils\";\r\n\r\nexport const drawGameObjects = (gl: any, state: Map<any, any>, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, DataBufferConfig: any, definedStartTextureUnitIndex: number, useShaderName: string, initMaterialShader: Function, drawFuncDataMap: IWebGL2DrawFuncDataMap, drawDataMap: IWebGL2DrawDataMap, initShaderDataMap: InitShaderDataMap, sendDataMap: IWebGL2BasicSendUniformDataDataMap | IWebGL2LightSendUniformDataDataMap, renderCommandUniformData: BasicRenderUniformData | LightRenderUniformData, {\r\n    renderCommandBufferData: {\r\n        mMatrices,\r\n    materialIndices,\r\n    geometryIndices\r\n    },\r\n    count\r\n}) => {\r\n    var {\r\n            TextureDataFromSystem,\r\n            TextureCacheDataFromSystem,\r\n            MapManagerDataFromSystem,\r\n            ProgramDataFromSystem,\r\n            LocationDataFromSystem,\r\n            GLSLSenderDataFromSystem,\r\n            GeometryDataFromSystem\r\n        } = drawDataMap,\r\n        {\r\n            sendAttributeData,\r\n            sendUniformData,\r\n            directlySendUniformData,\r\n            use,\r\n            hasIndices,\r\n            getIndicesCount,\r\n            getIndexType,\r\n            getIndexTypeSize,\r\n            getVerticesCount,\r\n            getMapCount,\r\n            getStartTextureIndex,\r\n            bindAndUpdate,\r\n            useShader\r\n        } = drawFuncDataMap,\r\n        {\r\n            GPUDetectDataFromSystem,\r\n            VaoDataFromSystem\r\n        } = initShaderDataMap,\r\n        mMatrixFloatArrayForSend = renderCommandUniformData.mMatrix,\r\n        program: WebGLProgram = null;\r\n\r\n    for (let i = 0; i < count; i++) {\r\n        let matStartIndex = 16 * i,\r\n            matEndIndex = matStartIndex + 16,\r\n            geometryIndex = geometryIndices[i],\r\n            materialIndex = materialIndices[i],\r\n            mapCount = getMapCount(materialIndex, MapManagerDataFromSystem),\r\n            startTextureUnitIndex = getStartTextureIndex(materialIndex),\r\n            drawMode = EDrawMode.TRIANGLES;\r\n\r\n        let shaderIndex = useShader(materialIndex, useShaderName, state, material_config, shaderLib_generator, initMaterialShader, initShaderDataMap);\r\n\r\n        program = use(gl, shaderIndex, ProgramDataFromSystem, LocationDataFromSystem, GLSLSenderDataFromSystem);\r\n\r\n        sendAttributeData(gl, shaderIndex, geometryIndex, ProgramDataFromSystem, GLSLSenderDataFromSystem, GeometryDataFromSystem, VaoDataFromSystem);\r\n\r\n        updateSendMatrixFloat32ArrayData(mMatrices, matStartIndex, matEndIndex, mMatrixFloatArrayForSend);\r\n\r\n        let uniformLocationMap = LocationDataFromSystem.uniformLocationMap[shaderIndex],\r\n            uniformCacheMap = GLSLSenderDataFromSystem.uniformCacheMap;\r\n\r\n        sendUniformData(gl, materialIndex, shaderIndex, program, drawDataMap, renderCommandUniformData, sendDataMap, uniformLocationMap, uniformCacheMap);\r\n\r\n        bindAndUpdate(gl, mapCount, startTextureUnitIndex, definedStartTextureUnitIndex, TextureCacheDataFromSystem, TextureDataFromSystem, MapManagerDataFromSystem, GPUDetectDataFromSystem);\r\n\r\n        sendData(gl, mapCount, startTextureUnitIndex, definedStartTextureUnitIndex, shaderIndex, program, sendDataMap.glslSenderData, uniformLocationMap, uniformCacheMap, directlySendUniformData, TextureDataFromSystem, MapManagerDataFromSystem);\r\n\r\n        if (hasIndices(geometryIndex, GeometryDataFromSystem)) {\r\n            drawElements(gl, geometryIndex, drawMode, getIndicesCount, getIndexType, getIndexTypeSize, GeometryDataFromSystem);\r\n        }\r\n        else {\r\n            drawArray(gl, geometryIndex, drawMode, getVerticesCount, GeometryDataFromSystem);\r\n        }\r\n    }\r\n}\r\n","import { IMaterialConfig } from \"../../../../../data/material_config_interface\";\r\nimport { Map } from \"immutable\";\r\nimport { IShaderLibGenerator } from \"../../../../../data/shaderLib_generator_interface\";\r\nimport { IWebGL2DeferDrawFuncDataMap } from \"../../../../interface/IDraw\";\r\nimport { IWebGL2DrawDataMap, IWebGL2LightSendUniformDataDataMap } from \"../../../worker/render_file/interface/IUtils\";\r\nimport { InitShaderDataMap } from \"../../../../../type/utilsType\";\r\nimport { LightRenderUniformData } from \"../../../../../type/dataType\";\r\nimport { LightRenderCommandBufferForDrawData } from \"../../../../../utils/worker/render_file/type/dataType\";\r\nimport {\r\n    clear, setBlend, setDepthTest,\r\n    setDepthWrite\r\n} from \"../../../../../utils/worker/both_file/device/deviceManagerUtils\";\r\nimport { drawGameObjects } from \"../../../worker/render_file/draw/drawRenderCommandBufferUtils\";\r\nimport { getNewTextureUnitIndex } from \"../../../worker/render_file/render/light/defer/gbuffer/gBufferUtils\";\r\n\r\nexport const drawGBufferPass = (gl: any, state: Map<any, any>, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, DataBufferConfig: any, initMaterialShader: Function, drawFuncDataMap: IWebGL2DeferDrawFuncDataMap, drawDataMap: IWebGL2DrawDataMap, {\r\n    GBufferDataFromSystem\r\n}, initShaderDataMap: InitShaderDataMap, sendDataMap: IWebGL2LightSendUniformDataDataMap, renderCommandUniformData: LightRenderUniformData, bufferData: LightRenderCommandBufferForDrawData) => {\r\n    var {\r\n        DeviceManagerDataFromSystem\r\n    } = drawDataMap;\r\n\r\n    setDepthWrite(gl, true, DeviceManagerDataFromSystem);\r\n\r\n    drawFuncDataMap.bindGBuffer(gl, GBufferDataFromSystem);\r\n\r\n    clear(gl, drawDataMap.DeviceManagerDataFromSystem);\r\n\r\n    setDepthTest(gl, true, DeviceManagerDataFromSystem);\r\n    setBlend(gl, false, DeviceManagerDataFromSystem);\r\n\r\n    drawGameObjects(gl, state, material_config, shaderLib_generator, DataBufferConfig, getNewTextureUnitIndex(), \"GBuffer\", initMaterialShader, drawFuncDataMap, drawDataMap, initShaderDataMap, sendDataMap, renderCommandUniformData, bufferData);\r\n}\r\n","import { Map } from \"immutable\";\r\nimport { IRenderConfig } from \"../../../../../worker/both_file/data/render_config\";\r\nimport { IMaterialConfig } from \"../../../../../data/material_config_interface\";\r\nimport { IShaderLibGenerator } from \"../../../../../data/shaderLib_generator_interface\";\r\nimport { InitShaderDataMap } from \"../../../../../type/utilsType\";\r\nimport { IWebGL2DeferDrawFuncDataMap } from \"../../../../interface/IDraw\";\r\nimport { buildRenderCommandUniformData } from \"../../../../../utils/draw/light/lightDrawRenderCommandBufferUtils\";\r\nimport { LightRenderCommandBufferForDrawData } from \"../../../../../utils/worker/render_file/type/dataType\";\r\nimport { IWebGL2DrawDataMap, IWebGL2LightSendUniformDataDataMap } from \"../../../worker/render_file/interface/IUtils\";\r\nimport { drawLightPass } from \"./lightPassDrawUtils\";\r\nimport { drawGBufferPass } from \"./gBufferPassDrawUtils\";\r\nimport { DeferDrawDataMap } from \"../../../worker/render_file/type/utilsType\";\r\n\r\nexport const draw = (gl: any, state: Map<any, any>, render_config: IRenderConfig, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, DataBufferConfig: any, initMaterialShader: Function, drawFuncDataMap: IWebGL2DeferDrawFuncDataMap, drawDataMap: IWebGL2DrawDataMap, deferDrawDataMap: DeferDrawDataMap, sendDataMap: IWebGL2LightSendUniformDataDataMap, initShaderDataMap: InitShaderDataMap, bufferData: LightRenderCommandBufferForDrawData, {\r\n    vMatrix,\r\n    pMatrix,\r\n    cameraPosition,\r\n    normalMatrix\r\n}) => {\r\n    var {\r\n            LightDrawRenderCommandBufferDataFromSystem\r\n        } = drawDataMap,\r\n        {\r\n            mMatrixFloatArrayForSend\r\n        } = LightDrawRenderCommandBufferDataFromSystem;\r\n\r\n    drawGBufferPass(gl, state, material_config, shaderLib_generator, DataBufferConfig, initMaterialShader, drawFuncDataMap, drawDataMap, deferDrawDataMap, initShaderDataMap, sendDataMap, buildRenderCommandUniformData(mMatrixFloatArrayForSend, vMatrix, pMatrix, cameraPosition, normalMatrix), bufferData);\r\n    drawLightPass(gl, render_config, drawFuncDataMap, drawDataMap, deferDrawDataMap, initShaderDataMap, sendDataMap, vMatrix, pMatrix, state);\r\n};\r\n\r\n","import { Map } from \"immutable\";\r\nimport { bindGBufferTargets, init as initGBuffer, sendGBufferTargetData } from \"./gbuffer/gBufferUtils\";\r\nimport { init as initDeferLightPass } from \"./light/deferLightPassUtils\";\r\nimport { use } from \"../../../../../../../utils/worker/render_file/shader/shaderUtils\";\r\nimport { IMaterialConfig } from \"../../../../../../../data/material_config_interface\";\r\nimport { IShaderLibGenerator } from \"../../../../../../../data/shaderLib_generator_interface\";\r\nimport { InitShaderDataMap } from \"../../../../../../../type/utilsType\";\r\nimport {\r\n    LightRenderCommandBufferForDrawData\r\n} from \"../../../../../../../utils/worker/render_file/type/dataType\";\r\nimport { IRenderConfig } from \"../../../../../../../worker/both_file/data/render_config\";\r\nimport { getNoMaterialShaderIndex } from \"../../../shader/shaderUtils\";\r\nimport { IWebGL2DeferDrawFuncDataMap } from \"../../../../../../interface/IDraw\";\r\nimport { draw as deferDraw } from \"../../../../../draw/light/defer/deferDrawRenderCommandBufferUtils\";\r\nimport { CameraRenderCommandBufferForDrawData } from \"../../../../../../../utils/worker/render_file/type/dataType\";\r\nimport { IWebGL2DrawDataMap, IWebGL2LightSendUniformDataDataMap } from \"../../../interface/IUtils\";\r\nimport { DeferDrawDataMap } from \"../../../type/utilsType\";\r\n\r\nexport const init = (gl: any, DataBufferConfig: any, GBufferDataFromSystem: any, DeferAmbientLightPassDataFromSystem: any, DeferDirectionLightPassDataFromSystem: any, DeferPointLightPassDataFromSystem: any, ShaderDataFromSystem: any, ProgramDataFromSystem, LocationDataFromSystem, GLSLSenderDataFromSystem) => {\r\n    initGBuffer(gl, GBufferDataFromSystem);\r\n\r\n    //todo refactor: when switch to defer shading, bind and send gbuffer textures\r\n\r\n    bindGBufferTargets(gl, GBufferDataFromSystem);\r\n\r\n    _initDeferLightPass(gl, \"DeferAmbientLightPass\", ShaderDataFromSystem, GLSLSenderDataFromSystem, ProgramDataFromSystem, LocationDataFromSystem, DeferAmbientLightPassDataFromSystem);\r\n    _initDeferLightPass(gl, \"DeferDirectionLightPass\", ShaderDataFromSystem, GLSLSenderDataFromSystem, ProgramDataFromSystem, LocationDataFromSystem, DeferDirectionLightPassDataFromSystem);\r\n    _initDeferLightPass(gl, \"DeferPointLightPass\", ShaderDataFromSystem, GLSLSenderDataFromSystem, ProgramDataFromSystem, LocationDataFromSystem, DeferPointLightPassDataFromSystem);\r\n}\r\n\r\nconst _initDeferLightPass =(gl: any, shaderName: string, ShaderDataFromSystem: any, GLSLSenderDataFromSystem: any, ProgramDataFromSystem: any, LocationDataFromSystem: any, DeferLightPassDataFromSystem: any) => {\r\n    var program: WebGLProgram = null,\r\n        shaderIndex: number = null;\r\n\r\n    shaderIndex = getNoMaterialShaderIndex(shaderName, ShaderDataFromSystem);\r\n\r\n    initDeferLightPass(gl, shaderIndex, GLSLSenderDataFromSystem, DeferLightPassDataFromSystem);\r\n\r\n    program = use(gl, shaderIndex, ProgramDataFromSystem, LocationDataFromSystem, GLSLSenderDataFromSystem);\r\n\r\n    sendGBufferTargetData(gl, program);\r\n}\r\n\r\nexport const render = (gl: any, state: Map<any, any>, render_config: IRenderConfig, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, DataBufferConfig: any, initMaterialShader: Function, drawFuncDataMap: IWebGL2DeferDrawFuncDataMap, drawDataMap: IWebGL2DrawDataMap, deferDrawDataMap: DeferDrawDataMap, sendDataMap: IWebGL2LightSendUniformDataDataMap, initShaderDataMap: InitShaderDataMap, bufferData: LightRenderCommandBufferForDrawData, cameraData: CameraRenderCommandBufferForDrawData) => {\r\n    deferDraw(gl, state, render_config, material_config, shaderLib_generator, DataBufferConfig, initMaterialShader, drawFuncDataMap, drawDataMap, deferDrawDataMap, sendDataMap, initShaderDataMap, bufferData, cameraData);\r\n}\r\n\r\nexport const buildSendUniformDataDataMap = (\r\n    sendFloat1, sendFloat3, sendMatrix4, sendVector3, sendInt, sendMatrix3,\r\n    getAmbientLightColorArr3, isAmbientLightColorDirty, cleanAmbientLightColorDirty,\r\n    getDirectionLightPosition, getDirectionLightColorArr3, getDirectionLightIntensity, isDirectionLightPositionDirty, isDirectionLightColorDirty, isDirectionLightIntensityDirty, cleanDirectionLightPositionDirty, cleanDirectionLightColorDirty, cleanDirectionLightIntensityDirty,\r\n    getPointLightPosition, getPointLightColorArr3, getConstant, getPointLightIntensity, getLinear, getQuadratic, getRange, computeRadius,\r\n    isPositionDirty, isColorDirty, isIntensityDirty, isAttenuationDirty, cleanPositionDirty, cleanColorDirty, cleanIntensityDirty, cleanAttenuationDirty,\r\n    drawDataMap: IWebGL2DrawDataMap) => {\r\n    return {\r\n        glslSenderData: {\r\n            sendMatrix3: sendMatrix3,\r\n            sendMatrix4: sendMatrix4,\r\n            sendVector3: sendVector3,\r\n            sendInt: sendInt,\r\n            sendFloat1: sendFloat1,\r\n            sendFloat3: sendFloat3,\r\n\r\n            GLSLSenderDataFromSystem: drawDataMap.GLSLSenderDataFromSystem\r\n        },\r\n        ambientLightData: {\r\n            getColorArr3: getAmbientLightColorArr3,\r\n\r\n            isColorDirty: isAmbientLightColorDirty,\r\n\r\n            cleanColorDirty: cleanAmbientLightColorDirty,\r\n\r\n            AmbientLightDataFromSystem: drawDataMap.AmbientLightDataFromSystem\r\n        },\r\n        directionLightData: {\r\n            getPosition: getDirectionLightPosition,\r\n            getColorArr3: getDirectionLightColorArr3,\r\n            getIntensity: getDirectionLightIntensity,\r\n\r\n            isPositionDirty: isDirectionLightPositionDirty,\r\n            isColorDirty: isDirectionLightColorDirty,\r\n            isIntensityDirty: isDirectionLightIntensityDirty,\r\n            cleanPositionDirty: cleanDirectionLightPositionDirty,\r\n            cleanColorDirty: cleanDirectionLightColorDirty,\r\n            cleanIntensityDirty: cleanDirectionLightIntensityDirty,\r\n\r\n            DirectionLightDataFromSystem: drawDataMap.DirectionLightDataFromSystem\r\n        },\r\n        pointLightData: {\r\n            getPosition: getPointLightPosition,\r\n            getColorArr3: getPointLightColorArr3,\r\n            getIntensity: getPointLightIntensity,\r\n            getConstant: getConstant,\r\n            getLinear: getLinear,\r\n            getQuadratic: getQuadratic,\r\n            getRange: getRange,\r\n            computeRadius: computeRadius,\r\n\r\n            isPositionDirty: isPositionDirty,\r\n            isColorDirty: isColorDirty,\r\n            isIntensityDirty: isIntensityDirty,\r\n            isAttenuationDirty: isAttenuationDirty,\r\n            cleanPositionDirty: cleanPositionDirty,\r\n            cleanColorDirty: cleanColorDirty,\r\n            cleanIntensityDirty: cleanIntensityDirty,\r\n            cleanAttenuationDirty: cleanAttenuationDirty,\r\n\r\n            PointLightDataFromSystem: drawDataMap.PointLightDataFromSystem\r\n        }\r\n    }\r\n}\r\n","import { Log } from \"../../../../../../utils/Log\";\r\nimport { IMaterialConfig } from \"../../../../../data/material_config_interface\";\r\nimport { IRenderConfig } from \"../../../../../worker/both_file/data/render_config\";\r\nimport { IShaderLibGenerator } from \"../../../../../data/shaderLib_generator_interface\";\r\nimport { InitShaderDataMap } from \"../../../../../type/utilsType\";\r\nimport { clear } from \"../../../../../utils/worker/both_file/device/deviceManagerUtils\";\r\nimport { bindFrameUboData, init as initUbo } from \"../ubo/uboManagerUtils\";\r\nimport { Map } from \"immutable\";\r\nimport { hasExtensionColorBufferFloat } from \"../device/gpuDetectUtils\";\r\nimport { init as initDefer } from \"./light/defer/deferShadingUtils\";\r\nimport { getVao, isVaoExist } from \"../../../../../utils/worker/render_file/shader/shaderUtils\";\r\nimport { bindVao, createAndInitVao } from \"../shader/shaderUtils\";\r\nimport { IWebGL2DrawDataMap } from \"../interface/IUtils\";\r\nimport { DeferDrawDataMap } from \"../type/utilsType\";\r\n\r\nexport const init = (gl: any, render_config: IRenderConfig, DataBufferConfig: any, GBufferDataFromSystem: any, DeferAmbientLightPassDataFromSystem: any, DeferDirectionLightPassDataFromSystem: any, DeferPointLightPassDataFromSystem: any, ShaderDataFromSystem: any, ProgramDataFromSystem: any, LocationDataFromSystem: any, GLSLSenderDataFromSystem: any, GPUDetectDataFromSystem: any) => {\r\n    if (!hasExtensionColorBufferFloat(GPUDetectDataFromSystem)) {\r\n        Log.warn(\"defer shading need support extensionColorBufferFloat extension\");\r\n    }\r\n    else {\r\n        initDefer(gl, DataBufferConfig, GBufferDataFromSystem, DeferAmbientLightPassDataFromSystem, DeferDirectionLightPassDataFromSystem, DeferPointLightPassDataFromSystem, ShaderDataFromSystem, ProgramDataFromSystem, LocationDataFromSystem, GLSLSenderDataFromSystem);\r\n    }\r\n\r\n    initUbo(gl, render_config, GLSLSenderDataFromSystem);\r\n}\r\n\r\nexport const render = (gl: any, state: Map<any, any>, render_config: IRenderConfig, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, DataBufferConfig: any, initMaterialShader: Function, basicRender: Function, deferRender: Function, drawDataMap: IWebGL2DrawDataMap, deferDrawDataMap: DeferDrawDataMap, initShaderDataMap: InitShaderDataMap, {\r\n    cameraData,\r\n    basicData,\r\n    lightData\r\n}) => {\r\n    var {\r\n            DeviceManagerDataFromSystem,\r\n        GLSLSenderDataFromSystem\r\n        } = drawDataMap;\r\n\r\n    clear(gl, DeviceManagerDataFromSystem);\r\n\r\n    bindFrameUboData(gl, render_config, cameraData, GLSLSenderDataFromSystem);\r\n\r\n    if (basicData.count > 0) {\r\n        basicRender(gl, state, render_config, material_config, shaderLib_generator, DataBufferConfig, initMaterialShader, drawDataMap, initShaderDataMap, basicData, cameraData);\r\n    }\r\n\r\n    if (lightData.count > 0) {\r\n        deferRender(gl, state, render_config, material_config, shaderLib_generator, DataBufferConfig, initMaterialShader, drawDataMap, deferDrawDataMap, initShaderDataMap, lightData, cameraData);\r\n    }\r\n}\r\n\r\nexport const sendAttributeData = (gl: WebGLRenderingContext, shaderIndex: number, geometryIndex: number, ProgramDataFromSystem: any, GLSLSenderDataFromSystem: any, GeometryDataFromSystem: any, VaoDataFromSystem: any) => {\r\n    _bindVao(gl, shaderIndex, geometryIndex, ProgramDataFromSystem, GLSLSenderDataFromSystem, GeometryDataFromSystem, VaoDataFromSystem);\r\n}\r\n\r\nexport const buildDrawDataMap = (DeviceManagerDataFromSystem: any, TextureDataFromSystem: any, TextureCacheDataFromSystem: any, MapManagerDataFromSystem: any, MaterialDataFromSystem: any, BasicMaterialDataFromSystem: any, LightMaterialDataFromSystem: any, AmbientLightDataFromSystem, DirectionLightDataFromSystem: any, PointLightDataFromSystem: any, ProgramDataFromSystem: any, LocationDataFromSystem: any, GLSLSenderDataFromSystem: any, GeometryDataFromSystem: any, BasicDrawRenderCommandBufferDataFromSystem: any, LightDrawRenderCommandBufferDataFromSystem: any) => {\r\n    return {\r\n        DeviceManagerDataFromSystem: DeviceManagerDataFromSystem,\r\n        TextureDataFromSystem: TextureDataFromSystem,\r\n        TextureCacheDataFromSystem: TextureCacheDataFromSystem,\r\n        MapManagerDataFromSystem: MapManagerDataFromSystem,\r\n        MaterialDataFromSystem: MaterialDataFromSystem,\r\n        BasicMaterialDataFromSystem: BasicMaterialDataFromSystem,\r\n        LightMaterialDataFromSystem: LightMaterialDataFromSystem,\r\n        AmbientLightDataFromSystem: AmbientLightDataFromSystem,\r\n        DirectionLightDataFromSystem: DirectionLightDataFromSystem,\r\n        PointLightDataFromSystem: PointLightDataFromSystem,\r\n        ProgramDataFromSystem: ProgramDataFromSystem,\r\n        LocationDataFromSystem: LocationDataFromSystem,\r\n        GLSLSenderDataFromSystem: GLSLSenderDataFromSystem,\r\n        GeometryDataFromSystem: GeometryDataFromSystem,\r\n        BasicDrawRenderCommandBufferDataFromSystem: BasicDrawRenderCommandBufferDataFromSystem,\r\n        LightDrawRenderCommandBufferDataFromSystem: LightDrawRenderCommandBufferDataFromSystem\r\n    }\r\n}\r\n\r\nconst _bindVao =(gl: WebGLRenderingContext, shaderIndex: number, geometryIndex: number, ProgramDataFromSystem: any, GLSLSenderDataFromSystem: any, GeometryDataFromSystem: any, {\r\n    vaoMap,\r\n    vboArrayMap\r\n}) => {\r\n    var vaoConfigData = GLSLSenderDataFromSystem.vaoConfigMap[shaderIndex],\r\n        vao = getVao(geometryIndex, vaoMap);\r\n\r\n    if (!isVaoExist(vao)) {\r\n        vao = createAndInitVao(gl, geometryIndex, vaoMap, vboArrayMap, vaoConfigData, GeometryDataFromSystem);\r\n    }\r\n\r\n    bindVao(gl, vao, ProgramDataFromSystem);\r\n}\r\n","import { ensureFunc, it, requireCheckFunc } from \"../../../../../../definition/typescript/decorator/contract\";\r\nimport { createMap, isValidMapValue } from \"../../../../../../utils/objectUtils\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { AttributeLocationMap, UniformLocationMap } from \"../../../../../type/dataType\";\r\n\r\nexport const getUniformLocation = ensureFunc((pos: number, gl: WebGLRenderingContext, name: string, uniformLocationMap: UniformLocationMap) => {\r\n    // it(`${name}'s uniform location should exist in map`, () => {\r\n    //     expect(isValidMapValue(pos)).true;\r\n    // });\r\n}, (gl: WebGLRenderingContext, program: WebGLProgram, name: string, uniformLocationMap: UniformLocationMap) => {\r\n    var pos: WebGLUniformLocation = null;\r\n\r\n    pos = uniformLocationMap[name];\r\n\r\n    if (isValidMapValue(pos)) {\r\n        return pos;\r\n    }\r\n\r\n    pos = gl.getUniformLocation(program, name);\r\n    uniformLocationMap[name] = pos;\r\n\r\n    return pos;\r\n})\r\n\r\nexport const isUniformLocationNotExist = (pos: WebGLUniformLocation) => {\r\n    return pos === null;\r\n}\r\n","import {\r\n    getUniformLocation as getUniformLocationUtils, isUniformLocationNotExist as isUniformLocationNotExistUtils\r\n} from \"../../utils/worker/render_file/shader/location/locationUtils\";\r\n\r\nexport const getUniformLocation = getUniformLocationUtils;\r\n\r\nexport const isUniformLocationNotExist = isUniformLocationNotExistUtils;\r\n","import {\r\n    sendBuffer as sendBufferUtils,\r\n    sendFloat1 as sendFloat1Utils, sendFloat3 as sendFloat3Utils, sendInt as sendIntUtils, sendMatrix3 as sendMatrix3Utils, sendMatrix4 as sendMatrix4Utils,\r\n    sendVector3 as sendVector3Utils\r\n} from \"../../utils/worker/render_file/shader/glslSender/glslSenderUtils\";\r\nimport { UniformCacheMap, UniformShaderLocationMap } from \"../../type/dataType\";\r\nimport { getUniformLocation, isUniformLocationNotExist } from \"../location/LocationSystem\";\r\nimport { Vector3 } from \"../../../math/Vector3\";\r\n\r\nexport const sendBuffer = sendBufferUtils;\r\n\r\nexport const sendMatrix3 = (gl: WebGLRenderingContext, program: WebGLProgram, name: string, data: Float32Array, uniformLocationMap: UniformShaderLocationMap) => {\r\n    sendMatrix3Utils(gl, program, name, data, uniformLocationMap, getUniformLocation, isUniformLocationNotExist);\r\n};\r\n\r\nexport const sendMatrix4 = (gl: WebGLRenderingContext, program: WebGLProgram, name: string, data: Float32Array, uniformLocationMap: UniformShaderLocationMap) => {\r\n    sendMatrix4Utils(gl, program, name, data, uniformLocationMap, getUniformLocation, isUniformLocationNotExist);\r\n};\r\n\r\nexport const sendVector3 = (gl: WebGLRenderingContext, shaderIndex: number, program: WebGLProgram, name: string, data: Vector3, uniformCacheMap: UniformCacheMap, uniformLocationMap: UniformShaderLocationMap) => {\r\n    sendVector3Utils(gl, shaderIndex, program, name, data, uniformCacheMap, uniformLocationMap, getUniformLocation, isUniformLocationNotExist);\r\n};\r\n\r\nexport const sendInt = (gl: WebGLRenderingContext, shaderIndex: number, program: WebGLProgram, name: string, data: number, uniformCacheMap: UniformCacheMap, uniformLocationMap: UniformShaderLocationMap) => {\r\n    sendIntUtils(gl, shaderIndex, program, name, data, uniformCacheMap, uniformLocationMap, getUniformLocation, isUniformLocationNotExist);\r\n};\r\n\r\nexport const sendFloat1 = (gl: WebGLRenderingContext, shaderIndex: number, program: WebGLProgram, name: string, data: number, uniformCacheMap: UniformCacheMap, uniformLocationMap: UniformShaderLocationMap) => {\r\n    sendFloat1Utils(gl, shaderIndex, program, name, data, uniformCacheMap, uniformLocationMap, getUniformLocation, isUniformLocationNotExist);\r\n};\r\n\r\nexport const sendFloat3 = (gl: WebGLRenderingContext, shaderIndex: number, program: WebGLProgram, name: string, data: Array<number>, uniformCacheMap: UniformCacheMap, uniformLocationMap: UniformShaderLocationMap) => {\r\n    sendFloat3Utils(gl, shaderIndex, program, name, data, uniformCacheMap, uniformLocationMap, getUniformLocation, isUniformLocationNotExist);\r\n};\r\n","import { EVariableType } from \"../../../../enum/EVariableType\";\r\nimport { UniformCacheMap, UniformLocationMap } from \"../../../../type/dataType\";\r\nimport { Log } from \"../../../../../utils/Log\";\r\nimport { getVao, isVaoExist } from \"../shader/shaderUtils\";\r\n\r\nexport const directlySendUniformData = (gl: WebGLRenderingContext, name: string, shaderIndex: number, program: WebGLProgram, type: EVariableType, data: any, {\r\n    sendMatrix3,\r\n    sendMatrix4,\r\n    sendVector3,\r\n    sendInt,\r\n    sendFloat1,\r\n    sendFloat3,\r\n}, uniformLocationMap: UniformLocationMap, uniformCacheMap: UniformCacheMap) => {\r\n    switch (type) {\r\n        case EVariableType.MAT3:\r\n            sendMatrix3(gl, program, name, data, uniformLocationMap);\r\n            break;\r\n        case EVariableType.MAT4:\r\n            sendMatrix4(gl, program, name, data, uniformLocationMap);\r\n            break;\r\n        case EVariableType.VEC3:\r\n            sendVector3(gl, shaderIndex, program, name, data, uniformCacheMap, uniformLocationMap);\r\n            break;\r\n        case EVariableType.INT:\r\n        case EVariableType.SAMPLER_2D:\r\n            sendInt(gl, shaderIndex, program, name, data, uniformCacheMap, uniformLocationMap);\r\n            break;\r\n        case EVariableType.FLOAT:\r\n            sendFloat1(gl, shaderIndex, program, name, data, uniformCacheMap, uniformLocationMap);\r\n            break;\r\n        case EVariableType.FLOAT3:\r\n            sendFloat3(gl, shaderIndex, program, name, data, uniformCacheMap, uniformLocationMap);\r\n            break;\r\n        default:\r\n            Log.error(true, Log.info.FUNC_INVALID(\"EVariableType:\", type));\r\n            break;\r\n    }\r\n}\r\n","export const buildDrawFuncDataMap = (sendAttributeData: Function, sendUniformData: Function, directlySendUniformData: Function, use: Function, hasIndices: Function, getIndicesCount: Function, getIndexType: Function, getIndexTypeSize: Function, getVerticesCount: Function, bindAndUpdate: Function, getMapCount: Function, getStartTextureIndex:Function, useShader: Function) => {\r\n    return {\r\n        sendAttributeData: sendAttributeData,\r\n        sendUniformData: sendUniformData,\r\n        directlySendUniformData: directlySendUniformData,\r\n        use: use,\r\n        hasIndices: hasIndices,\r\n        getIndicesCount: getIndicesCount,\r\n        getIndexType: getIndexType,\r\n        getIndexTypeSize: getIndexTypeSize,\r\n        getVerticesCount: getVerticesCount,\r\n        bindAndUpdate: bindAndUpdate,\r\n        getMapCount: getMapCount,\r\n        getStartTextureIndex: getStartTextureIndex,\r\n        useShader: useShader,\r\n    }\r\n}\r\n\r\n","import { Map } from \"immutable\";\r\nimport { IRenderConfig } from \"../../../../worker/both_file/data/render_config\";\r\nimport { IMaterialConfig } from \"../../../../data/material_config_interface\";\r\nimport { IShaderLibGenerator } from \"../../../../data/shaderLib_generator_interface\";\r\nimport { IWebGL2DrawFuncDataMap } from \"../../../../webgl2/interface/IDraw\";\r\nimport { InitShaderDataMap } from \"../../../../type/utilsType\";\r\nimport { BasicRenderCommandBufferForDrawData } from \"../../../../utils/worker/render_file/type/dataType\";\r\nimport { buildRenderCommandUniformData } from \"../../../../utils/draw/basic/basicDrawRenderCommandBufferUtils\";\r\nimport { drawGameObjects } from \"../../../../webgl2/utils/worker/render_file/draw/drawRenderCommandBufferUtils\";\r\nimport { IWebGL2BasicSendUniformDataDataMap, IWebGL2DrawDataMap } from \"../../worker/render_file/interface/IUtils\";\r\n\r\nexport const draw = (gl: any, state: Map<any, any>, render_config: IRenderConfig, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, DataBufferConfig: any, initMaterialShader: Function, drawFuncDataMap: IWebGL2DrawFuncDataMap, drawDataMap: IWebGL2DrawDataMap, sendDataMap: IWebGL2BasicSendUniformDataDataMap, initShaderDataMap: InitShaderDataMap, bufferData: BasicRenderCommandBufferForDrawData, {\r\n            vMatrix,\r\n    pMatrix\r\n        }) => {\r\n    var {\r\n            BasicDrawRenderCommandBufferDataFromSystem\r\n        } = drawDataMap,\r\n        {\r\n            mMatrixFloatArrayForSend\r\n        } = BasicDrawRenderCommandBufferDataFromSystem;\r\n\r\n    drawGameObjects(gl, state, material_config, shaderLib_generator, DataBufferConfig, 0, \"BasicRender\", initMaterialShader, drawFuncDataMap, drawDataMap, initShaderDataMap, sendDataMap, buildRenderCommandUniformData(mMatrixFloatArrayForSend, vMatrix, pMatrix), bufferData);\r\n\r\n    return state;\r\n};\r\n","import {\r\n    InitShaderDataMap\r\n} from \"../../../../../../type/utilsType\";\r\nimport { Map } from \"immutable\";\r\nimport { IShaderLibGenerator } from \"../../../../../../data/shaderLib_generator_interface\";\r\nimport { IMaterialConfig } from \"../../../../../../data/material_config_interface\";\r\nimport { IRenderConfig } from \"../../../../../../worker/both_file/data/render_config\";\r\nimport { IWebGL2BasicDrawFuncDataMap } from \"../../../../../interface/IDraw\";\r\nimport { draw as drawBasic } from \"../../../../draw/basic/basicDrawRenderCommandBufferUtils\";\r\nimport {\r\n    BasicRenderCommandBufferForDrawData,\r\n    CameraRenderCommandBufferForDrawData\r\n} from \"../../../../../../utils/worker/render_file/type/dataType\";\r\nimport { IWebGL2BasicSendUniformDataDataMap, IWebGL2DrawDataMap } from \"../../interface/IUtils\";\r\n\r\nexport const render = (gl: any, state: Map<any, any>, render_config: IRenderConfig, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, DataBufferConfig: any, initMaterialShader: Function, drawFuncDataMap: IWebGL2BasicDrawFuncDataMap, drawDataMap: IWebGL2DrawDataMap, sendDataMap: IWebGL2BasicSendUniformDataDataMap, initShaderDataMap: InitShaderDataMap, bufferData: BasicRenderCommandBufferForDrawData, cameraData: CameraRenderCommandBufferForDrawData) => {\r\n    drawBasic(gl, state, render_config, material_config, shaderLib_generator, DataBufferConfig, initMaterialShader, drawFuncDataMap, drawDataMap, sendDataMap, initShaderDataMap, bufferData, cameraData);\r\n}\r\n","import { IBasicSendUniformDataDataMap, IDrawDataMap } from \"../../interface/IUtils\";\r\nimport { BasicRenderUniformData, UniformCacheMap, UniformLocationMap } from \"../../../../../type/dataType\";\r\nimport { BasicMaterialForGetUniformDataDataMap, MaterialForGetUniformDataDataMap, SendUniformDataGLSLSenderDataMap } from \"../../../../../type/utilsType\";\r\nimport { directlySendUniformData } from \"../renderUtils\";\r\nimport { Log } from \"../../../../../../utils/Log\";\r\n\r\nexport const sendUniformData = (gl: WebGLRenderingContext, materialIndex: number, shaderIndex: number, program: WebGLProgram, drawDataMap: IDrawDataMap, renderCommandUniformData: BasicRenderUniformData, sendDataMap: IBasicSendUniformDataDataMap, uniformLocationMap: UniformLocationMap, uniformCacheMap: UniformCacheMap, materialData: MaterialForGetUniformDataDataMap, basicMaterialData: BasicMaterialForGetUniformDataDataMap) => {\r\n    _sendUniformData(gl, materialIndex, shaderIndex, program, sendDataMap.glslSenderData, uniformLocationMap, uniformCacheMap, renderCommandUniformData, materialData, basicMaterialData);\r\n    _sendUniformFuncData(gl, shaderIndex, program, sendDataMap, drawDataMap, uniformLocationMap, uniformCacheMap);\r\n}\r\n\r\nconst _sendUniformData =(gl: WebGLRenderingContext, materialIndex: number, shaderIndex: number, program: WebGLProgram, glslSenderData: SendUniformDataGLSLSenderDataMap, uniformLocationMap: UniformLocationMap, uniformCacheMap: UniformCacheMap, renderCommandUniformData: BasicRenderUniformData, materialData: MaterialForGetUniformDataDataMap, basicMaterialData: BasicMaterialForGetUniformDataDataMap) => {\r\n    var sendUniformDataArr = glslSenderData.GLSLSenderDataFromSystem.sendUniformConfigMap[shaderIndex];\r\n\r\n    for (let i = 0, len = sendUniformDataArr.length; i < len; i++) {\r\n        let sendData = sendUniformDataArr[i],\r\n            name = sendData.name,\r\n            field = sendData.field,\r\n            type = sendData.type as any,\r\n            from = sendData.from || \"cmd\",\r\n            data = _getUniformData(materialIndex, field, from, renderCommandUniformData, materialData, basicMaterialData);\r\n\r\n        directlySendUniformData(gl, name, shaderIndex, program, type, data, glslSenderData, uniformLocationMap, uniformCacheMap);\r\n    }\r\n}\r\n\r\nconst _sendUniformFuncData =(gl: WebGLRenderingContext, shaderIndex: number, program: WebGLProgram, sendDataMap: IBasicSendUniformDataDataMap, drawDataMap: IDrawDataMap, uniformLocationMap: UniformLocationMap, uniformCacheMap: UniformCacheMap) => {\r\n    var sendUniformFuncDataArr = drawDataMap.GLSLSenderDataFromSystem.sendUniformFuncConfigMap[shaderIndex];\r\n\r\n    for (let i = 0, len = sendUniformFuncDataArr.length; i < len; i++) {\r\n        let sendFunc = sendUniformFuncDataArr[i];\r\n\r\n        sendFunc(gl, shaderIndex, program, sendDataMap, uniformLocationMap, uniformCacheMap);\r\n    }\r\n}\r\n\r\nconst _getUniformData =(materialIndex: number, field: string, from: string, renderCommandUniformData: BasicRenderUniformData, materialData: MaterialForGetUniformDataDataMap, basicMaterialData: BasicMaterialForGetUniformDataDataMap) => {\r\n    var data: any = null;\r\n\r\n    switch (from) {\r\n        case \"cmd\":\r\n            data = renderCommandUniformData[field];\r\n            break;\r\n        case \"basicMaterial\":\r\n            data = _getUnifromDataFromBasicMaterial(field, materialIndex, materialData, basicMaterialData);\r\n            break;\r\n        default:\r\n            Log.error(true, Log.info.FUNC_UNKNOW(`from:${from}`));\r\n            break;\r\n    }\r\n\r\n    return data;\r\n}\r\n\r\nconst _getUnifromDataFromBasicMaterial =(field: string, index: number, {\r\n                                            getColorArr3,\r\n    getOpacity,\r\n    MaterialDataFromSystem\r\n                                        },\r\n    {\r\n                                            BasicMaterialDataFromSystem\r\n                                        }) => {\r\n    var data: any = null;\r\n\r\n    switch (field) {\r\n        case \"color\":\r\n            data = getColorArr3(index, MaterialDataFromSystem);\r\n            break;\r\n        case \"opacity\":\r\n            data = getOpacity(index, MaterialDataFromSystem);\r\n            break;\r\n        default:\r\n            Log.error(true, Log.info.FUNC_UNKNOW(`field:${field}`));\r\n            break;\r\n    }\r\n\r\n    return data;\r\n}\r\n\r\nexport const buildSendUniformDataDataMap = (\r\n    sendFloat1, sendFloat3, sendMatrix4, sendVector3, sendInt, sendMatrix3,\r\n    drawDataMap: IDrawDataMap) => {\r\n    return {\r\n        glslSenderData: {\r\n            sendMatrix3: sendMatrix3,\r\n            sendMatrix4: sendMatrix4,\r\n            sendVector3: sendVector3,\r\n            sendInt: sendInt,\r\n            sendFloat1: sendFloat1,\r\n            sendFloat3: sendFloat3,\r\n\r\n            GLSLSenderDataFromSystem: drawDataMap.GLSLSenderDataFromSystem\r\n        }\r\n    }\r\n}\r\n\r\nexport const buildMaterialDataForGetUniformData = (getColorArr3: Function, getOpacity: Function, MaterialDataFromSystem: any) => {\r\n    return {\r\n        getColorArr3: getColorArr3,\r\n        getOpacity: getOpacity,\r\n        MaterialDataFromSystem: MaterialDataFromSystem\r\n    }\r\n}\r\n\r\nexport const buildBasicMaterialDataForGetUniformData = (BasicMaterialDataFromSystem: any) => {\r\n    return {\r\n        BasicMaterialDataFromSystem: BasicMaterialDataFromSystem\r\n    }\r\n}\r\n","import { InitShaderDataMap } from \"../../../type/utilsType\";\r\nimport curry from \"wonder-lodash/curry\";\r\nimport { Map } from \"immutable\";\r\nimport { IShaderLibGenerator } from \"../../../data/shaderLib_generator_interface\";\r\nimport { IMaterialConfig } from \"../../../data/material_config_interface\";\r\nimport { IRenderConfig } from \"../../../worker/both_file/data/render_config\";\r\nimport { use } from \"../../../shader/ShaderSystem\";\r\nimport {\r\n    getIndexType, getIndexTypeSize, getIndicesCount, getVerticesCount,\r\n    hasIndices\r\n} from \"../../../../component/geometry/GeometrySystem\";\r\nimport { bindAndUpdate, getMapCount} from \"../../../texture/MapManagerSystem\";\r\nimport { sendFloat1, sendFloat3, sendMatrix4, sendVector3, sendInt, sendMatrix3 } from \"../../../shader/glslSender/GLSLSenderSystem\";\r\nimport { getColorArr3, getOpacity, useShader } from \"../../../../component/material/MaterialSystem\";\r\nimport {\r\n    BasicRenderUniformData, UniformCacheMap,\r\n    UniformLocationMap\r\n} from \"../../../type/dataType\";\r\nimport { directlySendUniformData } from \"../../../utils/worker/render_file/render/renderUtils\";\r\nimport { buildDrawFuncDataMap } from \"../../utils/worker/render_file/draw/basic/basicDrawRenderCommandBufferUtils\";\r\nimport { sendAttributeData } from \"../RenderSystem\";\r\nimport {\r\n    BasicRenderCommandBufferForDrawData,\r\n    CameraRenderCommandBufferForDrawData\r\n} from \"../../../utils/worker/render_file/type/dataType\";\r\nimport {\r\n    IWebGL2BasicSendUniformDataDataMap,\r\n    IWebGL2DrawDataMap\r\n} from \"../../utils/worker/render_file/interface/IUtils\";\r\nimport { render as renderBasic } from \"../../utils/worker/render_file/render/basic/basicRenderUtils\";\r\nimport {\r\n    buildMaterialDataForGetUniformData,\r\n    buildSendUniformDataDataMap,\r\n    sendUniformData\r\n} from \"../../../utils/worker/render_file/render/basic/basicRenderUtils\";\r\nimport { buildBasicMaterialDataForGetUniformData } from \"../../../utils/worker/render_file/render/basic/basicRenderUtils\";\r\nimport { getStartTextureIndex } from \"../../../utils/worker/render_file/texture/mapManagerUtils\";\r\n\r\nexport const render = curry((gl: any, state: Map<any, any>, render_config: IRenderConfig, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, DataBufferConfig: any, initMaterialShader: Function, drawDataMap: IWebGL2DrawDataMap, initShaderDataMap: InitShaderDataMap, bufferData: BasicRenderCommandBufferForDrawData, cameraData: CameraRenderCommandBufferForDrawData) => {\r\n    renderBasic(gl, state, render_config, material_config, shaderLib_generator, DataBufferConfig, initMaterialShader, buildDrawFuncDataMap(sendAttributeData, _sendUniformData, directlySendUniformData, use, hasIndices, getIndicesCount, getIndexType, getIndexTypeSize, getVerticesCount, bindAndUpdate, getMapCount, getStartTextureIndex, useShader), drawDataMap, buildSendUniformDataDataMap(\r\n        sendFloat1, sendFloat3, sendMatrix4, sendVector3, sendInt, sendMatrix3,\r\n        drawDataMap\r\n    ), initShaderDataMap, bufferData, cameraData);\r\n})\r\n\r\nconst _sendUniformData =(gl: WebGLRenderingContext, materialIndex: number, shaderIndex: number, program: WebGLProgram, drawDataMap: IWebGL2DrawDataMap, renderCommandUniformData: BasicRenderUniformData, sendDataMap: IWebGL2BasicSendUniformDataDataMap, uniformLocationMap: UniformLocationMap, uniformCacheMap: UniformCacheMap) => {\r\n    sendUniformData(gl, materialIndex, shaderIndex, program, drawDataMap, renderCommandUniformData, sendDataMap, uniformLocationMap, uniformCacheMap, buildMaterialDataForGetUniformData(getColorArr3, getOpacity, drawDataMap.MaterialDataFromSystem), buildBasicMaterialDataForGetUniformData(drawDataMap.BasicMaterialDataFromSystem));\r\n};\r\n","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { checkLightShouldAlive, Light } from \"./Light\";\r\nimport { create, getColor, setColor } from \"./AmbientLightSystem\";\r\nimport { AmbientLightData } from \"./AmbientLightData\";\r\nimport { Color } from \"../../structure/Color\";\r\nimport { requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { getGameObject } from \"./SpecifyLightSystem\";\r\n\r\n@registerClass(\"AmbientLight\")\r\nexport class AmbientLight extends Light {\r\n}\r\n\r\nexport const createAmbientLight = () => {\r\n    return create(AmbientLightData);\r\n}\r\n\r\nexport const getAmbientLightGameObject = requireCheckFunc((component: AmbientLight) => {\r\n    checkLightShouldAlive(component);\r\n}, (component: AmbientLight) => {\r\n    return getGameObject(component.index, AmbientLightData);\r\n})\r\n\r\nexport const getAmbientLightColor = (light: AmbientLight) => {\r\n    return getColor(light.index, AmbientLightData);\r\n}\r\n\r\nexport const setAmbientLightColor = (light: AmbientLight, color: Color) => {\r\n    setColor(light.index, color, AmbientLightData);\r\n}\r\n","import { Color } from \"../../../../../structure/Color\";\r\nimport { getColorArr3 as getColorArr3Utils, getSingleSizeData } from \"../../../common/operateBufferDataUtils\";\r\nimport {\r\n    cleanDirty, getColorDataSize as getSpecifyLightColorDataSize, getDirtyDataSize,\r\n    isDirty\r\n} from \"./specifyLightUtils\";\r\n\r\nexport const getColorArr3 = (index: number, AmbientLightDataFromSystem: any) => {\r\n    return getColorArr3Utils(index, AmbientLightDataFromSystem);\r\n}\r\n\r\nexport const getColorDataSize = getSpecifyLightColorDataSize;\r\n\r\nexport const createTypeArrays = (buffer: any, count: number, AmbientLightDataFromSystem: any) => {\r\n    var offset = 0;\r\n\r\n    AmbientLightDataFromSystem.colors = new Float32Array(buffer, 0, count * getColorDataSize());\r\n    offset += count * Float32Array.BYTES_PER_ELEMENT * getColorDataSize();\r\n\r\n    AmbientLightDataFromSystem.isColorDirtys = new Uint8Array(buffer, offset, count * getDirtyDataSize());\r\n    offset += count * Uint8Array.BYTES_PER_ELEMENT * getDirtyDataSize();\r\n}\r\n\r\nexport const isColorDirty = (index: number, AmbientLightDataFromSystem: any) => {\r\n    return isDirty(getSingleSizeData(index, AmbientLightDataFromSystem.isColorDirtys));\r\n}\r\n\r\nexport const cleanColorDirty = (index: number, AmbientLightDataFromSystem: any) => {\r\n    cleanDirty(index, AmbientLightDataFromSystem.isColorDirtys);\r\n}\r\n","import { getColor3Data } from \"../../../component/utils/operateBufferDataUtils\";\r\nimport { Color } from \"../../../structure/Color\";\r\n\r\nexport const getColor = (index: number, AmbientLightDataFromSystem: any) => {\r\n    return getColor3Data(index, AmbientLightDataFromSystem.colors);\r\n}\r\n","import { AmbientLight } from \"./AmbientLight\";\r\nimport { Color } from \"../../structure/Color\";\r\nimport {\r\n    disposeComponent as disposeSpecifyLightComponent, initData as initSpecifyLightData,\r\n    setColor as setSpecifyLightColor, create as createSpecifyLight, addComponent as addSpecifyLightComponent,\r\n    createDefaultColor, markDirty\r\n} from \"./SpecifyLightSystem\";\r\nimport { GameObject } from \"../../core/entityObject/gameObject/GameObject\";\r\nimport { Light } from \"./Light\";\r\nimport { AmbientLightData } from \"./AmbientLightData\";\r\nimport { ensureFunc, it, requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { createSharedArrayBufferOrArrayBuffer } from \"../../utils/arrayBufferUtils\";\r\nimport { getAmbientLightBufferCount } from \"../../renderer/utils/light/bufferUtils\";\r\nimport {\r\n    cleanColorDirty as cleanColorDirtyUtils,\r\n    createTypeArrays, getColorArr3 as getColorArr3Utils,\r\n    getColorDataSize, isColorDirty as isColorDirtyUtils\r\n} from \"../../renderer/utils/worker/render_file/light/ambientLightUtils\";\r\nimport { getColor as getColorUtils } from \"../../renderer/utils/light/ambientLightUtils\";\r\nimport { getDirtyDataSize } from \"../../renderer/utils/worker/render_file/light/specifyLightUtils\";\r\nimport { DirectorData } from \"../../core/DirectorData\";\r\nimport { isInit } from \"../../core/DirectorSystem\";\r\n\r\nexport const create = ensureFunc((light: AmbientLight, AmbientLightData: any) => {\r\n    it(\"shouldn't create after Director->init\", () => {\r\n        expect(isInit(DirectorData)).false;\r\n    });\r\n}, (AmbientLightData: any) => {\r\n    var light = new AmbientLight();\r\n\r\n    light = createSpecifyLight(light, AmbientLightData);\r\n\r\n    return light;\r\n})\r\n\r\nexport const getColor = getColorUtils;\r\n\r\nexport const getColorArr3 = getColorArr3Utils;\r\n\r\nexport const setColor = (index: number, color: Color, AmbientLightData: any) => {\r\n    setSpecifyLightColor(index, color, AmbientLightData.colors);\r\n\r\n    markDirty(index, AmbientLightData.isColorDirtys);\r\n}\r\n\r\nexport const addComponent = (component: Light, gameObject: GameObject) => {\r\n    addSpecifyLightComponent(component, gameObject, AmbientLightData);\r\n}\r\n\r\nexport const disposeComponent = requireCheckFunc(() => {\r\n    it(\"should only has 1 ambient light\", () => {\r\n        expect(AmbientLightData.count).equal(1);\r\n    });\r\n}, (component: Light) => {\r\n    var sourceIndex = component.index;\r\n\r\n    disposeSpecifyLightComponent(component.index, AmbientLightData);\r\n\r\n    AmbientLightData.isColorDirtys[0] = AmbientLightData.defaultDirty;\r\n})\r\n\r\nexport const initData = (AmbientLightData: any) => {\r\n    var count = getAmbientLightBufferCount(),\r\n        size = Float32Array.BYTES_PER_ELEMENT * getColorDataSize() + Uint8Array.BYTES_PER_ELEMENT * getDirtyDataSize(),\r\n        buffer: any = null;\r\n\r\n    buffer = createSharedArrayBufferOrArrayBuffer(count * size);\r\n\r\n    initSpecifyLightData(buffer, AmbientLightData);\r\n\r\n    createTypeArrays(buffer, count, AmbientLightData);\r\n    _setDefaultTypeArrData(count, AmbientLightData);\r\n}\r\n\r\nconst _setDefaultTypeArrData =(count: number, AmbientLightData: any) => {\r\n    var color = createDefaultColor();\r\n\r\n    for (let i = 0; i < count; i++) {\r\n        setColor(i, color, AmbientLightData);\r\n    }\r\n}\r\n\r\nexport const isColorDirty = isColorDirtyUtils;\r\n\r\nexport const cleanColorDirty = cleanColorDirtyUtils;\r\n","export const computeRadius = (color: Array<number>, constant: number, linear: number, quadratic: number) => {\r\n    var lightMax = Math.max(color[0], color[1], color[2]);\r\n\r\n    return (-linear + Math.sqrt(linear ** 2 - 4 * quadratic * (constant - (256.0 / 5.0) * lightMax)))\r\n        / (2 * quadratic);\r\n}\r\n\r\n\r\n","import { computeRadius as computeRadiusUtils } from \"../utils/worker/render_file/light/pointLightUtils\";\r\nimport { initDataHelper } from \"../../../component/light/PointLightSystem\";\r\n\r\nexport const computeRadius = computeRadiusUtils;\r\n\r\nexport const initData = (PointLightData: any) => {\r\n    initDataHelper(PointLightData);\r\n}\r\n","import { IDrawDataMap, ILightSendUniformDataDataMap } from \"../../interface/IUtils\";\r\nimport { LightRenderUniformData, UniformCacheMap, UniformLocationMap } from \"../../../../../type/dataType\";\r\nimport {\r\n    LightMaterialForGetUniformDataDataMap, MaterialForGetUniformDataDataMap,\r\n    SendUniformDataGLSLSenderDataMap\r\n} from \"../../../../../type/utilsType\";\r\nimport { directlySendUniformData } from \"../renderUtils\";\r\nimport { Log } from \"../../../../../../utils/Log\";\r\n\r\nexport const sendUniformData = (gl: WebGLRenderingContext, materialIndex: number, shaderIndex: number, program: WebGLProgram, drawDataMap: IDrawDataMap, renderCommandUniformData: LightRenderUniformData, sendDataMap: ILightSendUniformDataDataMap, uniformLocationMap: UniformLocationMap, uniformCacheMap: UniformCacheMap, materialData: MaterialForGetUniformDataDataMap, lightMaterialData: LightMaterialForGetUniformDataDataMap) => {\r\n    _sendUniformData(gl, materialIndex, shaderIndex, program, sendDataMap.glslSenderData, uniformLocationMap, uniformCacheMap, renderCommandUniformData, materialData, lightMaterialData);\r\n    _sendUniformFuncData(gl, shaderIndex, program, sendDataMap, drawDataMap, uniformLocationMap, uniformCacheMap);\r\n}\r\nconst _sendUniformData =(gl: WebGLRenderingContext, materialIndex: number, shaderIndex: number, program: WebGLProgram, glslSenderData: SendUniformDataGLSLSenderDataMap, uniformLocationMap: UniformLocationMap, uniformCacheMap: UniformCacheMap, renderCommandUniformData: LightRenderUniformData, materialData: MaterialForGetUniformDataDataMap, lightMaterialData: LightMaterialForGetUniformDataDataMap) => {\r\n    var sendUniformDataArr = glslSenderData.GLSLSenderDataFromSystem.sendUniformConfigMap[shaderIndex];\r\n\r\n    for (let i = 0, len = sendUniformDataArr.length; i < len; i++) {\r\n        let sendData = sendUniformDataArr[i],\r\n            name = sendData.name,\r\n            field = sendData.field,\r\n            type = sendData.type as any,\r\n            from = sendData.from || \"cmd\",\r\n            data = _getUniformData(materialIndex, field, from, renderCommandUniformData, materialData, lightMaterialData);\r\n\r\n        directlySendUniformData(gl, name, shaderIndex, program, type, data, glslSenderData, uniformLocationMap, uniformCacheMap);\r\n    }\r\n}\r\nconst _sendUniformFuncData =(gl: WebGLRenderingContext, shaderIndex: number, program: WebGLProgram, sendDataMap: ILightSendUniformDataDataMap, drawDataMap: IDrawDataMap, uniformLocationMap: UniformLocationMap, uniformCacheMap: UniformCacheMap) => {\r\n    var sendUniformFuncDataArr = drawDataMap.GLSLSenderDataFromSystem.sendUniformFuncConfigMap[shaderIndex];\r\n\r\n    for (let i = 0, len = sendUniformFuncDataArr.length; i < len; i++) {\r\n        let sendFunc = sendUniformFuncDataArr[i];\r\n\r\n        sendFunc(gl, shaderIndex, program, sendDataMap, uniformLocationMap, uniformCacheMap);\r\n    }\r\n}\r\nconst _getUniformData =(materialIndex: number, field: string, from: string, renderCommandUniformData: LightRenderUniformData, materialData: MaterialForGetUniformDataDataMap, lightMaterialData: LightMaterialForGetUniformDataDataMap) => {\r\n    var data: any = null;\r\n\r\n    switch (from) {\r\n        case \"cmd\":\r\n            data = renderCommandUniformData[field];\r\n            break;\r\n        case \"lightMaterial\":\r\n            data = _getUnifromDataFromLightMaterial(field, materialIndex, materialData, lightMaterialData);\r\n            break;\r\n        default:\r\n            Log.error(true, Log.info.FUNC_UNKNOW(`from:${from}`));\r\n            break;\r\n    }\r\n\r\n    return data;\r\n}\r\nconst _getUnifromDataFromLightMaterial =(field: string, index: number,\r\n    {\r\n                                            getColorArr3,\r\n        getOpacity,\r\n        MaterialDataFromSystem\r\n                                        },\r\n    {\r\n                                            getEmissionColorArr3,\r\n        getSpecularColorArr3,\r\n        getShininess,\r\n        getLightModel,\r\n        LightMaterialDataFromSystem\r\n                                        }) => {\r\n    var data: any = null;\r\n\r\n    switch (field) {\r\n        case \"color\":\r\n            data = getColorArr3(index, MaterialDataFromSystem);\r\n            break;\r\n        case \"emissionColor\":\r\n            data = getEmissionColorArr3(index, LightMaterialDataFromSystem);\r\n            break;\r\n        case \"opacity\":\r\n            data = getOpacity(index, MaterialDataFromSystem);\r\n            break;\r\n        case \"specularColor\":\r\n            data = getSpecularColorArr3(index, LightMaterialDataFromSystem);\r\n            break;\r\n        case \"shininess\":\r\n            data = getShininess(index, LightMaterialDataFromSystem);\r\n            break;\r\n        case \"lightModel\":\r\n            data = getLightModel(index, LightMaterialDataFromSystem);\r\n            break;\r\n        default:\r\n            Log.error(true, Log.info.FUNC_UNKNOW(`field:${field}`));\r\n            break;\r\n    }\r\n\r\n    return data;\r\n}\r\nexport const buildMaterialDataForGetUniformData = (getColorArr3: Function, getOpacity: Function, MaterialDataFromSystem: any) => {\r\n    return {\r\n        getColorArr3: getColorArr3,\r\n        getOpacity: getOpacity,\r\n        MaterialDataFromSystem: MaterialDataFromSystem\r\n    }\r\n}\r\n\r\nexport const buildLightMaterialDataForGetUniformData = (getEmissionColorArr3: Function, getSpecularColorArr3: Function, getLightModel: Function, getShininess: Function, LightMaterialDataFromSystem: any) => {\r\n    return {\r\n        getEmissionColorArr3: getEmissionColorArr3,\r\n        getSpecularColorArr3: getSpecularColorArr3,\r\n        getLightModel: getLightModel,\r\n        getShininess: getShininess,\r\n        LightMaterialDataFromSystem: LightMaterialDataFromSystem\r\n    }\r\n}\r\n","import { LightRenderUniformData, UniformCacheMap, UniformLocationMap } from \"../../../type/dataType\";\r\nimport { getColorArr3, getOpacity } from \"../../../../component/material/MaterialSystem\";\r\nimport {\r\n    getEmissionColorArr3, getLightModel, getShininess,\r\n    getSpecularColorArr3\r\n} from \"../../../../component/material/LightMaterialSystem\";\r\nimport {\r\n    IWebGL2DrawDataMap,\r\n    IWebGL2LightSendUniformDataDataMap\r\n} from \"../../utils/worker/render_file/interface/IUtils\";\r\nimport {\r\n    sendUniformData as sendUniformDataUtils, buildMaterialDataForGetUniformData,\r\n    buildLightMaterialDataForGetUniformData\r\n} from \"../../../utils/worker/render_file/render/light/lightRenderUtils\";\r\n\r\nexport const sendUniformData = (gl: any, materialIndex: number, shaderIndex: number, program: WebGLProgram, drawDataMap: IWebGL2DrawDataMap, renderCommandUniformData: LightRenderUniformData, sendDataMap: IWebGL2LightSendUniformDataDataMap, uniformLocationMap: UniformLocationMap, uniformCacheMap: UniformCacheMap) => {\r\n    sendUniformDataUtils(gl, materialIndex, shaderIndex, program, drawDataMap, renderCommandUniformData, sendDataMap, uniformLocationMap, uniformCacheMap, buildMaterialDataForGetUniformData(getColorArr3, getOpacity, drawDataMap.MaterialDataFromSystem), buildLightMaterialDataForGetUniformData(getEmissionColorArr3, getSpecularColorArr3, getLightModel, getShininess, drawDataMap.LightMaterialDataFromSystem));\r\n};\r\n","import { InitShaderDataMap } from \"../../../../type/utilsType\";\r\nimport curry from \"wonder-lodash/curry\";\r\nimport { Map } from \"immutable\";\r\nimport { IShaderLibGenerator } from \"../../../../data/shaderLib_generator_interface\";\r\nimport { IMaterialConfig } from \"../../../../data/material_config_interface\";\r\nimport { IRenderConfig } from \"../../../../worker/both_file/data/render_config\";\r\nimport {\r\n    render as renderDefer, init as initUtils,\r\n    buildSendUniformDataDataMap\r\n} from \"../../../utils/worker/render_file/render/light/defer/deferShadingUtils\";\r\nimport { use } from \"../../../../shader/ShaderSystem\";\r\nimport {\r\n    getIndexType, getIndexTypeSize, getIndicesCount, getVerticesCount,\r\n    hasIndices\r\n} from \"../../../../../component/geometry/GeometrySystem\";\r\nimport { bindAndUpdate, getMapCount} from \"../../../../texture/MapManagerSystem\";\r\nimport {\r\n    getColorArr3 as getAmbientLightColorArr3,\r\n    isColorDirty as isAmbientLightColorDirty,\r\n    cleanColorDirty as cleanAmbientLightColorDirty\r\n} from \"../../../../../component/light/AmbientLightSystem\";\r\nimport {\r\n    getColorArr3 as getDirectionLightColorArr3, getIntensity as getDirectionLightIntensity,\r\n    getPosition as getDirectionLightPosition, isPositionDirty as isDirectionLightPositionDirty, isColorDirty as isDirectionLightColorDirty, isIntensityDirty as isDirectionLightIntensityDirty, cleanPositionDirty as cleanDirectionLightPositionDirty, cleanColorDirty as cleanDirectionLightColorDirty, cleanIntensityDirty as cleanDirectionLightIntensityDirty,\r\n} from \"../../../../../component/light/DirectionLightSystem\";\r\nimport {\r\n    getPosition as getPointLightPosition,\r\n    getColorArr3 as getPointLightColorArr3, getConstant,\r\n    getIntensity as getPointLightIntensity, getLinear, getQuadratic, getRange, isColorDirty, isPositionDirty,\r\n    isIntensityDirty, isAttenuationDirty, cleanColorDirty, cleanIntensityDirty, cleanAttenuationDirty,\r\n    cleanPositionDirty\r\n} from \"../../../../../component/light/PointLightSystem\";\r\nimport { sendFloat1, sendFloat3, sendMatrix4, sendVector3, sendInt, sendMatrix3 } from \"../../../../shader/glslSender/GLSLSenderSystem\";\r\nimport { useShader } from \"../../../../../component/material/MaterialSystem\";\r\nimport { bindGBuffer, getNewTextureUnitIndex, unbindGBuffer } from \"../../../utils/worker/render_file/render/light/defer/gbuffer/gBufferUtils\";\r\nimport { computeRadius } from \"../../../light/PointLightSystem\";\r\nimport { LightRenderCommandBufferForDrawData } from \"../../../../utils/worker/render_file/type/dataType\";\r\nimport { sendUniformData } from \"../LightRenderSystem\";\r\nimport { directlySendUniformData } from \"../../../../utils/worker/render_file/render/renderUtils\";\r\nimport { sendAttributeData } from \"../../RenderSystem\";\r\nimport { buildDrawFuncDataMap } from \"../../../utils/worker/render_file/draw/light/defer/deferDrawRenderCommandBufferUtils\";\r\nimport { CameraRenderCommandBufferForDrawData } from \"../../../../utils/worker/render_file/type/dataType\";\r\nimport { IWebGL2DrawDataMap } from \"../../../utils/worker/render_file/interface/IUtils\";\r\nimport { DeferDrawDataMap } from \"../../../utils/worker/render_file/type/utilsType\";\r\nimport { getStartTextureIndex } from \"../../../../utils/worker/render_file/texture/mapManagerUtils\";\r\n\r\nexport const init = initUtils;\r\n\r\nexport const render = curry((ThreeDTransformData: any, GameObjectData: any, gl: any, state: Map<any, any>, render_config: IRenderConfig, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, DataBufferConfig: any, initMaterialShader: Function, drawDataMap: IWebGL2DrawDataMap, deferDrawDataMap: DeferDrawDataMap, initShaderDataMap: InitShaderDataMap, bufferData: LightRenderCommandBufferForDrawData, cameraData: CameraRenderCommandBufferForDrawData) => {\r\n    renderDefer(gl, state, render_config, material_config, shaderLib_generator, DataBufferConfig, initMaterialShader, buildDrawFuncDataMap(sendAttributeData, sendUniformData, directlySendUniformData, use, hasIndices, getIndicesCount, getIndexType, getIndexTypeSize, getVerticesCount, bindAndUpdate, getMapCount, getStartTextureIndex, useShader, bindGBuffer, unbindGBuffer, getNewTextureUnitIndex), drawDataMap, deferDrawDataMap, buildSendUniformDataDataMap(\r\n        sendFloat1, sendFloat3, sendMatrix4, sendVector3, sendInt, sendMatrix3,\r\n        getAmbientLightColorArr3, isAmbientLightColorDirty, cleanAmbientLightColorDirty,\r\n        (index: number, DirectionDataFromSystem: any) => {\r\n            return getDirectionLightPosition(index, ThreeDTransformData, GameObjectData, DirectionDataFromSystem).values;\r\n        }, getDirectionLightColorArr3, getDirectionLightIntensity, isDirectionLightPositionDirty, isDirectionLightColorDirty, isDirectionLightIntensityDirty, cleanDirectionLightPositionDirty, cleanDirectionLightColorDirty, cleanDirectionLightIntensityDirty,\r\n        (index: number, PointLightDataFromSystem: any) => {\r\n            return getPointLightPosition(index, ThreeDTransformData, GameObjectData, PointLightDataFromSystem).values;\r\n        }, getPointLightColorArr3, getConstant, getPointLightIntensity, getLinear, getQuadratic, getRange, computeRadius, isPositionDirty, isColorDirty, isIntensityDirty, isAttenuationDirty, cleanPositionDirty, cleanColorDirty, cleanIntensityDirty, cleanAttenuationDirty,\r\n        drawDataMap\r\n    ), initShaderDataMap, bufferData, cameraData);\r\n})\r\n","import {\r\n    init as initUtils, render as renderUtils,\r\n    sendAttributeData as sendAttributeDataUtils\r\n} from \"../utils/worker/render_file/render/renderUtils\";\r\nimport curry from \"wonder-lodash/curry\";\r\nimport { IRenderConfig } from \"../../worker/both_file/data/render_config\";\r\nimport { getGL } from \"../../device/DeviceManagerSystem\";\r\nimport { Map } from \"immutable\";\r\nimport { InitShaderDataMap } from \"../../type/utilsType\";\r\nimport { IMaterialConfig } from \"../../data/material_config_interface\";\r\nimport { IShaderLibGenerator } from \"../../data/shaderLib_generator_interface\";\r\nimport { render as basicRender } from \"./basic/BasicRenderSystem\";\r\nimport { render as deferRender } from \"./light/defer/DeferShadingSystem\";\r\nimport { RenderCommandBufferForDrawData } from \"../../utils/worker/render_file/type/dataType\";\r\nimport { IWebGL2DrawDataMap } from \"../utils/worker/render_file/interface/IUtils\";\r\nimport { DeferDrawDataMap } from \"../utils/worker/render_file/type/utilsType\";\r\n\r\nexport const init = initUtils;\r\n\r\nexport const render = curry((state: Map<any, any>, render_config: IRenderConfig, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, DataBufferConfig: any, initMaterialShader: Function, drawDataMap: IWebGL2DrawDataMap, deferDrawDataMap: DeferDrawDataMap, initShaderDataMap: InitShaderDataMap, ThreeDTransformData: any, GameObjectData: any, renderCommandBufferForDrawData: RenderCommandBufferForDrawData) => {\r\n    var {\r\n            DeviceManagerDataFromSystem\r\n        } = drawDataMap,\r\n        gl = getGL(DeviceManagerDataFromSystem, state);\r\n\r\n    renderUtils(gl, state, render_config, material_config, shaderLib_generator, DataBufferConfig, initMaterialShader, basicRender, deferRender(ThreeDTransformData, GameObjectData), drawDataMap, deferDrawDataMap, initShaderDataMap, renderCommandBufferForDrawData);\r\n\r\n    return state;\r\n})\r\n\r\nexport const sendAttributeData = (gl: WebGLRenderingContext, shaderIndex: number, geometryIndex: number, ProgramData: any, GLSLSenderData: any, GeometryData: any, VaoData: any) => sendAttributeDataUtils(gl, shaderIndex, geometryIndex, ProgramData, GLSLSenderData, GeometryData, VaoData);\r\n\r\n\r\n","import { isBufferExist } from \"./bufferUtils\";\r\n\r\nexport const getOrCreateBuffer = (gl: WebGLRenderingContext, geometryIndex: number, buffers: Array<WebGLBuffer>, getDatas: Function, GeometryDataFromSystem: any) => {\r\n    var buffer = buffers[geometryIndex];\r\n\r\n    if (isBufferExist(buffer)) {\r\n        return buffer;\r\n    }\r\n\r\n    buffer = gl.createBuffer();\r\n\r\n    buffers[geometryIndex] = buffer;\r\n\r\n    _initBuffer(gl, getDatas(geometryIndex, GeometryDataFromSystem), buffer);\r\n\r\n    return buffer;\r\n}\r\n\r\nconst _initBuffer =(gl: WebGLRenderingContext, data: Float32Array, buffer: WebGLBuffer) => {\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\r\n\r\n    gl.bufferData(gl.ARRAY_BUFFER, data, gl.STATIC_DRAW);\r\n\r\n    _resetBindedBuffer(gl);\r\n}\r\n\r\nconst _resetBindedBuffer =(gl: WebGLRenderingContext) => {\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\r\n}\r\n\r\nexport const initData = (ArrayBufferDataFromSystemFromSystem: any) => {\r\n    ArrayBufferDataFromSystemFromSystem.vertexBuffers = [];\r\n    ArrayBufferDataFromSystemFromSystem.normalBuffers = [];\r\n    ArrayBufferDataFromSystemFromSystem.texCoordBuffers = [];\r\n}\r\n","import { GetArrayBufferDataFuncMap } from \"../../../../../../definition/type/geometryType\";\r\nimport { getOrCreateBuffer } from \"../../../../../utils/buffer/arrayBufferUtils\";\r\nimport { Log } from \"../../../../../../utils/Log\";\r\nimport { getExtensionVao } from \"../device/gpuDetectUtils\";\r\nimport { bindVao, createAndInitVao } from \"../shader/shaderUtils\";\r\nimport { hasExtension } from \"../../../../../utils/device/gpuDetectUtils\";\r\nimport { getVao, isVaoExist } from \"../../../../../utils/worker/render_file/shader/shaderUtils\";\r\n\r\nexport const sendAttributeData = (gl: WebGLRenderingContext, shaderIndex: number, program: WebGLProgram, geometryIndex: number, getArrayBufferDataFuncMap: GetArrayBufferDataFuncMap, getAttribLocation: Function, isAttributeLocationNotExist: Function, sendBuffer: Function, ProgramDataFromSystem: any, LocationDataFromSystem: any, GLSLSenderDataFromSystem: any, GeometryDataFromSystem: any, ArrayBufferDataFromSystem: any, GPUDetectDataFromSystem: any, VaoDataFromSystem: any) => {\r\n    var vaoExtension = getExtensionVao(GPUDetectDataFromSystem);\r\n\r\n    if (hasExtension(vaoExtension)) {\r\n        _bindVao(gl, vaoExtension, shaderIndex, geometryIndex, ProgramDataFromSystem, GLSLSenderDataFromSystem, GeometryDataFromSystem, VaoDataFromSystem);\r\n    }\r\n    else {\r\n        _sendVbo(gl, shaderIndex, program, geometryIndex, getArrayBufferDataFuncMap, getAttribLocation, isAttributeLocationNotExist, sendBuffer, ProgramDataFromSystem, LocationDataFromSystem, GLSLSenderDataFromSystem, GeometryDataFromSystem, ArrayBufferDataFromSystem);\r\n    }\r\n}\r\n\r\nconst _sendVbo =(gl: WebGLRenderingContext, shaderIndex: number, program: WebGLProgram, geometryIndex: number, getArrayBufferDataFuncMap: GetArrayBufferDataFuncMap, getAttribLocation: Function, isAttributeLocationNotExist: Function, sendBuffer: Function, ProgramDataFromSystem: any, LocationDataFromSystem: any, GLSLSenderDataFromSystem: any, GeometryDataFromSystem: any, ArrayBufferDataFromSystem: any) => {\r\n    var sendDataArr = GLSLSenderDataFromSystem.sendAttributeConfigMap[shaderIndex],\r\n        attributeLocationMap = LocationDataFromSystem.attributeLocationMap[shaderIndex],\r\n        lastBindedArrayBuffer = ProgramDataFromSystem.lastBindedArrayBuffer;\r\n\r\n    for (let sendData of sendDataArr) {\r\n        let bufferName = sendData.buffer,\r\n            buffer = _getOrCreateArrayBuffer(gl, geometryIndex, bufferName, getArrayBufferDataFuncMap, GeometryDataFromSystem, ArrayBufferDataFromSystem),\r\n            pos: number = null;\r\n\r\n        if (lastBindedArrayBuffer === buffer) {\r\n            continue;\r\n        }\r\n\r\n        pos = getAttribLocation(gl, program, sendData.name, attributeLocationMap);\r\n\r\n        if (isAttributeLocationNotExist(pos)) {\r\n            continue;\r\n        }\r\n\r\n        lastBindedArrayBuffer = buffer;\r\n\r\n        sendBuffer(gl, sendData.type, pos, buffer, geometryIndex, GLSLSenderDataFromSystem, ArrayBufferDataFromSystem);\r\n    }\r\n\r\n    ProgramDataFromSystem.lastBindedArrayBuffer = lastBindedArrayBuffer;\r\n}\r\n\r\nconst _getOrCreateArrayBuffer =(gl: WebGLRenderingContext, geometryIndex: number, bufferName: string, {\r\n    getVertices,\r\n    getNormals,\r\n    getTexCoords\r\n}, GeometryDataFromSystem: any, ArrayBufferDataFromSystem: any) => {\r\n    var buffer: WebGLBuffer = null;\r\n\r\n    switch (bufferName) {\r\n        case \"vertex\":\r\n            buffer = getOrCreateBuffer(gl, geometryIndex, ArrayBufferDataFromSystem.vertexBuffers, getVertices, GeometryDataFromSystem);\r\n            break;\r\n        case \"normal\":\r\n            buffer = getOrCreateBuffer(gl, geometryIndex, ArrayBufferDataFromSystem.normalBuffers, getNormals, GeometryDataFromSystem);\r\n            break;\r\n        case \"texCoord\":\r\n            buffer = getOrCreateBuffer(gl, geometryIndex, ArrayBufferDataFromSystem.texCoordBuffers, getTexCoords, GeometryDataFromSystem);\r\n            break;\r\n        default:\r\n            Log.error(true, Log.info.FUNC_INVALID(`bufferName:${bufferName}`));\r\n            break;\r\n    }\r\n\r\n    return buffer;\r\n}\r\n\r\nexport const buildDrawDataMap = (DeviceManagerDataFromSystem: any, TextureDataFromSystem: any, TextureCacheDataFromSystem: any, MapManagerDataFromSystem: any, MaterialDataFromSystem: any, BasicMaterialDataFromSystem: any, LightMaterialDataFromSystem: any, AmbientLightDataFromSystem, DirectionLightDataFromSystem: any, PointLightDataFromSystem: any, ProgramDataFromSystem: any, LocationDataFromSystem: any, GLSLSenderDataFromSystem: any, GeometryDataFromSystem: any, ArrayBufferDataFromSystem: any, IndexBufferDataFromSystem: any, BasicDrawRenderCommandBufferDataFromSystem: any, LightDrawRenderCommandBufferDataFromSystem: any) => {\r\n    return {\r\n        DeviceManagerDataFromSystem: DeviceManagerDataFromSystem,\r\n        TextureDataFromSystem: TextureDataFromSystem,\r\n        TextureCacheDataFromSystem: TextureCacheDataFromSystem,\r\n        MapManagerDataFromSystem: MapManagerDataFromSystem,\r\n        MaterialDataFromSystem: MaterialDataFromSystem,\r\n        BasicMaterialDataFromSystem: BasicMaterialDataFromSystem,\r\n        LightMaterialDataFromSystem: LightMaterialDataFromSystem,\r\n        AmbientLightDataFromSystem: AmbientLightDataFromSystem,\r\n        DirectionLightDataFromSystem: DirectionLightDataFromSystem,\r\n        PointLightDataFromSystem: PointLightDataFromSystem,\r\n        ProgramDataFromSystem: ProgramDataFromSystem,\r\n        LocationDataFromSystem: LocationDataFromSystem,\r\n        GLSLSenderDataFromSystem: GLSLSenderDataFromSystem,\r\n        GeometryDataFromSystem: GeometryDataFromSystem,\r\n        ArrayBufferDataFromSystem: ArrayBufferDataFromSystem,\r\n        IndexBufferDataFromSystem: IndexBufferDataFromSystem,\r\n        BasicDrawRenderCommandBufferDataFromSystem: BasicDrawRenderCommandBufferDataFromSystem,\r\n        LightDrawRenderCommandBufferDataFromSystem: LightDrawRenderCommandBufferDataFromSystem\r\n    }\r\n}\r\n\r\nconst _bindVao =(gl: WebGLRenderingContext, extension: any, shaderIndex: number, geometryIndex: number, ProgramDataFromSystem: any, GLSLSenderDataFromSystem: any, GeometryDataFromSystem: any, {\r\n    vaoMap,\r\n    vboArrayMap\r\n}) => {\r\n    var vaoConfigData = GLSLSenderDataFromSystem.vaoConfigMap[shaderIndex],\r\n        vao = getVao(geometryIndex, vaoMap);\r\n\r\n    if (!isVaoExist(vao)) {\r\n        vao = createAndInitVao(gl, extension, geometryIndex, vaoMap, vboArrayMap, vaoConfigData, GeometryDataFromSystem);\r\n    }\r\n\r\n    bindVao(extension, vao, ProgramDataFromSystem);\r\n}\r\n","import {\r\n    drawArray, drawElements,\r\n    updateSendMatrixFloat32ArrayData\r\n} from \"../../../../../utils/draw/drawRenderCommandBufferUtils\";\r\nimport { IShaderLibGenerator } from \"../../../../../data/shaderLib_generator_interface\";\r\nimport { IMaterialConfig } from \"../../../../../data/material_config_interface\";\r\nimport { IWebGL1DrawFuncDataMap } from \"../../../../interface/IDraw\";\r\nimport { InitShaderDataMap } from \"../../../../../type/utilsType\";\r\nimport { BasicRenderUniformData, LightRenderUniformData } from \"../../../../../type/dataType\";\r\nimport { EDrawMode } from \"../../../../../enum/EDrawMode\";\r\nimport { sendData } from \"../../../../../utils/worker/render_file/texture/mapManagerUtils\";\r\nimport { Map } from \"immutable\";\r\nimport { hasExtension } from \"../../../../../utils/device/gpuDetectUtils\";\r\nimport { getExtensionVao } from \"../device/gpuDetectUtils\";\r\nimport {\r\n    IWebGL1BasicSendUniformDataDataMap, IWebGL1DrawDataMap,\r\n    IWebGL1LightSendUniformDataDataMap\r\n} from \"../interface/IUtils\";\r\n\r\nexport const buildDrawFuncDataMap = (bindIndexBuffer: Function, sendAttributeData: Function, sendUniformData: Function, directlySendUniformData: Function, use: Function, hasIndices: Function, getIndicesCount: Function, getIndexType: Function, getIndexTypeSize: Function, getVerticesCount: Function, bindAndUpdate: Function, getMapCount: Function, getStartTextureIndex: Function, useShader: Function) => {\r\n    return {\r\n        bindIndexBuffer: bindIndexBuffer,\r\n        sendAttributeData: sendAttributeData,\r\n        sendUniformData: sendUniformData,\r\n        directlySendUniformData: directlySendUniformData,\r\n        use: use,\r\n        hasIndices: hasIndices,\r\n        getIndicesCount: getIndicesCount,\r\n        getIndexType: getIndexType,\r\n        getIndexTypeSize: getIndexTypeSize,\r\n        getVerticesCount: getVerticesCount,\r\n        bindAndUpdate: bindAndUpdate,\r\n        getMapCount: getMapCount,\r\n        getStartTextureIndex: getStartTextureIndex,\r\n        useShader: useShader\r\n    }\r\n}\r\n\r\nexport const drawGameObjects = (gl: any, state: Map<any, any>, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, DataBufferConfig: any, definedStartTextureUnitIndex: number, useShaderName: string, initMaterialShader: Function, drawFuncDataMap: IWebGL1DrawFuncDataMap, drawDataMap: IWebGL1DrawDataMap, initShaderDataMap: InitShaderDataMap, sendDataMap: IWebGL1BasicSendUniformDataDataMap | IWebGL1LightSendUniformDataDataMap, renderCommandUniformData: BasicRenderUniformData | LightRenderUniformData, {\r\n    renderCommandBufferData: {\r\n        mMatrices,\r\n    materialIndices,\r\n    geometryIndices\r\n    },\r\n    count\r\n}) => {\r\n    var {\r\n            TextureDataFromSystem,\r\n        TextureCacheDataFromSystem,\r\n        MapManagerDataFromSystem,\r\n        ProgramDataFromSystem,\r\n        LocationDataFromSystem,\r\n        GLSLSenderDataFromSystem,\r\n        GeometryDataFromSystem,\r\n        ArrayBufferDataFromSystem,\r\n        IndexBufferDataFromSystem\r\n        } = drawDataMap,\r\n        {\r\n            bindIndexBuffer,\r\n            sendAttributeData,\r\n            sendUniformData,\r\n            directlySendUniformData,\r\n            use,\r\n            hasIndices,\r\n            getIndicesCount,\r\n            getIndexType,\r\n            getIndexTypeSize,\r\n            getVerticesCount,\r\n            getMapCount,\r\n            getStartTextureIndex,\r\n            bindAndUpdate,\r\n            useShader\r\n        } = drawFuncDataMap,\r\n        {\r\n            GPUDetectDataFromSystem,\r\n            VaoDataFromSystem\r\n        } = initShaderDataMap,\r\n        mMatrixFloatArrayForSend = renderCommandUniformData.mMatrix,\r\n        program: WebGLProgram = null;\r\n\r\n    for (let i = 0; i < count; i++) {\r\n        let matStartIndex = 16 * i,\r\n            matEndIndex = matStartIndex + 16,\r\n            geometryIndex = geometryIndices[i],\r\n            materialIndex = materialIndices[i],\r\n            mapCount = getMapCount(materialIndex, MapManagerDataFromSystem),\r\n            startTextureUnitIndex = getStartTextureIndex(materialIndex),\r\n            drawMode = EDrawMode.TRIANGLES;\r\n\r\n        let shaderIndex = useShader(materialIndex, useShaderName, state, material_config, shaderLib_generator, initMaterialShader, initShaderDataMap);\r\n\r\n        program = use(gl, shaderIndex, ProgramDataFromSystem, LocationDataFromSystem, GLSLSenderDataFromSystem);\r\n\r\n        sendAttributeData(gl, shaderIndex, program, geometryIndex, ProgramDataFromSystem, LocationDataFromSystem, GLSLSenderDataFromSystem, GeometryDataFromSystem, ArrayBufferDataFromSystem, GPUDetectDataFromSystem, VaoDataFromSystem);\r\n\r\n        updateSendMatrixFloat32ArrayData(mMatrices, matStartIndex, matEndIndex, mMatrixFloatArrayForSend);\r\n\r\n        let uniformLocationMap = LocationDataFromSystem.uniformLocationMap[shaderIndex],\r\n            uniformCacheMap = GLSLSenderDataFromSystem.uniformCacheMap;\r\n\r\n        sendUniformData(gl, materialIndex, shaderIndex, program, drawDataMap, renderCommandUniformData, sendDataMap, uniformLocationMap, uniformCacheMap);\r\n\r\n        bindAndUpdate(gl, mapCount, startTextureUnitIndex, definedStartTextureUnitIndex, TextureCacheDataFromSystem, TextureDataFromSystem, MapManagerDataFromSystem, GPUDetectDataFromSystem);\r\n\r\n        sendData(gl, mapCount, startTextureUnitIndex, definedStartTextureUnitIndex, shaderIndex, program, sendDataMap.glslSenderData, uniformLocationMap, uniformCacheMap, directlySendUniformData, TextureDataFromSystem, MapManagerDataFromSystem);\r\n\r\n        if (hasIndices(geometryIndex, GeometryDataFromSystem)) {\r\n            if (!hasExtension(getExtensionVao(GPUDetectDataFromSystem))) {\r\n                bindIndexBuffer(gl, geometryIndex, ProgramDataFromSystem, GeometryDataFromSystem, IndexBufferDataFromSystem);\r\n            }\r\n\r\n            drawElements(gl, geometryIndex, drawMode, getIndicesCount, getIndexType, getIndexTypeSize, GeometryDataFromSystem);\r\n        }\r\n        else {\r\n            drawArray(gl, geometryIndex, drawMode, getVerticesCount, GeometryDataFromSystem);\r\n        }\r\n    }\r\n}\r\n","import { LightRenderCommandBufferForDrawData } from \"../../../../../utils/worker/render_file/type/dataType\";\r\nimport { InitShaderDataMap } from \"../../../../../type/utilsType\";\r\nimport { Map } from \"immutable\";\r\nimport { IShaderLibGenerator } from \"../../../../../data/shaderLib_generator_interface\";\r\nimport { IMaterialConfig } from \"../../../../../data/material_config_interface\";\r\nimport { IRenderConfig } from \"../../../../../worker/both_file/data/render_config\";\r\nimport { IWebGL1DrawFuncDataMap } from \"../../../../interface/IDraw\";\r\nimport { buildRenderCommandUniformData } from \"../../../../../utils/draw/light/lightDrawRenderCommandBufferUtils\";\r\nimport { drawGameObjects } from \"../../../worker/render_file/draw/drawRenderCommandBufferUtils\";\r\nimport { IWebGL1DrawDataMap, IWebGL1LightSendUniformDataDataMap } from \"../../../worker/render_file/interface/IUtils\";\r\n\r\nexport const draw = (gl: any, state: Map<any, any>, render_config: IRenderConfig, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, DataBufferConfig: any, initMaterialShader: Function, drawFuncDataMap: IWebGL1DrawFuncDataMap, drawDataMap: IWebGL1DrawDataMap, sendDataMap: IWebGL1LightSendUniformDataDataMap, initShaderDataMap: InitShaderDataMap, bufferData: LightRenderCommandBufferForDrawData, {\r\n    vMatrix,\r\n    pMatrix,\r\n    cameraPosition,\r\n    normalMatrix\r\n}) => {\r\n    var {\r\n            LightDrawRenderCommandBufferDataFromSystem\r\n        } = drawDataMap,\r\n        {\r\n            mMatrixFloatArrayForSend\r\n        } = LightDrawRenderCommandBufferDataFromSystem;\r\n\r\n    drawGameObjects(gl, state, material_config, shaderLib_generator, DataBufferConfig, 0, \"FrontRenderLight\", initMaterialShader, drawFuncDataMap, drawDataMap, initShaderDataMap, sendDataMap, buildRenderCommandUniformData(mMatrixFloatArrayForSend, vMatrix, pMatrix, cameraPosition, normalMatrix), bufferData);\r\n\r\n    return state;\r\n};\r\n","import { InitShaderDataMap } from \"../../../../../../../type/utilsType\";\r\nimport { Map } from \"immutable\";\r\nimport { IShaderLibGenerator } from \"../../../../../../../data/shaderLib_generator_interface\";\r\nimport { IMaterialConfig } from \"../../../../../../../data/material_config_interface\";\r\nimport { IRenderConfig } from \"../../../../../../../worker/both_file/data/render_config\";\r\nimport { draw as drawFront } from \"../../../../../draw/light/front/frontDrawRenderCommandBufferUtils\";\r\nimport { IWebGL1DrawFuncDataMap } from \"../../../../../../interface/IDraw\";\r\nimport {\r\n    LightRenderCommandBufferForDrawData\r\n} from \"../../../../../../../utils/worker/render_file/type/dataType\";\r\nimport { CameraRenderCommandBufferForDrawData } from \"../../../../../../../utils/worker/render_file/type/dataType\";\r\nimport { IWebGL1DrawDataMap, IWebGL1LightSendUniformDataDataMap } from \"../../../interface/IUtils\";\r\n\r\nexport const render = (gl: any, state: Map<any, any>, render_config: IRenderConfig, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, DataBufferConfig: any, initMaterialShader: Function, drawFuncDataMap: IWebGL1DrawFuncDataMap, drawDataMap: IWebGL1DrawDataMap, sendDataMap: IWebGL1LightSendUniformDataDataMap, initShaderDataMap: InitShaderDataMap, bufferData: LightRenderCommandBufferForDrawData, cameraData: CameraRenderCommandBufferForDrawData) => {\r\n    drawFront(gl, state, render_config, material_config, shaderLib_generator, DataBufferConfig, initMaterialShader, drawFuncDataMap, drawDataMap, sendDataMap, initShaderDataMap, bufferData, cameraData);\r\n}\r\n\r\nexport const buildSendUniformDataDataMap = (\r\n    sendFloat1, sendFloat3, sendMatrix4, sendVector3, sendInt, sendMatrix3,\r\n    getAmbientLightColorArr3, isAmbientLightColorDirty, cleanAmbientLightColorDirty,\r\n    getDirectionLightPosition, getDirectionLightColorArr3, getDirectionLightIntensity, isDirectionLightPositionDirty, isDirectionLightColorDirty, isDirectionLightIntensityDirty, cleanDirectionLightPositionDirty, cleanDirectionLightColorDirty, cleanDirectionLightIntensityDirty,\r\n    getPointLightPosition, getPointLightColorArr3, getConstant, getPointLightIntensity, getLinear, getQuadratic, getRange, isPointLightPositionDirty, isPointLightColorDirty, isPointLightIntensityDirty, isPointLightAttenuationDirty, cleanPointLightPositionDirty, cleanPointLightColorDirty, cleanPointLightIntensityDirty, cleanPointLightAttenuationDirty,\r\n\r\n    drawDataMap: IWebGL1DrawDataMap\r\n) => {\r\n    return {\r\n        glslSenderData: {\r\n            sendMatrix3: sendMatrix3,\r\n            sendMatrix4: sendMatrix4,\r\n            sendVector3: sendVector3,\r\n            sendInt: sendInt,\r\n            sendFloat1: sendFloat1,\r\n            sendFloat3: sendFloat3,\r\n\r\n            GLSLSenderDataFromSystem: drawDataMap.GLSLSenderDataFromSystem\r\n        },\r\n        ambientLightData: {\r\n            getColorArr3: getAmbientLightColorArr3,\r\n\r\n            isColorDirty: isAmbientLightColorDirty,\r\n            cleanColorDirty: cleanAmbientLightColorDirty,\r\n\r\n            AmbientLightDataFromSystem: drawDataMap.AmbientLightDataFromSystem\r\n        },\r\n        directionLightData: {\r\n            getPosition: getDirectionLightPosition,\r\n            getColorArr3: getDirectionLightColorArr3,\r\n            getIntensity: getDirectionLightIntensity,\r\n\r\n            isPositionDirty: isDirectionLightPositionDirty,\r\n            isColorDirty: isDirectionLightColorDirty,\r\n            isIntensityDirty: isDirectionLightIntensityDirty,\r\n            cleanPositionDirty: cleanDirectionLightPositionDirty,\r\n            cleanColorDirty: cleanDirectionLightColorDirty,\r\n            cleanIntensityDirty: cleanDirectionLightIntensityDirty,\r\n\r\n            DirectionLightDataFromSystem: drawDataMap.DirectionLightDataFromSystem\r\n        },\r\n        pointLightData: {\r\n            getPosition: getPointLightPosition,\r\n            getColorArr3: getPointLightColorArr3,\r\n            getIntensity: getPointLightIntensity,\r\n            getConstant: getConstant,\r\n            getLinear: getLinear,\r\n            getQuadratic: getQuadratic,\r\n            getRange: getRange,\r\n\r\n            isPositionDirty: isPointLightPositionDirty,\r\n            isColorDirty: isPointLightColorDirty,\r\n            isIntensityDirty: isPointLightIntensityDirty,\r\n            isAttenuationDirty: isPointLightAttenuationDirty,\r\n            cleanPositionDirty: cleanPointLightPositionDirty,\r\n            cleanColorDirty: cleanPointLightColorDirty,\r\n            cleanIntensityDirty: cleanPointLightIntensityDirty,\r\n            cleanAttenuationDirty: cleanPointLightAttenuationDirty,\r\n\r\n            PointLightDataFromSystem: drawDataMap.PointLightDataFromSystem\r\n        }\r\n    }\r\n}\r\n","import { LightRenderUniformData, UniformCacheMap, UniformLocationMap } from \"../../../type/dataType\";\r\nimport { getColorArr3, getOpacity } from \"../../../../component/material/MaterialSystem\";\r\nimport {\r\n    getEmissionColorArr3, getLightModel, getShininess,\r\n    getSpecularColorArr3\r\n} from \"../../../../component/material/LightMaterialSystem\";\r\nimport {\r\n    IWebGL1DrawDataMap,\r\n    IWebGL1LightSendUniformDataDataMap\r\n} from \"../../utils/worker/render_file/interface/IUtils\";\r\nimport {\r\n    buildLightMaterialDataForGetUniformData,\r\n    buildMaterialDataForGetUniformData,\r\n    sendUniformData as sendUniformDataUtils\r\n} from \"../../../utils/worker/render_file/render/light/lightRenderUtils\";\r\n\r\nexport const sendUniformData = (gl: any, materialIndex: number, shaderIndex: number, program: WebGLProgram, drawDataMap: IWebGL1DrawDataMap, renderCommandUniformData: LightRenderUniformData, sendDataMap: IWebGL1LightSendUniformDataDataMap, uniformLocationMap: UniformLocationMap, uniformCacheMap: UniformCacheMap) => {\r\n    sendUniformDataUtils(gl, materialIndex, shaderIndex, program, drawDataMap, renderCommandUniformData, sendDataMap, uniformLocationMap, uniformCacheMap, buildMaterialDataForGetUniformData(getColorArr3, getOpacity, drawDataMap.MaterialDataFromSystem), buildLightMaterialDataForGetUniformData(getEmissionColorArr3, getSpecularColorArr3, getLightModel, getShininess, drawDataMap.LightMaterialDataFromSystem));\r\n};\r\n","import { InitShaderDataMap } from \"../../../../type/utilsType\";\r\nimport curry from \"wonder-lodash/curry\";\r\nimport { Map } from \"immutable\";\r\nimport { IShaderLibGenerator } from \"../../../../data/shaderLib_generator_interface\";\r\nimport { IMaterialConfig } from \"../../../../data/material_config_interface\";\r\nimport { IRenderConfig } from \"../../../../worker/both_file/data/render_config\";\r\nimport {\r\n    buildSendUniformDataDataMap,\r\n    render as renderFront\r\n} from \"../../../utils/worker/render_file/render/light/front/frontRenderUtils\";\r\nimport { use } from \"../../../../shader/ShaderSystem\";\r\nimport {\r\n    getIndexType, getIndexTypeSize, getIndicesCount, getVerticesCount,\r\n    hasIndices\r\n} from \"../../../../../component/geometry/GeometrySystem\";\r\nimport { bindAndUpdate, getMapCount} from \"../../../../texture/MapManagerSystem\";\r\nimport {\r\n    cleanColorDirty as cleanAmbientLightColorDirty,\r\n    getColorArr3 as getAmbientLightColorArr3,\r\n    isColorDirty as isAmbientLightColorDirty\r\n} from \"../../../../../component/light/AmbientLightSystem\";\r\nimport {\r\n    cleanColorDirty as cleanDirectionLightColorDirty, cleanIntensityDirty as cleanDirectionLightIntensityDirty,\r\n    cleanPositionDirty as cleanDirectionLightPositionDirty,\r\n    getColorArr3 as getDirectionLightColorArr3, getIntensity as getDirectionLightIntensity,\r\n    getPosition as getDirectionLightPosition, isColorDirty as isDirectionLightColorDirty, isIntensityDirty as isDirectionLightIntensityDirty, isPositionDirty as isDirectionLightPositionDirty\r\n} from \"../../../../../component/light/DirectionLightSystem\";\r\nimport {\r\n    getPosition as getPointLightPosition,\r\n    getColorArr3 as getPointLightColorArr3, getConstant,\r\n    getIntensity as getPointLightIntensity, getLinear, getQuadratic, getRange, isPositionDirty as isPointLightPositionDirty, isColorDirty as isPointLightColorDirty,\r\n    isIntensityDirty as isPointLightIntensityDirty, isAttenuationDirty as isPointLightAttenuationDirty, cleanPositionDirty as cleanPointLightPositionDirty, cleanColorDirty as cleanPointLightColorDirty, cleanIntensityDirty as cleanPointLightIntensityDirty,\r\n    cleanAttenuationDirty as cleanPointLightAttenuationDirty\r\n} from \"../../../../../component/light/PointLightSystem\";\r\nimport { sendFloat1, sendFloat3, sendMatrix4, sendVector3, sendInt, sendMatrix3 } from \"../../../../shader/glslSender/GLSLSenderSystem\";\r\nimport { useShader } from \"../../../../../component/material/MaterialSystem\";\r\nimport { buildDrawFuncDataMap } from \"../../../utils/worker/render_file/draw/drawRenderCommandBufferUtils\";\r\nimport { LightRenderCommandBufferForDrawData } from \"../../../../utils/worker/render_file/type/dataType\";\r\nimport { directlySendUniformData } from \"../../../../utils/worker/render_file/render/renderUtils\";\r\nimport { sendUniformData } from \"../LightRenderSystem\";\r\nimport { sendAttributeData } from \"../../RenderSystem\";\r\nimport { CameraRenderCommandBufferForDrawData } from \"../../../../utils/worker/render_file/type/dataType\";\r\nimport { bindIndexBuffer } from \"../../../shader/ShaderSystem\";\r\nimport { IWebGL1DrawDataMap } from \"../../../utils/worker/render_file/interface/IUtils\";\r\nimport { getStartTextureIndex } from \"../../../../utils/worker/render_file/texture/mapManagerUtils\";\r\n\r\nexport const render = curry((gl: any, state: Map<any, any>, render_config: IRenderConfig, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, DataBufferConfig: any, initMaterialShader: Function, drawDataMap: IWebGL1DrawDataMap, initShaderDataMap: InitShaderDataMap, ThreeDTransformData: any, GameObjectData: any, bufferData: LightRenderCommandBufferForDrawData, cameraData: CameraRenderCommandBufferForDrawData) => {\r\n    renderFront(gl, state, render_config, material_config, shaderLib_generator, DataBufferConfig, initMaterialShader, buildDrawFuncDataMap(bindIndexBuffer, sendAttributeData, sendUniformData, directlySendUniformData, use, hasIndices, getIndicesCount, getIndexType, getIndexTypeSize, getVerticesCount, bindAndUpdate, getMapCount, getStartTextureIndex, useShader), drawDataMap, buildSendUniformDataDataMap(\r\n        sendFloat1, sendFloat3, sendMatrix4, sendVector3, sendInt, sendMatrix3,\r\n        getAmbientLightColorArr3, isAmbientLightColorDirty, cleanAmbientLightColorDirty,\r\n\r\n        (index: number, DirectionLightDataFromSystem: any) => {\r\n            return getDirectionLightPosition(index, ThreeDTransformData, GameObjectData, DirectionLightDataFromSystem).values;\r\n        }, getDirectionLightColorArr3, getDirectionLightIntensity, isDirectionLightPositionDirty, isDirectionLightColorDirty, isDirectionLightIntensityDirty, cleanDirectionLightPositionDirty, cleanDirectionLightColorDirty, cleanDirectionLightIntensityDirty,\r\n\r\n        (index: number, PointLightDataFromSystem: any) => {\r\n            return getPointLightPosition(index, ThreeDTransformData, GameObjectData, PointLightDataFromSystem).values;\r\n        }, getPointLightColorArr3, getConstant, getPointLightIntensity, getLinear, getQuadratic, getRange, isPointLightPositionDirty, isPointLightColorDirty, isPointLightIntensityDirty, isPointLightAttenuationDirty, cleanPointLightPositionDirty, cleanPointLightColorDirty, cleanPointLightIntensityDirty, cleanPointLightAttenuationDirty,\r\n        drawDataMap\r\n    ), initShaderDataMap, bufferData, cameraData);\r\n})\r\n","import { InitShaderDataMap } from \"../../../../type/utilsType\";\r\nimport { Map } from \"immutable\";\r\nimport { IShaderLibGenerator } from \"../../../../data/shaderLib_generator_interface\";\r\nimport { IMaterialConfig } from \"../../../../data/material_config_interface\";\r\nimport { IRenderConfig } from \"../../../../worker/both_file/data/render_config\";\r\nimport { IWebGL1DrawFuncDataMap } from \"../../../interface/IDraw\";\r\nimport { BasicRenderCommandBufferForDrawData } from \"../../../../utils/worker/render_file/type/dataType\";\r\nimport { buildRenderCommandUniformData } from \"../../../../utils/draw/basic/basicDrawRenderCommandBufferUtils\";\r\nimport { drawGameObjects } from \"../../worker/render_file/draw/drawRenderCommandBufferUtils\";\r\nimport { IWebGL1BasicSendUniformDataDataMap, IWebGL1DrawDataMap } from \"../../worker/render_file/interface/IUtils\";\r\n\r\nexport const draw = (gl: any, state: Map<any, any>, render_config: IRenderConfig, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, DataBufferConfig: any, initMaterialShader: Function, drawFuncDataMap: IWebGL1DrawFuncDataMap, drawDataMap: IWebGL1DrawDataMap, sendDataMap: IWebGL1BasicSendUniformDataDataMap, initShaderDataMap: InitShaderDataMap, bufferData: BasicRenderCommandBufferForDrawData, {\r\n            vMatrix,\r\n    pMatrix\r\n        }) => {\r\n    var {\r\n            BasicDrawRenderCommandBufferDataFromSystem\r\n        } = drawDataMap,\r\n        {\r\n            mMatrixFloatArrayForSend\r\n        } = BasicDrawRenderCommandBufferDataFromSystem;\r\n\r\n    drawGameObjects(gl, state, material_config, shaderLib_generator, DataBufferConfig, 0, \"BasicRender\", initMaterialShader, drawFuncDataMap, drawDataMap, initShaderDataMap, sendDataMap, buildRenderCommandUniformData(mMatrixFloatArrayForSend, vMatrix, pMatrix), bufferData);\r\n\r\n    return state;\r\n};\r\n","import {\r\n    InitShaderDataMap\r\n} from \"../../../../../../type/utilsType\";\r\nimport { Map } from \"immutable\";\r\nimport { IShaderLibGenerator } from \"../../../../../../data/shaderLib_generator_interface\";\r\nimport { IMaterialConfig } from \"../../../../../../data/material_config_interface\";\r\nimport { IRenderConfig } from \"../../../../../../worker/both_file/data/render_config\";\r\nimport { IWebGL1DrawFuncDataMap } from \"../../../../../interface/IDraw\";\r\nimport { draw as drawBasic } from \"../../../../draw/basic/basicDrawRenderCommandBufferUtils\";\r\nimport {\r\n    BasicRenderCommandBufferForDrawData,\r\n    CameraRenderCommandBufferForDrawData\r\n} from \"../../../../../../utils/worker/render_file/type/dataType\";\r\nimport { IWebGL1BasicSendUniformDataDataMap, IWebGL1DrawDataMap } from \"../../interface/IUtils\";\r\n\r\nexport const render = (gl: any, state: Map<any, any>, render_config: IRenderConfig, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, DataBufferConfig: any, initMaterialShader: Function, drawFuncDataMap: IWebGL1DrawFuncDataMap, drawDataMap: IWebGL1DrawDataMap, sendDataMap: IWebGL1BasicSendUniformDataDataMap, initShaderDataMap: InitShaderDataMap, bufferData: BasicRenderCommandBufferForDrawData, cameraData: CameraRenderCommandBufferForDrawData) => {\r\n    drawBasic(gl, state, render_config, material_config, shaderLib_generator, DataBufferConfig, initMaterialShader, drawFuncDataMap, drawDataMap, sendDataMap, initShaderDataMap, bufferData, cameraData);\r\n}\r\n","import { InitShaderDataMap } from \"../../../type/utilsType\";\r\nimport curry from \"wonder-lodash/curry\";\r\nimport { Map } from \"immutable\";\r\nimport { IShaderLibGenerator } from \"../../../data/shaderLib_generator_interface\";\r\nimport { IMaterialConfig } from \"../../../data/material_config_interface\";\r\nimport { IRenderConfig } from \"../../../worker/both_file/data/render_config\";\r\nimport { use } from \"../../../shader/ShaderSystem\";\r\nimport {\r\n    getIndexType, getIndexTypeSize, getIndicesCount, getVerticesCount,\r\n    hasIndices\r\n} from \"../../../../component/geometry/GeometrySystem\";\r\nimport { bindAndUpdate, getMapCount} from \"../../../texture/MapManagerSystem\";\r\n// import { getColorArr3 as getAmbientLightColorArr3 } from \"../../../component/light/AmbientLightSystem\";\r\n// import {\r\n//     getColorArr3 as getDirectionLightColorArr3, getIntensity as getDirectionLightIntensity,\r\n//     getPosition as getDirectionLightPosition,\r\n// } from \"../../../component/light/DirectionLightSystem\";\r\n// import {\r\n//     getPosition as getPointLightPosition,\r\n//     getColorArr3 as getPointLightColorArr3, getConstant,\r\n//     getIntensity as getPointLightIntensity, getLinear, getQuadratic, getRange\r\n// } from \"../../../component/light/PointLightSystem\";\r\nimport { sendFloat1, sendFloat3, sendMatrix4, sendVector3, sendInt, sendMatrix3 } from \"../../../shader/glslSender/GLSLSenderSystem\";\r\nimport { getColorArr3, getOpacity, useShader } from \"../../../../component/material/MaterialSystem\";\r\nimport { buildDrawFuncDataMap } from \"../../utils/worker/render_file/draw/drawRenderCommandBufferUtils\";\r\nimport {\r\n    BasicRenderUniformData, UniformCacheMap,\r\n    UniformLocationMap\r\n} from \"../../../type/dataType\";\r\n// import { draw as basicDraw } from \"../utils/basic/draw/basicRenderDrawRenderCommandBufferUtils\";\r\nimport {\r\n    render as renderBasic\r\n} from \"../../utils/worker/render_file/render/basic/basicRenderUtils\";\r\nimport { directlySendUniformData } from \"../../../utils/worker/render_file/render/renderUtils\";\r\nimport { sendAttributeData } from \"../RenderSystem\";\r\nimport {\r\n    BasicRenderCommandBufferForDrawData,\r\n    CameraRenderCommandBufferForDrawData\r\n} from \"../../../utils/worker/render_file/type/dataType\";\r\nimport { bindIndexBuffer } from \"../../shader/ShaderSystem\";\r\nimport {\r\n    IWebGL1BasicSendUniformDataDataMap,\r\n    IWebGL1DrawDataMap\r\n} from \"../../utils/worker/render_file/interface/IUtils\";\r\nimport {\r\n    buildBasicMaterialDataForGetUniformData, buildMaterialDataForGetUniformData,\r\n    buildSendUniformDataDataMap, sendUniformData\r\n} from \"../../../utils/worker/render_file/render/basic/basicRenderUtils\";\r\nimport { getStartTextureIndex } from \"../../../utils/worker/render_file/texture/mapManagerUtils\";\r\n\r\nexport const render = curry((gl: any, state: Map<any, any>, render_config: IRenderConfig, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, DataBufferConfig: any, initMaterialShader: Function, drawDataMap: IWebGL1DrawDataMap, initShaderDataMap: InitShaderDataMap, bufferData: BasicRenderCommandBufferForDrawData, cameraData: CameraRenderCommandBufferForDrawData) => {\r\n    renderBasic(gl, state, render_config, material_config, shaderLib_generator, DataBufferConfig, initMaterialShader, buildDrawFuncDataMap(bindIndexBuffer, sendAttributeData, _sendUniformData, directlySendUniformData, use, hasIndices, getIndicesCount, getIndexType, getIndexTypeSize, getVerticesCount, bindAndUpdate, getMapCount, getStartTextureIndex, useShader), drawDataMap, buildSendUniformDataDataMap(\r\n        sendFloat1, sendFloat3, sendMatrix4, sendVector3, sendInt, sendMatrix3,\r\n        // getAmbientLightColorArr3,\r\n        // getDirectionLightColorArr3, getDirectionLightIntensity, getDirectionLightPosition,\r\n        // getPointLightPosition, getPointLightColorArr3, getConstant, getPointLightIntensity, getLinear, getQuadratic, getRange,\r\n        drawDataMap\r\n    ), initShaderDataMap, bufferData, cameraData);\r\n})\r\n\r\nconst _sendUniformData =(gl: WebGLRenderingContext, materialIndex: number, shaderIndex: number, program: WebGLProgram, drawDataMap: IWebGL1DrawDataMap, renderCommandUniformData: BasicRenderUniformData, sendDataMap: IWebGL1BasicSendUniformDataDataMap, uniformLocationMap: UniformLocationMap, uniformCacheMap: UniformCacheMap) => {\r\n    sendUniformData(gl, materialIndex, shaderIndex, program, drawDataMap, renderCommandUniformData, sendDataMap, uniformLocationMap, uniformCacheMap, buildMaterialDataForGetUniformData(getColorArr3, getOpacity, drawDataMap.MaterialDataFromSystem), buildBasicMaterialDataForGetUniformData(drawDataMap.BasicMaterialDataFromSystem));\r\n};\r\n//\r\n// const _buildMaterialDataForGetUniformData =(getColorArr3:Function, getOpacity:Function, MaterialDataFromSystem:any) => {\r\n//     return {\r\n//         getColorArr3: getColorArr3,\r\n//         getOpacity: getOpacity,\r\n//         MaterialDataFromSystem: MaterialDataFromSystem\r\n//     }\r\n// }\r\n//\r\n// const _buildBasicMaterialDataForGetUniformData =(BasicMaterialDataFromSystem:any) => {\r\n//     return {\r\n//         BasicMaterialDataFromSystem: BasicMaterialDataFromSystem\r\n//     }\r\n// }\r\n","import { sendAttributeData as sendAttributeDataUtils } from \"../utils/worker/render_file/render/renderUtils\";\r\nimport { getVertices, getNormals, getTexCoords } from \"../../../component/geometry/GeometrySystem\";\r\nimport { getAttribLocation, isAttributeLocationNotExist } from \"../utils/worker/render_file/shader/location/locationUtils\";\r\nimport { sendBuffer } from \"../../shader/glslSender/GLSLSenderSystem\";\r\nimport curry from \"wonder-lodash/curry\";\r\nimport { IRenderConfig } from \"../../worker/both_file/data/render_config\";\r\nimport { clear, getGL } from \"../../device/DeviceManagerSystem\";\r\nimport { Map } from \"immutable\";\r\nimport { render as frontRender } from \"./light/front/FrontRenderSystem\";\r\nimport { InitShaderDataMap } from \"../../type/utilsType\";\r\nimport { IMaterialConfig } from \"../../data/material_config_interface\";\r\nimport { IShaderLibGenerator } from \"../../data/shaderLib_generator_interface\";\r\nimport { render as basicRender } from \"./basic/BasicRenderSystem\";\r\nimport { IWebGL1DrawDataMap } from \"../utils/worker/render_file/interface/IUtils\";\r\n\r\nexport const render = curry((state: Map<any, any>, render_config: IRenderConfig, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, DataBufferConfig: any, initMaterialShader: Function, drawDataMap: IWebGL1DrawDataMap, initShaderDataMap: InitShaderDataMap, ThreeDTransformData: any, GameObjectData: any, {\r\n    cameraData,\r\n    basicData,\r\n    lightData\r\n}) => {\r\n    var {\r\n            DeviceManagerDataFromSystem\r\n        } = drawDataMap,\r\n        gl = getGL(DeviceManagerDataFromSystem, state);\r\n\r\n    clear(gl, DeviceManagerDataFromSystem);\r\n\r\n    if (basicData.count > 0) {\r\n        basicRender(gl, state, render_config, material_config, shaderLib_generator, DataBufferConfig, initMaterialShader, drawDataMap, initShaderDataMap, basicData, cameraData);\r\n    }\r\n\r\n    if (lightData.count > 0) {\r\n        frontRender(gl, state, render_config, material_config, shaderLib_generator, DataBufferConfig, initMaterialShader, drawDataMap, initShaderDataMap, ThreeDTransformData, GameObjectData, lightData, cameraData);\r\n    }\r\n\r\n    return state;\r\n})\r\n\r\nexport const sendAttributeData = (gl: WebGLRenderingContext, shaderIndex: number, program: WebGLProgram, geometryIndex: number, ProgramData: any, LocationData: any, GLSLSenderData: any, GeometryData: any, ArrayBufferData: any, GPUDetectData: any, VaoData: any) => sendAttributeDataUtils(gl, shaderIndex, program, geometryIndex, {\r\n    getVertices: getVertices,\r\n    getNormals: getNormals,\r\n    getTexCoords: getTexCoords\r\n}, getAttribLocation, isAttributeLocationNotExist, sendBuffer, ProgramData, LocationData, GLSLSenderData, GeometryData, ArrayBufferData, GPUDetectData, VaoData);\r\n","import {\r\n    SendUniformConfigMap, SendUniformFuncConfigMap,\r\n    UniformCacheMap, VaoConfigMap\r\n} from \"../../../../../../type/dataType\";\r\nimport {\r\n    UboBindingPointMap, UboMultiBufferDataList, UboSingleBufferDataList\r\n} from \"../../../../../type/dataType\";\r\n\r\nexport class WebGL2GLSLSenderDataCommon {\r\n    public static vaoConfigMap: VaoConfigMap = null;\r\n\r\n    public static uniformCacheMap: UniformCacheMap = null;\r\n\r\n    public static sendUniformConfigMap: SendUniformConfigMap = null;\r\n    public static sendUniformFuncConfigMap: SendUniformFuncConfigMap = null;\r\n\r\n    public static vertexAttribHistory: Array<boolean> = null;\r\n\r\n    public static uboBindingPoint: number = null;\r\n    public static uboBindingPointMap: UboBindingPointMap = null;\r\n    public static oneUboDataList: UboSingleBufferDataList = null;\r\n    public static frameUboDataList: UboSingleBufferDataList = null;\r\n    public static ambientLightUboDataList: UboMultiBufferDataList = null;\r\n    public static directionLightUboDataList: UboMultiBufferDataList = null;\r\n    public static pointLightUboDataList: UboMultiBufferDataList = null;\r\n}\r\n","import { WebGL2GLSLSenderDataCommon } from \"../../utils/worker/render_file/shader/glslSender/GLSLSenderDataCommon\";\r\n\r\nexport class WebGL2GLSLSenderData extends WebGL2GLSLSenderDataCommon {\r\n}\r\n","import {\r\n    AttributeLocationMap,\r\n    SendAttributeConfigMap, SendUniformConfigMap, SendUniformFuncConfigMap,\r\n    UniformCacheMap\r\n} from \"../../../../../../type/dataType\";\r\nimport { VaoConfigMap } from \"../../../../../../type/dataType\";\r\n\r\nexport class WebGL1GLSLSenderDataCommon {\r\n    public static vaoConfigMap: VaoConfigMap = null;\r\n\r\n    public static uniformCacheMap: UniformCacheMap = null;\r\n    public static attributeLocationMap: AttributeLocationMap = null;\r\n\r\n    public static sendAttributeConfigMap: SendAttributeConfigMap = null;\r\n    public static sendUniformConfigMap: SendUniformConfigMap = null;\r\n    public static sendUniformFuncConfigMap: SendUniformFuncConfigMap = null;\r\n\r\n    public static vertexAttribHistory: Array<boolean> = null;\r\n}\r\n","import { WebGL1GLSLSenderDataCommon } from \"../../utils/worker/render_file/shader/glslSender/GLSLSenderDataCommon\";\r\n\r\nexport class WebGL1GLSLSenderData extends WebGL1GLSLSenderDataCommon {\r\n}\r\n","import { ProgramMap } from \"../../../../../../type/dataType\";\r\n\r\nexport abstract class WebGL1ProgramDataCommon {\r\n    public static programMap: ProgramMap = null;\r\n\r\n    public static lastUsedProgram: WebGLProgram = null;\r\n\r\n    public static lastBindedArrayBuffer: WebGLBuffer = null;\r\n    public static lastBindedIndexBuffer: WebGLBuffer = null;\r\n}\r\n","import { WebGL1ProgramDataCommon } from \"../../utils/worker/render_file/shader/program/ProgramDataCommon\";\r\n\r\nexport class WebGL1ProgramData extends WebGL1ProgramDataCommon {\r\n}\r\n","import { ProgramMap } from \"../../../../../../type/dataType\";\r\n\r\nexport abstract class WebGL2ProgramDataCommon {\r\n    public static programMap: ProgramMap = null;\r\n\r\n    public static lastUsedProgram: WebGLProgram = null;\r\n\r\n    public static lastBindedVao: WebGLBuffer = null;\r\n}\r\n","import { WebGL2ProgramDataCommon } from \"../../utils/worker/render_file/shader/program/ProgramDataCommon\";\r\n\r\nexport class WebGL2ProgramData extends WebGL2ProgramDataCommon {\r\n}\r\n","import { VaoMap, VboArrayMap } from \"../../../../type/dataType\";\r\n\r\nexport abstract class VaoDataCommon {\r\n    public static vaoMap: VaoMap = null;\r\n    public static vboArrayMap: VboArrayMap = null;\r\n}\r\n","import { VaoDataCommon } from \"../utils/worker/render_file/vao/VaoDataCommon\";\r\n\r\nexport class VaoData extends VaoDataCommon {\r\n}","import { AttributeLocationMap, UniformLocationMap } from \"../../../../../../type/dataType\";\r\n\r\nexport abstract class WebGL1LocationDataCommon {\r\n    public static attributeLocationMap: AttributeLocationMap = null;\r\n    public static uniformLocationMap: UniformLocationMap = null;\r\n\r\n}\r\n","import { WebGL1LocationDataCommon } from \"../../utils/worker/render_file/shader/location/LocationDataCommon\";\r\n\r\nexport class WebGL1LocationData extends WebGL1LocationDataCommon {\r\n}\r\n","import { UniformLocationMap } from \"../../../../../../type/dataType\";\r\n\r\nexport abstract class WebGL2LocationDataCommon {\r\n    public static uniformLocationMap: UniformLocationMap = null;\r\n\r\n}\r\n","import { WebGL2LocationDataCommon } from \"../../utils/worker/render_file/shader/location/LocationDataCommon\";\r\n\r\nexport class WebGL2LocationData extends WebGL2LocationDataCommon {\r\n}\r\n","import { WebGLVertexArrayObject } from \"../../../../../../extend/interface\";\r\n\r\nexport abstract class DeferDirectionLightPassDataCommon {\r\n    public static fullScreenQuadVertexArray: WebGLVertexArrayObject = null;\r\n    public static fullScreenQuadIndicesCount: number = null;\r\n}\r\n","import { DeferDirectionLightPassDataCommon } from \"../../../../utils/render/light/defer/light/DeferDirectionLightPassDataCommon\";\r\n\r\nexport class DeferDirectionLightPassData extends DeferDirectionLightPassDataCommon {\r\n}\r\n\r\n","import { WebGLVertexArrayObject } from \"../../../../../../extend/interface\";\r\nimport { ScissorRegionArrayCacheMap } from \"../../../../../type/utilsType\";\r\n\r\nexport abstract class DeferPointLightPassDataCommon {\r\n    public static fullScreenQuadVertexArray: WebGLVertexArrayObject = null;\r\n    public static fullScreenQuadIndicesCount: number = null;\r\n    public static scissorRegionArrayCacheMap: ScissorRegionArrayCacheMap = null;\r\n}\r\n","import { DeferPointLightPassDataCommon } from \"../../../../utils/render/light/defer/light/DeferPointLightPassDataCommon\";\r\n\r\nexport class DeferPointLightPassData extends DeferPointLightPassDataCommon {\r\n}\r\n\r\n","import { WebGLVertexArrayObject } from \"../../../../../../extend/interface\";\r\n\r\nexport abstract class DeferAmbientLightPassDataCommon {\r\n    public static fullScreenQuadVertexArray: WebGLVertexArrayObject = null;\r\n    public static fullScreenQuadIndicesCount: number = null;\r\n}\r\n","import { DeferAmbientLightPassDataCommon } from \"../../../../utils/render/light/defer/light/DeferAmbientLightPassDataCommon\";\r\n\r\nexport class DeferAmbientLightPassData extends DeferAmbientLightPassDataCommon {\r\n}\r\n\r\n","import { Map } from \"immutable\";\r\nimport { getRenderList } from \"../../component/renderer/MeshRendererSystem\";\r\nimport { MeshRendererData } from \"../../component/renderer/MeshRendererData\";\r\nimport { compose } from \"../../utils/functionalUtils\";\r\nimport { createRenderCommandBufferData } from \"../command_buffer/RenderCommandBufferSystem\";\r\nimport { sendDrawData } from \"../worker/logic_file/draw/SendDrawRenderCommandBufferDataSystem\";\r\nimport { MaterialData } from \"../../component/material/MaterialData\";\r\nimport { GameObjectData } from \"../../core/entityObject/gameObject/GameObjectData\";\r\nimport { GeometryData } from \"../../component/geometry/GeometryData\";\r\nimport { ArrayBufferData } from \"../buffer/ArrayBufferData\";\r\nimport { IndexBufferData } from \"../buffer/IndexBufferData\";\r\nimport { render_config } from \"../worker/both_file/data/render_config\";\r\nimport { DeviceManagerData } from \"../device/DeviceManagerData\";\r\nimport { ThreeDTransformData } from \"../../component/transform/ThreeDTransformData\";\r\nimport { SceneData } from \"../../core/entityObject/scene/SceneData\";\r\nimport { CameraControllerData } from \"../../component/camera/CameraControllerData\";\r\nimport { CameraData } from \"../../component/camera/CameraData\";\r\nimport { EWorkerOperateType } from \"../worker/both_file/EWorkerOperateType\";\r\nimport { SendDrawRenderCommandBufferData } from \"../worker/logic_file/draw/SendDrawRenderCommandBufferData\";\r\nimport { isSupportRenderWorkerAndSharedArrayBuffer } from \"../../device/WorkerDetectSystem\";\r\nimport { DataBufferConfig } from \"../../config/DataBufferConfig\";\r\nimport { getRenderWorker } from \"../../worker/WorkerInstanceSystem\";\r\nimport { WorkerInstanceData } from \"../../worker/WorkerInstanceData\";\r\nimport { BasicMaterialData } from \"../../component/material/BasicMaterialData\";\r\nimport { LightMaterialData } from \"../../component/material/LightMaterialData\";\r\nimport { GlobalTempData } from \"../../definition/GlobalTempData\";\r\nimport { AmbientLightData } from \"../../component/light/AmbientLightData\";\r\nimport { getGL, setSide } from \"../device/DeviceManagerSystem\";\r\nimport { initState } from \"../utils/worker/render_file/state/stateUtils\";\r\nimport {\r\n    getAmbientLightBufferCount, getDirectionLightBufferCount,\r\n    getPointLightBufferCount\r\n} from \"../utils/light/bufferUtils\";\r\nimport { TextureData } from \"../texture/TextureData\";\r\nimport { MapManagerData } from \"../texture/MapManagerData\";\r\nimport { initMapManagers } from \"../texture/MapManagerSystem\";\r\nimport { TextureCacheData } from \"../texture/TextureCacheData\";\r\nimport { GBufferData } from \"../webgl2/render/light/defer/gbuffer/GBufferData\";\r\nimport { buildInitShaderDataMap } from \"../utils/worker/render_file/material/materialUtils\";\r\nimport { initMaterialShader as initMaterialShaderWebGL2, initNoMaterialShader as initNoMaterialShaderWebGL2 } from \"../webgl2/shader/ShaderSystem\";\r\nimport { webgl1_shaderLib_generator } from \"../worker/webgl1/both_file/data/shaderLib_generator\";\r\nimport { webgl2_shaderLib_generator } from \"../worker/webgl2/both_file/data/shaderLib_generator\";\r\nimport { webgl1_material_config } from \"../worker/webgl1/both_file/data/material_config\";\r\nimport { webgl2_material_config } from \"../worker/webgl2/both_file/data/material_config\";\r\nimport { initMaterialShader as initMaterialShaderWebGL1, initNoMaterialShader as initNoMaterialShaderWebGL1 } from \"../webgl1/shader/ShaderSystem\";\r\nimport { isWebgl1 } from \"../device/WebGLDetectSystem\";\r\nimport { buildDrawDataMap as buildDeferDrawDataMap } from \"../webgl2/utils/worker/render_file/draw/light/defer/deferDrawRenderCommandBufferUtils\";\r\nimport { WebGL1PointLightData } from \"../webgl1/light/PointLightData\";\r\nimport { WebGL2PointLightData } from \"../webgl2/light/PointLightData\";\r\nimport { it, requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { init as initWebGL2Material } from \"../../component/webgl2/material/MaterialSystem\";\r\nimport { init as initWebGL1Material } from \"../../component/webgl1/material/MaterialSystem\";\r\nimport { GPUDetectData } from \"../device/GPUDetectData\";\r\nimport { BasicRenderCommandBufferData } from \"../command_buffer/BasicRenderCommandBufferData\";\r\nimport { LightRenderCommandBufferData } from \"../command_buffer/LightRenderCommandBufferData\";\r\nimport { BasicDrawRenderCommandBufferData } from \"../draw/basic/BasicDrawRenderCommandBufferData\";\r\nimport { LightDrawRenderCommandBufferData } from \"../draw/light/LightDrawRenderCommandBufferData\";\r\nimport { clearColor } from \"../draw/DrawRenderCommandBufferSystem\";\r\nimport { createRenderCommandBufferData as createRenderCommandBufferWorkerData } from \"../worker/logic_file/command_buffer/RenderCommandBufferSystem\";\r\nimport { render as renderWebGL2, init as initWebGL2Render } from \"../webgl2/render/RenderSystem\";\r\nimport { render as renderWebGL1 } from \"../webgl1/render/RenderSystem\";\r\nimport { WebGL2RenderInitWorkerData } from \"../webgl2/type/messageDataType\";\r\nimport { getLightMaterialBufferStartIndex } from \"../utils/material/bufferUtils\";\r\nimport { getBasicMaterialBufferStartIndex } from \"../utils/material/bufferUtils\";\r\nimport { WebGL2GLSLSenderData } from \"../webgl2/shader/glslSender/GLSLSenderData\";\r\nimport { WebGL1GLSLSenderData } from \"../webgl1/shader/glslSender/GLSLSenderData\";\r\nimport { WebGL1ProgramData } from \"../webgl1/shader/program/ProgramData\";\r\nimport { WebGL2ProgramData } from \"../webgl2/shader/program/ProgramData\";\r\nimport { buildDrawDataMap as buildWebGL2DrawDataMap } from \"../webgl2/utils/worker/render_file/render/renderUtils\";\r\nimport { VaoData } from \"../vao/VaoData\";\r\nimport { buildDrawDataMap as buildWebGL1DrawDataMap } from \"../webgl1/utils/worker/render_file/render/renderUtils\";\r\nimport { WebGL1LocationData } from \"../webgl1/shader/location/LocationData\";\r\nimport { WebGL2LocationData } from \"../webgl2/shader/location/LocationData\";\r\nimport { WebGL1ShaderData } from \"../webgl1/shader/ShaderData\";\r\nimport { WebGL2ShaderData } from \"../webgl2/shader/ShaderData\";\r\nimport { WebGL1DirectionLightData } from \"../webgl1/light/DirectionLightData\";\r\nimport { WebGL2DirectionLightData } from \"../webgl2/light/DirectionLightData\";\r\nimport { DeferDirectionLightPassData } from \"../webgl2/render/light/defer/light/DeferDirectionLightPassData\";\r\nimport { DeferPointLightPassData } from \"../webgl2/render/light/defer/light/DeferPointLightPassData\";\r\nimport { DeferAmbientLightPassData } from \"../webgl2/render/light/defer/light/DeferAmbientLightPassData\";\r\nimport { DomQuery } from \"wonder-commonlib/dist/es2015/utils/DomQuery\";\r\nimport {\r\n    clearNeedAddedSourceArr, clearNeedInitTextureDataArr, getNeedAddedSourceArr,\r\n    getUniformSamplerNameMap, convertAllSourceMapToImageDataArr\r\n} from \"../texture/TextureSystem\";\r\n\r\nconst _checkLightCount =requireCheckFunc((ambientLightCount: number, directionLightCount: number, pointLightCount: number, AmbientLightData: any, DirectionLightData: any, PointLightData: any) => {\r\n    it(\"count should <= max count\", () => {\r\n        expect(AmbientLightData.count).lte(ambientLightCount);\r\n        expect(DirectionLightData.count).lte(directionLightCount);\r\n        expect(PointLightData.count).lte(pointLightCount);\r\n    })\r\n}, () => {\r\n})\r\n\r\nexport var init = null;\r\n\r\nexport var render = null;\r\n\r\nif (isSupportRenderWorkerAndSharedArrayBuffer()) {\r\n    if (isWebgl1()) {\r\n        init = (state: Map<any, any>) => {\r\n            _checkLightCount(DataBufferConfig.frontAmbientLightCount, DataBufferConfig.frontDirectionLightCount, DataBufferConfig.frontDirectionLightCount, AmbientLightData, WebGL1DirectionLightData, WebGL1PointLightData);\r\n\r\n            return _init(state, {\r\n                ambientLightData: {\r\n                    buffer: AmbientLightData.buffer,\r\n                    bufferCount: getAmbientLightBufferCount(),\r\n                    lightCount: AmbientLightData.count\r\n\r\n                },\r\n                directionLightData: {\r\n                    buffer: WebGL1DirectionLightData.buffer,\r\n                    bufferCount: getDirectionLightBufferCount(),\r\n                    lightCount: WebGL1DirectionLightData.count,\r\n                    directionLightGLSLDataStructureMemberNameArr: WebGL1DirectionLightData.lightGLSLDataStructureMemberNameArr\r\n                },\r\n                pointLightData: {\r\n                    buffer: WebGL1PointLightData.buffer,\r\n                    bufferCount: getPointLightBufferCount(),\r\n                    lightCount: WebGL1PointLightData.count,\r\n                    pointLightGLSLDataStructureMemberNameArr: WebGL1PointLightData.lightGLSLDataStructureMemberNameArr\r\n                }\r\n            },\r\n                null);\r\n        }\r\n\r\n        render = (state: Map<any, any>) => {\r\n            _render(state, WebGL1DirectionLightData, WebGL1PointLightData);\r\n        }\r\n\r\n    }\r\n    else {\r\n        init = (state: Map<any, any>) => {\r\n            _checkLightCount(DataBufferConfig.deferAmbientLightCount, DataBufferConfig.deferDirectionLightCount, DataBufferConfig.deferPointLightCount, AmbientLightData, WebGL2DirectionLightData, WebGL2PointLightData);\r\n\r\n\r\n            return _init(state, {\r\n                directionLightData: {\r\n                    buffer: WebGL2DirectionLightData.buffer,\r\n                    bufferCount: getDirectionLightBufferCount(),\r\n                    lightCount: WebGL2DirectionLightData.count\r\n                },\r\n                pointLightData: {\r\n                    buffer: WebGL2PointLightData.buffer,\r\n                    bufferCount: getPointLightBufferCount(),\r\n                    lightCount: WebGL2PointLightData.count\r\n                },\r\n            },\r\n                {\r\n                    deferShading: {\r\n                        isInit: true\r\n                    }\r\n                }\r\n            );\r\n        }\r\n\r\n        render = (state: Map<any, any>) => {\r\n            _render(state, WebGL2DirectionLightData, WebGL2PointLightData);\r\n        }\r\n    }\r\n\r\n    let _init = (state: Map<any, any>, lightData: any, renderData: WebGL2RenderInitWorkerData|null) => {\r\n        //todo need test\r\n        initMapManagers(null, TextureData);\r\n\r\n        let renderWorker = getRenderWorker(WorkerInstanceData),\r\n            needAddedImageDataArr = convertAllSourceMapToImageDataArr(getNeedAddedSourceArr(TextureData), DomQuery),\r\n            transferList:Array<ArrayBuffer> = [];\r\n\r\n        transferList = transferList.concat(needAddedImageDataArr.map(({arrayBuffer}) => {\r\n            return arrayBuffer as ArrayBuffer;\r\n        }));\r\n\r\n        renderWorker.postMessage({\r\n            operateType: EWorkerOperateType.INIT_MATERIAL_GEOMETRY_LIGHT_TEXTURE,\r\n            materialData: {\r\n                buffer: MaterialData.buffer,\r\n                basicMaterialData: {\r\n                    startIndex: getBasicMaterialBufferStartIndex(),\r\n                    index: BasicMaterialData.index\r\n                },\r\n                lightMaterialData: {\r\n                    startIndex: getLightMaterialBufferStartIndex(),\r\n                    index: LightMaterialData.index\r\n                }\r\n            },\r\n            geometryData: {\r\n                buffer: GeometryData.buffer,\r\n                indexType: GeometryData.indexType,\r\n                indexTypeSize: GeometryData.indexTypeSize,\r\n                verticesInfoList: GeometryData.verticesInfoList,\r\n                normalsInfoList: GeometryData.normalsInfoList,\r\n                texCoordsInfoList: GeometryData.texCoordsInfoList,\r\n                indicesInfoList: GeometryData.indicesInfoList\r\n            },\r\n            lightData: lightData,\r\n            textureData: {\r\n                mapManagerBuffer: MapManagerData.buffer,\r\n                textureBuffer: TextureData.buffer,\r\n\r\n                index: TextureData.index,\r\n                needAddedImageDataArr: needAddedImageDataArr,\r\n                uniformSamplerNameMap: getUniformSamplerNameMap(TextureData)\r\n            },\r\n            renderData: renderData\r\n        }, transferList);\r\n\r\n        clearNeedAddedSourceArr(TextureData);\r\n        //todo need test\r\n        clearNeedInitTextureDataArr(TextureData);\r\n\r\n        renderWorker.onmessage = (e) => {\r\n            var data = e.data,\r\n                state = data.state;\r\n\r\n            SendDrawRenderCommandBufferData.state = state;\r\n        };\r\n\r\n        return state;\r\n    };\r\n\r\n    let _render = (state: Map<any, any>, DirectionLightData, PointLightData: any) => {\r\n        return compose(\r\n            sendDrawData(DomQuery, WorkerInstanceData, MapManagerData, TextureData, MaterialData, GeometryData, ThreeDTransformData, GameObjectData, AmbientLightData, DirectionLightData, PointLightData),\r\n            // sortRenderCommands(state),\r\n            createRenderCommandBufferWorkerData(state, GlobalTempData, GameObjectData, ThreeDTransformData, CameraControllerData, CameraData, MaterialData, GeometryData, SceneData, BasicRenderCommandBufferData, LightRenderCommandBufferData),\r\n            getRenderList(state)\r\n        )(MeshRendererData)\r\n    }\r\n}\r\nelse {\r\n    if (isWebgl1()) {\r\n        init = (state: Map<any, any>) => {\r\n            var gl = getGL(DeviceManagerData, state);\r\n\r\n            initState(state, getGL, setSide, DeviceManagerData);\r\n\r\n            initWebGL1Material(state, gl, webgl1_material_config, webgl1_shaderLib_generator, initNoMaterialShaderWebGL1, TextureData, MaterialData, BasicMaterialData, LightMaterialData, GPUDetectData, WebGL1GLSLSenderData, WebGL1ProgramData, VaoData, WebGL1LocationData, WebGL1ShaderData);\r\n\r\n            _checkLightCount(DataBufferConfig.frontAmbientLightCount, DataBufferConfig.frontDirectionLightCount, DataBufferConfig.frontPointLightCount, AmbientLightData, WebGL1DirectionLightData, WebGL1PointLightData);\r\n        };\r\n\r\n        render = (state: Map<any, any>) => {\r\n            return compose(\r\n                renderWebGL1(state, render_config, webgl1_material_config, webgl1_shaderLib_generator, DataBufferConfig, initMaterialShaderWebGL1, buildWebGL1DrawDataMap(DeviceManagerData, TextureData, TextureCacheData, MapManagerData, MaterialData, BasicMaterialData, LightMaterialData, AmbientLightData, WebGL1DirectionLightData, WebGL1PointLightData, WebGL1ProgramData, WebGL1LocationData, WebGL1GLSLSenderData, GeometryData, ArrayBufferData, IndexBufferData, BasicDrawRenderCommandBufferData, LightDrawRenderCommandBufferData), buildInitShaderDataMap(DeviceManagerData, WebGL1ProgramData, WebGL1LocationData, WebGL1GLSLSenderData, WebGL1ShaderData, MapManagerData, MaterialData, BasicMaterialData, LightMaterialData, AmbientLightData, WebGL1DirectionLightData, WebGL1PointLightData, GPUDetectData, VaoData), ThreeDTransformData, GameObjectData),\r\n                clearColor(state, render_config, DeviceManagerData),\r\n                // sortRenderCommands(state),\r\n                createRenderCommandBufferData(state, GlobalTempData, GameObjectData, ThreeDTransformData, CameraControllerData, CameraData, MaterialData, GeometryData, SceneData, BasicRenderCommandBufferData, LightRenderCommandBufferData),\r\n                getRenderList(state)\r\n            )(MeshRendererData)\r\n        }\r\n    }\r\n    else {\r\n        init = (state: Map<any, any>) => {\r\n            var gl = getGL(DeviceManagerData, state);\r\n\r\n            initState(state, getGL, setSide, DeviceManagerData);\r\n\r\n            initWebGL2Material(state, gl, webgl2_material_config, webgl2_shaderLib_generator, initNoMaterialShaderWebGL2, TextureData, MaterialData, BasicMaterialData, LightMaterialData, GPUDetectData, WebGL2GLSLSenderData, WebGL2ProgramData, VaoData, WebGL2LocationData, WebGL2ShaderData);\r\n\r\n            initWebGL2Render(gl, render_config, DataBufferConfig, GBufferData, DeferAmbientLightPassData, DeferDirectionLightPassData, DeferPointLightPassData, WebGL2ShaderData, WebGL2ProgramData, WebGL2LocationData, WebGL2GLSLSenderData, GPUDetectData);\r\n\r\n            _checkLightCount(DataBufferConfig.deferAmbientLightCount, DataBufferConfig.deferDirectionLightCount, DataBufferConfig.deferPointLightCount, AmbientLightData, WebGL2DirectionLightData, WebGL2PointLightData);\r\n        }\r\n\r\n        render = (state: Map<any, any>) => {\r\n            return compose(\r\n                renderWebGL2(state, render_config, webgl2_material_config, webgl2_shaderLib_generator, DataBufferConfig, initMaterialShaderWebGL2, buildWebGL2DrawDataMap(DeviceManagerData, TextureData, TextureCacheData, MapManagerData, MaterialData, BasicMaterialData, LightMaterialData, AmbientLightData, WebGL2DirectionLightData, WebGL2PointLightData, WebGL2ProgramData, WebGL2LocationData, WebGL2GLSLSenderData, GeometryData, BasicDrawRenderCommandBufferData, LightDrawRenderCommandBufferData), buildDeferDrawDataMap(GBufferData, DeferAmbientLightPassData, DeferDirectionLightPassData, DeferPointLightPassData), buildInitShaderDataMap(DeviceManagerData, WebGL2ProgramData, WebGL2LocationData, WebGL2GLSLSenderData, WebGL2ShaderData, MapManagerData, MaterialData, BasicMaterialData, LightMaterialData, AmbientLightData, WebGL2DirectionLightData, WebGL2PointLightData, GPUDetectData, VaoData), ThreeDTransformData, GameObjectData),\r\n                clearColor(state, render_config, DeviceManagerData),\r\n                // sortRenderCommands(state),\r\n                createRenderCommandBufferData(state, GlobalTempData, GameObjectData, ThreeDTransformData, CameraControllerData, CameraData, MaterialData, GeometryData, SceneData, BasicRenderCommandBufferData, LightRenderCommandBufferData),\r\n                getRenderList(state)\r\n            )(MeshRendererData)\r\n        }\r\n    }\r\n}\r\n","import { IO } from \"wonder-fantasy-land/dist/es2015/types/IO\";\r\nimport { Map } from \"immutable\";\r\nimport { isSupportRenderWorkerAndSharedArrayBuffer } from \"../device/WorkerDetectSystem\";\r\nimport { render as renderByWebGLRender } from \"../renderer/core/WebGLRenderSystem\";\r\nimport { SendDrawRenderCommandBufferData } from \"../renderer/worker/logic_file/draw/SendDrawRenderCommandBufferData\";\r\nimport { ERenderWorkerState } from \"../renderer/worker/both_file/ERenderWorkerState\";\r\nimport { Scheduler } from \"./Scheduler\";\r\nimport { update as updateThreeDTransform } from \"../component/transform/ThreeDTransformSystem\";\r\nimport { GlobalTempData } from \"../definition/GlobalTempData\";\r\nimport { ThreeDTransformData } from \"../component/transform/ThreeDTransformData\";\r\nimport { update as updateCameraControllerSystem } from \"../component/camera/CameraControllerSystem\";\r\nimport { PerspectiveCameraData } from \"../component/camera/PerspectiveCameraData\";\r\nimport { CameraData } from \"../component/camera/CameraData\";\r\nimport { CameraControllerData } from \"../component/camera/CameraControllerData\";\r\nimport { DirectorTimeController } from \"../utils/time/DirectorTimeController\";\r\nimport { createState } from \"../utils/stateUtils\";\r\n\r\nexport const getState = (DirectorData: any) => {\r\n    return DirectorData.state;\r\n}\r\n\r\nexport const setState = (state: Map<any, any>, DirectorData: any) => {\r\n    return IO.of(() => {\r\n        DirectorData.state = state;\r\n    });\r\n}\r\n\r\nexport const markIsInit = (DirectorData: any) => {\r\n    DirectorData.isInit = true;\r\n}\r\n\r\nexport const isInit = (DirectorData: any) => {\r\n    return DirectorData.isInit === true;\r\n}\r\n\r\nexport var run = null;\r\n\r\nexport var render = null;\r\n\r\nconst _sync =(elapsed: number, state: Map<any, any>, scheduler: Scheduler) => {\r\n    scheduler.update(elapsed);\r\n\r\n    var resultState = updateSystem(elapsed, state);\r\n\r\n    return resultState;\r\n}\r\n\r\nexport const updateSystem = (elapsed: number, state: Map<any, any>) => {\r\n    var resultState = updateThreeDTransform(elapsed, GlobalTempData, ThreeDTransformData, state);\r\n\r\n    resultState = updateCameraControllerSystem(PerspectiveCameraData, CameraData, CameraControllerData, state);\r\n\r\n    return resultState;\r\n}\r\n\r\nif (isSupportRenderWorkerAndSharedArrayBuffer()) {\r\n    run = (elapsed: number, state: Map<any, any>, timeController: DirectorTimeController, scheduler: Scheduler) => {\r\n        var resultState: Map<any, any> = state;\r\n\r\n        if (SendDrawRenderCommandBufferData.state === ERenderWorkerState.INIT_COMPLETE) {\r\n            SendDrawRenderCommandBufferData.isInitComplete = true;\r\n            SendDrawRenderCommandBufferData.state = ERenderWorkerState.DEFAULT;\r\n        }\r\n        else if (!SendDrawRenderCommandBufferData.isInitComplete) {\r\n            return resultState;\r\n        }\r\n\r\n        if (SendDrawRenderCommandBufferData.state === ERenderWorkerState.DRAW_COMPLETE) {\r\n            timeController.tick(elapsed);\r\n            SendDrawRenderCommandBufferData.state = ERenderWorkerState.DEFAULT;\r\n\r\n            resultState = _sync(elapsed, state, scheduler);\r\n        }\r\n        else if (SendDrawRenderCommandBufferData.state !== ERenderWorkerState.DRAW_WAIT) {\r\n            SendDrawRenderCommandBufferData.state = ERenderWorkerState.DRAW_WAIT;\r\n            resultState = render(resultState);\r\n        }\r\n\r\n        return resultState;\r\n    }\r\n\r\n    render = (state: Map<any, any>) => {\r\n        var resultState = null;\r\n\r\n        resultState = renderByWebGLRender(state);\r\n\r\n        return resultState;\r\n    }\r\n}\r\nelse {\r\n    run = (elapsed: number, state: Map<any, any>, timeController: DirectorTimeController, scheduler: Scheduler) => {\r\n        var resultState: Map<any, any> = state;\r\n\r\n        timeController.tick(elapsed);\r\n\r\n        resultState = _sync(elapsed, state, scheduler);\r\n        resultState = render(resultState);\r\n\r\n        return resultState;\r\n    }\r\n\r\n    render = (state: Map<any, any>) => {\r\n        var resultState = renderByWebGLRender(state);\r\n\r\n        return resultState;\r\n    }\r\n}\r\n\r\nexport const initData = (DirectorData: any) => {\r\n    DirectorData.isInit = false;\r\n    DirectorData.state = createState();\r\n}\r\n","import {\r\n    create, dispose, getHeight, getIsNeedUpdate, getSource, getWidth, initTexture as initTextureSystem, setHeight, setIsNeedUpdate,\r\n    setSource,\r\n    setWidth\r\n} from \"./TextureSystem\";\r\nimport { TextureData } from \"./TextureData\";\r\nimport { requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { checkComponentShouldAlive, isComponentIndexNotRemoved } from \"../../component/ComponentSystem\";\r\nimport { getGL } from \"../device/DeviceManagerSystem\";\r\nimport { DeviceManagerData } from \"../device/DeviceManagerData\";\r\nimport { getState } from \"../../core/DirectorSystem\";\r\nimport { DirectorData } from \"../../core/DirectorData\";\r\nimport { TextureCacheData } from \"./TextureCacheData\";\r\nimport { GPUDetectData } from \"../device/GPUDetectData\";\r\nimport { ITexture } from \"../interface/ITexture\";\r\n\r\nexport class Texture implements ITexture {\r\n    public index: number = null;\r\n}\r\n\r\nexport const createTexture = () => {\r\n    return create(TextureData);\r\n}\r\n\r\nexport const initTexture = (texture:Texture) => {\r\n    initTextureSystem(getGL(DeviceManagerData), texture.index, TextureData);\r\n}\r\n\r\nexport const disposeTexture = requireCheckFunc((texture: Texture) => {\r\n    _checkShouldAlive(texture);\r\n}, (texture: Texture) => {\r\n    dispose(getGL(DeviceManagerData, getState(DirectorData)), texture, TextureCacheData, TextureData, GPUDetectData);\r\n})\r\n\r\nexport const getTextureSource = requireCheckFunc((texture: Texture) => {\r\n    _checkShouldAlive(texture);\r\n}, (texture: Texture) => {\r\n    return getSource(texture.index, TextureData);\r\n})\r\n\r\nexport const setTextureSource = requireCheckFunc((texture: Texture) => {\r\n    _checkShouldAlive(texture);\r\n}, (texture: Texture, source: any) => {\r\n    setSource(texture.index, source, TextureData);\r\n})\r\n\r\nexport const getTextureWidth = requireCheckFunc((texture: Texture) => {\r\n    _checkShouldAlive(texture);\r\n}, (texture: Texture) => {\r\n    return getWidth(texture.index, TextureData);\r\n})\r\n\r\nexport const setTextureWidth = requireCheckFunc((texture: Texture) => {\r\n    _checkShouldAlive(texture);\r\n}, (texture: Texture, value: number) => {\r\n    setWidth(texture.index, value, TextureData);\r\n})\r\n\r\nexport const getTextureHeight = requireCheckFunc((texture: Texture) => {\r\n    _checkShouldAlive(texture);\r\n}, (texture: Texture) => {\r\n    return getHeight(texture.index, TextureData);\r\n})\r\n\r\nexport const setTextureHeight = requireCheckFunc((texture: Texture) => {\r\n    _checkShouldAlive(texture);\r\n}, (texture: Texture, value: number) => {\r\n    setHeight(texture.index, value, TextureData);\r\n})\r\n\r\nexport const getTextureIsNeedUpdate = requireCheckFunc((texture: Texture) => {\r\n    _checkShouldAlive(texture);\r\n}, (texture: Texture) => {\r\n    return getIsNeedUpdate(texture.index, TextureData);\r\n})\r\n\r\nexport const setTextureIsNeedUpdate = requireCheckFunc((texture: Texture) => {\r\n    _checkShouldAlive(texture);\r\n}, (texture: Texture, value: number) => {\r\n    setIsNeedUpdate(texture.index, value, TextureData);\r\n})\r\n\r\nconst _checkShouldAlive =(texture: Texture) => {\r\n    checkComponentShouldAlive(texture, null, (texture: Texture) => {\r\n        return isComponentIndexNotRemoved(texture);\r\n    })\r\n}\r\n","export const getImageData = (source: HTMLImageElement, width:number, height:number, DomQuery:any) => {\r\n    var canvas = DomQuery.create(\"<canvas></canvas>\").get(0),\r\n        ctx = null;\r\n\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n\r\n    ctx = canvas.getContext(\"2d\");\r\n    ctx.drawImage(source, 0, 0);\r\n\r\n    return ctx.getImageData(0, 0, width, height);\r\n}\r\n","import {\r\n    addActiveTexture, clearAllBindTextureUnitCache, initData as initTextureCacheData,\r\n    isCached\r\n} from \"./TextureCacheSystem\";\r\nimport { ensureFunc, it, requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { forEach, isNotValidVal } from \"../../utils/arrayUtils\";\r\nimport { Texture } from \"./Texture\";\r\nimport { deleteComponentBySwapArray, generateComponentIndex } from \"../../component/ComponentSystem\";\r\nimport { createSharedArrayBufferOrArrayBuffer } from \"../../utils/arrayBufferUtils\";\r\nimport {\r\n    createTypeArrays, getWidth as getWidthUtils, getHeight as getHeightUtils,\r\n    // getWrapS as getWrapSUtils,\r\n    // getWrapT as getWrapTUtils,\r\n    // getMagFilter as getMagFilterUtils,\r\n    // getMinFilter as getMinFilterUtils,\r\n    // getFormat as getFormatUtils,\r\n    // getType as getTypeUtils,\r\n    // getFlipY as getFlipYUtils,\r\n    getBufferDataSize,\r\n    markNeedUpdate as markNeedUpdateUtils,\r\n    getIsNeedUpdate as getIsNeedUpdateUtils, getBufferCount,\r\n    bindToUnit as bindToUnitUtils, initTexture as initTextureUtils, initTextures as initTexturesUtils, needUpdate as needUpdateUtils,\r\n    update as updateUtils, disposeGLTexture, disposeSourceMap, getSource as getSourceUtils\r\n} from \"../utils/worker/render_file/texture/textureUtils\";\r\nimport { computeBufferLength, deleteOneItemBySwapAndReset, setTypeArrayValue } from \"../../utils/typeArrayUtils\";\r\nimport { isSupportRenderWorkerAndSharedArrayBuffer } from \"../../device/WorkerDetectSystem\";\r\nimport { ImageArrayBufferIndexSizeData } from \"../type/messageDataType\";\r\nimport { getImageData } from \"../utils/texture/textureUtils\";\r\nimport { deleteVal } from \"../../utils/objectUtils\";\r\n\r\nexport const create = ensureFunc((component: Texture) => {\r\n    it(\"index should <= max count\", () => {\r\n        expect(component.index).lte(getBufferCount());\r\n    });\r\n}, (TextureData: any) => {\r\n    var texture = new Texture(),\r\n        index = generateComponentIndex(TextureData);\r\n\r\n    texture.index = index;\r\n\r\n    TextureData.textureMap[index] = texture;\r\n\r\n    return texture;\r\n})\r\n\r\nexport const getSource = getSourceUtils;\r\n\r\nexport const getWidth = getWidthUtils;\r\n\r\nexport const setWidth = (textureIndex: number, value: any, TextureData: any) => {\r\n    setTypeArrayValue(TextureData.widths, textureIndex, value);\r\n}\r\n\r\nexport const getHeight = getHeightUtils;\r\n\r\nexport const setHeight = (textureIndex: number, value: any, TextureData: any) => {\r\n    setTypeArrayValue(TextureData.heights, textureIndex, value);\r\n}\r\n\r\nexport const getIsNeedUpdate = getIsNeedUpdateUtils;\r\n\r\nexport const setIsNeedUpdate = (textureIndex: number, value: number, TextureData: any) => {\r\n    setTypeArrayValue(TextureData.isNeedUpdates, textureIndex, value);\r\n}\r\n\r\nexport const markNeedUpdate = markNeedUpdateUtils;\r\n\r\n//\r\n// //todo add set methods\r\n//\r\n// export const getWrapS = getWrapSUtils;\r\n//\r\n// export const getWrapT = getWrapTUtils;\r\n//\r\n// export const getMagFilter = getMagFilterUtils;\r\n//\r\n// export const getMinFilter = getMinFilterUtils;\r\n//\r\n// export const getFormat = getFormatUtils;\r\n//\r\n// export const getType = getTypeUtils;\r\n//\r\n// export const getFlipY = getFlipYUtils;\r\n\r\nexport const setUniformSamplerName = (index: number, name: string, TextureData: any) => {\r\n    TextureData.uniformSamplerNameMap[index] = name;\r\n}\r\n\r\nexport const bindToUnit = (gl: WebGLRenderingContext, unitIndex: number, textureIndex: number, TextureCacheData: any, TextureData: any, GPUDetectData: any) => {\r\n    bindToUnitUtils(gl, unitIndex, textureIndex, TextureCacheData, TextureData, GPUDetectData, isCached, addActiveTexture);\r\n}\r\n\r\nexport const needUpdate = needUpdateUtils;\r\n\r\nexport const update = (gl: WebGLRenderingContext, textureIndex: number, TextureData: any) => {\r\n    updateUtils(gl, textureIndex, _setFlipY, TextureData);\r\n}\r\n\r\nconst _setFlipY =(gl: WebGLRenderingContext, flipY: boolean) => {\r\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, flipY);\r\n}\r\n\r\nexport const dispose = (gl: WebGLRenderingContext, texture: Texture, TextureCacheData: any, TextureData: any, GPUDetectData: any) => {\r\n    var bufferDataSize = getBufferDataSize(),\r\n        sourceIndex = texture.index,\r\n        lastComponentIndex: number = null;\r\n\r\n    TextureData.index -= 1;\r\n\r\n    lastComponentIndex = TextureData.index;\r\n\r\n    deleteOneItemBySwapAndReset(sourceIndex * bufferDataSize, lastComponentIndex * bufferDataSize, TextureData.widths, TextureData.defaultWidth);\r\n    deleteOneItemBySwapAndReset(sourceIndex * bufferDataSize, lastComponentIndex * bufferDataSize, TextureData.heights, TextureData.defaultHeight);\r\n    deleteOneItemBySwapAndReset(sourceIndex * bufferDataSize, lastComponentIndex * bufferDataSize, TextureData.isNeedUpdates, TextureData.defaultIsNeedUpdate);\r\n\r\n    disposeSourceMap(sourceIndex, lastComponentIndex, TextureData)\r\n\r\n    deleteComponentBySwapArray(sourceIndex, lastComponentIndex, TextureData.textureMap);\r\n\r\n    _disposeGLTexture(gl, sourceIndex, lastComponentIndex, TextureCacheData, TextureData, GPUDetectData);\r\n\r\n    _addDisposeDataForWorker(sourceIndex, lastComponentIndex, TextureData);\r\n}\r\n\r\n// export const initTextures = initTexturesUtils;\r\n\r\nexport var addNeedInitTextureIndexForWorker = null,\r\n    initTextures = null,\r\n    initTexture = null,\r\n    setSource = null;\r\n\r\nvar _disposeGLTexture = null,\r\n    _addDisposeDataForWorker = null;\r\n\r\nif (isSupportRenderWorkerAndSharedArrayBuffer()) {\r\n    //todo refactor: move to utils?\r\n    initTextures = (gl: WebGLRenderingContext, TextureDataFromSystem: any) => {\r\n        for (let i = 0; i < TextureDataFromSystem.index; i++) {\r\n            initTexture(gl, i, TextureDataFromSystem);\r\n        }\r\n    }\r\n\r\n    initTexture = (gl: WebGLRenderingContext, textureIndex, TextureData: any) => {\r\n        addNeedInitTextureIndexForWorker(textureIndex, TextureData);\r\n    }\r\n\r\n    addNeedInitTextureIndexForWorker = (textureIndex:number, TextureData:any) => {\r\n        TextureData.needInitedTextureIndexArr.push(textureIndex);\r\n    }\r\n\r\n    setSource = (textureIndex: number, source: any, TextureData: any) => {\r\n        TextureData.sourceMap[textureIndex] = source;\r\n        TextureData.needAddedSourceArr.push(source);\r\n    }\r\n\r\n    _disposeGLTexture = (...args) => {\r\n    }\r\n\r\n    _addDisposeDataForWorker = (sourceIndex: number, lastComponentIndex: number, TextureData: any) => {\r\n        TextureData.disposedTextureDataMap.push(_buildDisposedTextureData(sourceIndex, lastComponentIndex));\r\n    }\r\n\r\n    const _buildDisposedTextureData =(sourceIndex: number, lastComponentIndex: number) => {\r\n        return {\r\n            sourceIndex: sourceIndex,\r\n            lastComponentIndex: lastComponentIndex\r\n        }\r\n    }\r\n}\r\nelse {\r\n    initTextures = initTexturesUtils;\r\n\r\n    initTexture = initTextureUtils;\r\n\r\n    addNeedInitTextureIndexForWorker = () => {\r\n    }\r\n\r\n    setSource = (textureIndex: number, source: any, TextureData: any) => {\r\n        TextureData.sourceMap[textureIndex] = source;\r\n    }\r\n\r\n    _disposeGLTexture = (gl: WebGLRenderingContext, sourceIndex: number, lastComponentIndex: number, TextureCacheData: any, TextureData: any, GPUDetectData: any) => {\r\n        disposeGLTexture(gl, sourceIndex, lastComponentIndex, TextureCacheData, TextureData, GPUDetectData);\r\n    }\r\n\r\n    _addDisposeDataForWorker = (sourceIndex: number, lastComponentIndex: number, TextureData: any) => {\r\n    }\r\n}\r\n\r\nexport const getDisposedTextureDataMap = (TextureData: any) => {\r\n    return TextureData.disposedTextureDataMap;\r\n}\r\n\r\nexport const hasDisposedTextureDataMap = (TextureData: any) => {\r\n    return TextureData.disposedTextureDataMap.length > 0;\r\n}\r\n\r\nexport const clearDisposedTextureDataMap = (TextureData: any) => {\r\n    TextureData.disposedTextureDataMap = [];\r\n}\r\n\r\nexport const getNeedInitedTextureDataArr = (TextureData: any) => {\r\n    return TextureData.needInitedTextureIndexArr;\r\n}\r\n\r\nexport const hasNeedInitTextureDataArr = (TextureData: any) => {\r\n    return TextureData.needInitedTextureIndexArr.length > 0;\r\n}\r\n\r\nexport const clearNeedInitTextureDataArr = (TextureData: any) => {\r\n    TextureData.needInitedTextureIndexArr = [];\r\n}\r\n\r\nexport const clearNeedAddedSourceArr = (TextureData: any) => {\r\n    TextureData.needAddedSourceArr = [];\r\n}\r\n\r\nexport const getNeedAddedSourceArr = (TextureData: any) => {\r\n    return TextureData.needAddedSourceArr;\r\n}\r\n\r\nexport const convertAllSourceMapToImageDataArr = (sourceMap:Array<HTMLImageElement>, DomQuery:any) => {\r\n    var arr: Array<ImageArrayBufferIndexSizeData> = [];\r\n\r\n    forEach(sourceMap, (source: HTMLImageElement, index: number) => {\r\n        if (_isSourceNotExist(source)) {\r\n            return;\r\n        }\r\n\r\n        let width = source.width,\r\n            height = source.height;\r\n\r\n        arr.push(\r\n            {\r\n                arrayBuffer: _getArrayBuffer(getImageData(source, width, height, DomQuery)),\r\n                width: width,\r\n                height: height,\r\n                index: index\r\n            }\r\n        )\r\n    })\r\n\r\n    return arr;\r\n}\r\n\r\nexport const convertNeedInitedSourceMapToImageDataArr = requireCheckFunc((sourceMap:Array<HTMLImageElement>, needInitedTextureDataArr:Array<number>, DomQuery:any) => {\r\n    it(\"needInitedTextureDataArr should corresponding to sourceMap\", () => {\r\n        expect(needInitedTextureDataArr.length).equal(sourceMap.length);\r\n    });\r\n}, (sourceMap:Array<HTMLImageElement>, needInitedTextureDataArr:Array<number>, DomQuery:any) => {\r\n    var arr: Array<ImageArrayBufferIndexSizeData> = [];\r\n\r\n    forEach(sourceMap, (source: HTMLImageElement, index: number) => {\r\n        if (_isSourceNotExist(source)) {\r\n            return;\r\n        }\r\n\r\n        let width = source.width,\r\n            height = source.height;\r\n\r\n        arr.push(\r\n            {\r\n                arrayBuffer: _getArrayBuffer(getImageData(source, width, height, DomQuery)),\r\n                width:width,\r\n                height: height,\r\n                index:needInitedTextureDataArr[index]\r\n            }\r\n        )\r\n    })\r\n\r\n    return arr;\r\n})\r\n\r\nconst _getArrayBuffer = (imageData:ImageData) => imageData.data.buffer as ArrayBuffer;\r\n\r\nexport const getUniformSamplerNameMap = (TextureData: any) => {\r\n    return TextureData.uniformSamplerNameMap;\r\n}\r\n\r\nconst _isSourceNotExist =(source: HTMLImageElement) => isNotValidVal(source);\r\n\r\nexport const initData = (TextureCacheData: any, TextureData: any) => {\r\n    initTextureCacheData(TextureCacheData);\r\n\r\n    TextureData.index = 0;\r\n\r\n    TextureData.glTextures = [];\r\n    TextureData.sourceMap = [];\r\n\r\n    TextureData.textureMap = [];\r\n\r\n    TextureData.uniformSamplerNameMap = [];\r\n\r\n    TextureData.disposedTextureDataMap = [];\r\n    TextureData.needInitedTextureIndexArr = [];\r\n    TextureData.needAddedSourceArr = [];\r\n\r\n    _setDefaultData(TextureData);\r\n\r\n    _initBufferData(TextureData);\r\n}\r\n\r\nconst _setDefaultData =(TextureData: any) => {\r\n    TextureData.defaultWidth = 0;\r\n    TextureData.defaultHeight = 0;\r\n    TextureData.defaultIsNeedUpdate = 0;\r\n}\r\n\r\nconst _initBufferData =(TextureData: any) => {\r\n    var buffer: any = null,\r\n        count = getBufferCount(),\r\n        size = Float32Array.BYTES_PER_ELEMENT * (getBufferDataSize() * 2) + Uint8Array.BYTES_PER_ELEMENT * (getBufferDataSize()),\r\n        offset: number = null;\r\n\r\n    buffer = createSharedArrayBufferOrArrayBuffer(computeBufferLength(count, size));\r\n\r\n    offset = createTypeArrays(buffer, count, TextureData);\r\n\r\n    _setDefaultTypeArrData(count, TextureData);\r\n\r\n    TextureData.buffer = buffer;\r\n}\r\n\r\nconst _setDefaultTypeArrData =(count: number, TextureData: any) => {\r\n    var width = TextureData.defaultWidth,\r\n        height = TextureData.defaultHeight,\r\n        isNeedUpdate = TextureData.defaultIsNeedUpdate;\r\n\r\n    for (let i = 0; i < count; i++) {\r\n        setWidth(i, width, TextureData);\r\n        setHeight(i, height, TextureData);\r\n        setIsNeedUpdate(i, isNeedUpdate, TextureData);\r\n\r\n        //todo set more data\r\n    }\r\n}\r\n","import { ETextureFormat } from \"../../renderer/enum/ETextureFormat\";\nimport { ETextureType } from \"../../renderer/enum/ETextureType\";\nimport { it, requireCheck } from \"../../definition/typescript/decorator/contract\";\nimport { expect } from \"wonder-expect.js\";\nimport { markNeedUpdate, setHeight, setSource, setWidth } from \"../../renderer/texture/TextureSystem\";\nimport { TextureData } from \"../../renderer/texture/TextureData\";\n\nexport abstract class TextureAsset {\n    // public static defaultTexture = null;\n\n    private _width: number = null;\n    get width() {\n        return this._width === null ? (this.source ? this.source.width : null) : this._width;\n    }\n\n    set width(width: number) {\n        this._width = width;\n    }\n\n    private _height: number = null;\n    get height() {\n        return this._height === null ? (this.source ? this.source.height : null) : this._height;\n    }\n\n    set height(height: number) {\n        this._height = height;\n    }\n\n    // public generateMipmaps: boolean = true;\n    // public sourceRegionMethod: ETextureSourceRegionMethod = ETextureSourceRegionMethod.CHANGE_TEXCOORDS_IN_GLSL;\n    public format: ETextureFormat = ETextureFormat.RGBA;\n    // @cloneAttributeAsBasicType()\n    // public source: any = TextureAsset.defaultTexture;\n    public source: any = null;\n    // public repeatRegion: RectRegion = RectRegion.create(0, 0, 1, 1);\n    // public sourceRegion: RectRegion = null;\n\n    // public sourceRegionMapping: ETextureSourceRegionMapping = ETextureSourceRegionMapping.CANVAS;\n\n    //todo use gl.getParameter(e.g., gl.getParameter(gl.UNPACK_ALIGNMENT)) to query the actual value?\n    // public packAlignment: number = 4;\n    // public unpackAlignment: number = 4;\n    // public flipY: boolean = true;\n    // public premultiplyAlpha: boolean = false;\n    // public isPremultipliedAlpha: boolean = null;\n    // public colorspaceConversion: any = DeviceManager.getInstance().gl.BROWSER_DEFAULT_WEBGL;\n\n    // public wrapS: ETextureWrapMode = ETextureWrapMode.CLAMP_TO_EDGE;\n    // public wrapT: ETextureWrapMode = ETextureWrapMode.CLAMP_TO_EDGE;\n    // public magFilter: ETextureFilterMode = ETextureFilterMode.LINEAR;\n    // public minFilter: ETextureFilterMode = ETextureFilterMode.LINEAR_MIPMAP_LINEAR;\n    public type: ETextureType = ETextureType.UNSIGNED_BYTE;\n    // public mipmaps: wdCb.Collection<any> = wdCb.Collection.create<any>();\n    // public anisotropy: number = 0;\n    public needUpdate: boolean = true;\n\n    public abstract toTexture();\n\n    @requireCheck((textureIndex:number) => {\n        it(\"textureIndex should exist\", () => {\n            expect(textureIndex).exist;\n        });\n    })\n    protected cloneTo(textureIndex:number){\n        setSource(textureIndex, this.source, TextureData);\n        setWidth(textureIndex, this.width, TextureData);\n        setHeight(textureIndex, this.height, TextureData);\n        markNeedUpdate(textureIndex, this.needUpdate, TextureData);\n    }\n}\n","import { TextureAsset } from \"./TextureAsset\";\nimport { Texture } from \"../../renderer/texture/Texture\";\nimport { create } from \"../../renderer/texture/TextureSystem\";\nimport { TextureData } from \"../../renderer/texture/TextureData\";\n\nexport class ImageTextureAsset extends TextureAsset {\n    public static create(source: HTMLImageElement | HTMLCanvasElement) {\n        var obj = new this(source);\n\n        return obj;\n    }\n\n    constructor(source: HTMLImageElement | HTMLCanvasElement) {\n        super();\n\n        this.source = source;\n    }\n\n    // public mipmaps: wdCb.Collection<HTMLCanvasElement | HTMLImageElement | HTMLVideoElement>;\n\n    public toTexture(): Texture {\n        var texture = create(TextureData);\n\n        this.cloneTo(texture.index);\n\n        return texture;\n    }\n}\n","import { Stream } from \"wonder-frp/dist/es2015/core/Stream\";\r\nimport { Log } from \"../utils/Log\";\r\nimport { just } from \"wonder-frp/dist/es2015/global/Operator\";\r\n\r\nexport const load = (url:string, id:string, loadFunc:(url:string, id:string) => Stream, {container}) => {\r\n    var data = null,\r\n        stream = null;\r\n\r\n    data = container.getChild(id);\r\n\r\n    if(data){\r\n        stream = just(data);\r\n    }\r\n    else{\r\n        stream = loadFunc(url, id)\r\n            .do((data:any) => {\r\n                container.addChild(id, data);\r\n                // LoaderManager.getInstance().add(id, self);\r\n            },(err:any) => {\r\n                _errorHandle(url, err);\r\n            }, null);\r\n    }\r\n\r\n    return stream;\r\n}\r\n\r\nconst _errorHandle = (path:string, err:string) => {\r\n    Log.log(`load ${path} asset fail:${err}`);\r\n}\r\n","import { fromPromise } from \"wonder-frp/dist/es2015/global/Operator\";\r\nimport { root } from \"../../definition/Variable\";\r\nimport { ImageTextureAsset } from \"./ImageTextureAsset\";\r\nimport { ETextureFormat } from \"../../renderer/enum/ETextureFormat\";\r\nimport { Log } from \"../../utils/Log\";\r\nimport { PathUtils } from \"wonder-commonlib/dist/es2015/utils/PathUtils\";\r\nimport { load as loadBase } from \"../LoaderSystem\";\r\n\r\nexport const load = (url: string, id: string, AssetDatabaseData:any) => {\r\n    return loadBase(url, id, _load, AssetDatabaseData);\r\n}\r\n\r\nconst _load = (url: string, id: string) => {\r\n    var extname = null,\r\n        stream = null;\r\n\r\n    extname = PathUtils.extname(url).toLowerCase();\r\n\r\n    switch (extname){\r\n        case \".jpg\":\r\n        case \".jpeg\":\r\n        case \".gif\":\r\n        case \".bmp\":\r\n        case \".png\":\r\n            stream = _loadImage(url)\r\n                .map((image:HTMLImageElement) => {\r\n                    return createImageTextureAsset(image, extname);\r\n                });\r\n            break;\r\n        // case \".dds\":\r\n        //     todo handle cross origin?\r\n            // stream = CompressedTextureLoader.load(url);\r\n            // break;\r\n        default:\r\n            Log.error(true, Log.info.FUNC_NOT_SUPPORT(extname));\r\n            break;\r\n    }\r\n\r\n    return stream;\r\n}\r\n\r\nconst _setTextureAssetByExtname = (asset:ImageTextureAsset, extname:string) => {\r\n    switch (extname){\r\n        case \".jpg\":\r\n        case \".jpeg\":\r\n        case \".gif\":\r\n        case \".bmp\":\r\n            asset.format = ETextureFormat.RGB;\r\n            break;\r\n        case \".png\":\r\n            break;\r\n        default:\r\n            Log.error(true, Log.info.FUNC_NOT_SUPPORT(extname));\r\n            break;\r\n    }\r\n\r\n    return asset;\r\n}\r\n\r\nconst _loadImage = (url:string) => {\r\n    return fromPromise(new Promise((resolve:Function, reject:Function) => {\r\n        var img = null;\r\n\r\n        img = new root.Image();\r\n\r\n        // if(config.isCrossOrigin){\r\n        //     img.crossOrigin = \"anonymous\";\r\n        // }\r\n\r\n        img.onload = function () {\r\n            this.onload = null;\r\n            resolve(img);\r\n        };\r\n        img.onerror = function () {\r\n            reject(\"error\");\r\n        };\r\n\r\n        img.src = url;\r\n    }));\r\n}\r\n\r\nexport const createImageTextureAsset = (source:HTMLImageElement|HTMLCanvasElement, extname:string) => {\r\n    return _setTextureAssetByExtname(ImageTextureAsset.create(source), extname);\r\n}\r\n","export class IdleTaskData{\n    public static taskList:Array<Task> = null;\n    public static taskHandleForCancel:number = null;\n    public static totalTaskCount:number = null;\n    public static currentTaskNumber:number = null;\n}\n\nexport type Task = {\n    handler:Function;\n    data:any;\n}","export const root: any = window;\n\nroot.requestIdleCallback = root.requestIdleCallback || function(handler:Function) {\n    let startTime = Date.now();\n\n    return setTimeout(() => {\n        handler({\n            didTimeout: false,\n            timeRemaining: function() {\n                return Math.max(0, 50.0 - (Date.now() - startTime));\n            }\n        });\n    }, 1);\n}\n\nroot.cancelIdleCallback = root.cancelIdleCallback || function(id) {\n    clearTimeout(id);\n}\n\n","import { IdleTaskData } from \"./IdleTaskData\";\nimport { fromPromise } from \"wonder-frp/dist/es2015/global/Operator\";\nimport { root } from \"./extend/root\";\n\nexport const enqueueTaskReturnPromise = (timeout:number = 1000) => {\n    return fromPromise(new Promise((resolve:Function, reject:Function) => {\n        enqueueTask(_isIdle, resolve, timeout)\n    }))\n        .ignoreElements();\n}\n\nconst _isIdle = (resolve) => {\n    resolve(true);\n}\n\nexport const enqueueTask = (taskHandler:Function, taskData:any, timeout:number = 1000) => {\n    var {\n        taskList\n    } = IdleTaskData;\n    const _runTaskQueue = (deadline:{timeRemaining:Function, didTimeout:boolean}) => {\n        while ((deadline.timeRemaining() > 0 || deadline.didTimeout) && taskList.length > 0) {\n            let task = taskList.shift();\n\n            IdleTaskData.currentTaskNumber += 1;\n\n            task.handler(task.data);\n        }\n\n        if (taskList.length > 0) {\n            IdleTaskData.taskHandleForCancel = root.requestIdleCallback(_runTaskQueue, { timeout: timeout} );\n        }\n        else {\n            IdleTaskData.taskHandleForCancel = 0;\n        }\n    }\n\n    taskList.push({\n        handler: taskHandler,\n        data: taskData\n    });\n\n    IdleTaskData.totalTaskCount += 1;\n\n    IdleTaskData.taskHandleForCancel = root.requestIdleCallback(_runTaskQueue, { timeout: timeout });\n}\n\nconst _initData = (IdleTaskData:any) => {\n    IdleTaskData.taskList = [];\n    IdleTaskData.taskHandleForCancel = 0;\n    IdleTaskData.totalTaskCount = 0;\n    IdleTaskData.currentTaskNumber = 0;\n}\n\n_initData(IdleTaskData);\n","import { AssetData } from \"./dataType\";\r\nimport { PathUtils } from \"wonder-commonlib/dist/es2015/utils/PathUtils\";\r\nimport { Log } from \"../utils/Log\";\r\nimport { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { isArray } from \"../utils/JudgeUtils\";\r\nimport { fromArray } from \"wonder-frp/dist/es2015/global/Operator\";\r\nimport { load as loadTexture, createImageTextureAsset } from \"./texture/TextureAssetLoaderSystem\";\r\nimport { enqueueTaskReturnPromise } from \"wonder-task/background/IdleTaskSystem\";\r\n\r\nexport function load(assertData:AssetData, AssetDatabaseData:any, timeout:number);\r\nexport function load(assertData:Array<AssetData>, AssetDatabaseData:any, timeout:number);\r\n\r\nexport function load(...args) {\r\n    return enqueueTaskReturnPromise(args[2])\r\n        .concat(_load(args[0], args[1]));\r\n}\r\n\r\nfunction _load(assertData:AssetData, AssetDatabaseData:any);\r\nfunction _load(assertData:Array<AssetData>, AssetDatabaseData:any);\r\n\r\nfunction _load(...args){\r\n    var AssetDatabaseData = args[1];\r\n\r\n    if (!isArray(args[0])) {\r\n        let { url, id } = args[0];\r\n\r\n        return _createLoadSingleAssetStream(url, id, AssetDatabaseData);\r\n    }\r\n    else {\r\n        let assetArr: Array<AssetData> = args[0];\r\n\r\n        return fromArray(assetArr).concatMap(({ url, id }) => {\r\n            return _createLoadSingleAssetStream(url, id, AssetDatabaseData);\r\n        });\r\n    }\r\n}\r\n\r\nconst _createLoadSingleAssetStream = (url: string, id: string, AssetDatabaseData:any) => {\r\n    if(!has(id, AssetDatabaseData)){\r\n        AssetDatabaseData.totalAssertCount += 1;\r\n    }\r\n\r\n    return _getLoadFunc(url)(url, id, AssetDatabaseData)\r\n        .map(() => {\r\n            AssetDatabaseData.currentLoadedCount += 1;\r\n\r\n            return {\r\n                currentLoadedCount: AssetDatabaseData.currentLoadedCount,\r\n                totalAssetCount:AssetDatabaseData.totalAssertCount\r\n            }\r\n        });\r\n}\r\n\r\nconst _getLoadFunc = (url: string) => {\r\n    var extname = PathUtils.extname(url),\r\n        load: Function = null;\r\n\r\n    switch (extname) {\r\n        case \".jpg\":\r\n        case \".jpeg\":\r\n        case \".png\":\r\n        //todo support load compress texture\r\n        // case \".dds\":\r\n        case \".gif\":\r\n        case \".bmp\":\r\n            load = loadTexture;\r\n            break;\r\n        default:\r\n            Log.error(true, Log.info.FUNC_UNKNOW(`extname:${extname}`));\r\n            break;\r\n    }\r\n\r\n    return load;\r\n}\r\n\r\nexport const get = (id:string, {container}) => {\r\n    return container.getChild(id);\r\n}\r\n\r\nexport const setTextureAsset = (id:string, source:HTMLImageElement|HTMLCanvasElement, extname:string, AssetDatabaseData:any) => {\r\n    _set(id, createImageTextureAsset(source, extname), AssetDatabaseData);\r\n}\r\n\r\nconst _set = (id:string, asset:any, {container}) => {\r\n    container.addChild(id, asset);\r\n}\r\n\r\nexport const has = (id:string, {container}) => {\r\n    return container.hasChild(id);\r\n}\r\n\r\nexport const initData = (AssetDatabaseData: any) => {\r\n    AssetDatabaseData.container = Hash.create();\r\n    AssetDatabaseData.totalAssertCount = 0;\r\n    AssetDatabaseData.currentLoadedCount = 0;\r\n}\r\n","import { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\n\r\nexport class AssetDatabaseData {\r\n    public static container: Hash<any> = null;\r\n    public static totalAssertCount: number = null;\r\n    public static currentLoadedCount: number = null;\r\n}\r\n","import { get, load, setTextureAsset as setTextureAssetSystem } from \"./AssetDatabaseSystem\";\nimport { AssetData } from \"./dataType\";\nimport { AssetDatabaseData } from \"./AssetDatabaseData\";\n\n// export function loadAsset(url: string, onNextFunc:Function, onErrorFunc:Function, onCompleteFunc:Function, timeout?:number);\n// export function loadAsset(assetArr: Array<AssetData>, onNextFunc:Function, onErrorFunc:Function, onCompleteFunc:Function, timeout?:number);\n//\n// export function loadAsset(...args){\n//     return load(args[0], AssetDatabaseData, args[1], args[2], args[3], args[4] || 100);\n// }\nexport function loadAsset(url: string, timeout?:number);\nexport function loadAsset(assetArr: Array<AssetData>, timeout?:number);\n\nexport function loadAsset(...args){\n    return load(args[0], AssetDatabaseData, args[1] || 100);\n}\n\nexport const getAsset = (id: string) => {\n    return get(id, AssetDatabaseData);\n}\n\nexport function setTextureAsset(id: string, source:HTMLImageElement|HTMLCanvasElement, extname:string) {\n    setTextureAssetSystem(id, source, extname, AssetDatabaseData);\n}\n","import { getFar, getNear, getPMatrix, setFar, setNear } from \"./CameraSystem\";\r\nimport { CameraController } from \"./CameraController\";\r\nimport { CameraControllerData } from \"./CameraControllerData\";\r\nimport { CameraData } from \"./CameraData\";\r\n\r\nexport const getCameraPMatrix = (cameraController: CameraController) => {\r\n    return getPMatrix(cameraController.index, CameraData);\r\n}\r\n\r\nexport const getCameraNear = (cameraController: CameraController) => {\r\n    return getNear(cameraController.index, CameraData);\r\n}\r\n\r\nexport const setCameraNear = (cameraController: CameraController, near: number) => {\r\n    setNear(cameraController.index, near, CameraControllerData, CameraData);\r\n}\r\n\r\nexport const getCameraFar = (cameraController: CameraController) => {\r\n    return getFar(cameraController.index, CameraData);\r\n}\r\n\r\nexport const setCameraFar = (cameraController: CameraController, far: number) => {\r\n    setFar(cameraController.index, far, CameraControllerData, CameraData);\r\n}\r\n","import { getFar, getNear, getPMatrix, setFar, setNear } from \"./CameraSystem\";\r\nimport { CameraController } from \"./CameraController\";\r\nimport { getAspect, getFovy, setAspect, setFovy } from \"./PerspectiveCameraSystem\";\r\nimport { PerspectiveCameraData } from \"./PerspectiveCameraData\";\r\nimport { CameraControllerData } from \"./CameraControllerData\";\r\n\r\nexport const getPerspectiveCameraFovy = (cameraController: CameraController) => {\r\n    return getFovy(cameraController.index, PerspectiveCameraData);\r\n}\r\n\r\nexport const setPerspectiveCameraFovy = (cameraController: CameraController, fovy: number) => {\r\n    setFovy(cameraController.index, fovy, PerspectiveCameraData, CameraControllerData);\r\n}\r\n\r\nexport const getPerspectiveCameraAspect = (cameraController: CameraController) => {\r\n    return getAspect(cameraController.index, PerspectiveCameraData);\r\n}\r\n\r\nexport const setPerspectiveCameraAspect = (cameraController: CameraController, aspect: number) => {\r\n    setAspect(cameraController.index, aspect, PerspectiveCameraData, CameraControllerData);\r\n}\r\n","import { BoxGeometry, BoxGeometryConfigData } from \"./BoxGeometry\";\r\nimport { ensureFunc, it, requireCheckFunc } from \"../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { Vector3 } from \"../../math/Vector3\";\r\nimport {\r\n    create as createGeometry,\r\n    isIndicesBufferNeed32BitsByData\r\n} from \"./GeometrySystem\";\r\nimport { ExtendUtils } from \"wonder-commonlib/dist/es2015/utils/ExtendUtils\";\r\nimport { GlobalTempData } from \"../../definition/GlobalTempData\";\r\n\r\nexport const create = (GeometryData: any) => {\r\n    var geometry = new BoxGeometry(),\r\n        index: number = null;\r\n\r\n    geometry = createGeometry(geometry, GeometryData);\r\n\r\n    index = geometry.index;\r\n\r\n    setConfigData(index, {}, GeometryData);\r\n\r\n    GeometryData.computeDataFuncMap[index] = _computeData;\r\n\r\n    return geometry;\r\n}\r\n\r\nconst _computeData =(index: number, GeometryData: any) => {\r\n    var {\r\n            width,\r\n        height,\r\n        depth,\r\n        widthSegments,\r\n        heightSegments,\r\n        depthSegments\r\n        } = _getConfigData(index, GeometryData),\r\n        sides = {\r\n            FRONT: 0,\r\n            BACK: 1,\r\n            TOP: 2,\r\n            BOTTOM: 3,\r\n            RIGHT: 4,\r\n            LEFT: 5\r\n        },\r\n        vertices = [],\r\n        normals = [],\r\n        texCoords = [],\r\n        indices = [];\r\n\r\n    var faceAxes = [\r\n        [0, 1, 3], // FRONT\r\n        [4, 5, 7], // BACK\r\n        [3, 2, 6], // TOP\r\n        [1, 0, 4], // BOTTOM\r\n        [1, 4, 2], // RIGHT\r\n        [5, 0, 6]  // LEFT\r\n    ];\r\n\r\n    var faceNormals = [\r\n        [0, 0, 1], // FRONT\r\n        [0, 0, -1], // BACK\r\n        [0, 1, 0], // TOP\r\n        [0, -1, 0], // BOTTOM\r\n        [1, 0, 0], // RIGHT\r\n        [-1, 0, 0]  // LEFT\r\n    ];\r\n    var corners = [\r\n        Vector3.create(-width, -height, depth),\r\n        Vector3.create(width, -height, depth),\r\n        Vector3.create(width, height, depth),\r\n        Vector3.create(-width, height, depth),\r\n        Vector3.create(width, -height, -depth),\r\n        Vector3.create(-width, -height, -depth),\r\n        Vector3.create(-width, height, -depth),\r\n        Vector3.create(width, height, -depth)\r\n    ];\r\n\r\n    function generateFace(side, uSegments, vSegments) {\r\n        var x, y, z, u, v;\r\n        var i, j;\r\n        var offset = vertices.length / 3;\r\n\r\n        for (i = 0; i <= uSegments; i++) {\r\n            for (j = 0; j <= vSegments; j++) {\r\n                let temp1 = GlobalTempData.vector3_1,\r\n                    temp2 = GlobalTempData.vector3_2,\r\n                    temp3 = GlobalTempData.vector3_3,\r\n                    r = GlobalTempData.vector3_4;\r\n\r\n                temp1.lerp(corners[faceAxes[side][0]], corners[faceAxes[side][1]], i / uSegments);\r\n                temp2.lerp(corners[faceAxes[side][0]], corners[faceAxes[side][2]], j / vSegments);\r\n                temp3.sub2(temp2, corners[faceAxes[side][0]]);\r\n                r.add2(temp1, temp3);\r\n                u = i / uSegments;\r\n                v = j / vSegments;\r\n\r\n                vertices.push(r.x, r.y, r.z);\r\n                normals.push(faceNormals[side][0], faceNormals[side][1], faceNormals[side][2]);\r\n                texCoords.push(u, v);\r\n\r\n                if ((i < uSegments) && (j < vSegments)) {\r\n                    indices.push(offset + j + i * (uSegments + 1), offset + j + (i + 1) * (uSegments + 1), offset + j + i * (uSegments + 1) + 1);\r\n                    indices.push(offset + j + (i + 1) * (uSegments + 1), offset + j + (i + 1) * (uSegments + 1) + 1, offset + j + i * (uSegments + 1) + 1);\r\n\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    generateFace(sides.FRONT, widthSegments, heightSegments);\r\n    generateFace(sides.BACK, widthSegments, heightSegments);\r\n    generateFace(sides.TOP, widthSegments, depthSegments);\r\n    generateFace(sides.BOTTOM, widthSegments, depthSegments);\r\n    generateFace(sides.RIGHT, depthSegments, heightSegments);\r\n    generateFace(sides.LEFT, depthSegments, heightSegments);\r\n\r\n    return {\r\n        vertices: vertices,\r\n        normals: normals,\r\n        texCoords: texCoords,\r\n        indices: indices\r\n    };\r\n}\r\n\r\nconst _getConfigData =ensureFunc((data: BoxGeometryConfigData) => {\r\n    it(\"config data should be defined\", () => {\r\n        expect(data).exist;\r\n        expect(data.width).exist;\r\n        expect(data.height).exist;\r\n        expect(data.depth).exist;\r\n        expect(data.widthSegments).exist;\r\n        expect(data.heightSegments).exist;\r\n        expect(data.depthSegments).exist;\r\n    })\r\n}, (index: number, GeometryData: any) => {\r\n    return GeometryData.configDataMap[index];\r\n})\r\n\r\nexport const setConfigData = (index: number, data: BoxGeometryConfigData, GeometryData: any) => {\r\n    GeometryData.configDataMap[index] = ExtendUtils.extend({\r\n        width: 10,\r\n        height: 10,\r\n        depth: 10,\r\n        widthSegments: 1,\r\n        heightSegments: 1,\r\n        depthSegments: 1\r\n    },\r\n        data\r\n    );\r\n}\r\n\r\n","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Geometry } from \"./Geometry\";\r\nimport { create, setConfigData } from \"./BoxGeometrySystem\";\r\nimport { GeometryData } from \"./GeometryData\";\r\n\r\n@registerClass(\"BoxGeometry\")\r\nexport class BoxGeometry extends Geometry {\r\n}\r\n\r\nexport const createBoxGeometry = () => {\r\n    return create(GeometryData);\r\n}\r\n\r\nexport const setBoxGeometryConfigData = (geometry: BoxGeometry, data: BoxGeometryConfigData) => {\r\n    setConfigData(geometry.index, data, GeometryData);\r\n}\r\n\r\nexport type BoxGeometryConfigDataMap = {\r\n    [index: number]: BoxGeometryConfigData\r\n}\r\n\r\nexport type BoxGeometryConfigData = {\r\n    width?: number;\r\n    height?: number;\r\n    depth?: number;\r\n    widthSegments?: number;\r\n    heightSegments?: number;\r\n    depthSegments?: number;\r\n}\r\n","import { CustomGeometry } from \"./CustomGeometry\";\r\nimport { create as createGeometry, getIndices, getVertices } from \"./GeometrySystem\";\r\n\r\nexport const create = (GeometryData: any) => {\r\n    return createGeometry(new CustomGeometry(), GeometryData);\r\n}\r\n","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { Geometry } from \"./Geometry\";\r\nimport { create } from \"./CustomGeometrySystem\";\r\nimport { GeometryData } from \"./GeometryData\";\r\nimport { setIndices, setNormals, setTexCoords, setVertices } from \"./GeometrySystem\";\r\n\r\n@registerClass(\"CustomGeometry\")\r\nexport class CustomGeometry extends Geometry {\r\n}\r\n\r\nexport const createCustomGeometry = () => {\r\n    return create(GeometryData);\r\n}\r\n\r\nexport const setCustomGeometryVertices = (geometry: Geometry, vertices: Float32Array) => {\r\n    return setVertices(geometry.index, vertices, GeometryData);\r\n}\r\n\r\nexport const setCustomGeometryNormals = (geometry: Geometry, normals: Float32Array) => {\r\n    return setNormals(geometry.index, normals, GeometryData);\r\n}\r\n\r\nexport const setCustomGeometryTexCoords = (geometry: Geometry, texCoords: Float32Array) => {\r\n    return setTexCoords(geometry.index, texCoords, GeometryData);\r\n}\r\n\r\nexport const setCustomGeometryIndices = (geometry: Geometry, indices: Uint16Array | Uint32Array) => {\r\n    return setIndices(geometry.index, indices, GeometryData);\r\n}\r\n","export enum EShading {\r\n    FLAT = 0,\r\n    SMOOTH = 1\r\n}\r\n\r\n","export const DebugConfig = {\r\n    isTest: false,\r\n    debugCollision: false,\r\n    showDebugPanel: false\r\n};","export function singleton(isInitWhenCreate: boolean = false) {\r\n    return (target: any) => {\r\n        target._instance = null;\r\n\r\n        if (isInitWhenCreate) {\r\n            target.getInstance = () => {\r\n                if (target._instance === null) {\r\n                    let instance = new target();\r\n\r\n                    target._instance = instance;\r\n\r\n                    instance.initWhenCreate();\r\n                }\r\n\r\n                return target._instance;\r\n            };\r\n        }\r\n        else {\r\n            target.getInstance = () => {\r\n                if (target._instance === null) {\r\n                    target._instance = new target();\r\n                }\r\n\r\n                return target._instance;\r\n            };\r\n        }\r\n    }\r\n}","import { ensure, it } from \"../../definition/typescript/decorator/contract\";\r\nimport { Log } from \"../Log\";\r\nimport { expect } from \"wonder-expect.js\";\r\n\r\nexport abstract class TimeController {\r\n    public elapsed: number = null;\r\n    public pauseElapsed: number = 0;\r\n    public pauseTime: number = null;\r\n    public startTime: number = null;\r\n\r\n    public start() {\r\n        this.startTime = this.getNow();\r\n        this.pauseElapsed = null;\r\n    }\r\n\r\n    public stop() {\r\n        this.startTime = null;\r\n    }\r\n\r\n    public pause() {\r\n        this.pauseTime = this.getNow();\r\n    }\r\n\r\n    public resume() {\r\n        this.pauseElapsed += this.getNow() - this.pauseTime;\r\n        this.pauseTime = null;\r\n    }\r\n\r\n    @ensure(function() {\r\n        it(`elapsed should >= 0, but actual is ${this.elapsed}`, () => {\r\n            expect(this.elapsed).gte(0);\r\n        });\r\n    })\r\n    public computeElapseTime(time: number) {\r\n        if (this.pauseElapsed) {\r\n            this.elapsed = time - this.pauseElapsed - this.startTime;\r\n        }\r\n        else {\r\n            this.elapsed = time - this.startTime;\r\n        }\r\n\r\n        if (this.elapsed < 0) {\r\n            this.elapsed = 0;\r\n        }\r\n\r\n        return this.elapsed;\r\n    }\r\n\r\n    protected abstract getNow();\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { TimeController } from \"./TimeController\";\r\nimport { root } from \"../../definition/Variable\";\r\n\r\nconst STARTING_FPS = 60,\r\n    GAMETIME_SCALE = 1000;\r\n\r\n@registerClass(\"DirectorTimeController\")\r\nexport class DirectorTimeController extends TimeController {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    public gameTime: number = null;\r\n    public fps: number = null;\r\n    public isTimeChange: boolean = false;\r\n    public deltaTime: number = null;\r\n\r\n    private _lastTime: number = null;\r\n\r\n    public tick(time: number) {\r\n        this.deltaTime = this._lastTime !== null ? time - this._lastTime : time;\r\n        this._updateFps(this.deltaTime);\r\n        this.gameTime = time / GAMETIME_SCALE;\r\n\r\n        this._lastTime = time;\r\n    }\r\n\r\n    public start() {\r\n        super.start();\r\n\r\n        this.isTimeChange = true;\r\n        this.elapsed = 0;\r\n    }\r\n\r\n    public resume() {\r\n        super.resume();\r\n\r\n        this.isTimeChange = true;\r\n    }\r\n\r\n    protected getNow() {\r\n        return root.performance.now();\r\n    }\r\n\r\n    private _updateFps(deltaTime: number) {\r\n        if (this._lastTime === null) {\r\n            this.fps = STARTING_FPS;\r\n        }\r\n        else {\r\n            this.fps = 1000 / deltaTime;\r\n        }\r\n    }\r\n}","import { registerClass } from \"../../definition/typescript/decorator/registerClass\";\r\nimport { TimeController } from \"./TimeController\";\r\nimport { Director } from \"../../core/Director\";\r\nimport { root } from \"../../definition/Variable\";\r\n\r\n@registerClass(\"CommonTimeController\")\r\nexport class CommonTimeController extends TimeController {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    protected getNow() {\r\n        if (Director.getInstance().isTimeChange) {\r\n            return Director.getInstance().elapsed;\r\n        }\r\n\r\n        return root.performance.now();\r\n    }\r\n}","import { Hash } from \"wonder-commonlib/dist/es2015/Hash\";\r\nimport { CommonTimeController } from \"../utils/time/CommonTimeController\";\r\n\r\nexport class Scheduler {\r\n    public static create() {\r\n        var obj = new this();\r\n\r\n        return obj;\r\n    }\r\n\r\n    private _scheduleCount = 0;\r\n    private _schedules: Hash<any> = Hash.create<any>();\r\n\r\n    public update(elapsed: number) {\r\n        this._schedules.forEach((scheduleItem: any, scheduleId: string) => {\r\n            if (scheduleItem.isStop || scheduleItem.isPause) {\r\n                return;\r\n            }\r\n\r\n            scheduleItem.update(elapsed);\r\n\r\n            if (scheduleItem.isFinish) {\r\n                this.remove(scheduleId);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * schedule the task to each frame\r\n     * @param task\r\n     * @param args\r\n     * @returns {string} schedule id\r\n     */\r\n    public scheduleLoop(task: Function, args: Array<any> = []) {\r\n        return this._schedule(LoopScheduleItem, Array.prototype.slice.call(arguments, 0));\r\n    }\r\n\r\n    /**\r\n     * schedule the task to the next speficied frame\r\n     * @param task\r\n     * @param {number} frame\r\n     * @param args\r\n     * @returns {string} schedule id\r\n     */\r\n    public scheduleFrame(task, frame = 1, args?) {\r\n        return this._schedule(FrameScheduleItem, Array.prototype.slice.call(arguments, 0));\r\n    }\r\n\r\n    /**\r\n     * schedule the task to internal, like setInterval\r\n     * @param task\r\n     * @param time\r\n     * @param args\r\n     * @returns {string} schedule id\r\n     */\r\n    public scheduleInterval(task, time = 0, args?) {\r\n        return this._schedule(IntervalScheduleItem, Array.prototype.slice.call(arguments, 0));\r\n    }\r\n\r\n    /**\r\n     * schedule the task to time, like setTimeout\r\n     * @param task\r\n     * @param time\r\n     * @param args\r\n     * @returns {string} schedule id\r\n     */\r\n    public scheduleTime(task, time = 0, args?) {\r\n        return this._schedule(TimeScheduleItem, Array.prototype.slice.call(arguments, 0));\r\n    }\r\n\r\n    /**\r\n     * pause the specified schedule\r\n     * @param scheduleId\r\n     */\r\n    public pause(scheduleId?: string) {\r\n        if (arguments.length === 0) {\r\n            let self = this;\r\n\r\n            this._schedules.forEach((scheduleItem: any, scheduleId: string) => {\r\n                self.pause(scheduleId);\r\n            });\r\n        }\r\n        else if (arguments.length === 1) {\r\n            let scheduleItem = this._schedules.getChild(arguments[0]);\r\n\r\n            scheduleItem.pause();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * resume the specified schedule\r\n     * @param scheduleId\r\n     */\r\n    public resume(scheduleId?: string) {\r\n        if (arguments.length === 0) {\r\n            let self = this;\r\n\r\n            this._schedules.forEach((scheduleItem: any, scheduleId: string) => {\r\n                self.resume(scheduleId);\r\n            });\r\n        }\r\n        else if (arguments.length === 1) {\r\n            let scheduleItem = this._schedules.getChild(arguments[0]);\r\n\r\n            scheduleItem.resume();\r\n        }\r\n    }\r\n\r\n    public start(scheduleId?: string) {\r\n        if (arguments.length === 0) {\r\n            let self = this;\r\n\r\n            this._schedules.forEach((scheduleItem: any, scheduleId: string) => {\r\n                self.start(scheduleId);\r\n            });\r\n        }\r\n        else if (arguments.length === 1) {\r\n            let scheduleItem = this._schedules.getChild(arguments[0]);\r\n\r\n            scheduleItem.start();\r\n        }\r\n    }\r\n\r\n    public stop(scheduleId?: string) {\r\n        if (arguments.length === 0) {\r\n            let self = this;\r\n\r\n            this._schedules.forEach((scheduleItem: any, scheduleId: string) => {\r\n                self.stop(scheduleId);\r\n            });\r\n        }\r\n        else if (arguments.length === 1) {\r\n            let scheduleItem = this._schedules.getChild(arguments[0]);\r\n\r\n            scheduleItem.stop();\r\n        }\r\n    }\r\n\r\n    public has(scheduleId: string) {\r\n        return !!this._schedules.hasChild(scheduleId)\r\n    }\r\n\r\n    /**\r\n     * remove the specify schedule by id\r\n     * @param id\r\n     */\r\n    public remove(scheduleId: string) {\r\n        this._schedules.removeChild(scheduleId);\r\n    }\r\n\r\n    public removeAll() {\r\n        this._schedules.removeAllChildren();\r\n    }\r\n\r\n    private _schedule(_class: any, args: Array<any>) {\r\n        var scheduleId = this._buildId();\r\n\r\n        this._schedules.setValue(scheduleId, _class.create.apply(_class, args));\r\n\r\n        return scheduleId;\r\n    }\r\n\r\n    private _buildId() {\r\n        return 'Schedule_' + (this._scheduleCount++);\r\n    }\r\n}\r\n\r\nclass ScheduleItem {\r\n    constructor(task: Function, args: Array<any>) {\r\n        this.task = task;\r\n        this.args = args;\r\n    }\r\n\r\n    public isPause: boolean = false;\r\n    public isStop: boolean = false;\r\n    public pauseTime: number = null;\r\n    public pauseElapsed: number = null;\r\n    public startTime: number = null;\r\n    public isFinish: boolean = false;\r\n\r\n    protected task: Function = null;\r\n    protected args: Array<any> = null;\r\n    protected timeController: CommonTimeController = CommonTimeController.create();\r\n\r\n    /**\r\n     * pause the specified schedule\r\n     * @param scheduleId\r\n     */\r\n    public pause() {\r\n        this.isPause = true;\r\n        this.timeController.pause();\r\n    }\r\n\r\n    /**\r\n     * resume the specified schedule\r\n     * @param scheduleId\r\n     */\r\n    public resume() {\r\n        this.isPause = false;\r\n        this.timeController.resume();\r\n    }\r\n\r\n    public start() {\r\n        this.isStop = false;\r\n        this.timeController.start();\r\n    }\r\n\r\n    public stop() {\r\n        this.isStop = true;\r\n        this.timeController.stop();\r\n    }\r\n\r\n    public finish() {\r\n        this.isFinish = true;\r\n    }\r\n}\r\n\r\nclass TimeScheduleItem extends ScheduleItem {\r\n    public static create(task: Function, time: number = 0, args: Array<any> = []) {\r\n        var obj = new this(task, time, args);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(task: Function, time: number = 0, args: Array<any> = []) {\r\n        super(task, args);\r\n\r\n        this._time = time;\r\n    }\r\n\r\n    private _time: number = null;\r\n\r\n    public update(elapsed: number) {\r\n        var elapsed = this.timeController.computeElapseTime(elapsed);\r\n\r\n        if (elapsed >= this._time) {\r\n            this.task.apply(this, this.args);\r\n            this.finish();\r\n        }\r\n    }\r\n}\r\n\r\nclass IntervalScheduleItem extends ScheduleItem {\r\n    public static create(task: Function, time: number = 0, args: Array<any> = []) {\r\n        var obj = new this(task, time, args);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(task: Function, time: number = 0, args: Array<any> = []) {\r\n        super(task, args);\r\n\r\n        this._intervalTime = time;\r\n    }\r\n\r\n    private _intervalTime: number = null;\r\n    private _elapsed: number = 0;\r\n\r\n    public update(elapsed: number) {\r\n        var elapsed = this.timeController.computeElapseTime(elapsed);\r\n\r\n        if (elapsed - this._elapsed >= this._intervalTime) {\r\n            this.task.apply(this, this.args);\r\n            this._elapsed = elapsed;\r\n        }\r\n    }\r\n\r\n    public start() {\r\n        super.start();\r\n\r\n        this._elapsed = 0;\r\n    }\r\n}\r\n\r\nclass LoopScheduleItem extends ScheduleItem {\r\n    public static create(task: Function, args: Array<any> = []) {\r\n        var obj = new this(task, args);\r\n\r\n        return obj;\r\n    }\r\n\r\n    public update(elapsed: number) {\r\n        this.task.apply(this, this.args);\r\n    }\r\n}\r\n\r\nclass FrameScheduleItem extends ScheduleItem {\r\n    public static create(task: Function, frame: number = 1, args: Array<any> = []) {\r\n        var obj = new this(task, frame, args);\r\n\r\n        return obj;\r\n    }\r\n\r\n    constructor(task: Function, frame: number = 1, args: Array<any> = []) {\r\n        super(task, args);\r\n\r\n        this._frame = frame;\r\n    }\r\n\r\n    private _frame: number = null;\r\n\r\n    public update(elapsed: number) {\r\n        this._frame--;\r\n\r\n        if (this._frame <= 0) {\r\n            this.task.apply(this, this.args);\r\n            this.finish();\r\n        }\r\n    }\r\n}\r\n","import { initDataHelper } from \"../../../component/light/PointLightSystem\";\r\n\r\nexport const initData = (PointLightData: any) => {\r\n    initDataHelper(PointLightData);\r\n\r\n    PointLightData.lightGLSLDataStructureMemberNameArr = [\r\n        {\r\n            position: \"u_pointLights[0].position\",\r\n            color: \"u_pointLights[0].color\",\r\n            intensity: \"u_pointLights[0].intensity\",\r\n            constant: \"u_pointLights[0].constant\",\r\n            linear: \"u_pointLights[0].linear\",\r\n            quadratic: \"u_pointLights[0].quadratic\",\r\n            range: \"u_pointLights[0].range\"\r\n        }, {\r\n            position: \"u_pointLights[1].position\",\r\n            color: \"u_pointLights[1].color\",\r\n            intensity: \"u_pointLights[1].intensity\",\r\n            constant: \"u_pointLights[1].constant\",\r\n            linear: \"u_pointLights[1].linear\",\r\n            quadratic: \"u_pointLights[1].quadratic\",\r\n            range: \"u_pointLights[1].range\"\r\n        }, {\r\n            position: \"u_pointLights[2].position\",\r\n            color: \"u_pointLights[2].color\",\r\n            intensity: \"u_pointLights[2].intensity\",\r\n            constant: \"u_pointLights[2].constant\",\r\n            linear: \"u_pointLights[2].linear\",\r\n            quadratic: \"u_pointLights[2].quadratic\",\r\n            range: \"u_pointLights[2].range\"\r\n        }, {\r\n            position: \"u_pointLights[3].position\",\r\n            color: \"u_pointLights[3].color\",\r\n            intensity: \"u_pointLights[3].intensity\",\r\n            constant: \"u_pointLights[3].constant\",\r\n            linear: \"u_pointLights[3].linear\",\r\n            quadratic: \"u_pointLights[3].quadratic\",\r\n            range: \"u_pointLights[3].range\"\r\n        }\r\n    ];\r\n}\r\n","import { initDataHelper } from \"../../../component/light/DirectionLightSystem\";\r\n\r\nexport const initData = (DirectionLightData: any) => {\r\n    initDataHelper(DirectionLightData);\r\n\r\n    DirectionLightData.lightGLSLDataStructureMemberNameArr = [\r\n        {\r\n            position: \"u_directionLights[0].position\",\r\n            color: \"u_directionLights[0].color\",\r\n            intensity: \"u_directionLights[0].intensity\"\r\n        }, {\r\n            position: \"u_directionLights[1].position\",\r\n            color: \"u_directionLights[1].color\",\r\n            intensity: \"u_directionLights[1].intensity\"\r\n        }, {\r\n            position: \"u_directionLights[2].position\",\r\n            color: \"u_directionLights[2].color\",\r\n            intensity: \"u_directionLights[2].intensity\"\r\n        }, {\r\n            position: \"u_directionLights[3].position\",\r\n            color: \"u_directionLights[3].color\",\r\n            intensity: \"u_directionLights[3].intensity\"\r\n        }\r\n    ];\r\n}\r\n","import { Light } from \"../../light/Light\";\r\nimport { GameObject } from \"../../../core/entityObject/gameObject/GameObject\";\r\nimport {\r\n    addComponent as addSpecifyLightComponent\r\n} from \"../../light/SpecifyLightSystem\";\r\nimport { WebGL1DirectionLightData } from \"../../../renderer/webgl1/light/DirectionLightData\";\r\nimport { disposeComponent as disposeDirectionLightComponent } from \"../../light/DirectionLightSystem\";\r\n\r\nexport const addComponent = (component: Light, gameObject: GameObject) => {\r\n    addSpecifyLightComponent(component, gameObject, WebGL1DirectionLightData);\r\n}\r\n\r\nexport const disposeComponent = (component: Light) => {\r\n    disposeDirectionLightComponent(component, WebGL1DirectionLightData);\r\n}\r\n","import { Light } from \"../../light/Light\";\r\nimport { GameObject } from \"../../../core/entityObject/gameObject/GameObject\";\r\nimport {\r\n    addComponent as addSpecifyLightComponent\r\n} from \"../../light/SpecifyLightSystem\";\r\nimport { WebGL1PointLightData } from \"../../../renderer/webgl1/light/PointLightData\";\r\nimport { disposeComponent as disposePointLightComponent } from \"../../light/PointLightSystem\";\r\n\r\nexport const addComponent = (component: Light, gameObject: GameObject) => {\r\n    addSpecifyLightComponent(component, gameObject, WebGL1PointLightData);\r\n}\r\n\r\nexport const disposeComponent = (component: Light) => {\r\n    disposePointLightComponent(component, WebGL1PointLightData);\r\n}\r\n","import {\r\n    addAddComponentHandle as addAddComponentHandleToMap, addDisposeHandle as addDisposeHandleToMap\r\n} from \"../../ComponentSystem\";\r\nimport {\r\n    addComponent as addAmbientLightComponent, disposeComponent as disposeAmbientLightComponent,\r\n    initData as initAmbientLightData\r\n} from \"../../light/AmbientLightSystem\";\r\nimport { initData as initWebGL1PointLightData } from \"../../../renderer/webgl1/light/PointLightSystem\";\r\nimport { initData as initWebGL1DirectionLightData } from \"../../../renderer/webgl1/light/DirectionLightSystem\";\r\nimport {\r\n    addComponent as addDirectionLightComponent,\r\n    disposeComponent as disposeDirectionLightComponent\r\n} from \"../../webgl1/light/DirectionLightSystem\";\r\nimport {\r\n    addComponent as addPointLightComponent,\r\n    disposeComponent as disposePointLightComponent\r\n} from \"../../webgl1/light/PointLightSystem\";\r\n\r\nexport const addAddComponentHandle = (AmbientLight: any, DirectionLight: any, PointLight: any) => {\r\n    addAddComponentHandleToMap(AmbientLight, addAmbientLightComponent);\r\n    addAddComponentHandleToMap(DirectionLight, addDirectionLightComponent);\r\n    addAddComponentHandleToMap(PointLight, addPointLightComponent);\r\n}\r\n\r\nexport const addDisposeHandle = (AmbientLight: any, DirectionLight: any, PointLight: any) => {\r\n    addDisposeHandleToMap(AmbientLight, disposeAmbientLightComponent);\r\n    addDisposeHandleToMap(DirectionLight, disposeDirectionLightComponent);\r\n    addDisposeHandleToMap(PointLight, disposePointLightComponent);\r\n}\r\n\r\nexport const initData = (AmbientLightData: any, DirectionLightData: any, PointLightData: any) => {\r\n    initAmbientLightData(AmbientLightData);\r\n    initWebGL1DirectionLightData(DirectionLightData);\r\n    initWebGL1PointLightData(PointLightData);\r\n}\r\n","import { initDataHelper } from \"../../../component/light/DirectionLightSystem\";\r\n\r\nexport const initData = (DirectionLightData: any) => {\r\n    initDataHelper(DirectionLightData);\r\n}\r\n","import { Light } from \"../../light/Light\";\r\nimport { GameObject } from \"../../../core/entityObject/gameObject/GameObject\";\r\nimport {\r\n    addComponent as addSpecifyLightComponent\r\n} from \"../../light/SpecifyLightSystem\";\r\nimport { WebGL2PointLightData } from \"../../../renderer/webgl2/light/PointLightData\";\r\nimport { disposeComponent as disposePointLightComponent } from \"../../light/PointLightSystem\";\r\n\r\nexport const addComponent = (component: Light, gameObject: GameObject) => {\r\n    addSpecifyLightComponent(component, gameObject, WebGL2PointLightData);\r\n}\r\n\r\nexport const disposeComponent = (component: Light) => {\r\n    disposePointLightComponent(component, WebGL2PointLightData);\r\n}\r\n","import { Light } from \"../../light/Light\";\r\nimport { GameObject } from \"../../../core/entityObject/gameObject/GameObject\";\r\nimport {\r\n    addComponent as addSpecifyLightComponent\r\n} from \"../../light/SpecifyLightSystem\";\r\nimport { WebGL2DirectionLightData } from \"../../../renderer/webgl2/light/DirectionLightData\";\r\nimport { disposeComponent as disposeDirectionLightComponent } from \"../../light/DirectionLightSystem\";\r\n\r\nexport const addComponent = (component: Light, gameObject: GameObject) => {\r\n    addSpecifyLightComponent(component, gameObject, WebGL2DirectionLightData);\r\n}\r\n\r\nexport const disposeComponent = (component: Light) => {\r\n    disposeDirectionLightComponent(component, WebGL2DirectionLightData);\r\n}\r\n","import {\r\n    addAddComponentHandle as addAddComponentHandleToMap, addDisposeHandle as addDisposeHandleToMap\r\n} from \"../../ComponentSystem\";\r\nimport {\r\n    addComponent as addAmbientLightComponent, disposeComponent as disposeAmbientLightComponent,\r\n    initData as initAmbientLightData\r\n} from \"../../light/AmbientLightSystem\";\r\nimport { initData as initWebGL2DirectionLightData } from \"../../../renderer/webgl2/light/DirectionLightSystem\";\r\nimport { initData as initWebGL2PointLightData } from \"../../../renderer/webgl2/light/PointLightSystem\";\r\nimport {\r\n    addComponent as addPointLightComponent,\r\n    disposeComponent as disposePointLightComponent\r\n} from \"../../webgl2/light/PointLightSystem\";\r\nimport {\r\n    addComponent as addDirectionLightComponent,\r\n    disposeComponent as disposeDirectionLightComponent\r\n} from \"./DirectionLightSystem\";\r\n\r\nexport const addAddComponentHandle = (AmbientLight: any, DirectionLight: any, PointLight: any) => {\r\n    addAddComponentHandleToMap(AmbientLight, addAmbientLightComponent);\r\n    addAddComponentHandleToMap(DirectionLight, addDirectionLightComponent);\r\n    addAddComponentHandleToMap(PointLight, addPointLightComponent);\r\n}\r\n\r\nexport const addDisposeHandle = (AmbientLight: any, DirectionLight: any, PointLight: any) => {\r\n    addDisposeHandleToMap(AmbientLight, disposeAmbientLightComponent);\r\n    addDisposeHandleToMap(DirectionLight, disposeDirectionLightComponent);\r\n    addDisposeHandleToMap(PointLight, disposePointLightComponent);\r\n}\r\n\r\nexport const initData = (AmbientLightData: any, DirectionLightData: any, PointLightData: any) => {\r\n    initAmbientLightData(AmbientLightData);\r\n    initWebGL2DirectionLightData(DirectionLightData);\r\n    initWebGL2PointLightData(PointLightData);\r\n}\r\n","export const disposeGeometryVboBuffers = (disposedIndexArray: Array<number>, ArrayBufferDataFromSystem: any, IndexBufferDataFromSystem: any, disposeArrayBuffer: Function, disposeIndexBuffer: Function) => {\r\n    for (let index of disposedIndexArray) {\r\n        disposeArrayBuffer(index, ArrayBufferDataFromSystem);\r\n        disposeIndexBuffer(index, IndexBufferDataFromSystem);\r\n    }\r\n}\r\n","import { disposeVao } from \"../../render_file/vao/vaoUtils\";\r\nimport { getExtensionVao } from \"../../render_file/device/gpuDetectUtils\";\r\nimport { hasExtension } from \"../../../../../utils/device/gpuDetectUtils\";\r\nimport { disposeGeometryVboBuffers } from \"../../../../../utils/worker/both_file/buffer/bufferUtils\";\r\nimport { getGL } from \"../../../../../utils/worker/both_file/device/deviceManagerUtils\";\r\n\r\nexport const disposeBuffers = (disposedIndexArray: Array<number>, disposeArrayBuffer: Function, disposeIndexBuffer: Function, GPUDetectDataFromSystem: any, VaoDataFromSystem: any, ArrayBufferDataFromSystem: any, IndexBufferDataFromSystem: any, DeviceManagerDataFromSystem: any) => {\r\n    var extension = getExtensionVao(GPUDetectDataFromSystem);\r\n\r\n    if (hasExtension(extension)) {\r\n        disposeGeometryVaoBuffers(extension, disposedIndexArray, DeviceManagerDataFromSystem, VaoDataFromSystem);\r\n    }\r\n    else {\r\n        disposeGeometryVboBuffers(disposedIndexArray, ArrayBufferDataFromSystem, IndexBufferDataFromSystem, disposeArrayBuffer, disposeIndexBuffer);\r\n    }\r\n}\r\n\r\nexport const disposeGeometryVaoBuffers = (extension: any, disposedIndexArray: Array<number>, DeviceManagerDataFromSystem, {\r\n    vaoMap,\r\n    vboArrayMap\r\n}) => {\r\n    var gl = getGL(DeviceManagerDataFromSystem, null);\r\n\r\n    for (let index of disposedIndexArray) {\r\n        disposeVao(gl, extension, index, vaoMap, vboArrayMap);\r\n    }\r\n}\r\n","import { isBufferExist } from \"../../../buffer/bufferUtils\";\r\nimport { deleteVal } from \"../../../../../utils/arrayUtils\";\r\n\r\nexport const disposeBuffer = (geometryIndex: number, buffers: Array<WebGLBuffer>, getGL: Function, DeviceManagerDataFromSystem: any) => {\r\n    var gl = getGL(DeviceManagerDataFromSystem, null),\r\n        buffer = buffers[geometryIndex];\r\n\r\n    if (isBufferExist(buffer)) {\r\n        gl.deleteBuffer(buffers[geometryIndex]);\r\n\r\n        /*!\r\n         no need to consider the memory problem caused by not-used val in buffers, because geometry index will be repeat(geometry memory will be reallocated)\r\n         */\r\n        deleteVal(geometryIndex, buffers);\r\n    }\r\n}\r\n","import { initData as initDataUtils } from \"../utils/buffer/arrayBufferUtils\";\r\nimport { getGL } from \"../device/DeviceManagerSystem\";\r\nimport { DeviceManagerData } from \"../device/DeviceManagerData\";\r\nimport { disposeBuffer as disposeBufferUtils } from \"../utils/worker/render_file/buffer/bufferUtils\";\r\n// import { disposeBuffer as disposeBufferUtils } from \"../utils/buffer/bufferUtils\";\r\n\r\nexport const disposeBuffer = (geometryIndex: number, ArrayBufferData: any) => {\r\n    disposeBufferUtils(geometryIndex, ArrayBufferData.vertexBuffers, getGL, DeviceManagerData);\r\n    disposeBufferUtils(geometryIndex, ArrayBufferData.normalBuffers, getGL, DeviceManagerData);\r\n    disposeBufferUtils(geometryIndex, ArrayBufferData.texCoordBuffers, getGL, DeviceManagerData);\r\n}\r\n\r\nexport const initData = initDataUtils;\r\n","import { initData as initDataUtils } from \"../utils/buffer/indexBufferUtils\";\r\nimport { getGL } from \"../device/DeviceManagerSystem\";\r\nimport { DeviceManagerData } from \"../device/DeviceManagerData\";\r\nimport { disposeBuffer as disposeBufferUtils } from \"../utils/worker/render_file/buffer/bufferUtils\";\r\n\r\nexport const initData = initDataUtils;\r\n\r\nexport const disposeBuffer = (geometryIndex: number, IndexBufferData: any) => {\r\n    disposeBufferUtils(geometryIndex, IndexBufferData.buffers, getGL, DeviceManagerData);\r\n}\r\n","import { disposeComponent as disposeComponentSystem } from \"../../geometry/GeometrySystem\";\r\nimport { Geometry } from \"../../geometry/Geometry\";\r\nimport { isSupportRenderWorkerAndSharedArrayBuffer } from \"../../../device/WorkerDetectSystem\";\r\nimport { GeometryData } from \"../../geometry/GeometryData\";\r\nimport { ArrayBufferData } from \"../../../renderer/buffer/ArrayBufferData\";\r\nimport { IndexBufferData } from \"../../../renderer/buffer/IndexBufferData\";\r\nimport {\r\n    disposeBuffers\r\n} from \"../../../renderer/webgl1/utils/worker/both_file/buffer/bufferUtils\";\r\nimport { disposeBuffer as disposeArrayBuffer } from \"../../../renderer/buffer/ArrayBufferSystem\";\r\nimport { disposeBuffer as disposeIndexBuffer } from \"../../../renderer/buffer/IndexBufferSystem\";\r\nimport { GPUDetectData } from \"../../../renderer/device/GPUDetectData\";\r\nimport { VaoData } from \"../../../renderer/vao/VaoData\";\r\nimport { addDisposeHandle as addDisposeHandleToMap } from \"../../ComponentSystem\";\r\nimport { disposeGeometryWorkerBuffers } from \"../../../renderer/utils/buffer/bufferUtils\";\r\nimport { DeviceManagerData } from \"../../../renderer/device/DeviceManagerData\";\r\n\r\nexport const addDisposeHandle = (BoxGeometry: any, CustomGeometry: any) => {\r\n    addDisposeHandleToMap(BoxGeometry, disposeComponent);\r\n    addDisposeHandleToMap(CustomGeometry, disposeComponent);\r\n}\r\n\r\nexport const disposeComponent = (component: Geometry) => {\r\n    disposeComponentSystem(component, _disposeBuffers);\r\n}\r\n\r\nvar _disposeBuffers =null;\r\n\r\nif (isSupportRenderWorkerAndSharedArrayBuffer()) {\r\n    _disposeBuffers = (disposedIndexArray: Array<number>) => {\r\n        disposeGeometryWorkerBuffers(disposedIndexArray, GeometryData);\r\n    }\r\n}\r\nelse {\r\n    _disposeBuffers = (disposedIndexArray: Array<number>) => {\r\n        disposeBuffers(disposedIndexArray, disposeArrayBuffer, disposeIndexBuffer, GPUDetectData, VaoData, ArrayBufferData, IndexBufferData, DeviceManagerData);\r\n    }\r\n}\r\n","import { disposeVao } from \"../../render_file/vao/vaoUtils\";\r\nimport { getGL } from \"../../../../../utils/worker/both_file/device/deviceManagerUtils\";\r\n\r\nexport const disposeBuffers = (disposedIndexArray: Array<number>, DeviceManagerDataFromSystem: any, VaoDataFromSystem: any) => {\r\n    disposeGeometryVaoBuffers(getGL(DeviceManagerDataFromSystem, null), disposedIndexArray, VaoDataFromSystem);\r\n}\r\n\r\nexport const disposeGeometryVaoBuffers = (gl: any, disposedIndexArray: Array<number>, {\r\n    vaoMap,\r\n    vboArrayMap\r\n}) => {\r\n    for (let index of disposedIndexArray) {\r\n        disposeVao(gl, index, vaoMap, vboArrayMap);\r\n    }\r\n}\r\n","import { disposeComponent as disposeComponentSystem } from \"../../geometry/GeometrySystem\";\r\nimport { Geometry } from \"../../geometry/Geometry\";\r\nimport { isSupportRenderWorkerAndSharedArrayBuffer } from \"../../../device/WorkerDetectSystem\";\r\nimport { GeometryData } from \"../../geometry/GeometryData\";\r\nimport {\r\n    disposeBuffers\r\n} from \"../../../renderer/webgl2/utils/worker/both_file/buffer/bufferUtils\";\r\nimport { DeviceManagerData } from \"../../../renderer/device/DeviceManagerData\";\r\nimport { VaoData } from \"../../../renderer/vao/VaoData\";\r\nimport { addDisposeHandle as addDisposeHandleToMap } from \"../../ComponentSystem\";\r\nimport { disposeGeometryWorkerBuffers } from \"../../../renderer/utils/buffer/bufferUtils\";\r\n\r\nexport const addDisposeHandle = (BoxGeometry: any, CustomGeometry: any) => {\r\n    addDisposeHandleToMap(BoxGeometry, disposeComponent);\r\n    addDisposeHandleToMap(CustomGeometry, disposeComponent);\r\n}\r\n\r\nexport const disposeComponent = (component: Geometry) => {\r\n    disposeComponentSystem(component, _disposeBuffers);\r\n}\r\n\r\nvar _disposeBuffers =null;\r\n\r\nif (isSupportRenderWorkerAndSharedArrayBuffer()) {\r\n    _disposeBuffers = (disposedIndexArray: Array<number>) => {\r\n        disposeGeometryWorkerBuffers(disposedIndexArray, GeometryData);\r\n    }\r\n}\r\nelse {\r\n    _disposeBuffers = (disposedIndexArray: Array<number>) => {\r\n        disposeBuffers(disposedIndexArray, DeviceManagerData, VaoData);\r\n    }\r\n}\r\n","import { registerClass } from \"../definition/typescript/decorator/registerClass\";\r\nimport { singleton } from \"../definition/typescript/decorator/singleton\";\r\nimport { IDisposable } from \"wonder-frp/dist/es2015/Disposable/IDisposable\";\r\nimport { DirectorTimeController } from \"../utils/time/DirectorTimeController\";\r\n// import { WebGLRenderer } from \"../renderer/renderer/WebGLRenderer\";\r\nimport { callFunc, intervalRequest } from \"wonder-frp/dist/es2015/global/Operator\";\r\n// import { GameObjectScene } from \"./entityObject/scene/gameObjectScene/GameObjectScene\";\r\n// import { BasicState } from \"../renderer/state/BasicState\";\r\n// import { EventManager } from \"../event/EventManager\";\r\n// import { CustomEvent } from \"../event/object/CustomEvent\";\r\n// import { EEngineEvent } from \"../event/EEngineEvent\";\r\nimport {\r\n    init as initTransform, addAddComponentHandle as addThreeDTransformAddComponentHandle, addDisposeHandle as addThreeDTransformDisposeHandle\r\n} from \"../component/transform/ThreeDTransformSystem\";\r\nimport { getState, isInit, markIsInit, run, setState } from \"./DirectorSystem\";\r\nimport { DirectorData } from \"./DirectorData\";\r\nimport { ThreeDTransformData } from \"../component/transform/ThreeDTransformData\";\r\nimport { Map } from \"immutable\";\r\nimport { GlobalTempData } from \"../definition/GlobalTempData\";\r\nimport { Scene } from \"./entityObject/scene/Scene\";\r\nimport { GameObjectData } from \"./entityObject/gameObject/GameObjectData\";\r\nimport { create } from \"./entityObject/scene/SceneSystem\";\r\nimport {\r\n    addAddComponentHandle as addGeometryAddComponentHandle, addInitHandle as addGeometryInitHandle,\r\n    init as initGeometry\r\n} from \"../component/geometry/GeometrySystem\";\r\nimport { init as initRenderer } from \"../renderer/core/WebGLRenderSystem\";\r\nimport { GeometryData } from \"../component/geometry/GeometryData\";\r\nimport {\r\n    addInitHandle as addMaterialInitHandle,\r\n    addAddComponentHandle as addMaterialAddComponentHandle,\r\n    addDisposeHandle as addMaterialDisposeHandle\r\n} from \"../component/material/AllMaterialSystem\";\r\nimport {\r\n    addAddComponentHandle as addMeshRendererAddComponentHandle,\r\n    addDisposeHandle as addMeshRendererDisposeHandle\r\n} from \"../component/renderer/MeshRendererSystem\";\r\nimport { addAddComponentHandle as addTagAddComponentHandle, addDisposeHandle as addTagDisposeHandle } from \"../component/tag/TagSystem\";\r\nimport { Tag } from \"../component/tag/Tag\";\r\nimport { ThreeDTransform } from \"../component/transform/ThreeDTransform\";\r\nimport { MeshRenderer } from \"../component/renderer/MeshRenderer\";\r\nimport {\r\n    addAddComponentHandle as addCameraControllerAddComponentHandle, addDisposeHandle as addCameraControllerDisposeHandle, init as initCameraController\r\n} from \"../component/camera/CameraControllerSystem\";\r\nimport { PerspectiveCameraData } from \"../component/camera/PerspectiveCameraData\";\r\nimport { CameraData } from \"../component/camera/CameraData\";\r\nimport { CameraControllerData } from \"../component/camera/CameraControllerData\";\r\nimport { CameraController } from \"../component/camera/CameraController\";\r\nimport { Scheduler } from \"./Scheduler\";\r\nimport { AmbientLight } from \"../component/light/AmbientLight\";\r\nimport { DirectionLight } from \"../component/light/DirectionLight\";\r\nimport { BasicMaterial } from \"../component/material/BasicMaterial\";\r\nimport { LightMaterial } from \"../component/material/LightMaterial\";\r\nimport { BoxGeometry } from \"../component/geometry/BoxGeometry\";\r\nimport { CustomGeometry } from \"../component/geometry/CustomGeometry\";\r\nimport { PointLight } from \"../component/light/PointLight\";\r\nimport { isWebgl1 } from \"../renderer/device/WebGLDetectSystem\";\r\nimport { addAddComponentHandle as addWebGL1LightAddComponentHandle, addDisposeHandle as addWebGL1LightDisposeHandle } from \"../component/webgl1/light/LightSystem\";\r\nimport { addAddComponentHandle as addWebGL2LightAddComponentHandle, addDisposeHandle as addWebGL2LightDisposeHandle } from \"../component/webgl2/light/LightSystem\";\r\nimport { init as initPointLight } from \"../component/light/PointLightSystem\";\r\nimport { init as initDirectionLight } from \"../component/light/DirectionLightSystem\";\r\nimport { WebGL1PointLightData } from \"../renderer/webgl1/light/PointLightData\";\r\nimport { WebGL2PointLightData } from \"../renderer/webgl2/light/PointLightData\";\r\nimport { addDisposeHandle as addWebGL1GeometryDisposeHandle } from \"../component/webgl1/geometry/GeometrySystem\";\r\nimport { addDisposeHandle as addWebGL2GeometryDisposeHandle } from \"../component/webgl2/geometry/GeometrySystem\";\r\nimport { WebGL1DirectionLightData } from \"../renderer/webgl1/light/DirectionLightData\";\r\nimport { WebGL2DirectionLightData } from \"../renderer/webgl2/light/DirectionLightData\";\r\nimport { addAddComponentHandle, addDisposeHandle } from \"../component/material/AllMaterialSystem\";\r\n\r\n@singleton(true)\r\n@registerClass(\"Director\")\r\nexport class Director {\r\n    public static getInstance(): any { };\r\n\r\n    private constructor() { }\r\n\r\n    // public scene: SceneDispatcher = null;\r\n    public scene: Scene = create(GameObjectData);\r\n    // public renderer: Renderer = null;\r\n    public scheduler: Scheduler = null;\r\n\r\n    private _gameLoop: IDisposable = null;\r\n    // private _gameState: EGameState = EGameState.NORMAL;\r\n    private _timeController: DirectorTimeController = DirectorTimeController.create();\r\n    // private _transformSystem: ThreeDTransformSystem = ThreeDTransformSystem.create();\r\n\r\n    public initWhenCreate() {\r\n        // this.scene = SceneDispatcher.create();\r\n        // this.renderer = WebGLRenderer.create();\r\n        this.scheduler = Scheduler.create();\r\n    }\r\n\r\n    public start() {\r\n        // this._gameState = EGameState.NORMAL;\r\n\r\n        this._startLoop();\r\n    }\r\n\r\n    public init() {\r\n        setState(this._init(getState(DirectorData)), DirectorData);\r\n    }\r\n\r\n    public loopBody(time: number) {\r\n        setState(this._loopBody(time, getState(DirectorData)), DirectorData).run();\r\n    }\r\n\r\n    private _startLoop() {\r\n        var self = this;\r\n\r\n        // console.log(IgnoreElementsStream, ConcatStream);\r\n\r\n        this._gameLoop = this._buildInitStream()\r\n            .ignoreElements()\r\n            .concat(this._buildLoopStream())\r\n            .subscribe((time) => {\r\n                //todo need polyfill\r\n                /*!\r\n                 I assume that the time is DOMHighResTimeStamp, but it may be DOMTimeStamp in some browser!\r\n                 so it need polyfill\r\n                 */\r\n                self.loopBody(time);\r\n                // }, (e) => {\r\n                //     console.error(e);\r\n                //     throw e;\r\n                // });\r\n            });\r\n    }\r\n\r\n    private _buildInitStream() {\r\n        return callFunc(() => {\r\n            this.init();\r\n        }, this);\r\n    }\r\n\r\n    private _init(state: Map<any, any>) {\r\n        var resultState = state;\r\n\r\n        markIsInit(DirectorData);\r\n\r\n        // resultState = this._initGameObjectScene(resultState);\r\n        resultState = this._initSystem(resultState);\r\n\r\n        resultState = this._initRenderer(resultState);\r\n\r\n        // this.renderer.init();\r\n\r\n        this._timeController.start();\r\n        this.scheduler.start();\r\n\r\n        return resultState;\r\n    }\r\n\r\n    // private _initGameObjectScene(state: Map<any, any>) {\r\n    //     var resultState = state,\r\n    //         gameObjectScene: GameObjectScene = this.scene.gameObjectScene;\r\n    //\r\n    //     gameObjectScene.init(resultState);\r\n    //\r\n    //     return resultState;\r\n    // }\r\n\r\n    private _initSystem(state: Map<any, any>) {\r\n        var resultState = initTransform(GlobalTempData, ThreeDTransformData, state);\r\n\r\n        resultState = initGeometry(GeometryData, state);\r\n\r\n        resultState = initCameraController(PerspectiveCameraData, CameraData, CameraControllerData, state);\r\n\r\n        resultState = _initPointLight(state);\r\n        resultState = _initDirectionLight(state);\r\n\r\n        return resultState;\r\n    }\r\n\r\n    private _initRenderer(state: Map<any, any>) {\r\n        var resultState = initRenderer(state);\r\n\r\n        return resultState;\r\n    }\r\n\r\n    private _buildLoopStream() {\r\n        return intervalRequest();\r\n    }\r\n\r\n    private _loopBody(time: number, state: Map<any, any>) {\r\n        var elapsed: number = null;\r\n\r\n        // if (this._gameState === EGameState.PAUSE || this._gameState === EGameState.STOP) {\r\n        //     return false;\r\n        // }\r\n\r\n        elapsed = this._timeController.computeElapseTime(time);\r\n\r\n        return run(elapsed, state, this._timeController, this.scheduler);\r\n    }\r\n}\r\n\r\nexport const isDirectorInit = () => {\r\n    return isInit(DirectorData);\r\n}\r\n\r\n\r\naddMaterialAddComponentHandle(BasicMaterial, LightMaterial);\r\naddMaterialDisposeHandle(BasicMaterial, LightMaterial);\r\naddMaterialInitHandle(BasicMaterial, LightMaterial);\r\n\r\naddMeshRendererAddComponentHandle(MeshRenderer);\r\naddMeshRendererDisposeHandle(MeshRenderer);\r\n\r\naddTagAddComponentHandle(Tag);\r\naddTagDisposeHandle(Tag);\r\n\r\naddThreeDTransformAddComponentHandle(ThreeDTransform);\r\naddThreeDTransformDisposeHandle(ThreeDTransform);\r\n\r\naddCameraControllerAddComponentHandle(CameraController);\r\naddCameraControllerDisposeHandle(CameraController);\r\n\r\naddGeometryAddComponentHandle(BoxGeometry, CustomGeometry);\r\naddGeometryInitHandle(BoxGeometry, CustomGeometry);\r\n\r\n\r\nvar _initPointLight =null,\r\n    _initDirectionLight = null;\r\n\r\nif (isWebgl1()) {\r\n    addWebGL1LightAddComponentHandle(AmbientLight, DirectionLight, PointLight);\r\n    addWebGL1LightDisposeHandle(AmbientLight, DirectionLight, PointLight);\r\n\r\n    addWebGL1GeometryDisposeHandle(BoxGeometry, CustomGeometry);\r\n\r\n    _initPointLight = (state: Map<any, any>) => {\r\n        return initPointLight(WebGL1PointLightData, state);\r\n    }\r\n\r\n    _initDirectionLight = (state: Map<any, any>) => {\r\n        return initDirectionLight(WebGL1DirectionLightData, state);\r\n    }\r\n}\r\nelse {\r\n    addWebGL2LightAddComponentHandle(AmbientLight, DirectionLight, PointLight);\r\n    addWebGL2LightDisposeHandle(AmbientLight, DirectionLight, PointLight);\r\n\r\n    addWebGL2GeometryDisposeHandle(BoxGeometry, CustomGeometry);\r\n\r\n    _initPointLight = (state: Map<any, any>) => {\r\n        return initPointLight(WebGL2PointLightData, state);\r\n    }\r\n\r\n    _initDirectionLight = (state: Map<any, any>) => {\r\n        return initDirectionLight(WebGL2DirectionLightData, state);\r\n    }\r\n}\r\n\r\n","import { GameObject } from \"../gameObject/GameObject\";\r\nimport { it, requireCheckFunc } from \"../../../definition/typescript/decorator/contract\";\r\nimport { isAlive } from \"../gameObject/GameObjectSystem\";\r\nimport { GameObjectData } from \"../gameObject/GameObjectData\";\r\nimport { addChild, removeChild } from \"./SceneSystem\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { ThreeDTransformData } from \"../../../component/transform/ThreeDTransformData\";\r\nimport { SceneData } from \"./SceneData\";\r\n\r\nexport class Scene extends GameObject {\r\n}\r\n\r\nexport const addSceneChild = requireCheckFunc((scene: Scene, gameObject: GameObject) => {\r\n    it(\"scene should alive\", () => {\r\n        expect(isAlive(scene, GameObjectData)).true;\r\n    });\r\n}, (scene: Scene, gameObject: GameObject) => {\r\n    addChild(scene, gameObject, ThreeDTransformData, GameObjectData, SceneData);\r\n})\r\n\r\nexport const removeSceneChild = requireCheckFunc((scene: Scene, gameObject: GameObject) => {\r\n    it(\"scene should alive\", () => {\r\n        expect(isAlive(scene, GameObjectData)).true;\r\n    });\r\n}, (scene: Scene, gameObject: GameObject) => {\r\n    removeChild(scene.uid, gameObject.uid, ThreeDTransformData, GameObjectData);\r\n})\r\n","import {\r\n    // disableVertexAttribArray as disableVertexAttribArrayUtils,\r\n    // getMaterialShaderLibConfig as getMaterialShaderLibConfigUtils, getProgram as getProgramUtils,\r\n    initData as initDataUtils\r\n    // initShader as initShaderUtils, isProgramExist as isProgramExistUtils, registerProgram as registerProgramUtils,\r\n    // sendAttributeData as sendAttributeDataUtils,\r\n    // sendUniformData as sendUniformDataUtils,\r\n    // use as useUtils\r\n} from \"../../utils/worker/render_file/shader/program/programUtils\";\r\n// import { getVertices } from \"../../../component/geometry/GeometrySystem\";\r\n\r\n// export const use = useUtils;\r\n\r\n// export const disableVertexAttribArray = disableVertexAttribArrayUtils;\r\n\r\n// export const getMaterialShaderLibConfig = getMaterialShaderLibConfigUtils;\r\n\r\n// export const registerProgram = registerProgramUtils;\r\n\r\n// export const getProgram = getProgramUtils;\r\n\r\n// export const isProgramExist = isProgramExistUtils;\r\n\r\n// export const initShader = initShaderUtils;\r\n\r\n// export const sendAttributeData = (gl: WebGLRenderingContext, shaderIndex: number, geometryIndex: number, ProgramData:any, LocationData: any, GLSLSenderData:any, GeometryData: any, ArrayBufferData: any) => {\r\n//     sendAttributeDataUtils(gl, shaderIndex, geometryIndex, getVertices, ProgramData, LocationData, GLSLSenderData, GeometryData, ArrayBufferData);\r\n// }\r\n\r\n// export const sendUniformData = sendUniformDataUtils;\r\n\r\nexport const initData = initDataUtils;\r\n","import { EWorkerOperateType } from \"../EWorkerOperateType\";\r\nimport curry from \"wonder-lodash/curry\";\r\nimport { Map } from \"immutable\";\r\nimport {\r\n    clear as clearUtils,\r\n    getGL as getGLUtils, getViewport as getViewportUtils,\r\n    initData as initDataUtils, setCanvasPixelRatio as setCanvasPixelRatioUtils,\r\n    setSide as setSideUtils,\r\n    setColorWrite as setColorWriteUtils, setContextConfig as setContextConfigUtils,\r\n    setGL as setGLUtils, setPixelRatio as setPixelRatioUtils, setScreen as setScreenUtils,\r\n    setViewportToState as setViewportToStateUtils, setViewportOfGL as setViewportOfGLUtils, setClearColor as setClearColorUtils\r\n} from \"../../../utils/worker/both_file/device/deviceManagerUtils\";\r\nimport { chain, compose } from \"../../../../utils/functionalUtils\";\r\nimport { setHeight, setStyleHeight, setStyleWidth, setWidth, setY, setX } from \"../../../../structure/ViewSystem\";\r\nimport { ScreenData, ViewportData } from \"../../../type/messageDataType\";\r\nimport { isValueExist } from \"../../../../utils/stateUtils\";\r\nimport { Color } from \"../../../../structure/Color\";\r\nimport { IO } from \"wonder-fantasy-land/dist/es2015/types/IO\";\r\nimport { ESide } from \"../../../enum/ESide\";\r\nimport { RectRegion } from \"../../../../structure/RectRegion\";\r\n\r\nexport const createGL = curry((canvas: HTMLCanvasElement, renderWorker: Worker, contextConfig: Map<string, any>, viewportData: ViewportData) => {\r\n    return IO.of(() => {\r\n        var offscreen = (<any>canvas).transferControlToOffscreen();\r\n\r\n        renderWorker.postMessage({\r\n            operateType: EWorkerOperateType.INIT_GL,\r\n            canvas: offscreen,\r\n            options: contextConfig.get(\"options\").toObject(),\r\n            viewportData: viewportData\r\n        }, [offscreen]);\r\n    })\r\n})\r\n\r\nexport const setContextConfig = setContextConfigUtils;\r\n\r\nexport const getGL = getGLUtils;\r\n\r\nexport const setGL = setGLUtils;\r\n\r\nexport const setPixelRatio = setPixelRatioUtils;\r\n\r\nexport const getViewport = getViewportUtils;\r\n\r\nexport const setViewportToState = curry((viewportData: ViewportData | null, state: Map<any, any>) => {\r\n    if (viewportData === null) {\r\n        return state;\r\n    }\r\n\r\n    return setViewportToStateUtils(viewportData.x, viewportData.y, viewportData.width, viewportData.height, state);\r\n});\r\n\r\nexport const getViewportData = (screenData: ScreenData) => {\r\n    var {\r\n        x,\r\n        y,\r\n        width,\r\n        height\r\n    } = screenData;\r\n\r\n    return {\r\n        x: x,\r\n        y: y,\r\n        width: width,\r\n        height: height\r\n    }\r\n}\r\n\r\nexport const setViewportOfGL = curry((DeviceManagerWorkerData: any, data:RectRegion, state: Map<any, any>) => {\r\n    return setViewportOfGLUtils(DeviceManagerWorkerData, state, data);\r\n})\r\n\r\nexport const setScreen = curry((canvas: HTMLCanvasElement, DeviceManagerWorkerData: any, DomQuery: any, state: Map<any, any>) => {\r\n    return setScreenUtils(canvas, _setScreenData, DeviceManagerWorkerData, state, DomQuery);\r\n});\r\n\r\nconst _setScreenData =curry((DeviceManagerWorkerData: any, canvas: HTMLCanvasElement, state: Map<any, any>, data: any) => {\r\n    var {\r\n        x,\r\n        y,\r\n        width,\r\n        height,\r\n        styleWidth,\r\n        styleHeight\r\n    } = data;\r\n\r\n    return IO.of(() => {\r\n        compose(chain(setStyleWidth(styleWidth)), chain(setStyleHeight(styleHeight)), chain(setHeight(height)), chain(setWidth(width)), chain(setY(y)), setX(x))(canvas).run();\r\n\r\n        return data;\r\n    });\r\n})\r\n\r\nexport const setCanvasPixelRatio = curry((useDevicePixelRatio: boolean, canvas: HTMLCanvasElement) => {\r\n    return IO.of(() => {\r\n        if (!useDevicePixelRatio) {\r\n            return null;\r\n        }\r\n\r\n        return setCanvasPixelRatioUtils(useDevicePixelRatio, canvas).run();\r\n    });\r\n});\r\n\r\nexport const buildViewportData = (x: number, y: number, width: number, height: number) => {\r\n    return {\r\n        x:x,\r\n        y:y,\r\n        width:width,\r\n        height:height\r\n    }\r\n}\r\n\r\nexport const setClearColor = (gl: WebGLRenderingContext, colorArr4: Array<number>, DeviceManagerWorkerData: any) => {\r\n    var color = Color.create();\r\n\r\n    color.r = colorArr4[0];\r\n    color.g = colorArr4[1];\r\n    color.b = colorArr4[2];\r\n    color.a = colorArr4[3];\r\n\r\n    setClearColorUtils(gl, color, DeviceManagerWorkerData);\r\n};\r\n\r\nexport const clear = clearUtils;\r\n\r\nexport const setColorWrite = setColorWriteUtils;\r\n\r\nexport const setSide = setSideUtils;\r\n\r\nexport const initData = initDataUtils;\r\n","import curry from \"wonder-lodash/curry\";\r\nimport { ensureFunc, it } from \"../../definition/typescript/decorator/contract\";\r\nimport { isSupportRenderWorkerAndSharedArrayBuffer } from \"../../device/WorkerDetectSystem\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { chain, compose, map } from \"../../utils/functionalUtils\";\r\nimport { createGL, getGL, setCanvasPixelRatio as setCanvasPixelRatioFromDeviceManagerSystem, setScreen as setScreenFromDeviceManagerSystem } from \"./DeviceManagerSystem\";\r\nimport {\r\n    createGL as createGLWorker,\r\n    setCanvasPixelRatio as setCanvasPixelRatioFromDeviceManagerWorkerSystem,\r\n    setContextConfig, setPixelRatio,\r\n    setScreen as setScreenFromDeviceManagerWorkerSystem, setViewportToState, getViewportData\r\n} from \"../worker/both_file/device/DeviceManagerWorkerSystem\";\r\nimport { DeviceManagerData } from \"./DeviceManagerData\";\r\nimport { IO } from \"wonder-fantasy-land/dist/es2015/types/IO\";\r\nimport { setCanvas } from \"../../structure/ViewSystem\";\r\nimport { ViewportData } from \"../type/messageDataType\";\r\nimport { Map } from \"immutable\";\r\nimport { WorkerInstanceData } from \"../../worker/WorkerInstanceData\";\r\nimport { getRenderWorker } from \"../../worker/WorkerInstanceSystem\";\r\nimport { WebGLDetectData } from \"./WebGLDetectData\";\r\nimport { GPUDetectData } from \"./GPUDetectData\";\r\n\r\nexport var initDevice = null;\r\n\r\nif (isSupportRenderWorkerAndSharedArrayBuffer()) {\r\n    initDevice = curry((contextConfig: Map<string, any>, state: Map<any, any>, configState: Map<any, any>, detect: Function, DomQuery: any, canvas: HTMLCanvasElement) => {\r\n        return IO.of(() => {\r\n            var screenData:ViewportData = setScreenFromDeviceManagerWorkerSystem(canvas, null, DomQuery, state).run(),\r\n                viewportData: ViewportData = getViewportData(screenData);\r\n\r\n            createGLWorker(canvas, getRenderWorker(WorkerInstanceData), contextConfig, viewportData).run();\r\n\r\n            return compose(\r\n                setCanvas(canvas),\r\n                setContextConfig(contextConfig),\r\n                setViewportToState(viewportData),\r\n                setPixelRatio(setCanvasPixelRatioFromDeviceManagerWorkerSystem(configState.get(\"useDevicePixelRatio\"), canvas).run())\r\n            )(state);\r\n        });\r\n    });\r\n}\r\nelse {\r\n    initDevice = curry((contextConfig: Map<string, any>, state: Map<any, any>, configState: Map<any, any>, detect: Function, DomQuery: any, canvas: HTMLCanvasElement) => {\r\n        return compose(\r\n            map(detect(getGL, DeviceManagerData, GPUDetectData)),\r\n            chain(setCanvasPixelRatioFromDeviceManagerSystem(configState.get(\"useDevicePixelRatio\"), canvas)),\r\n            chain(setScreenFromDeviceManagerSystem(canvas, DeviceManagerData, DomQuery)),\r\n            createGL,\r\n        )(canvas, contextConfig, WebGLDetectData, DeviceManagerData, state);\r\n    });\r\n}\r\n\r\nexport const createCanvas = curry((DomQuery: any, domId: string) => {\r\n    return IO.of(() => {\r\n        if (domId !== \"\") {\r\n            return DomQuery.create(_getCanvasId(domId)).get(0);\r\n        }\r\n\r\n        return DomQuery.create(\"<canvas></canvas>\").prependTo(\"body\").get(0);\r\n    })\r\n})\r\n\r\nconst _getCanvasId =ensureFunc((id: string) => {\r\n    it(\"dom id should be #string\", () => {\r\n        expect(/#[^#]+/.test(id)).true;\r\n    });\r\n}, (domId: string) => {\r\n    if (domId.indexOf('#') > -1) {\r\n        return domId;\r\n    }\r\n\r\n    return `#${domId}`;\r\n});\r\n\r\n","import { IO } from \"wonder-fantasy-land/dist/es2015/types/IO\";\r\n\r\nexport const getIsTest = (InitConfigDataFromSystem: any) => {\r\n    return InitConfigDataFromSystem.isTest;\r\n}\r\n\r\nexport const setIsTest = (isTest: boolean, InitConfigDataFromSystem: any) => {\r\n    return IO.of(() => {\r\n        InitConfigDataFromSystem.isTest = isTest;\r\n    });\r\n}\r\n","import { Main } from \"wonder-frp/dist/es2015/core/Main\";\r\nimport { isSupportRenderWorkerAndSharedArrayBuffer } from \"../../device/WorkerDetectSystem\";\r\nimport { IO } from \"wonder-fantasy-land/dist/es2015/types/IO\";\r\nimport { getRenderWorker } from \"../../worker/WorkerInstanceSystem\";\r\nimport { EWorkerOperateType } from \"../worker/both_file/EWorkerOperateType\";\r\nimport { getIsTest as getIsTestUtils, setIsTest as setIsTestUtils } from \"../utils/config/initConfigUtils\";\r\n\r\nexport const setLibIsTest = (isTest: boolean) => {\r\n    return IO.of(() => {\r\n        Main.isTest = isTest;\r\n    });\r\n}\r\n\r\nexport const getIsTest = getIsTestUtils;\r\n\r\nexport var setIsTest = null;\r\n\r\nif (isSupportRenderWorkerAndSharedArrayBuffer()) {\r\n    setIsTest = (isTest: boolean, InitConfigData: any, WorkerInstanceData: any) => {\r\n        return IO.of(() => {\r\n            var renderWorker = getRenderWorker(WorkerInstanceData);\r\n\r\n            renderWorker.postMessage({\r\n                operateType: EWorkerOperateType.INIT_CONFIG,\r\n                isTest: isTest\r\n            });\r\n\r\n            setIsTestUtils(isTest, InitConfigData).run();\r\n        })\r\n    }\r\n}\r\nelse {\r\n    setIsTest = (isTest: boolean, InitConfigData: any, WorkerInstanceData: any) => {\r\n        return setIsTestUtils(isTest, InitConfigData);\r\n    }\r\n}\r\n\r\n","import curry from \"wonder-lodash/curry\";\r\nimport { Map } from \"immutable\";\r\nimport { detect as detectUtils, initData as initDataUtils } from \"../utils/worker/render_file/device/gpuDetectUtils\";\r\n\r\nexport const detect = curry((getGL: Function, DeviceManagerData: any, GPUDetectData: any, state: Map<any, any>, ) => {\r\n    return detectUtils(getGL, DeviceManagerData, GPUDetectData, state);\r\n})\r\n\r\nexport const initData = initDataUtils;\r\n","import curry from \"wonder-lodash/curry\";\r\nimport { Map } from \"immutable\";\r\nimport { detect as detectUtils, initData as initDataUtils } from \"../utils/worker/render_file/device/gpuDetectUtils\";\r\nimport { hasExtensionColorBufferFloat as hasExtensionColorBufferFloatUtils } from \"../utils/worker/render_file/device/gpuDetectUtils\";\r\n\r\nexport const detect = curry((getGL: Function, DeviceManagerData: any, GPUDetectData: any, state: Map<any, any>, ) => {\r\n    return detectUtils(getGL, DeviceManagerData, GPUDetectData, state);\r\n})\r\n\r\nexport const hasExtensionColorBufferFloat = hasExtensionColorBufferFloatUtils;\r\n\r\nexport const initData = initDataUtils;\r\n","import { initData as initDataUtils } from \"../../utils/worker/render_file/shader/glslSender/glslSenderUtils\";\r\n\r\nexport const initData = initDataUtils;\r\n","import { initData as initDataUtils } from \"../../utils/worker/render_file/shader/glslSender/glslSenderUtils\";\r\n\r\nexport const initData = initDataUtils;\r\n","import { initData as initDataUtils } from \"../../utils/worker/render_file/vao/vaoUtils\";\r\n\r\nexport const initData = initDataUtils;","import { initData as initDataUtils } from \"../../utils/worker/render_file/shader/location/locationUtils\";\r\n\r\nexport const initData = initDataUtils;\r\n","import { initData as initDataUtils } from \"../../utils/worker/render_file/shader/location/locationUtils\";\r\n\r\nexport const initData = initDataUtils;\r\n","import { initData as initDataUtils } from \"../../../../utils/worker/render_file/render/light/defer/light/deferLightPassUtils\";\r\n\r\nexport const initData = initDataUtils;","import { GeometryData } from \"../component/geometry/GeometryData\";\r\nimport { PerspectiveCameraData } from \"../component/camera/PerspectiveCameraData\";\r\nimport { CameraData } from \"../component/camera/CameraData\";\r\nimport { CameraControllerData } from \"../component/camera/CameraControllerData\";\r\nimport { ThreeDTransformData } from \"../component/transform/ThreeDTransformData\";\r\nimport { GameObjectData } from \"./entityObject/gameObject/GameObjectData\";\r\nimport { GlobalTempData } from \"../definition/GlobalTempData\";\r\nimport { initData as initSceneData } from \"./entityObject/scene/SceneSystem\";\r\nimport {\r\n    initData as initThreeDTransformData\r\n} from \"../component/transform/ThreeDTransformSystem\";\r\nimport {\r\n    initData as initGeometryData\r\n} from \"../component/geometry/GeometrySystem\";\r\nimport { DataBufferConfig } from \"../config/DataBufferConfig\";\r\nimport {\r\n    initData as initMaterialData\r\n} from \"../component/material/AllMaterialSystem\";\r\nimport { MaterialData } from \"../component/material/MaterialData\";\r\nimport {\r\n    initData as initMeshRendererData\r\n} from \"../component/renderer/MeshRendererSystem\";\r\nimport { MeshRendererData } from \"../component/renderer/MeshRendererData\";\r\nimport { initData as initTagData } from \"../component/tag/TagSystem\";\r\nimport { TagData } from \"../component/tag/TagData\";\r\nimport { SceneData } from \"./entityObject/scene/SceneData\";\r\nimport { initData as initCameraControllerData } from \"../component/camera/CameraControllerSystem\";\r\nimport { initData as initGameObjectData } from \"./entityObject/gameObject/GameObjectSystem\";\r\n// import { initData as initWorkerTimeData } from \"../renderer/worker/logic_file/core/WorkerTimeSystem\";\r\n// import { WorkerTimeData } from \"../renderer/worker/logic_file/core/WorkerTimeData\";\r\nimport { initData as initRenderCommandBufferData } from \"../renderer/command_buffer/RenderCommandBufferSystem\";\r\nimport { initData as initProgramData } from \"../renderer/shader/program/ProgramSystem\";\r\nimport { initData as initArrayBufferData } from \"../renderer/buffer/ArrayBufferSystem\";\r\nimport { initData as initIndexBufferData } from \"../renderer/buffer/IndexBufferSystem\";\r\nimport { DebugConfig } from \"../config/DebugConfig\";\r\nimport { EScreenSize } from \"../renderer/device/EScreenSize\";\r\nimport { ExtendUtils } from \"wonder-commonlib/dist/es2015/utils/ExtendUtils\";\r\nimport { CompileConfig } from \"../config/CompileConfig\";\r\nimport { IO } from \"wonder-fantasy-land/dist/es2015/types/IO\";\r\nimport { chain, compose } from \"../utils/functionalUtils\";\r\nimport { it, requireCheckFunc } from \"../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { fromJS, Map } from \"immutable\";\r\nimport { createCanvas, initDevice } from \"../renderer/device/initDeviceSystem\";\r\nimport { isSupportRenderWorkerAndSharedArrayBuffer, setWorkerConfig } from \"../device/WorkerDetectSystem\";\r\nimport { IndexBufferData } from \"../renderer/buffer/IndexBufferData\";\r\nimport { ArrayBufferData } from \"../renderer/buffer/ArrayBufferData\";\r\nimport { BasicMaterialData } from \"../component/material/BasicMaterialData\";\r\nimport { LightMaterialData } from \"../component/material/LightMaterialData\";\r\n// import { initData as initLightData } from \"../component/light/LightSystem\";\r\nimport { AmbientLightData } from \"../component/light/AmbientLightData\";\r\nimport { setIsTest, setLibIsTest } from \"../renderer/config/InitConfigSystem\";\r\nimport { getRenderWorker, initWorkInstances } from \"../worker/WorkerInstanceSystem\";\r\nimport { TextureCacheData } from \"../renderer/texture/TextureCacheData\";\r\nimport { TextureData } from \"../renderer/texture/TextureData\";\r\nimport { MapManagerData } from \"../renderer/texture/MapManagerData\";\r\nimport { initData as initSendDrawRenderCommandBufferData } from \"../renderer/worker/logic_file/draw/SendDrawRenderCommandBufferDataSystem\";\r\nimport { SendDrawRenderCommandBufferData } from \"../renderer/worker/logic_file/draw/SendDrawRenderCommandBufferData\";\r\nimport { EWorkerOperateType } from \"../renderer/worker/both_file/EWorkerOperateType\";\r\nimport { getVersion, isWebgl1 } from \"../renderer/device/WebGLDetectSystem\";\r\nimport { WebGL1PointLightData } from \"../renderer/webgl1/light/PointLightData\";\r\nimport { WebGL2PointLightData } from \"../renderer/webgl2/light/PointLightData\";\r\nimport { initData as initWebGL1LightData } from \"../component/webgl1/light/LightSystem\";\r\nimport { initData as initWebGL2LightData } from \"../component/webgl2/light/LightSystem\";\r\nimport { GPUDetectData } from \"../renderer/device/GPUDetectData\";\r\nimport { detect as detectWebGL1 } from \"../renderer/webgl1/device/GPUDetectSystem\";\r\nimport { detect as detectWebGL2 } from \"../renderer/webgl2/device/GPUDetectSystem\";\r\nimport { BasicRenderCommandBufferData } from \"../renderer/command_buffer/BasicRenderCommandBufferData\";\r\nimport { LightRenderCommandBufferData } from \"../renderer/command_buffer/LightRenderCommandBufferData\";\r\nimport { BasicDrawRenderCommandBufferData } from \"../renderer/draw/basic/BasicDrawRenderCommandBufferData\";\r\nimport { LightDrawRenderCommandBufferData } from \"../renderer/draw/light/LightDrawRenderCommandBufferData\";\r\nimport { initData as initDrawRenderCommandBufferData } from \"../renderer/draw/DrawRenderCommandBufferSystem\";\r\nimport { initData as initWebGL2GLSLSenderData } from \"../renderer/webgl2/shader/glslSender/GLSLSenderSystem\";\r\nimport { WebGL2GLSLSenderData } from \"../renderer/webgl2/shader/glslSender/GLSLSenderData\";\r\nimport { initData as initWebGL1GLSLSenderData } from \"../renderer/webgl1/shader/glslSender/GLSLSenderSystem\";\r\nimport { WebGL1GLSLSenderData } from \"../renderer/webgl1/shader/glslSender/GLSLSenderData\";\r\nimport { WebGL1ProgramData } from \"../renderer/webgl1/shader/program/ProgramData\";\r\nimport { WebGL2ProgramData } from \"../renderer/webgl2/shader/program/ProgramData\";\r\nimport { initData as initVaoData } from \"../renderer/webgl2/vao/VaoSystem\";\r\nimport { VaoData } from \"../renderer/vao/VaoData\";\r\nimport { WebGL1LocationData } from \"../renderer/webgl1/shader/location/LocationData\";\r\nimport { WebGL2LocationData } from \"../renderer/webgl2/shader/location/LocationData\";\r\nimport { initData as initWebGL1LocationData } from \"../renderer/webgl1/shader/location/LocationSystem\";\r\nimport { initData as initWebGL2LocationData } from \"../renderer/webgl2/shader/location/LocationSystem\";\r\nimport { initData as initWebGL1ShaderData } from \"../renderer/webgl1/shader/ShaderSystem\";\r\nimport { initData as initWebGL2ShaderData } from \"../renderer/webgl2/shader/ShaderSystem\";\r\nimport { WebGL1ShaderData } from \"../renderer/webgl1/shader/ShaderData\";\r\nimport { WebGL2ShaderData } from \"../renderer/webgl2/shader/ShaderData\";\r\nimport { initData as initDeferLightPassData } from \"../renderer/webgl2/render/light/defer/light/DeferLightPassSystem\";\r\nimport { WebGL2DirectionLightData } from \"../renderer/webgl2/light/DirectionLightData\";\r\nimport { WebGL1DirectionLightData } from \"../renderer/webgl1/light/DirectionLightData\";\r\nimport { DeferDirectionLightPassData } from \"../renderer/webgl2/render/light/defer/light/DeferDirectionLightPassData\";\r\nimport { DeferPointLightPassData } from \"../renderer/webgl2/render/light/defer/light/DeferPointLightPassData\";\r\nimport { DeferAmbientLightPassData } from \"../renderer/webgl2/render/light/defer/light/DeferAmbientLightPassData\";\r\nimport { initData as initDeviceManagerData } from \"../renderer/device/DeviceManagerSystem\";\r\nimport { DeviceManagerData } from \"../renderer/device/DeviceManagerData\";\r\nimport { initData as initAssetDatabaseData } from \"../asset/AssetDatabaseSystem\";\r\nimport { AssetDatabaseData } from \"../asset/AssetDatabaseData\";\r\n\r\nexport const setConfig = (closeContractTest: boolean, InitConfigData: any, WorkerDetectData: any, WorkerInstanceData: any, WebGLDetectData: any, {\r\n    canvasId = \"\",\r\n    isTest = DebugConfig.isTest,\r\n    screenSize = EScreenSize.FULL,\r\n    useDevicePixelRatio = false,\r\n    contextConfig = {\r\n        options: {\r\n            alpha: true,\r\n            depth: true,\r\n            stencil: false,\r\n            antialias: true,\r\n            premultipliedAlpha: true,\r\n            preserveDrawingBuffer: false\r\n        }\r\n    },\r\n    workerConfig = {\r\n        renderWorkerFileDir: \"/Wonder.js/dist/worker/\"\r\n    }\r\n}) => {\r\n    return IO.of(() => {\r\n        var _isTest =false;\r\n\r\n        if (CompileConfig.closeContractTest) {\r\n            _isTest = false;\r\n            setLibIsTest(false).run();\r\n        }\r\n        else {\r\n            _isTest = isTest;\r\n            setLibIsTest(isTest).run();\r\n        }\r\n\r\n        setWorkerConfig(workerConfig, WorkerDetectData).run();\r\n\r\n        initWorkInstances(WorkerInstanceData);\r\n\r\n        setIsTest(_isTest, InitConfigData, WorkerInstanceData).run();\r\n\r\n        passDataToRenderWorker(WorkerInstanceData, WebGLDetectData).run();\r\n\r\n        return fromJS({\r\n            Main: {\r\n                screenSize: screenSize\r\n            },\r\n            config: {\r\n                canvasId: canvasId,\r\n                contextConfig: {\r\n                    options: ExtendUtils.extend({\r\n                        alpha: true,\r\n                        depth: true,\r\n                        stencil: false,\r\n                        antialias: true,\r\n                        premultipliedAlpha: true,\r\n                        preserveDrawingBuffer: false\r\n                    }, contextConfig.options)\r\n                },\r\n                useDevicePixelRatio: useDevicePixelRatio\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nexport var initData = null;\r\n\r\nexport var passDataToRenderWorker = null;\r\n\r\nif (isSupportRenderWorkerAndSharedArrayBuffer()) {\r\n    initData = () => {\r\n        _initData();\r\n    }\r\n\r\n    passDataToRenderWorker = (WorkerInstanceData: any, WebGLDetectData: any) => {\r\n        return IO.of(() => {\r\n            var renderWorker = getRenderWorker(WorkerInstanceData);\r\n\r\n            renderWorker.postMessage({\r\n                operateType: EWorkerOperateType.INIT_DATA,\r\n                webglVersion: getVersion(WebGLDetectData)\r\n            });\r\n        });\r\n    }\r\n}\r\nelse {\r\n    if (isWebgl1()) {\r\n        initData = () => {\r\n            _initData();\r\n\r\n            initWebGL1ShaderData(WebGL1ShaderData);\r\n\r\n            initProgramData(WebGL1ProgramData);\r\n\r\n            initWebGL1LocationData(WebGL1LocationData);\r\n\r\n            initArrayBufferData(ArrayBufferData);\r\n\r\n            initIndexBufferData(IndexBufferData);\r\n\r\n            initDrawRenderCommandBufferData(BasicDrawRenderCommandBufferData, LightDrawRenderCommandBufferData);\r\n\r\n            initWebGL1GLSLSenderData(WebGL1GLSLSenderData);\r\n        }\r\n\r\n    }\r\n    else {\r\n        initData = () => {\r\n            _initData();\r\n\r\n            initWebGL2ShaderData(WebGL2ShaderData);\r\n\r\n            initProgramData(WebGL2ProgramData);\r\n\r\n            initWebGL2LocationData(WebGL2LocationData);\r\n\r\n            initDrawRenderCommandBufferData(BasicDrawRenderCommandBufferData, LightDrawRenderCommandBufferData);\r\n\r\n            initWebGL2GLSLSenderData(WebGL2GLSLSenderData);\r\n        }\r\n    }\r\n\r\n    passDataToRenderWorker = (WorkerInstanceData: any, WebGLDetectData: any) => {\r\n        return IO.of(() => {\r\n        });\r\n    }\r\n}\r\n\r\nexport var init = null;\r\n\r\nvar _initData =null;\r\n\r\nif (isWebgl1()) {\r\n    _initData = () => {\r\n        _initBothData();\r\n\r\n        initWebGL1LightData(AmbientLightData, WebGL1DirectionLightData, WebGL1PointLightData);\r\n    }\r\n\r\n    init = requireCheckFunc((gameState: Map<string, any>, configState: Map<any, any>, DomQuery: any) => {\r\n        it(\"should set config before\", () => {\r\n            expect(configState.get(\"useDevicePixelRatio\")).exist;\r\n        })\r\n    }, (gameState: Map<string, any>, configState: Map<any, any>, DomQuery: any) => {\r\n        return compose(\r\n            chain(initDevice(configState.get(\"contextConfig\"), gameState, configState, detectWebGL1, DomQuery)),\r\n            createCanvas(DomQuery)\r\n        )(configState.get(\"canvasId\"));\r\n    });\r\n}\r\nelse {\r\n    _initData = () => {\r\n        _initBothData();\r\n\r\n        initWebGL2LightData(AmbientLightData, WebGL2DirectionLightData, WebGL2PointLightData);\r\n\r\n        initDeferLightPassData(DeferAmbientLightPassData, DeferDirectionLightPassData, DeferPointLightPassData);\r\n    }\r\n\r\n    init = requireCheckFunc((gameState: Map<string, any>, configState: Map<any, any>, DomQuery: any) => {\r\n        it(\"should set config before\", () => {\r\n            expect(configState.get(\"useDevicePixelRatio\")).exist;\r\n        })\r\n    }, (gameState: Map<string, any>, configState: Map<any, any>, DomQuery: any) => {\r\n        return compose(\r\n            chain(initDevice(configState.get(\"contextConfig\"), gameState, configState, detectWebGL2, DomQuery)),\r\n            createCanvas(DomQuery)\r\n        )(configState.get(\"canvasId\"));\r\n    });\r\n}\r\n\r\nconst _initBothData =() => {\r\n    initGeometryData(DataBufferConfig, GeometryData, GPUDetectData);\r\n\r\n    initMaterialData(TextureCacheData, TextureData, MapManagerData, MaterialData, BasicMaterialData, LightMaterialData);\r\n\r\n    initMeshRendererData(MeshRendererData);\r\n\r\n    initTagData(TagData);\r\n\r\n    initThreeDTransformData(GlobalTempData, ThreeDTransformData);\r\n\r\n    initSceneData(SceneData);\r\n\r\n    initCameraControllerData(CameraControllerData, PerspectiveCameraData, CameraData);\r\n\r\n    initGameObjectData(GameObjectData);\r\n\r\n    initRenderCommandBufferData(DataBufferConfig, BasicRenderCommandBufferData, LightRenderCommandBufferData);\r\n\r\n    initSendDrawRenderCommandBufferData(SendDrawRenderCommandBufferData);\r\n\r\n    initVaoData(VaoData);\r\n\r\n    initDeviceManagerData(DeviceManagerData);\r\n\r\n    initAssetDatabaseData(AssetDatabaseData);\r\n}\r\n","import {\r\n    init as initMain, initData, initData as initDataMainSystem, setConfig\r\n} from \"./MainSystem\";\r\nimport { CompileConfig } from \"../config/CompileConfig\";\r\nimport { Map } from \"immutable\";\r\nimport { DirectorData } from \"./DirectorData\";\r\nimport { getState, initData as initDirectorData, setState } from \"./DirectorSystem\";\r\nimport { it, requireCheck } from \"../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { DomQuery } from \"wonder-commonlib/dist/es2015/utils/DomQuery\";\r\nimport { MainConfigData } from \"../definition/type/mainType\";\r\nimport { WorkerDetectData } from \"../device/WorkerDetectData\";\r\nimport { WorkerInstanceData } from \"../worker/WorkerInstanceData\";\r\nimport { InitConfigData } from \"../renderer/config/InitConfigData\";\r\nimport { getIsTest, setIsTest, setLibIsTest } from \"../renderer/config/InitConfigSystem\";\r\nimport { WebGLDetectData } from \"../renderer/device/WebGLDetectData\";\r\n\r\nexport class Main {\r\n    static get isTest() {\r\n        return getIsTest(InitConfigData);\r\n    }\r\n    static set isTest(isTest: boolean) {\r\n        setIsTest(isTest, InitConfigData, WorkerInstanceData).run();\r\n\r\n        setLibIsTest(isTest).run();\r\n    }\r\n\r\n    private static _configState: Map<any, any> = null;\r\n\r\n    public static setConfig(configState: MainConfigData) {\r\n        initDirectorData(DirectorData);\r\n\r\n        this._configState = setConfig(CompileConfig.closeContractTest, InitConfigData, WorkerDetectData, WorkerInstanceData, WebGLDetectData, configState).run();\r\n\r\n        setState(getState(DirectorData).set(\"Main\", this._configState.get(\"Main\")), DirectorData).run();\r\n\r\n        return this;\r\n    }\r\n\r\n    @requireCheck(() => {\r\n        it(\"configState should exist\", () => {\r\n            expect(Main._configState).exist;\r\n        });\r\n    })\r\n    public static init() {\r\n        initDataMainSystem();\r\n\r\n        setState(initMain(getState(DirectorData), this._configState.get(\"config\"), DomQuery).run(), DirectorData).run();\r\n\r\n        return this;\r\n    }\r\n}\r\n\r\nexport const initAllData = () => {\r\n    initDirectorData(DirectorData);\r\n    initData();\r\n}\r\n","export function execOnlyOnce(flagName: string) {\r\n    return function(target, name, descriptor) {\r\n        var value = descriptor.value;\r\n\r\n        descriptor.value = function(...args) {\r\n            var result = null;\r\n\r\n            if (this[flagName]) {\r\n                return;\r\n            }\r\n\r\n            this[flagName] = true;\r\n\r\n            return value.apply(this, args);\r\n        };\r\n\r\n        return descriptor;\r\n    }\r\n}","export function virtual(target, name, descriptor) {\r\n    return descriptor;\r\n}","import {\r\n    getClearColor, getGL, getViewport, setClearColor, setGL, setViewportOfGL,\r\n    setViewportToState\r\n} from \"./DeviceManagerSystem\";\r\nimport { getState, setState } from \"../../core/DirectorSystem\";\r\nimport { DirectorData } from \"../../core/DirectorData\";\r\nimport { DeviceManagerData } from \"./DeviceManagerData\";\r\nimport { Color } from \"../../structure/Color\";\r\nimport { isSupportRenderWorkerAndSharedArrayBuffer } from \"../../device/WorkerDetectSystem\";\r\nimport { buildViewportData as buildViewportDataWorkerSystem } from \"../worker/both_file/device/DeviceManagerWorkerSystem\";\r\nimport { getRenderWorker } from \"../../worker/WorkerInstanceSystem\";\r\nimport { WorkerInstanceData } from \"../../worker/WorkerInstanceData\";\r\nimport { EWorkerOperateType } from \"../worker/both_file/EWorkerOperateType\";\r\nimport { setClearColorData } from \"../utils/worker/both_file/device/deviceManagerUtils\";\r\n\r\nexport const getDeviceManagerGL = () => {\r\n    return getGL(DeviceManagerData, getState(DirectorData));\r\n}\r\n\r\nexport const setDeviceManagerGL = (gl: WebGLRenderingContext) => {\r\n    return setGL(gl, DeviceManagerData, getState(DirectorData));\r\n}\r\n\r\nexport const getDeviceManagerViewport = () => {\r\n    return getViewport(getState(DirectorData));\r\n}\r\n\r\n\r\nexport const getDeviceManagerClearColor = () => {\r\n    return getClearColor(DeviceManagerData);\r\n}\r\n\r\nexport var setDeviceManagerViewport = null,\r\n    setDeviceManagerClearColor = null;\r\n\r\nif (isSupportRenderWorkerAndSharedArrayBuffer()) {\r\n    setDeviceManagerViewport = (x: number, y: number, width: number, height: number) => {\r\n        setState(setViewportToState(x, y, width, height, getState(DirectorData)), DirectorData).run();\r\n\r\n        getRenderWorker(WorkerInstanceData).postMessage({\r\n            operateType: EWorkerOperateType.INIT_VIEWPORT,\r\n            viewportData: buildViewportDataWorkerSystem(x, y, width, height)\r\n        });\r\n    }\r\n\r\n    setDeviceManagerClearColor = (color: Color) => {\r\n        setClearColorData(color, DeviceManagerData);\r\n\r\n        getRenderWorker(WorkerInstanceData).postMessage({\r\n            operateType: EWorkerOperateType.INIT_CLEARCOLOR,\r\n            clearColorArr4: color.toArray4()\r\n        });\r\n    }\r\n}\r\nelse {\r\n    setDeviceManagerViewport = (x: number, y: number, width: number, height: number) => {\r\n        setState(\r\n            setViewportOfGL(DeviceManagerData, getState(DirectorData), {\r\n                x: x,\r\n                y: y,\r\n                width: width,\r\n                height: height\r\n            }\r\n            ).run(), DirectorData\r\n        ).run();\r\n    }\r\n\r\n    setDeviceManagerClearColor = (color: Color) => {\r\n        setClearColor(getGL(DeviceManagerData, getState(DirectorData)), color, DeviceManagerData);\r\n    }\r\n}\r\n","export enum ELightWorkerDataOperateType {\r\n    ADD,\r\n    EDIT,\r\n    DISPOSE\r\n}","import { DeviceManagerDataCommon } from \"../../../utils/worker/render_file/device/DeviceManagerDataCommon\";\r\n\r\nexport class DeviceManagerWorkerData extends DeviceManagerDataCommon {\r\n}","export class ArrayBufferWorkerData {\r\n    public static vertexBuffers: Array<WebGLBuffer> = null;\r\n    public static normalBuffers: Array<WebGLBuffer> = null;\r\n    public static texCoordBuffers: Array<WebGLBuffer> = null;\r\n}\r\n\r\n","export class IndexBufferWorkerData {\r\n    public static buffers: Array<WebGLBuffer> = null;\r\n}\r\n\r\n","export class BasicRenderCommandBufferWorkerData {\r\n    public static mMatrices: Float32Array = null;\r\n    public static materialIndices: Uint32Array = null;\r\n    public static geometryIndices: Uint32Array = null;\r\n}\r\n","export class LightRenderCommandBufferWorkerData {\r\n    public static mMatrices: Float32Array = null;\r\n    public static materialIndices: Uint32Array = null;\r\n    public static geometryIndices: Uint32Array = null;\r\n}\r\n","import { GPUDetectDataCommon } from \"../../../utils/worker/render_file/device/GPUDetectDataCommon\";\r\n\r\nexport class GPUDetectWorkerData extends GPUDetectDataCommon {\r\n}\r\n\r\n","import { EWebGLVersion } from \"../../../enum/EWebGLVersion\";\r\n\r\nexport class WebGLDetectWorkerData {\r\n    public static version: EWebGLVersion = null;\r\n}\r\n\r\n","export class BasicDrawRenderCommandBufferWorkerData {\r\n    public static mMatrixFloatArrayForSend: Float32Array = null;\r\n    // public static vMatrixFloatArrayForSend: Float32Array = null;\r\n    // public static pMatrixFloatArrayForSend: Float32Array = null;\r\n}\r\n","export class LightDrawRenderCommandBufferWorkerData {\r\n    public static mMatrixFloatArrayForSend: Float32Array = null;\r\n    public static vMatrixFloatArrayForSend: Float32Array = null;\r\n    public static pMatrixFloatArrayForSend: Float32Array = null;\r\n    public static normalMatrixFloatArrayForSend: Float32Array = null;\r\n    public static cameraPositionForSend: Float32Array = null;\r\n}\r\n","import { GeometryIndicesCacheMap, GeometryVertexCacheMap } from \"../../../../definition/type/geometryType\";\r\n\r\nexport class GeometryWorkerData {\r\n    public static verticesCacheMap: GeometryVertexCacheMap = null;\r\n    public static normalsCacheMap: GeometryVertexCacheMap = null;\r\n    public static texCoordsCacheMap: GeometryVertexCacheMap = null;\r\n    public static indicesCacheMap: GeometryIndicesCacheMap = null;\r\n\r\n    public static vertices: Float32Array = null;\r\n    public static normals: Float32Array = null;\r\n    public static texCoords: Float32Array = null;\r\n    public static indices: Uint16Array | Uint32Array = null;\r\n}\r\n","import { chain, compose, map } from \"../../../utils/functionalUtils\";\r\nimport {\r\n    getGL, setContextConfig, setGL, setViewportToState,\r\n    setViewportOfGL\r\n} from \"../both_file/device/DeviceManagerWorkerSystem\";\r\nimport { DeviceManagerWorkerData } from \"../both_file/device/DeviceManagerWorkerData\";\r\nimport { createState } from \"../../../utils/stateUtils\";\r\nimport { ContextConfigOptionsData } from \"../../type/dataType\";\r\nimport { IO } from \"wonder-fantasy-land/dist/es2015/types/IO\";\r\nimport { DomQuery } from \"wonder-commonlib/dist/es2015/utils/DomQuery\";\r\nimport curry from \"wonder-lodash/curry\";\r\nimport { MessageInitGLData } from \"../../type/messageDataType\";\r\nimport { Map } from \"immutable\";\r\nimport { setCanvas } from \"../../../structure/ViewSystem\";\r\nimport { getOnlyGL } from \"../../utils/worker/both_file/device/deviceManagerUtils\";\r\n\r\nexport const initGL = (data: MessageInitGLData, detect: Function, WebGLDetectWorkerData: any, GPUDetectWorkerData: any) => {\r\n    return compose(\r\n        map(detect(getGL, DeviceManagerWorkerData, GPUDetectWorkerData)),\r\n        chain(setViewportOfGL(DeviceManagerWorkerData, data.viewportData)),\r\n        _createGL(data.canvas, data.options, WebGLDetectWorkerData, DeviceManagerWorkerData)\r\n    )(createState());\r\n}\r\n\r\nconst _createGL =curry((canvas: HTMLCanvasElement, options: ContextConfigOptionsData, WebGLDetectWorkerData: any, DeviceManagerWorkerData: any, state: Map<any, any>) => {\r\n    return IO.of(() => {\r\n        var gl = getOnlyGL(canvas, options, WebGLDetectWorkerData);\r\n\r\n        if (!gl) {\r\n            DomQuery.create(\"<p class='not-support-webgl'></p>\").prependTo(\"body\").text(\"Your device doesn't support WebGL\");\r\n        }\r\n\r\n        return compose(setCanvas(canvas), setContextConfig(options), setGL(gl, DeviceManagerWorkerData))(state);\r\n    });\r\n})\r\n","export class SpecifyLightWorkerData {\r\n    public static count: number = null;\r\n\r\n    public static colors: Float32Array = null;\r\n    public static isColorDirtys: Uint8Array = null;\r\n}\r\n\r\n","import { SpecifyLightWorkerData } from \"./SpecifyLightWorkerData\";\r\n\r\nexport class AmbientLightWorkerData extends SpecifyLightWorkerData {\r\n}\r\n\r\n","import { SpecifyLightWorkerData } from \"./SpecifyLightWorkerData\";\r\n\r\nexport class DirectionLightWorkerData extends SpecifyLightWorkerData {\r\n    public static intensities: Float32Array = null;\r\n    public static isPositionDirtys: Uint8Array = null;\r\n    public static isIntensityDirtys: Uint8Array = null;\r\n}\r\n\r\n","import { SpecifyLightWorkerData } from \"./SpecifyLightWorkerData\";\r\n\r\nexport abstract class PointLightWorkerData extends SpecifyLightWorkerData {\r\n    public static intensities: Float32Array = null;\r\n    public static constants: Float32Array = null;\r\n    public static linears: Float32Array = null;\r\n    public static quadratics: Float32Array = null;\r\n    public static ranges: Uint16Array = null;\r\n    public static isPositionDirtys: Uint8Array = null;\r\n    public static isIntensityDirtys: Uint8Array = null;\r\n    public static isAttenuationDirtys: Uint8Array = null;\r\n}\r\n","export class BasicMaterialWorkerData {\r\n}\r\n","export class LightMaterialWorkerData {\r\n    public static specularColors: Float32Array = null;\r\n    public static emissionColors: Float32Array = null;\r\n    public static shininess: Float32Array = null;\r\n    public static shadings: Uint8Array = null;\r\n    public static lightModels: Uint8Array = null;\r\n    public static hasDiffuseMaps: Uint8Array = null;\r\n    public static hasSpecularMaps: Uint8Array = null;\r\n}\r\n","// import { MaterialClassNameTable, ShaderIndexTable } from \"../../../../definition/type/materialType\";\r\n\r\nexport class MaterialWorkerData {\r\n    public static shaderIndices: Uint32Array = null;\r\n\r\n    public static colors: Float32Array = null;\r\n    public static opacities: Float32Array = null;\r\n    public static alphaTests: Float32Array = null;\r\n}\r\n\r\nexport type MaterialInitWorkerData = {\r\n    buffer: SharedArrayBuffer;\r\n    basicMaterialData: BasicMaterialInitWorkerData;\r\n    lightMaterialData: LightMaterialInitWorkerData;\r\n}\r\n\r\nexport type BasicMaterialInitWorkerData = {\r\n    startIndex: number;\r\n    index: number;\r\n}\r\n\r\nexport type LightMaterialInitWorkerData = {\r\n    startIndex: number;\r\n    index: number;\r\n}\r\n\r\nexport type MaterialUpdateWorkerData = {\r\n    buffer: SharedArrayBuffer;\r\n    workerInitList: Array<number>;\r\n}\r\n","import { Map } from \"immutable\";\r\nimport { createState } from \"../../../../utils/stateUtils\";\r\n\r\nexport class StateWorkerData {\r\n    public static state: Map<any, any> = createState();\r\n}\r\n\r\n","import { Map } from \"immutable\";\r\n\r\nexport const getState = (StateWorkerData: any) => {\r\n    return StateWorkerData.state;\r\n}\r\n\r\nexport const setState = (state: Map<any, any>, StateWorkerData: any) => {\r\n    StateWorkerData.state = state;\r\n}\r\n","import { MaterialTextureList } from \"../../../type/dataType\";\r\n\r\nexport class MapManagerWorkerData {\r\n    public static textureIndices: Float32Array = null;\r\n    public static textureCounts: Uint8Array = null;\r\n\r\n    public static materialTextureList:MaterialTextureList  = null;\r\n}\r\n","export class TextureCacheWorkerData {\r\n    public static bindTextureUnitCache: Array<number> = null;\r\n}\r\n\r\n","export class TextureWorkerData {\r\n    public static index: number = null;\r\n\r\n    public static glTextures: Array<WebGLTexture> = null;\r\n\r\n    public static sourceMap: Array<ImageBitmap> = null;\r\n\r\n    public static uniformSamplerNameMap: Array<string> = null;\r\n\r\n    public static widths: Float32Array = null;\r\n    public static heights: Float32Array = null;\r\n    public static isNeedUpdates: Uint8Array = null;\r\n}\r\n\r\n","import { VaoDataCommon } from \"../../../utils/worker/render_file/vao/VaoDataCommon\";\r\n\r\nexport class VaoWorkerData extends VaoDataCommon {\r\n}","import { DirectionLightWorkerData } from \"../../../render_file/light/DirectionLightWorkerData\";\r\nimport { DirectionLightGLSLDataStructure } from \"../../../../type/dataType\";\r\n\r\nexport class WebGL1DirectionLightWorkerData extends DirectionLightWorkerData {\r\n    public static positionArr: Array<Float32Array> = null;\r\n\r\n    public static lightGLSLDataStructureMemberNameArr: Array<DirectionLightGLSLDataStructure> = null;\r\n}\r\n\r\n","import { PointLightGLSLDataStructure } from \"../../../../type/dataType\";\r\nimport { PointLightWorkerData } from \"../../../render_file/light/PointLightWorkerData\";\r\n\r\nexport class WebGL1PointLightWorkerData extends PointLightWorkerData {\r\n    public static positionArr: Array<Float32Array> = null;\r\n\r\n    public static lightGLSLDataStructureMemberNameArr: Array<PointLightGLSLDataStructure> = null;\r\n}\r\n\r\n","import { WebGL1GLSLSenderDataCommon } from \"../../../../../webgl1/utils/worker/render_file/shader/glslSender/GLSLSenderDataCommon\";\r\n\r\nexport class WebGL1GLSLSenderWorkerData extends WebGL1GLSLSenderDataCommon {\r\n}\r\n","import { WebGL1LocationDataCommon } from \"../../../../../webgl1/utils/worker/render_file/shader/location/LocationDataCommon\";\r\n\r\nexport class WebGL1LocationWorkerData extends WebGL1LocationDataCommon {\r\n}\r\n","import { WebGL1ProgramDataCommon } from \"../../../../../webgl1/utils/worker/render_file/shader/program/ProgramDataCommon\";\r\n\r\nexport class WebGL1ProgramWorkerData extends WebGL1ProgramDataCommon {\r\n}\r\n","import { WebGL1ShaderDataCommon } from \"../../../../webgl1/utils/worker/render_file/shader/ShaderDataCommon\";\r\n\r\nexport class WebGL1ShaderWorkerData extends WebGL1ShaderDataCommon {\r\n}\r\n","import { DirectionLightWorkerData } from \"../../../render_file/light/DirectionLightWorkerData\";\r\n\r\nexport class WebGL2DirectionLightWorkerData extends DirectionLightWorkerData {\r\n    public static positionArr: Array<Float32Array> = null;\r\n}\r\n\r\n","import { PointLightWorkerData } from \"../../../render_file/light/PointLightWorkerData\";\r\n\r\nexport class WebGL2PointLightWorkerData extends PointLightWorkerData {\r\n    public static positionArr: Array<Float32Array> = null;\r\n}\r\n\r\n","export class GBufferWorkerData {\r\n    public static gBuffer: WebGLFramebuffer = null;\r\n    public static positionTarget: WebGLTexture = null;\r\n    public static normalTarget: WebGLTexture = null;\r\n    public static colorTarget: WebGLTexture = null;\r\n    public static depthTexture: WebGLTexture = null;\r\n}\r\n","import { DeferAmbientLightPassDataCommon } from \"../../../../../../../webgl2/utils/render/light/defer/light/DeferAmbientLightPassDataCommon\";\r\n\r\nexport class DeferAmbientLightPassWorkerData extends DeferAmbientLightPassDataCommon {\r\n}\r\n\r\n","import { DeferDirectionLightPassDataCommon } from \"../../../../../../../webgl2/utils/render/light/defer/light/DeferDirectionLightPassDataCommon\";\r\n\r\nexport class DeferDirectionLightPassWorkerData extends DeferDirectionLightPassDataCommon {\r\n}\r\n\r\n","import { DeferPointLightPassDataCommon } from \"../../../../../../../webgl2/utils/render/light/defer/light/DeferPointLightPassDataCommon\";\r\n\r\nexport class DeferPointLightPassWorkerData extends DeferPointLightPassDataCommon {\r\n}\r\n\r\n","import { WebGL2GLSLSenderDataCommon } from \"../../../../../webgl2/utils/worker/render_file/shader/glslSender/GLSLSenderDataCommon\";\r\n\r\nexport class WebGL2GLSLSenderWorkerData extends WebGL2GLSLSenderDataCommon {\r\n}\r\n","import { WebGL2LocationDataCommon } from \"../../../../../webgl2/utils/worker/render_file/shader/location/LocationDataCommon\";\r\n\r\nexport class WebGL2LocationWorkerData extends WebGL2LocationDataCommon {\r\n\r\n}\r\n","import { WebGL2ProgramDataCommon } from \"../../../../../webgl2/utils/worker/render_file/shader/program/ProgramDataCommon\";\r\n\r\nexport class WebGL2ProgramWorkerData extends WebGL2ProgramDataCommon {\r\n}\r\n","import { WebGL2ShaderDataCommon } from \"../../../../webgl2/utils/worker/render_file/shader/ShaderDataCommon\";\r\n\r\nexport class WebGL2ShaderWorkerData extends WebGL2ShaderDataCommon {\r\n}\r\n","import {\r\n    getCanvas as getCanvasSystem,\r\n    getHeight,\r\n    getStyleHeight,\r\n    getStyleWidth,\r\n    getWidth,\r\n    setHeight,\r\n    setStyleWidth,\r\n    getX,\r\n    setX,\r\n    getY,\r\n    setY,\r\n    setWidth,\r\n    setCanvas as setCanvasSystem,\r\n    setStyleHeight\r\n} from \"./ViewSystem\";\r\nimport { getState } from \"../core/DirectorSystem\";\r\nimport { DirectorData } from \"../core/DirectorData\";\r\n\r\nexport const getCanvas = () => {\r\n    return getCanvasSystem(getState(DirectorData));\r\n}\r\n\r\nexport const setCanvas = (canvas: HTMLCanvasElement) => {\r\n    setCanvasSystem(canvas, getState(DirectorData));\r\n}\r\n\r\nexport const getCanvasLeft = (canvas: HTMLCanvasElement) => {\r\n    return getX(canvas);\r\n}\r\n\r\nexport const setCanvasLeft = (canvas: HTMLCanvasElement, x: number) => {\r\n    setX(x, canvas).run();\r\n}\r\n\r\nexport const getCanvasTop = (canvas: HTMLCanvasElement) => {\r\n    return getY(canvas);\r\n}\r\n\r\nexport const setCanvasTop = (canvas: HTMLCanvasElement, y: number) => {\r\n    setY(y, canvas).run();\r\n}\r\n\r\nexport const getCanvasWidth = (canvas: HTMLCanvasElement) => {\r\n    return getWidth(canvas);\r\n}\r\n\r\nexport const setCanvasWidth = (canvas: HTMLCanvasElement, width: number) => {\r\n    setWidth(width, canvas).run();\r\n}\r\n\r\nexport const getCanvasHeight = (canvas: HTMLCanvasElement) => {\r\n    return getHeight(canvas);\r\n}\r\n\r\nexport const setCanvasHeight = (canvas: HTMLCanvasElement, height: number) => {\r\n    setHeight(height, canvas).run();\r\n}\r\n\r\nexport const getCanvasStyleWidth = (canvas: HTMLCanvasElement) => {\r\n    return getStyleWidth(canvas);\r\n}\r\n\r\nexport const setCanvasStyleWidth = (canvas: HTMLCanvasElement, width: number) => {\r\n    setStyleWidth(width, canvas).run();\r\n}\r\n\r\nexport const getCanvasStyleHeight = (canvas: HTMLCanvasElement) => {\r\n    return getStyleHeight(canvas);\r\n}\r\n\r\nexport const setCanvasStyleHeight = (canvas: HTMLCanvasElement, height: number) => {\r\n    setStyleHeight(height, canvas).run();\r\n}\r\n","import { initData as initDataUtils } from \"../../../../utils/worker/render_file/shader/program/programUtils\";\r\n\r\nexport const initData = initDataUtils;\r\n\r\n","import { getGL } from \"../../both_file/device/DeviceManagerWorkerSystem\";\r\nimport { IRenderConfig } from \"../../both_file/data/render_config\";\r\nimport { Map } from \"immutable\";\r\nimport {\r\n    clearColor as clearColorUtils,\r\n    initData as initDataUtils\r\n} from \"../../../utils/worker/render_file/draw/drawRenderCommandBufferUtils\";\r\n\r\nexport const clearColor = (state: Map<any, any>, render_config: IRenderConfig, DeviceManagerWorkerData: any) => {\r\n    clearColorUtils(getGL(DeviceManagerWorkerData, state), render_config, DeviceManagerWorkerData);\r\n};\r\n\r\nexport const commitGL = (gl: any, state: Map<any, any>) => {\r\n    gl.commit();\r\n\r\n    return state;\r\n}\r\n\r\nexport const initData = initDataUtils;\r\n","import {\r\n    addActiveTexture as addActiveTextureUtils, clearAllBindTextureUnitCache as clearAllBindTextureUnitCacheUtils, initData as initDataUtils,\r\n    isCached as isCachedUtils\r\n} from \"../../../utils/worker/render_file/texture/textureCacheUtils\";\r\n\r\nexport const isCached = isCachedUtils;\r\n\r\nexport const addActiveTexture = addActiveTextureUtils;\r\n\r\nexport const clearAllBindTextureUnitCache = clearAllBindTextureUnitCacheUtils;\r\n\r\nexport const initData = initDataUtils;\r\n","/*!\n * Bowser - a browser detector\n * https://github.com/ded/bowser\n * MIT License | (c) Dustin Diaz 2015\n */\n\n!function (root, name, definition) {\n  if (typeof module != 'undefined' && module.exports) module.exports = definition()\n  else if (typeof define == 'function' && define.amd) define(name, definition)\n  else root[name] = definition()\n}(this, 'bowser', function () {\n  /**\n    * See useragents.js for examples of navigator.userAgent\n    */\n\n  var t = true\n\n  function detect(ua) {\n\n    function getFirstMatch(regex) {\n      var match = ua.match(regex);\n      return (match && match.length > 1 && match[1]) || '';\n    }\n\n    function getSecondMatch(regex) {\n      var match = ua.match(regex);\n      return (match && match.length > 1 && match[2]) || '';\n    }\n\n    var iosdevice = getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase()\n      , likeAndroid = /like android/i.test(ua)\n      , android = !likeAndroid && /android/i.test(ua)\n      , nexusMobile = /nexus\\s*[0-6]\\s*/i.test(ua)\n      , nexusTablet = !nexusMobile && /nexus\\s*[0-9]+/i.test(ua)\n      , chromeos = /CrOS/.test(ua)\n      , silk = /silk/i.test(ua)\n      , sailfish = /sailfish/i.test(ua)\n      , tizen = /tizen/i.test(ua)\n      , webos = /(web|hpw)os/i.test(ua)\n      , windowsphone = /windows phone/i.test(ua)\n      , samsungBrowser = /SamsungBrowser/i.test(ua)\n      , windows = !windowsphone && /windows/i.test(ua)\n      , mac = !iosdevice && !silk && /macintosh/i.test(ua)\n      , linux = !android && !sailfish && !tizen && !webos && /linux/i.test(ua)\n      , edgeVersion = getFirstMatch(/edge\\/(\\d+(\\.\\d+)?)/i)\n      , versionIdentifier = getFirstMatch(/version\\/(\\d+(\\.\\d+)?)/i)\n      , tablet = /tablet/i.test(ua) && !/tablet pc/i.test(ua)\n      , mobile = !tablet && /[^-]mobi/i.test(ua)\n      , xbox = /xbox/i.test(ua)\n      , result\n\n    if (/opera/i.test(ua)) {\n      //  an old Opera\n      result = {\n        name: 'Opera'\n      , opera: t\n      , version: versionIdentifier || getFirstMatch(/(?:opera|opr|opios)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    } else if (/opr|opios/i.test(ua)) {\n      // a new Opera\n      result = {\n        name: 'Opera'\n        , opera: t\n        , version: getFirstMatch(/(?:opr|opios)[\\s\\/](\\d+(\\.\\d+)?)/i) || versionIdentifier\n      }\n    }\n    else if (/SamsungBrowser/i.test(ua)) {\n      result = {\n        name: 'Samsung Internet for Android'\n        , samsungBrowser: t\n        , version: versionIdentifier || getFirstMatch(/(?:SamsungBrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/coast/i.test(ua)) {\n      result = {\n        name: 'Opera Coast'\n        , coast: t\n        , version: versionIdentifier || getFirstMatch(/(?:coast)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/yabrowser/i.test(ua)) {\n      result = {\n        name: 'Yandex Browser'\n      , yandexbrowser: t\n      , version: versionIdentifier || getFirstMatch(/(?:yabrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/ucbrowser/i.test(ua)) {\n      result = {\n          name: 'UC Browser'\n        , ucbrowser: t\n        , version: getFirstMatch(/(?:ucbrowser)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/mxios/i.test(ua)) {\n      result = {\n        name: 'Maxthon'\n        , maxthon: t\n        , version: getFirstMatch(/(?:mxios)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/epiphany/i.test(ua)) {\n      result = {\n        name: 'Epiphany'\n        , epiphany: t\n        , version: getFirstMatch(/(?:epiphany)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/puffin/i.test(ua)) {\n      result = {\n        name: 'Puffin'\n        , puffin: t\n        , version: getFirstMatch(/(?:puffin)[\\s\\/](\\d+(?:\\.\\d+)?)/i)\n      }\n    }\n    else if (/sleipnir/i.test(ua)) {\n      result = {\n        name: 'Sleipnir'\n        , sleipnir: t\n        , version: getFirstMatch(/(?:sleipnir)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/k-meleon/i.test(ua)) {\n      result = {\n        name: 'K-Meleon'\n        , kMeleon: t\n        , version: getFirstMatch(/(?:k-meleon)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (windowsphone) {\n      result = {\n        name: 'Windows Phone'\n      , windowsphone: t\n      }\n      if (edgeVersion) {\n        result.msedge = t\n        result.version = edgeVersion\n      }\n      else {\n        result.msie = t\n        result.version = getFirstMatch(/iemobile\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/msie|trident/i.test(ua)) {\n      result = {\n        name: 'Internet Explorer'\n      , msie: t\n      , version: getFirstMatch(/(?:msie |rv:)(\\d+(\\.\\d+)?)/i)\n      }\n    } else if (chromeos) {\n      result = {\n        name: 'Chrome'\n      , chromeos: t\n      , chromeBook: t\n      , chrome: t\n      , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n      }\n    } else if (/chrome.+? edge/i.test(ua)) {\n      result = {\n        name: 'Microsoft Edge'\n      , msedge: t\n      , version: edgeVersion\n      }\n    }\n    else if (/vivaldi/i.test(ua)) {\n      result = {\n        name: 'Vivaldi'\n        , vivaldi: t\n        , version: getFirstMatch(/vivaldi\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n      }\n    }\n    else if (sailfish) {\n      result = {\n        name: 'Sailfish'\n      , sailfish: t\n      , version: getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/seamonkey\\//i.test(ua)) {\n      result = {\n        name: 'SeaMonkey'\n      , seamonkey: t\n      , version: getFirstMatch(/seamonkey\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/firefox|iceweasel|fxios/i.test(ua)) {\n      result = {\n        name: 'Firefox'\n      , firefox: t\n      , version: getFirstMatch(/(?:firefox|iceweasel|fxios)[ \\/](\\d+(\\.\\d+)?)/i)\n      }\n      if (/\\((mobile|tablet);[^\\)]*rv:[\\d\\.]+\\)/i.test(ua)) {\n        result.firefoxos = t\n      }\n    }\n    else if (silk) {\n      result =  {\n        name: 'Amazon Silk'\n      , silk: t\n      , version : getFirstMatch(/silk\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/phantom/i.test(ua)) {\n      result = {\n        name: 'PhantomJS'\n      , phantom: t\n      , version: getFirstMatch(/phantomjs\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/slimerjs/i.test(ua)) {\n      result = {\n        name: 'SlimerJS'\n        , slimer: t\n        , version: getFirstMatch(/slimerjs\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/blackberry|\\bbb\\d+/i.test(ua) || /rim\\stablet/i.test(ua)) {\n      result = {\n        name: 'BlackBerry'\n      , blackberry: t\n      , version: versionIdentifier || getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (webos) {\n      result = {\n        name: 'WebOS'\n      , webos: t\n      , version: versionIdentifier || getFirstMatch(/w(?:eb)?osbrowser\\/(\\d+(\\.\\d+)?)/i)\n      };\n      /touchpad\\//i.test(ua) && (result.touchpad = t)\n    }\n    else if (/bada/i.test(ua)) {\n      result = {\n        name: 'Bada'\n      , bada: t\n      , version: getFirstMatch(/dolfin\\/(\\d+(\\.\\d+)?)/i)\n      };\n    }\n    else if (tizen) {\n      result = {\n        name: 'Tizen'\n      , tizen: t\n      , version: getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n      };\n    }\n    else if (/qupzilla/i.test(ua)) {\n      result = {\n        name: 'QupZilla'\n        , qupzilla: t\n        , version: getFirstMatch(/(?:qupzilla)[\\s\\/](\\d+(?:\\.\\d+)+)/i) || versionIdentifier\n      }\n    }\n    else if (/chromium/i.test(ua)) {\n      result = {\n        name: 'Chromium'\n        , chromium: t\n        , version: getFirstMatch(/(?:chromium)[\\s\\/](\\d+(?:\\.\\d+)?)/i) || versionIdentifier\n      }\n    }\n    else if (/chrome|crios|crmo/i.test(ua)) {\n      result = {\n        name: 'Chrome'\n        , chrome: t\n        , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (android) {\n      result = {\n        name: 'Android'\n        , version: versionIdentifier\n      }\n    }\n    else if (/safari|applewebkit/i.test(ua)) {\n      result = {\n        name: 'Safari'\n      , safari: t\n      }\n      if (versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    }\n    else if (iosdevice) {\n      result = {\n        name : iosdevice == 'iphone' ? 'iPhone' : iosdevice == 'ipad' ? 'iPad' : 'iPod'\n      }\n      // WTF: version is not part of user agent in web apps\n      if (versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    }\n    else if(/googlebot/i.test(ua)) {\n      result = {\n        name: 'Googlebot'\n      , googlebot: t\n      , version: getFirstMatch(/googlebot\\/(\\d+(\\.\\d+))/i) || versionIdentifier\n      }\n    }\n    else {\n      result = {\n        name: getFirstMatch(/^(.*)\\/(.*) /),\n        version: getSecondMatch(/^(.*)\\/(.*) /)\n     };\n   }\n\n    // set webkit or gecko flag for browsers based on these engines\n    if (!result.msedge && /(apple)?webkit/i.test(ua)) {\n      if (/(apple)?webkit\\/537\\.36/i.test(ua)) {\n        result.name = result.name || \"Blink\"\n        result.blink = t\n      } else {\n        result.name = result.name || \"Webkit\"\n        result.webkit = t\n      }\n      if (!result.version && versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    } else if (!result.opera && /gecko\\//i.test(ua)) {\n      result.name = result.name || \"Gecko\"\n      result.gecko = t\n      result.version = result.version || getFirstMatch(/gecko\\/(\\d+(\\.\\d+)?)/i)\n    }\n\n    // set OS flags for platforms that have multiple browsers\n    if (!result.windowsphone && !result.msedge && (android || result.silk)) {\n      result.android = t\n    } else if (!result.windowsphone && !result.msedge && iosdevice) {\n      result[iosdevice] = t\n      result.ios = t\n    } else if (mac) {\n      result.mac = t\n    } else if (xbox) {\n      result.xbox = t\n    } else if (windows) {\n      result.windows = t\n    } else if (linux) {\n      result.linux = t\n    }\n\n    function getWindowsVersion (s) {\n      switch (s) {\n        case 'NT': return 'NT'\n        case 'XP': return 'XP'\n        case 'NT 5.0': return '2000'\n        case 'NT 5.1': return 'XP'\n        case 'NT 5.2': return '2003'\n        case 'NT 6.0': return 'Vista'\n        case 'NT 6.1': return '7'\n        case 'NT 6.2': return '8'\n        case 'NT 6.3': return '8.1'\n        case 'NT 10.0': return '10'\n        default: return undefined\n      }\n    }\n    \n    // OS version extraction\n    var osVersion = '';\n    if (result.windows) {\n      osVersion = getWindowsVersion(getFirstMatch(/Windows ((NT|XP)( \\d\\d?.\\d)?)/i))\n    } else if (result.windowsphone) {\n      osVersion = getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i);\n    } else if (result.mac) {\n      osVersion = getFirstMatch(/Mac OS X (\\d+([_\\.\\s]\\d+)*)/i);\n      osVersion = osVersion.replace(/[_\\s]/g, '.');\n    } else if (iosdevice) {\n      osVersion = getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i);\n      osVersion = osVersion.replace(/[_\\s]/g, '.');\n    } else if (android) {\n      osVersion = getFirstMatch(/android[ \\/-](\\d+(\\.\\d+)*)/i);\n    } else if (result.webos) {\n      osVersion = getFirstMatch(/(?:web|hpw)os\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.blackberry) {\n      osVersion = getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i);\n    } else if (result.bada) {\n      osVersion = getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.tizen) {\n      osVersion = getFirstMatch(/tizen[\\/\\s](\\d+(\\.\\d+)*)/i);\n    }\n    if (osVersion) {\n      result.osversion = osVersion;\n    }\n\n    // device type extraction\n    var osMajorVersion = !result.windows && osVersion.split('.')[0];\n    if (\n         tablet\n      || nexusTablet\n      || iosdevice == 'ipad'\n      || (android && (osMajorVersion == 3 || (osMajorVersion >= 4 && !mobile)))\n      || result.silk\n    ) {\n      result.tablet = t\n    } else if (\n         mobile\n      || iosdevice == 'iphone'\n      || iosdevice == 'ipod'\n      || android\n      || nexusMobile\n      || result.blackberry\n      || result.webos\n      || result.bada\n    ) {\n      result.mobile = t\n    }\n\n    // Graded Browser Support\n    // http://developer.yahoo.com/yui/articles/gbs\n    if (result.msedge ||\n        (result.msie && result.version >= 10) ||\n        (result.yandexbrowser && result.version >= 15) ||\n\t\t    (result.vivaldi && result.version >= 1.0) ||\n        (result.chrome && result.version >= 20) ||\n        (result.samsungBrowser && result.version >= 4) ||\n        (result.firefox && result.version >= 20.0) ||\n        (result.safari && result.version >= 6) ||\n        (result.opera && result.version >= 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] >= 6) ||\n        (result.blackberry && result.version >= 10.1)\n        || (result.chromium && result.version >= 20)\n        ) {\n      result.a = t;\n    }\n    else if ((result.msie && result.version < 10) ||\n        (result.chrome && result.version < 20) ||\n        (result.firefox && result.version < 20.0) ||\n        (result.safari && result.version < 6) ||\n        (result.opera && result.version < 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] < 6)\n        || (result.chromium && result.version < 20)\n        ) {\n      result.c = t\n    } else result.x = t\n\n    return result\n  }\n\n  var bowser = detect(typeof navigator !== 'undefined' ? navigator.userAgent || '' : '')\n\n  bowser.test = function (browserList) {\n    for (var i = 0; i < browserList.length; ++i) {\n      var browserItem = browserList[i];\n      if (typeof browserItem=== 'string') {\n        if (browserItem in bowser) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Get version precisions count\n   *\n   * @example\n   *   getVersionPrecision(\"1.10.3\") // 3\n   *\n   * @param  {string} version\n   * @return {number}\n   */\n  function getVersionPrecision(version) {\n    return version.split(\".\").length;\n  }\n\n  /**\n   * Array::map polyfill\n   *\n   * @param  {Array} arr\n   * @param  {Function} iterator\n   * @return {Array}\n   */\n  function map(arr, iterator) {\n    var result = [], i;\n    if (Array.prototype.map) {\n      return Array.prototype.map.call(arr, iterator);\n    }\n    for (i = 0; i < arr.length; i++) {\n      result.push(iterator(arr[i]));\n    }\n    return result;\n  }\n\n  /**\n   * Calculate browser version weight\n   *\n   * @example\n   *   compareVersions(['1.10.2.1',  '1.8.2.1.90'])    // 1\n   *   compareVersions(['1.010.2.1', '1.09.2.1.90']);  // 1\n   *   compareVersions(['1.10.2.1',  '1.10.2.1']);     // 0\n   *   compareVersions(['1.10.2.1',  '1.0800.2']);     // -1\n   *\n   * @param  {Array<String>} versions versions to compare\n   * @return {Number} comparison result\n   */\n  function compareVersions(versions) {\n    // 1) get common precision for both versions, for example for \"10.0\" and \"9\" it should be 2\n    var precision = Math.max(getVersionPrecision(versions[0]), getVersionPrecision(versions[1]));\n    var chunks = map(versions, function (version) {\n      var delta = precision - getVersionPrecision(version);\n\n      // 2) \"9\" -> \"9.0\" (for precision = 2)\n      version = version + new Array(delta + 1).join(\".0\");\n\n      // 3) \"9.0\" -> [\"000000000\"\", \"000000009\"]\n      return map(version.split(\".\"), function (chunk) {\n        return new Array(20 - chunk.length).join(\"0\") + chunk;\n      }).reverse();\n    });\n\n    // iterate in reverse order by reversed chunks array\n    while (--precision >= 0) {\n      // 4) compare: \"000000009\" > \"000000010\" = false (but \"9\" > \"10\" = true)\n      if (chunks[0][precision] > chunks[1][precision]) {\n        return 1;\n      }\n      else if (chunks[0][precision] === chunks[1][precision]) {\n        if (precision === 0) {\n          // all version chunks are same\n          return 0;\n        }\n      }\n      else {\n        return -1;\n      }\n    }\n  }\n\n  /**\n   * Check if browser is unsupported\n   *\n   * @example\n   *   bowser.isUnsupportedBrowser({\n   *     msie: \"10\",\n   *     firefox: \"23\",\n   *     chrome: \"29\",\n   *     safari: \"5.1\",\n   *     opera: \"16\",\n   *     phantom: \"534\"\n   *   });\n   *\n   * @param  {Object}  minVersions map of minimal version to browser\n   * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map\n   * @param  {String}  [ua] user agent string\n   * @return {Boolean}\n   */\n  function isUnsupportedBrowser(minVersions, strictMode, ua) {\n    var _bowser = bowser;\n\n    // make strictMode param optional with ua param usage\n    if (typeof strictMode === 'string') {\n      ua = strictMode;\n      strictMode = void(0);\n    }\n\n    if (strictMode === void(0)) {\n      strictMode = false;\n    }\n    if (ua) {\n      _bowser = detect(ua);\n    }\n\n    var version = \"\" + _bowser.version;\n    for (var browser in minVersions) {\n      if (minVersions.hasOwnProperty(browser)) {\n        if (_bowser[browser]) {\n          if (typeof minVersions[browser] !== 'string') {\n            throw new Error('Browser version in the minVersion map should be a string: ' + browser + ': ' + String(minVersions));\n          }\n\n          // browser version and min supported version.\n          return compareVersions([version, minVersions[browser]]) < 0;\n        }\n      }\n    }\n\n    return strictMode; // not found\n  }\n\n  /**\n   * Check if browser is supported\n   *\n   * @param  {Object} minVersions map of minimal version to browser\n   * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map\n   * @param  {String}  [ua] user agent string\n   * @return {Boolean}\n   */\n  function check(minVersions, strictMode, ua) {\n    return !isUnsupportedBrowser(minVersions, strictMode, ua);\n  }\n\n  bowser.isUnsupportedBrowser = isUnsupportedBrowser;\n  bowser.compareVersions = compareVersions;\n  bowser.check = check;\n\n  /*\n   * Set our detect method to the main bowser object so we can\n   * reuse it to test other user agents.\n   * This is needed to implement future tests.\n   */\n  bowser._detect = detect;\n\n  return bowser\n});\n","import {\r\n    addActiveTexture, initData as initTextureCacheData, isCached\r\n} from \"./TextureCacheWorkerSystem\";\r\nimport {\r\n    createTypeArrays, getBufferCount,\r\n    initTextures as initTexturesUtils, needUpdate as needUpdateUtils, update as updateUtils,\r\n    bindToUnit as bindToUnitUtils, disposeSourceMap, disposeGLTexture, getFlipY, initTexture\r\n} from \"../../../utils/worker/render_file/texture/textureUtils\";\r\nimport { ImageArrayBufferIndexSizeData, TextureDisposeWorkerData } from \"../../../type/messageDataType\";\r\nimport { fromArray, fromPromise } from \"wonder-frp/dist/es2015/global/Operator\";\r\nimport { firefox, chrome } from \"bowser\";\r\nimport { forEach, hasDuplicateItems } from \"../../../../utils/arrayUtils\";\r\nimport { ensureFunc, it } from \"../../../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\n\r\nexport const bindToUnit = (gl: WebGLRenderingContext, unitIndex: number, textureIndex: number, TextureCacheWorkerData: any, TextureWorkerData: any, GPUDetectWorkerData: any) => {\r\n    bindToUnitUtils(gl, unitIndex, textureIndex, TextureCacheWorkerData, TextureWorkerData, GPUDetectWorkerData, isCached, addActiveTexture);\r\n}\r\n\r\nexport const initTextures = initTexturesUtils;\r\n\r\nexport const initNeedInitTextures = (gl:WebGLRenderingContext, needInitedTextureIndexArr:Array<number>, TextureWorkerData:any) => {\r\n    forEach(needInitedTextureIndexArr, (textureIndex:number) => {\r\n        initTexture(gl, textureIndex, TextureWorkerData);\r\n    });\r\n}\r\n\r\nexport const needUpdate = needUpdateUtils;\r\n\r\nexport const update = (gl: WebGLRenderingContext, textureIndex: number, TextureWorkerData: any) => {\r\n    updateUtils(gl, textureIndex, _setFlipY, TextureWorkerData);\r\n}\r\n\r\nvar _setFlipY =null;\r\n\r\nif (chrome) {\r\n    _setFlipY = (gl: WebGLRenderingContext, flipY: boolean) => {\r\n        /*!\r\n         not worker in render worker! set it when createImageBitmap\r\n         //gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, flipY);\r\n         */\r\n    }\r\n}\r\nelse if (firefox) {\r\n    _setFlipY = (gl: WebGLRenderingContext, flipY: boolean) => {\r\n        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, flipY);\r\n    }\r\n}\r\n\r\nexport const disposeSourceAndGLTexture = (disposeData: TextureDisposeWorkerData, gl: WebGLRenderingContext, TextureCacheWorkerData: any, TextureWorkerData: any, GPUDetectWorkerData: any) => {\r\n    for (let {\r\n        sourceIndex,\r\n        lastComponentIndex\r\n    } of disposeData.disposedTextureDataMap) {\r\n        disposeSourceMap(sourceIndex, lastComponentIndex, TextureWorkerData);\r\n        disposeGLTexture(gl, sourceIndex, lastComponentIndex, TextureCacheWorkerData, TextureWorkerData, GPUDetectWorkerData);\r\n    }\r\n}\r\n\r\nexport const setIndex = (index: number, TextureWorkerData: any) => {\r\n    TextureWorkerData.index = index;\r\n}\r\n\r\nexport const setUniformSamplerNameMap = (uniformSamplerNameMap: Array<string>, TextureWorkerData: any) => {\r\n    TextureWorkerData.uniformSamplerNameMap = uniformSamplerNameMap;\r\n}\r\n\r\nexport const addSourceMapByImageDataStream = (imageArrayBufferIndexSizeDataArr: Array<ImageArrayBufferIndexSizeData>, TextureWorkerData: any) => {\r\n    return _convertImageSrcToImageBitmapStream(imageArrayBufferIndexSizeDataArr, TextureWorkerData)\r\n    /*!\r\n    .do here not be triggered! but it's triggered if be moved to 100 line number! why? wonder-frp bug?\r\n    */\r\n        // .do((imageBitmap: ImageBitmap) => {\r\n            // _addSource(imageBitmap, TextureWorkerData);\r\n        // });\r\n}\r\n\r\nconst _addSource = ensureFunc((sourceMap:Array<ImageBitmap>, imageBitmap:ImageBitmap, TextureWorkerData:any) => {\r\n    it(\"should not has duplicate one\", () => {\r\n        expect(hasDuplicateItems(sourceMap)).false;\r\n    });\r\n    it(\"sourceMap.length should equal texture count\", () => {\r\n        expect(sourceMap.length).equal(TextureWorkerData.index);\r\n    });\r\n}, (imageBitmap:ImageBitmap, TextureWorkerData:any) => {\r\n    TextureWorkerData.sourceMap.push(imageBitmap);\r\n\r\n    return TextureWorkerData.sourceMap;\r\n})\r\n\r\nconst _convertImageSrcToImageBitmapStream =(imageArrayBufferIndexSizeDataArr: Array<ImageArrayBufferIndexSizeData>, TextureWorkerData: any) => {\r\n    return fromArray(imageArrayBufferIndexSizeDataArr)\r\n        .flatMap(({ arrayBuffer, width, height, index }) => {\r\n            return fromPromise(_createImageBitmap(new ImageData(new Uint8ClampedArray(arrayBuffer), width, height), index, TextureWorkerData))\r\n                .do((imageBitmap: ImageBitmap) => {\r\n                    _addSource(imageBitmap, TextureWorkerData);\r\n                });\r\n        });\r\n}\r\n\r\nvar _createImageBitmap = null;\r\n\r\nif (chrome) {\r\n    _createImageBitmap = (imageData:ImageData, index:number, TextureWorkerData:any) => {\r\n        var flipY = getFlipY(index, TextureWorkerData);\r\n\r\n        return createImageBitmap(imageData, {\r\n            imageOrientation: flipY === true ? \"flipY\" : \"none\"\r\n        });\r\n    }\r\n}\r\nelse if (firefox) {\r\n    _createImageBitmap = (imageData:ImageData, index:number, TextureWorkerData:any) => {\r\n        /*!\r\n        firefox not support options\r\n         */\r\n        return createImageBitmap(imageData);\r\n    }\r\n}\r\n\r\nexport const initData = (buffer: any, TextureCacheWorkerData: any, TextureWorkerData: any) => {\r\n    initTextureCacheData(TextureCacheWorkerData);\r\n\r\n    TextureWorkerData.index = 0;\r\n\r\n    TextureWorkerData.glTextures = [];\r\n\r\n    TextureWorkerData.sourceMap = [];\r\n\r\n    _initBufferWorkerData(buffer, TextureWorkerData);\r\n}\r\n\r\nconst _initBufferWorkerData =(buffer: any, TextureWorkerData: any) => {\r\n    createTypeArrays(buffer, getBufferCount(), TextureWorkerData);\r\n}\r\n\r\n","export const setCount = (count: number, SepcifyLightDataFromSystem: any) => {\r\n    SepcifyLightDataFromSystem.count = count;\r\n}\r\n\r\n","import { createTypeArrays } from \"../../../../utils/worker/render_file/light/directionLightUtils\";\r\nimport { setCount } from \"../../../render_file/light/SpecifyLightWorkerSystem\";\r\n\r\nexport const initData = ({\r\n                           buffer,\r\n    bufferCount,\r\n    lightCount,\r\n    directionLightGLSLDataStructureMemberNameArr\r\n                       }, DirectionLightWorkerData: any) => {\r\n    setCount(lightCount, DirectionLightWorkerData);\r\n\r\n    DirectionLightWorkerData.lightGLSLDataStructureMemberNameArr = directionLightGLSLDataStructureMemberNameArr;\r\n\r\n    createTypeArrays(buffer, bufferCount, DirectionLightWorkerData);\r\n}\r\n\r\n\r\n","import { setCount as setSpecifyLightCount } from \"./SpecifyLightWorkerSystem\";\r\nimport {\r\n    cleanColorDirty as cleanColorDirtyUtils,\r\n    createTypeArrays, getColorArr3 as getColorArr3Utils,\r\n    isColorDirty as isColorDirtyUtils\r\n} from \"../../../utils/worker/render_file/light/ambientLightUtils\";\r\n\r\nexport const getColorArr3 = getColorArr3Utils;\r\n\r\nexport const initData = ({\r\n                           buffer,\r\n    bufferCount,\r\n    lightCount\r\n                       }, AmbientLightWorkerData: any) => {\r\n    _setCount(lightCount, AmbientLightWorkerData);\r\n\r\n    createTypeArrays(buffer, bufferCount, AmbientLightWorkerData);\r\n}\r\n\r\nconst _setCount =setSpecifyLightCount;\r\n\r\nexport const isColorDirty = isColorDirtyUtils;\r\n\r\nexport const cleanColorDirty = cleanColorDirtyUtils;\r\n","import { createTypeArrays } from \"../../../../utils/worker/render_file/light/pointLightUtils\";\r\nimport { setCount } from \"../../../render_file/light/SpecifyLightWorkerSystem\";\r\n\r\nexport const initData = ({\r\n                           buffer,\r\n    bufferCount,\r\n    lightCount,\r\n    pointLightGLSLDataStructureMemberNameArr\r\n                       }, PointLightWorkerData: any) => {\r\n    setCount(lightCount, PointLightWorkerData);\r\n\r\n    PointLightWorkerData.lightGLSLDataStructureMemberNameArr = pointLightGLSLDataStructureMemberNameArr;\r\n\r\n    createTypeArrays(buffer, bufferCount, PointLightWorkerData);\r\n}\r\n\r\n\r\n","import { initData as initDirectionLightData } from \"./DirectionLightWorkerSystem\";\r\nimport { initData as initAmbientLightData } from \"../../../render_file/light/AmbientLightWorkerSystem\";\r\nimport { initData as initPointLightData } from \"./PointLightWorkerSystem\";\r\nimport { WebGL1LightInitWorkerData } from \"../../../../webgl1/type/messageDataType\";\r\n\r\n\r\nexport const initData = (lightData: WebGL1LightInitWorkerData, AmbientLightDataFromSystem: any, DirectionLightDataFromSystem: any, PointLightDataFromSystem: any) => {\r\n    initAmbientLightData(lightData.ambientLightData, AmbientLightDataFromSystem);\r\n    initDirectionLightData(lightData.directionLightData, DirectionLightDataFromSystem);\r\n    initPointLightData(lightData.pointLightData, PointLightDataFromSystem);\r\n}\r\n\r\n","import { createTypeArrays } from \"../../../../utils/worker/render_file/light/pointLightUtils\";\r\nimport { setCount } from \"../../../render_file/light/SpecifyLightWorkerSystem\";\r\nimport { computeRadius as computeRadiusUtils } from \"../../../../webgl2/utils/worker/render_file/light/pointLightUtils\";\r\n\r\nexport const initData = ({\r\n                           buffer,\r\n    bufferCount,\r\n    lightCount\r\n                       }, PointLightWorkerData: any) => {\r\n    setCount(lightCount, PointLightWorkerData);\r\n\r\n    createTypeArrays(buffer, bufferCount, PointLightWorkerData);\r\n}\r\nexport const computeRadius = computeRadiusUtils;\r\n\r\n\r\n","import { createTypeArrays } from \"../../../../utils/worker/render_file/light/directionLightUtils\";\r\nimport { setCount } from \"../../../render_file/light/SpecifyLightWorkerSystem\";\r\n\r\nexport const initData = ({\r\n                           buffer,\r\n    bufferCount,\r\n    lightCount\r\n                       }, DirectionLightWorkerData: any) => {\r\n    setCount(lightCount, DirectionLightWorkerData);\r\n\r\n    createTypeArrays(buffer, bufferCount, DirectionLightWorkerData);\r\n}\r\n\r\n\r\n","import { WebGL2LightInitWorkerData } from \"../../../../webgl2/type/messageDataType\";\r\nimport { initData as initPointLightData } from \"./PointLightWorkerSystem\";\r\nimport { initData as initDirectionLightData } from \"./DirectionLightWorkerSystem\";\r\n\r\nexport const initData = (lightData: WebGL2LightInitWorkerData, DirectionLightDataFromSystem: any, PointLightDataFromSystem: any) => {\r\n    initDirectionLightData(lightData.directionLightData, DirectionLightDataFromSystem);\r\n    initPointLightData(lightData.pointLightData, PointLightDataFromSystem);\r\n}\r\n\r\n","export const getDirectionLightPosition = (index: number, DirectionLightDataFromSystem: any) => {\r\n    return _getLightPosition(index, DirectionLightDataFromSystem);\r\n}\r\n\r\nexport const getPointLightPosition = (index: number, PointLightDataFromSystem: any) => {\r\n    return _getLightPosition(index, PointLightDataFromSystem);\r\n}\r\n\r\nconst _getLightPosition =(index: number, LightDataFromSystem: any) => {\r\n    return LightDataFromSystem.positionArr[index];\r\n}\r\n\r\n","import { initData as initDataUtils } from \"../../../../../webgl1/utils/worker/render_file/shader/glslSender/glslSenderUtils\";\r\n\r\nexport const initData = initDataUtils;\r\n\r\n","import { initData as initDataUtils } from \"../../../../../webgl2/utils/worker/render_file/shader/glslSender/glslSenderUtils\";\r\n\r\nexport const initData = initDataUtils;\r\n\r\n","import { initData as initDataUtils } from \"../../../utils/buffer/arrayBufferUtils\";\r\nimport { getGL } from \"../../both_file/device/DeviceManagerWorkerSystem\";\r\nimport { DeviceManagerWorkerData } from \"../../both_file/device/DeviceManagerWorkerData\";\r\nimport { disposeBuffer as disposeBufferUtils } from \"../../../utils/worker/render_file/buffer/bufferUtils\";\r\n\r\nexport const disposeBuffer = (geometryIndex: number, ArrayBufferWorkerData: any) => {\r\n    disposeBufferUtils(geometryIndex, ArrayBufferWorkerData.vertexBuffers, getGL, DeviceManagerWorkerData);\r\n    disposeBufferUtils(geometryIndex, ArrayBufferWorkerData.normalBuffers, getGL, DeviceManagerWorkerData);\r\n    disposeBufferUtils(geometryIndex, ArrayBufferWorkerData.texCoordBuffers, getGL, DeviceManagerWorkerData);\r\n}\r\n\r\nexport const initData = initDataUtils;\r\n","import { initData as initDataUtils } from \"../../../utils/buffer/indexBufferUtils\";\r\nimport { getGL } from \"../../both_file/device/DeviceManagerWorkerSystem\";\r\nimport { DeviceManagerWorkerData } from \"../../both_file/device/DeviceManagerWorkerData\";\r\nimport { disposeBuffer as disposeBufferUtils } from \"../../../utils/worker/render_file/buffer/bufferUtils\";\r\n\r\nexport const disposeBuffer = (geometryIndex: number, IndexBufferWorkerData: any) => {\r\n    disposeBufferUtils(geometryIndex, IndexBufferWorkerData.buffers, getGL, DeviceManagerWorkerData);\r\n}\r\n\r\nexport const initData = initDataUtils;\r\n","import { initData as initDataUtils } from \"../../../utils/worker/render_file/vao/vaoUtils\";\r\n\r\nexport const initData = initDataUtils;","import { initData as initDataUtils } from \"../../../../../webgl1/utils/worker/render_file/shader/location/locationUtils\";\r\n\r\nexport const initData = initDataUtils;","import { initData as initDataUtils } from \"../../../../../webgl2/utils/worker/render_file/shader/location/locationUtils\";\r\n\r\nexport const initData = initDataUtils;","import { TextureInitWorkerData } from \"../../../type/messageDataType\";\r\nimport {\r\n    bindAndUpdate as bindAndUpdateUtils, createTypeArrays, getBufferCount\r\n} from \"../../../utils/worker/render_file/texture/mapManagerUtils\";\r\nimport {\r\n    bindToUnit, initData as initTextureData, initNeedInitTextures as initNeedInitTexturesTexture, initTextures,\r\n    needUpdate,\r\n    update\r\n} from \"./TextureWorkerSystem\";\r\nimport { MaterialTextureList } from \"../../../type/dataType\";\r\n\r\nexport const initMapManagers = (gl: WebGLRenderingContext, TextureWorkerData: any) => {\r\n    initTextures(gl, TextureWorkerData);\r\n}\r\n\r\nexport const initNeedInitTextures = initNeedInitTexturesTexture;\r\n\r\nexport const setMaterialTextureList = (materialTextureList:MaterialTextureList, MapManagerWorkerData:any) => MapManagerWorkerData.materialTextureList = materialTextureList;\r\n\r\nexport const getMapCount = (materialIndex: number, MapManagerWorkerData: any) => {\r\n    var textureCounts = MapManagerWorkerData.textureCounts;\r\n\r\n    if (textureCounts === null) {\r\n        return 0;\r\n    }\r\n\r\n    return textureCounts[materialIndex];\r\n}\r\n\r\n//todo support multi textures\r\n\r\n// export const addMapList = (materialIndex: number, mapList: Array<Texture>, MapManagerData:any) => {\r\n//     for(let map of mapList){\r\n//         addMap(materialIndex, map, MapManagerData);\r\n//     }\r\n// }\r\n\r\nexport const bindAndUpdate = (gl: WebGLRenderingContext, mapCount: number, startIndex: number, definedStartTextureUnitIndex:number, TextureCacheWorkerData: any, TextureWorkerData: any, MapManagerWorkerData: any, GPUDetectWorkerData: any) => {\r\n    bindAndUpdateUtils(gl, mapCount, startIndex, definedStartTextureUnitIndex, TextureCacheWorkerData, TextureWorkerData, MapManagerWorkerData, GPUDetectWorkerData, bindToUnit, needUpdate, update);\r\n}\r\n\r\n// export const dispose = disposeUtils;\r\n\r\nexport const initData = (textureData: TextureInitWorkerData, TextureCacheWorkerData: any, TextureWorkerData: any, MapManagerWorkerData: any) => {\r\n    initTextureData(textureData.textureBuffer, TextureCacheWorkerData, TextureWorkerData);\r\n\r\n    _initBufferData(textureData.mapManagerBuffer, MapManagerWorkerData);\r\n}\r\n\r\nconst _initBufferData =(buffer: any, MapManagerWorkerData: any) => {\r\n    createTypeArrays(buffer, getBufferCount(), MapManagerWorkerData);\r\n}\r\n\r\n","import {\r\n    computeLightBufferIndex, getClassName,\r\n    getEmissionColorArr3 as getEmissionColorArr3Utils,\r\n    getLightModel as getLightModelUtils,\r\n    getShading as getShadingUtils,\r\n    getShininess as getShininessUtils,\r\n    getSpecularColorArr3 as getSpecularColorArr3Utils,\r\n    hasDiffuseMap as hasDiffuseMapUtils,\r\n    hasSpecularMap as hasSpecularMapUtils\r\n} from \"../../../utils/worker/render_file/material/lightMaterialUtils\";\r\nimport { Map } from \"immutable\";\r\nimport { initMaterial as initMaterialBase } from \"./MaterialWorkerSystem\";\r\nimport { MaterialWorkerData } from \"./MaterialWorkerData\";\r\n// import { DeviceManagerWorkerData } from \"../../both_file/device/DeviceManagerWorkerData\";\r\n// import { MapManagerWorkerData } from \"../texture/MapManagerWorkerData\";\r\n// import { TextureWorkerData } from \"../texture/TextureWorkerData\";\r\n// import { initMapManager } from \"../texture/MapManagerWorkerSystem\";\r\n// import { getGL } from \"../../both_file/device/DeviceManagerWorkerSystem\";\r\n\r\nexport const getSpecularColorArr3 = (index: number, LightMaterialWorkerData: any) => {\r\n    return getSpecularColorArr3Utils(computeLightBufferIndex(index), LightMaterialWorkerData);\r\n}\r\n\r\nexport const getEmissionColorArr3 = (index: number, LightMaterialWorkerData: any) => {\r\n    return getEmissionColorArr3Utils(computeLightBufferIndex(index), LightMaterialWorkerData);\r\n}\r\n\r\nexport const getShininess = (index: number, LightMaterialWorkerData: any) => {\r\n    return getShininessUtils(computeLightBufferIndex(index), LightMaterialWorkerData);\r\n}\r\n\r\nexport const getShading = (index: number, LightMaterialWorkerData: any) => {\r\n    return getShadingUtils(computeLightBufferIndex(index), LightMaterialWorkerData);\r\n}\r\n\r\nexport const getLightModel = (index: number, LightMaterialWorkerData: any) => {\r\n    return getLightModelUtils(computeLightBufferIndex(index), LightMaterialWorkerData);\r\n}\r\n\r\nexport const hasDiffuseMap = (index: number, LightMaterialWorkerData: any) => {\r\n    return hasDiffuseMapUtils(computeLightBufferIndex(index), LightMaterialWorkerData);\r\n}\r\n\r\nexport const hasSpecularMap = (index: number, LightMaterialWorkerData: any) => {\r\n    return hasSpecularMapUtils(computeLightBufferIndex(index), LightMaterialWorkerData);\r\n}\r\n\r\nexport const initMaterialWithoutInitMap = (index: number, state: Map<any, any>) => {\r\n    initMaterialBase(index, state, getClassName(), MaterialWorkerData);\r\n}\r\n\r\n// export const initMaterial = (index: number, state: Map<any, any>) => {\r\n//     initMaterialBase(index, state, getClassName(), MaterialWorkerData);\r\n//\r\n//     initMapManager(getGL(DeviceManagerWorkerData, state), index, MapManagerWorkerData, TextureWorkerData);\r\n// }\r\n\r\nexport const initData = (LightMaterialWorkerData: any) => {\r\n}\r\n","import { createMap, isNotValidMapValue } from \"../../../../utils/objectUtils\";\r\nimport {\r\n    getIndexDataSize,\r\n    getUIntArrayClass,\r\n    getVertexDataSize,\r\n    getDrawMode as getDrawModeUtils,\r\n    getIndexType as getIndexTypeUtils,\r\n    getIndicesCount as getIndicesCountUtils,\r\n    getVerticesCount as getVerticesCountUtils,\r\n    hasIndices as hasIndicesUtils, getIndexTypeSize as getIndexTypeSizeUtils, createBufferViews\r\n} from \"../../../utils/worker/render_file/geometry/geometryUtils\";\r\nimport { GeometryInfoList, GeometryWorkerInfoList } from \"../../../../definition/type/geometryType\";\r\nimport { EBufferType } from \"../../../enum/EBufferType\";\r\nimport { ensureFunc, it, requireCheckFunc } from \"../../../../definition/typescript/decorator/contract\";\r\nimport { expect } from \"wonder-expect.js\";\r\nimport { isValidVal } from \"../../../../utils/arrayUtils\";\r\nimport { EDrawMode } from \"../../../enum/EDrawMode\";\r\nimport { getSlice } from \"../../../../utils/typeArrayUtils\";\r\n\r\nexport const getVertices = ensureFunc((vertices: Float32Array, index: number, GeometryWorkerData: any) => {\r\n    it(\"vertices should exist\", () => {\r\n        expect(vertices).exist;\r\n    })\r\n}, (index: number, GeometryWorkerData: any) => {\r\n    return GeometryWorkerData.verticesCacheMap[index];\r\n})\r\n\r\nexport const getNormals = ensureFunc((normals: Float32Array, index: number, GeometryWorkerData: any) => {\r\n    it(\"normals should exist\", () => {\r\n        expect(normals).exist;\r\n    })\r\n}, (index: number, GeometryWorkerData: any) => {\r\n    return GeometryWorkerData.normalsCacheMap[index];\r\n})\r\n\r\nexport const getTexCoords = ensureFunc((texCoords: Float32Array, index: number, GeometryWorkerData: any) => {\r\n    it(\"texCoords should exist\", () => {\r\n        expect(texCoords).exist;\r\n    })\r\n}, (index: number, GeometryWorkerData: any) => {\r\n    return GeometryWorkerData.texCoordsCacheMap[index];\r\n})\r\n\r\nexport const getIndices = ensureFunc((indices: Uint16Array | Uint32Array, index: number, GeometryWorkerData: any) => {\r\n    it(\"indices should exist\", () => {\r\n        expect(indices).exist;\r\n    })\r\n}, (index: number, GeometryWorkerData: any) => {\r\n    return GeometryWorkerData.indicesCacheMap[index];\r\n})\r\n\r\nexport const updatePointCacheDatas = (verticesInfoList: GeometryWorkerInfoList, normalsInfoList: GeometryWorkerInfoList, texCoordsInfoList: GeometryWorkerInfoList, indicesInfoList: GeometryWorkerInfoList, GeometryWorkerData: any) => {\r\n    _updatePointCacheData(verticesInfoList, GeometryWorkerData.vertices, GeometryWorkerData.verticesCacheMap);\r\n    _updatePointCacheData(normalsInfoList, GeometryWorkerData.normals, GeometryWorkerData.normalsCacheMap);\r\n    _updatePointCacheData(texCoordsInfoList, GeometryWorkerData.texCoords, GeometryWorkerData.texCoordsCacheMap);\r\n    _updatePointCacheData(indicesInfoList, GeometryWorkerData.indices, GeometryWorkerData.indicesCacheMap);\r\n}\r\n\r\nconst _updatePointCacheData =(infoList: GeometryWorkerInfoList | undefined, points: Float32Array | Uint16Array | Uint32Array, cacheMap: object) => {\r\n    if (infoList === void 0) {\r\n        return;\r\n    }\r\n\r\n    for (let info of infoList) {\r\n        let index = info.index,\r\n            dataArr = getSlice(points, info.startIndex, info.endIndex);\r\n\r\n        cacheMap[index] = dataArr;\r\n    }\r\n}\r\n\r\nexport const resetPointCacheDatas = (verticesInfoList: GeometryInfoList, normalsInfoList: GeometryWorkerInfoList, texCoordsInfoList: GeometryWorkerInfoList, indicesInfoList: GeometryInfoList, GeometryWorkerData: any) => {\r\n    GeometryWorkerData.verticesCacheMap = createMap();\r\n    GeometryWorkerData.normalsCacheMap = createMap();\r\n    GeometryWorkerData.texCoordsCacheMap = createMap();\r\n    GeometryWorkerData.indicesCacheMap = createMap();\r\n\r\n    _setPointCacheData(verticesInfoList, GeometryWorkerData.vertices, GeometryWorkerData.verticesCacheMap);\r\n    _setPointCacheData(normalsInfoList, GeometryWorkerData.normals, GeometryWorkerData.normalsCacheMap);\r\n    _setPointCacheData(texCoordsInfoList, GeometryWorkerData.texCoords, GeometryWorkerData.texCoordsCacheMap);\r\n    _setPointCacheData(indicesInfoList, GeometryWorkerData.indices, GeometryWorkerData.indicesCacheMap);\r\n}\r\n\r\nexport const setPointCacheDatas = (verticesInfoList: GeometryInfoList, normalsInfoList: GeometryInfoList, texCoordsInfoList: GeometryInfoList, indicesInfoList: GeometryInfoList, GeometryWorkerData: any) => {\r\n    _setPointCacheData(verticesInfoList, GeometryWorkerData.vertices, GeometryWorkerData.verticesCacheMap);\r\n    _setPointCacheData(normalsInfoList, GeometryWorkerData.normals, GeometryWorkerData.normalsCacheMap);\r\n    _setPointCacheData(texCoordsInfoList, GeometryWorkerData.texCoords, GeometryWorkerData.texCoordsCacheMap);\r\n    _setPointCacheData(indicesInfoList, GeometryWorkerData.indices, GeometryWorkerData.indicesCacheMap);\r\n}\r\n\r\nconst _setPointCacheData =requireCheckFunc((infoList: GeometryInfoList | undefined, points: Float32Array | Uint16Array | Uint32Array, cacheMap: object) => {\r\n    it(\"infoList should has no invalid value\", () => {\r\n        if (infoList === void 0) {\r\n            return;\r\n        }\r\n\r\n        for (let info of infoList) {\r\n            expect(isValidVal(info)).true;\r\n        }\r\n    });\r\n}, (infoList: GeometryInfoList | undefined, points: Float32Array | Uint16Array | Uint32Array, cacheMap: object) => {\r\n    if (infoList === void 0) {\r\n        return;\r\n    }\r\n\r\n    for (let i = 0, len = infoList.length; i < len; i++) {\r\n        let info = infoList[i],\r\n            dataArr = getSlice(points, info.startIndex, info.endIndex);\r\n\r\n        cacheMap[i] = dataArr;\r\n    }\r\n})\r\n\r\nexport const getIndexType = getIndexTypeUtils;\r\n\r\nexport const getIndexTypeSize = getIndexTypeSizeUtils;\r\n\r\nexport const hasIndices = (index: number, GeometryWorkerData: any) => hasIndicesUtils(index, getIndices, GeometryWorkerData);\r\n\r\nexport const getDrawMode = getDrawModeUtils;\r\n\r\nexport const getVerticesCount = (index: number, GeometryWorkerData: any) => getVerticesCountUtils(index, getVertices, GeometryWorkerData);\r\n\r\nexport const getIndicesCount = (index: number, GeometryWorkerData: any) => getIndicesCountUtils(index, getIndices, GeometryWorkerData);\r\n\r\nexport const initData = (buffer: SharedArrayBuffer, indexType: EBufferType, indexTypeSize: number, DataBufferConfig: any, GeometryWorkerData: any) => {\r\n    GeometryWorkerData.verticesCacheMap = createMap();\r\n    GeometryWorkerData.normalsCacheMap = createMap();\r\n    GeometryWorkerData.texCoordsCacheMap = createMap();\r\n    GeometryWorkerData.indicesCacheMap = createMap();\r\n\r\n    GeometryWorkerData.indexType = indexType;\r\n    GeometryWorkerData.indexTypeSize = indexTypeSize;\r\n\r\n    createBufferViews(buffer, DataBufferConfig.geometryDataBufferCount, getUIntArrayClass(indexType), GeometryWorkerData);\r\n}\r\n","import { Map } from \"immutable\";\r\nimport { getGL } from \"../../../both_file/device/DeviceManagerWorkerSystem\";\r\nimport { InitShaderDataMap } from \"../../../../type/utilsType\";\r\nimport { getMapCount } from \"../../../render_file/texture/MapManagerWorkerSystem\";\r\nimport { IMaterialConfig, IShaderLibItem, MaterialShaderLibConfig } from \"../../../../data/material_config_interface\";\r\nimport { IWebGL1ShaderLibContentGenerator } from \"../../both_file/data/shaderLib_generator\";\r\nimport {\r\n    bindIndexBuffer as bindIndexBufferUtils, initData as initDataUtils,\r\n    initMaterialShader as initMaterialShaderUtils,\r\n    initNoMaterialShader as initNoMaterialShaderUtils\r\n} from \"../../../../webgl1/utils/worker/render_file/shader/shaderUtils\";\r\nimport { buildGLSLSource } from \"./ShaderSourceBuildWorkerSystem\";\r\nimport { hasDiffuseMap, hasSpecularMap } from \"../../../render_file/material/LightMaterialWorkerSystem\";\r\nimport {\r\n    getIndices, getNormals, getTexCoords,\r\n    getVertices\r\n} from \"../../../render_file/geometry/GeometryWorkerSystem\";\r\n\r\nexport const initNoMaterialShader = (state: Map<any, any>, shaderName: string, materialShaderLibConfig: MaterialShaderLibConfig, material_config: IMaterialConfig, shaderLib_generator: IWebGL1ShaderLibContentGenerator, initShaderDataMap: InitShaderDataMap) => {\r\n    initNoMaterialShaderUtils(state, shaderName, materialShaderLibConfig, material_config, shaderLib_generator, _buildInitShaderFuncDataMap(), initShaderDataMap);\r\n};\r\n\r\nexport const initMaterialShader = (state: Map<any, any>, materialIndex: number, shaderName: string, material_config: IMaterialConfig, shaderLib_generator: IWebGL1ShaderLibContentGenerator, initShaderDataMap: InitShaderDataMap) => {\r\n    return initMaterialShaderUtils(state, materialIndex, shaderName, material_config, shaderLib_generator, _buildInitShaderFuncDataMap(), initShaderDataMap);\r\n};\r\n\r\nconst _buildInitShaderFuncDataMap =() => {\r\n    return {\r\n        buildGLSLSource: buildGLSLSource,\r\n        getGL: getGL,\r\n        getMapCount: getMapCount,\r\n        hasSpecularMap: hasSpecularMap,\r\n        hasDiffuseMap: hasDiffuseMap,\r\n\r\n        getVertices: getVertices,\r\n        getNormals: getNormals,\r\n        getTexCoords: getTexCoords,\r\n        getIndices: getIndices\r\n    }\r\n}\r\n\r\nexport const bindIndexBuffer = (gl: WebGLRenderingContext, geometryIndex: number, ProgramWorkerData: any, GeometryWorkerData: any, IndexBufferWorkerData: any) => {\r\n    bindIndexBufferUtils(gl, geometryIndex, getIndices, ProgramWorkerData, GeometryWorkerData, IndexBufferWorkerData);\r\n}\r\n\r\nexport const initData = initDataUtils;\r\n","import { Map } from \"immutable\";\r\nimport { getGL } from \"../../../both_file/device/DeviceManagerWorkerSystem\";\r\nimport { InitShaderDataMap } from \"../../../../type/utilsType\";\r\nimport { getMapCount } from \"../../../render_file/texture/MapManagerWorkerSystem\";\r\nimport { IMaterialConfig, IShaderLibItem, MaterialShaderLibConfig } from \"../../../../data/material_config_interface\";\r\nimport { IWebGL2ShaderLibContentGenerator } from \"../../both_file/data/shaderLib_generator\";\r\nimport {\r\n    initData as initDataUtils,\r\n    initMaterialShader as initMaterialShaderUtils,\r\n    initNoMaterialShader as initNoMaterialShaderUtils\r\n} from \"../../../../webgl2/utils/worker/render_file/shader/shaderUtils\";\r\nimport { buildGLSLSource } from \"./ShaderSourceBuildWorkerSystem\";\r\nimport { hasDiffuseMap, hasSpecularMap } from \"../../../render_file/material/LightMaterialWorkerSystem\";\r\nimport { getIndices, getNormals, getTexCoords, getVertices } from \"../../../render_file/geometry/GeometryWorkerSystem\";\r\n\r\nexport const initNoMaterialShader = (state: Map<any, any>, shaderName: string, materialShaderLibConfig: MaterialShaderLibConfig, material_config: IMaterialConfig, shaderLib_generator: IWebGL2ShaderLibContentGenerator, initShaderDataMap: InitShaderDataMap) => {\r\n    initNoMaterialShaderUtils(state, shaderName, materialShaderLibConfig, material_config, shaderLib_generator, _buildInitShaderFuncDataMap(), initShaderDataMap);\r\n};\r\n\r\nexport const initMaterialShader = (state: Map<any, any>, materialIndex: number, shaderName: string, material_config: IMaterialConfig, shaderLib_generator: IWebGL2ShaderLibContentGenerator, initShaderDataMap: InitShaderDataMap) => {\r\n    return initMaterialShaderUtils(state, materialIndex, shaderName, material_config, shaderLib_generator, _buildInitShaderFuncDataMap(), initShaderDataMap);\r\n};\r\n\r\nconst _buildInitShaderFuncDataMap =() => {\r\n    return {\r\n        buildGLSLSource: buildGLSLSource,\r\n        getGL: getGL,\r\n        getMapCount: getMapCount,\r\n        hasSpecularMap: hasSpecularMap,\r\n        hasDiffuseMap: hasDiffuseMap,\r\n\r\n        getVertices: getVertices,\r\n        getNormals: getNormals,\r\n        getTexCoords: getTexCoords,\r\n        getIndices: getIndices\r\n    }\r\n}\r\n\r\nexport const initData = initDataUtils;\r\n","import {\r\n    cleanColorDirty as cleanColorDirtyUtils, cleanIntensityDirty as cleanIntensityDirtyUtils,\r\n    cleanPositionDirty as cleanPositionDirtyUtils,\r\n    getColor as getColorUtils, getColorArr3 as getColorArr3Utils,\r\n    getIntensity as getIntensityUtils, isColorDirty as isColorDirtyUtils, isIntensityDirty as isIntensityDirtyUtils, isPositionDirty as isPositionDirtyUtils\r\n} from \"../../../utils/worker/render_file/light/directionLightUtils\";\r\nimport { Color } from \"../../../../structure/Color\";\r\n\r\nexport const setPositionArr = (positionArr: Array<Float32Array>, DirectionLightWorkerData: any) => {\r\n    DirectionLightWorkerData.positionArr = positionArr;\r\n}\r\n\r\nexport const getColor = getColorUtils;\r\n\r\nexport const getColorArr3 = getColorArr3Utils;\r\n\r\nexport const getIntensity = getIntensityUtils;\r\n\r\nexport const isPositionDirty = isPositionDirtyUtils;\r\n\r\nexport const isColorDirty = isColorDirtyUtils;\r\n\r\nexport const isIntensityDirty = isIntensityDirtyUtils;\r\n\r\nexport const cleanPositionDirty = cleanPositionDirtyUtils;\r\n\r\nexport const cleanColorDirty = cleanColorDirtyUtils;\r\n\r\nexport const cleanIntensityDirty = cleanIntensityDirtyUtils;\r\n","import {\r\n    cleanAttenuationDirty as cleanAttenuationDirtyUtils,\r\n    cleanColorDirty as cleanColorDirtyUtils, cleanIntensityDirty as cleanIntensityDirtyUtils,\r\n    cleanPositionDirty as cleanPositionDirtyUtils,\r\n    getColor as getColorUtils,\r\n    getColorArr3 as getColorArr3Utils,\r\n    getConstant as getConstantUtils,\r\n    getIntensity as getIntensityUtils,\r\n    getLinear as getLinearUtils,\r\n    getQuadratic as getQuadraticUtils,\r\n    getRange as getRangeUtils, isAttenuationDirty as isAttenuationDirtyUtils, isColorDirty as isColorDirtyUtils, isIntensityDirty as isIntensityDirtyUtils,\r\n    isPositionDirty as isPositionDirtyUtils\r\n} from \"../../../utils/worker/render_file/light/pointLightUtils\";\r\nimport { Color } from \"../../../../structure/Color\";\r\n\r\nexport const setPositionArr = (positionArr: Array<Float32Array>, PointLightWorkerData: any) => {\r\n    PointLightWorkerData.positionArr = positionArr;\r\n}\r\n\r\nexport const getColor = getColorUtils;\r\n\r\nexport const getColorArr3 = getColorArr3Utils;\r\n\r\nexport const getIntensity = getIntensityUtils;\r\n\r\nexport const getConstant = getConstantUtils;\r\n\r\nexport const getLinear = getLinearUtils;\r\n\r\nexport const getQuadratic = getQuadraticUtils;\r\n\r\nexport const getRange = getRangeUtils;\r\n\r\nexport const isPositionDirty = isPositionDirtyUtils;\r\n\r\nexport const isColorDirty = isColorDirtyUtils;\r\n\r\nexport const isIntensityDirty = isIntensityDirtyUtils;\r\n\r\nexport const isAttenuationDirty = isAttenuationDirtyUtils;\r\n\r\nexport const cleanPositionDirty = cleanPositionDirtyUtils;\r\n\r\nexport const cleanColorDirty = cleanColorDirtyUtils;\r\n\r\nexport const cleanIntensityDirty = cleanIntensityDirtyUtils;\r\n\r\nexport const cleanAttenuationDirty = cleanAttenuationDirtyUtils;\r\n","import { EWebGLVersion } from \"../../../enum/EWebGLVersion\";\r\nimport { isWebgl1 as isWebgl1Utils, isWebgl2 as isWebgl2Utils } from \"../../../utils/worker/render_file/device/webglDetectUtils\";\r\n\r\nexport const setVersion = (version: EWebGLVersion, WebGLDetectWorkerData: any) => {\r\n    WebGLDetectWorkerData.version = version;\r\n}\r\n\r\nexport const isWebgl1 = isWebgl1Utils;\r\n\r\nexport const isWebgl2 = isWebgl2Utils;\r\n","import curry from \"wonder-lodash/curry\";\r\nimport { Map } from \"immutable\";\r\nimport { detect as detectUtils, initData as initDataUtils } from \"../../../../webgl1/utils/worker/render_file/device/gpuDetectUtils\";\r\n\r\nexport const detect = curry((getGL: Function, DeviceManagerWorkerData: any, GPUDetectWorkerData: any, state: Map<any, any>, ) => {\r\n    return detectUtils(getGL, DeviceManagerWorkerData, GPUDetectWorkerData, state);\r\n})\r\n\r\nexport const initData = initDataUtils;\r\n","import curry from \"wonder-lodash/curry\";\r\nimport { Map } from \"immutable\";\r\nimport { detect as detectUtils, initData as initDataUtils, hasExtensionColorBufferFloat as hasExtensionColorBufferFloatUtils } from \"../../../../webgl2/utils/worker/render_file/device/gpuDetectUtils\";\r\n\r\nexport const detect = curry((getGL: Function, DeviceManagerWorkerData: any, GPUDetectWorkerData: any, state: Map<any, any>, ) => {\r\n    return detectUtils(getGL, DeviceManagerWorkerData, GPUDetectWorkerData, state);\r\n})\r\n\r\nexport const hasExtensionColorBufferFloat = hasExtensionColorBufferFloatUtils;\r\n\r\nexport const initData = initDataUtils;\r\n","import {\r\n    use as useUtils\r\n} from \"../../../utils/worker/render_file/shader/shaderUtils\";\r\n\r\nexport const use = useUtils;\r\n","import {\r\n    getUniformLocation as getUniformLocationUtils, isUniformLocationNotExist as isUniformLocationNotExistUtils\r\n} from \"../../../../utils/worker/render_file/shader/location/locationUtils\";\r\n\r\nexport const getUniformLocation = getUniformLocationUtils;\r\n\r\nexport const isUniformLocationNotExist = isUniformLocationNotExistUtils;\r\n","import {\r\n    sendBuffer as sendBufferUtils,\r\n    sendFloat1 as sendFloat1Utils, sendFloat3 as sendFloat3Utils, sendInt as sendIntUtils, sendMatrix3 as sendMatrix3Utils, sendMatrix4 as sendMatrix4Utils,\r\n    sendVector3 as sendVector3Utils\r\n} from \"../../../../utils/worker/render_file/shader/glslSender/glslSenderUtils\";\r\nimport { UniformCacheMap, UniformShaderLocationMap } from \"../../../../type/dataType\";\r\nimport { getUniformLocation, isUniformLocationNotExist } from \"../location/LocationWorkerSystem\";\r\nimport { Vector3 } from \"../../../../../math/Vector3\";\r\n\r\nexport const sendBuffer = sendBufferUtils;\r\n\r\nexport const sendMatrix3 = (gl: WebGLRenderingContext, program: WebGLProgram, name: string, data: Float32Array, uniformLocationMap: UniformShaderLocationMap) => {\r\n    sendMatrix3Utils(gl, program, name, data, uniformLocationMap, getUniformLocation, isUniformLocationNotExist);\r\n};\r\n\r\nexport const sendMatrix4 = (gl: WebGLRenderingContext, program: WebGLProgram, name: string, data: Float32Array, uniformLocationMap: UniformShaderLocationMap) => {\r\n    sendMatrix4Utils(gl, program, name, data, uniformLocationMap, getUniformLocation, isUniformLocationNotExist);\r\n};\r\n\r\nexport const sendVector3 = (gl: WebGLRenderingContext, shaderIndex: number, program: WebGLProgram, name: string, data: Vector3, uniformCacheMap: UniformCacheMap, uniformLocationMap: UniformShaderLocationMap) => {\r\n    sendVector3Utils(gl, shaderIndex, program, name, data, uniformCacheMap, uniformLocationMap, getUniformLocation, isUniformLocationNotExist);\r\n};\r\n\r\nexport const sendInt = (gl: WebGLRenderingContext, shaderIndex: number, program: WebGLProgram, name: string, data: number, uniformCacheMap: UniformCacheMap, uniformLocationMap: UniformShaderLocationMap) => {\r\n    sendIntUtils(gl, shaderIndex, program, name, data, uniformCacheMap, uniformLocationMap, getUniformLocation, isUniformLocationNotExist);\r\n};\r\n\r\nexport const sendFloat1 = (gl: WebGLRenderingContext, shaderIndex: number, program: WebGLProgram, name: string, data: number, uniformCacheMap: UniformCacheMap, uniformLocationMap: UniformShaderLocationMap) => {\r\n    sendFloat1Utils(gl, shaderIndex, program, name, data, uniformCacheMap, uniformLocationMap, getUniformLocation, isUniformLocationNotExist);\r\n};\r\n\r\nexport const sendFloat3 = (gl: WebGLRenderingContext, shaderIndex: number, program: WebGLProgram, name: string, data: Array<number>, uniformCacheMap: UniformCacheMap, uniformLocationMap: UniformShaderLocationMap) => {\r\n    sendFloat3Utils(gl, shaderIndex, program, name, data, uniformCacheMap, uniformLocationMap, getUniformLocation, isUniformLocationNotExist);\r\n};\r\n","export class BufferUtilsForUnitTest {\r\n    public static isRenderCommandBufferDataTypeArrayNotExist(RenderCommandBufferDataFromSystem: any) {\r\n        return RenderCommandBufferDataFromSystem.mMatrices === null;\r\n    }\r\n}\r\n","import {\r\n    getEmissionColorArr3, getLightModel, getShininess,\r\n    getSpecularColorArr3\r\n} from \"../../../../render_file/material/LightMaterialWorkerSystem\";\r\nimport { getColorArr3, getOpacity } from \"../../../../render_file/material/MaterialWorkerSystem\";\r\nimport { LightRenderUniformData, UniformCacheMap, UniformLocationMap } from \"../../../../../type/dataType\";\r\nimport {\r\n    IWebGL2DrawDataMap,\r\n    IWebGL2LightSendUniformDataDataMap\r\n} from \"../../../../../webgl2/utils/worker/render_file/interface/IUtils\";\r\nimport {\r\n    buildLightMaterialDataForGetUniformData,\r\n    buildMaterialDataForGetUniformData,\r\n    sendUniformData as sendUniformDataUtils\r\n} from \"../../../../../utils/worker/render_file/render/light/lightRenderUtils\";\r\n\r\nexport const sendUniformData = (gl: any, materialIndex: number, shaderIndex: number, program: WebGLProgram, drawDataMap: IWebGL2DrawDataMap, renderCommandUniformData: LightRenderUniformData, sendDataMap: IWebGL2LightSendUniformDataDataMap, uniformLocationMap: UniformLocationMap, uniformCacheMap: UniformCacheMap) => {\r\n    sendUniformDataUtils(gl, materialIndex, shaderIndex, program, drawDataMap, renderCommandUniformData, sendDataMap, uniformLocationMap, uniformCacheMap, buildMaterialDataForGetUniformData(getColorArr3, getOpacity, drawDataMap.MaterialDataFromSystem), buildLightMaterialDataForGetUniformData(getEmissionColorArr3, getSpecularColorArr3, getLightModel, getShininess, drawDataMap.LightMaterialDataFromSystem));\r\n};\r\n","import curry from \"wonder-lodash/curry\";\r\nimport { InitShaderDataMap } from \"../../../../../../type/utilsType\";\r\nimport { LightRenderCommandBufferForDrawData } from \"../../../../../../utils/worker/render_file/type/dataType\";\r\nimport { Map } from \"immutable\";\r\nimport { IShaderLibGenerator } from \"../../../../../../data/shaderLib_generator_interface\";\r\nimport { IMaterialConfig } from \"../../../../../../data/material_config_interface\";\r\nimport { IRenderConfig } from \"../../../../../both_file/data/render_config\";\r\nimport {\r\n    render as renderDefer, init as initUtils,\r\n    buildSendUniformDataDataMap\r\n} from \"../../../../../../webgl2/utils/worker/render_file/render/light/defer/deferShadingUtils\";\r\nimport {\r\n    getColorArr3 as getAmbientLightColorArr3,\r\n    isColorDirty as isAmbientLightColorDirty,\r\n    cleanColorDirty as cleanAmbientLightColorDirty\r\n} from \"../../../../../render_file/light/AmbientLightWorkerSystem\";\r\nimport {\r\n    getColorArr3 as getDirectionLightColorArr3, getIntensity as getDirectionLightIntensity,\r\n    isPositionDirty as isDirectionLightPositionDirty, isColorDirty as isDirectionLightColorDirty, isIntensityDirty as isDirectionLightIntensityDirty, cleanPositionDirty as cleanDirectionLightPositionDirty, cleanColorDirty as cleanDirectionLightColorDirty, cleanIntensityDirty as cleanDirectionLightIntensityDirty,\r\n} from \"../../../../../render_file/light/DirectionLightWorkerSystem\";\r\nimport { bindGBuffer, getNewTextureUnitIndex, unbindGBuffer } from \"../../../../../../webgl2/utils/worker/render_file/render/light/defer/gbuffer/gBufferUtils\";\r\nimport {\r\n    use\r\n} from \"../../../../../render_file/shader/ShaderWorkerSystem\";\r\nimport { sendFloat1, sendFloat3, sendMatrix4, sendVector3, sendInt, sendMatrix3 } from \"../../../../../render_file/shader/glslSender/GLSLSenderWorkerSystem\";\r\nimport { bindAndUpdate, getMapCount } from \"../../../../../render_file/texture/MapManagerWorkerSystem\";\r\nimport {\r\n    getIndexType, getIndexTypeSize, getIndicesCount, getVerticesCount,\r\n    hasIndices\r\n} from \"../../../../../render_file/geometry/GeometryWorkerSystem\";\r\nimport { useShader } from \"../../../../../render_file/material/MaterialWorkerSystem\";\r\nimport {\r\n    getColorArr3 as getPointLightColorArr3, getConstant,\r\n    getIntensity as getPointLightIntensity, getLinear, getQuadratic, getRange, isColorDirty, isPositionDirty,\r\n    isIntensityDirty, isAttenuationDirty, cleanColorDirty, cleanIntensityDirty, cleanAttenuationDirty,\r\n    cleanPositionDirty\r\n} from \"../../../../../render_file/light/PointLightWorkerSystem\";\r\nimport { directlySendUniformData } from \"../../../../../../utils/worker/render_file/render/renderUtils\";\r\nimport { buildDrawFuncDataMap } from \"../../../../../../webgl2/utils/worker/render_file/draw/light/defer/deferDrawRenderCommandBufferUtils\";\r\nimport { sendAttributeData } from \"../../RenderWorkerSystem\";\r\nimport { sendUniformData } from \"../LightRenderWorkerSystem\";\r\nimport { getDirectionLightPosition, getPointLightPosition } from \"../../../../../render_file/render/RenderWorkerSystem\";\r\nimport {\r\n    CameraRenderCommandBufferForDrawData\r\n} from \"../../../../../../utils/worker/render_file/type/dataType\";\r\nimport { computeRadius } from \"../../../light/PointLightWorkerSystem\";\r\nimport { IWebGL2DrawDataMap } from \"../../../../../../webgl2/utils/worker/render_file/interface/IUtils\";\r\nimport { DeferDrawDataMap } from \"../../../../../../webgl2/utils/worker/render_file/type/utilsType\";\r\nimport { getStartTextureIndex } from \"../../../../../../utils/worker/render_file/texture/mapManagerUtils\";\r\n\r\nexport const init = initUtils;\r\n\r\nexport const render = curry((gl: any, state: Map<any, any>, render_config: IRenderConfig, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, DataBufferConfig: any, initMaterialShader: Function, drawDataMap: IWebGL2DrawDataMap, deferDrawDataMap: DeferDrawDataMap, initShaderDataMap: InitShaderDataMap, bufferData: LightRenderCommandBufferForDrawData, cameraData: CameraRenderCommandBufferForDrawData) => {\r\n    renderDefer(gl, state, render_config, material_config, shaderLib_generator, DataBufferConfig, initMaterialShader, buildDrawFuncDataMap(sendAttributeData, sendUniformData, directlySendUniformData, use, hasIndices, getIndicesCount, getIndexType, getIndexTypeSize, getVerticesCount, bindAndUpdate, getMapCount, getStartTextureIndex, useShader, bindGBuffer, unbindGBuffer, getNewTextureUnitIndex), drawDataMap, deferDrawDataMap, buildSendUniformDataDataMap(\r\n        sendFloat1, sendFloat3, sendMatrix4, sendVector3, sendInt, sendMatrix3,\r\n        getAmbientLightColorArr3, isAmbientLightColorDirty, cleanAmbientLightColorDirty,\r\n        getDirectionLightPosition, getDirectionLightColorArr3, getDirectionLightIntensity, isDirectionLightPositionDirty, isDirectionLightColorDirty, isDirectionLightIntensityDirty, cleanDirectionLightPositionDirty, cleanDirectionLightColorDirty, cleanDirectionLightIntensityDirty,\r\n        getPointLightPosition, getPointLightColorArr3, getConstant, getPointLightIntensity, getLinear, getQuadratic, getRange, computeRadius, isPositionDirty, isColorDirty, isIntensityDirty, isAttenuationDirty, cleanPositionDirty, cleanColorDirty, cleanIntensityDirty, cleanAttenuationDirty,\r\n        drawDataMap\r\n    ), initShaderDataMap, bufferData, cameraData);\r\n})\r\n","import { Map } from \"immutable\";\r\nimport { IMaterialConfig } from \"../../../../data/material_config_interface\";\r\nimport { IRenderConfig } from \"../../../both_file/data/render_config\";\r\nimport { IShaderLibGenerator } from \"../../../../data/shaderLib_generator_interface\";\r\nimport { InitShaderDataMap } from \"../../../../type/utilsType\";\r\nimport { render as basicRender } from \"./basic/BasicRenderWorkerSystem\";\r\nimport { render as deferRender } from \"./light/defer/DeferShadingWorkerSystem\";\r\nimport {\r\n    init as initUtils,\r\n    render as renderUtils,\r\n    sendAttributeData as sendAttributeDataUtils\r\n} from \"../../../../webgl2/utils/worker/render_file/render/renderUtils\";\r\nimport { RenderCommandBufferForDrawData } from \"../../../../utils/worker/render_file/type/dataType\";\r\nimport { DeferDrawDataMap } from \"../../../../webgl2/utils/worker/render_file/type/utilsType\";\r\nimport { IWebGL2DrawDataMap } from \"../../../../webgl2/utils/worker/render_file/interface/IUtils\";\r\n\r\nexport const init = initUtils;\r\n\r\nexport const render = (gl: any, state: Map<any, any>, render_config: IRenderConfig, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, DataBufferConfig: any, initMaterialShader: Function, drawDataMap: IWebGL2DrawDataMap, deferDrawDataMap: DeferDrawDataMap, initShaderDataMap: InitShaderDataMap, renderCommandBufferForDrawData: RenderCommandBufferForDrawData) => {\r\n    renderUtils(gl, state, render_config, material_config, shaderLib_generator, DataBufferConfig, initMaterialShader, basicRender, deferRender, drawDataMap, deferDrawDataMap, initShaderDataMap, renderCommandBufferForDrawData);\r\n}\r\n\r\nexport const sendAttributeData = (gl: WebGLRenderingContext, shaderIndex: number, geometryIndex: number, ProgramWorkerData: any, GLSLSenderWorkerData: any, GeometryWorkerData: any, VaoWorkerData: any) => sendAttributeDataUtils(gl, shaderIndex, geometryIndex, ProgramWorkerData, GLSLSenderWorkerData, GeometryWorkerData, VaoWorkerData);\r\n\r\n\r\n","import { initData as initDataUtils } from \"../../../../../../../webgl2/utils/worker/render_file/render/light/defer/light/deferLightPassUtils\";\r\n\r\nexport const initData = initDataUtils;\r\n\r\n","import { EWorkerOperateType } from \"../both_file/EWorkerOperateType\";\r\nimport { Log } from \"../../../utils/Log\";\r\nimport { ERenderWorkerState } from \"../both_file/ERenderWorkerState\";\r\nimport {\r\n    initData as initGeometryWorkerData, resetPointCacheDatas, setPointCacheDatas,\r\n    updatePointCacheDatas\r\n} from \"./geometry/GeometryWorkerSystem\";\r\nimport { GeometryWorkerData } from \"./geometry/GeometryWorkerData\";\r\nimport { DataBufferConfig } from \"../../../config/DataBufferConfig\";\r\nimport { EGeometryWorkerDataOperateType } from \"../../enum/EGeometryWorkerDataOperateType\";\r\nimport {\r\n    initNewInitedMaterials\r\n} from \"./material/MaterialWorkerSystem\";\r\nimport { MaterialInitWorkerData, MaterialWorkerData } from \"./material/MaterialWorkerData\";\r\nimport { DeviceManagerWorkerData } from \"../both_file/device/DeviceManagerWorkerData\";\r\nimport { IndexBufferWorkerData } from \"./buffer/IndexBufferWorkerData\";\r\nimport { ArrayBufferWorkerData } from \"./buffer/ArrayBufferWorkerData\";\r\nimport { initGL } from \"./initGL\";\r\nimport { getState, setState } from \"./state/StateWorkerSytem\";\r\nimport { StateWorkerData } from \"./state/StateWorkerData\";\r\nimport { disposeBuffer as disposeArrayBuffer } from \"./buffer/ArrayBufferWorkerSystem\";\r\nimport { disposeBuffer as disposeIndexBuffer } from \"./buffer/IndexBufferWorkerSystem\";\r\nimport { initData as initProgramData } from \"./shader/program/ProgramWorkerSystem\";\r\nimport { initData as initArrayBufferData } from \"./buffer/ArrayBufferWorkerSystem\";\r\nimport { initData as initIndexBufferData } from \"./buffer/IndexBufferWorkerSystem\";\r\nimport {\r\n    clearColor,\r\n    commitGL,\r\n    initData as initDrawRenderCommandBufferForDrawData\r\n} from \"./draw/DrawRenderCommandBufferWorkerSystem\";\r\nimport { BasicMaterialWorkerData } from \"./material/BasicMaterialWorkerData\";\r\nimport { LightMaterialWorkerData } from \"./material/LightMaterialWorkerData\";\r\nimport { initState } from \"../../utils/worker/render_file/state/stateUtils\";\r\nimport {\r\n    getGL, initData as initDeviceManagerData, setClearColor, setSide,\r\n    setViewportOfGL\r\n} from \"../both_file/device/DeviceManagerWorkerSystem\";\r\nimport { AmbientLightWorkerData } from \"./light/AmbientLightWorkerData\";\r\nimport {\r\n    setPositionArr as setDirectionLightPositionArr\r\n} from \"./light/DirectionLightWorkerSystem\";\r\nimport {\r\n    GeometryInitWorkerData, GeometryResetWorkerData,\r\n    GeometryUpdateWorkerData, LightDrawWorkerData, TextureDrawWorkerData, TextureInitWorkerData\r\n} from \"../../type/messageDataType\";\r\nimport { setIsTest } from \"./config/InitConfigWorkerSystem\";\r\nimport { InitConfigWorkerData } from \"./config/InitConfigWorkerData\";\r\nimport { setPositionArr as setPointLightPositionArr } from \"./light/PointLightWorkerSystem\";\r\nimport { TextureWorkerData } from \"./texture/TextureWorkerData\";\r\nimport { TextureCacheWorkerData } from \"./texture/TextureCacheWorkerData\";\r\nimport { MapManagerWorkerData } from \"./texture/MapManagerWorkerData\";\r\nimport {\r\n    disposeSourceAndGLTexture, setIndex,\r\n    addSourceMapByImageDataStream, setUniformSamplerNameMap\r\n} from \"./texture/TextureWorkerSystem\";\r\nimport { callFunc, empty, fromArray } from \"wonder-frp/dist/es2015/global/Operator\";\r\nimport { IRenderConfig, render_config } from \"../both_file/data/render_config\";\r\nimport { webgl1_material_config } from \"../webgl1/both_file/data/material_config\";\r\nimport { webgl1_shaderLib_generator } from \"../webgl1/both_file/data/shaderLib_generator\";\r\nimport { Map } from \"immutable\";\r\nimport { IMaterialConfig } from \"../../data/material_config_interface\";\r\nimport { IShaderLibGenerator } from \"../../data/shaderLib_generator_interface\";\r\nimport {\r\n    initData as initWebGL1ShaderData,\r\n    initMaterialShader as initMaterialShaderWebGL1,\r\n    initNoMaterialShader as initNoMaterialShaderWebGL1\r\n} from \"../webgl1/render_file/shader/ShaderWorkerSystem\";\r\nimport { isWebgl1, setVersion } from \"./device/WebGLDetectWorkerSystem\";\r\nimport { WebGLDetectWorkerData } from \"./device/WebGLDetectWorkerData\";\r\nimport { buildInitShaderDataMap } from \"../../utils/worker/render_file/material/materialUtils\";\r\nimport { GBufferWorkerData } from \"../webgl2/render_file/render/light/defer/gbuffer/GBufferWorkerData\";\r\nimport { webgl2_material_config } from \"../webgl2/both_file/data/material_config\";\r\nimport { webgl2_shaderLib_generator } from \"../webgl2/both_file/data/shaderLib_generator\";\r\nimport {\r\n    initData as initWebGL2ShaderData,\r\n    initMaterialShader as initMaterialShaderWebGL2,\r\n    initNoMaterialShader as initNoMaterialShaderWebGL2\r\n} from \"../webgl2/render_file/shader/ShaderWorkerSystem\";\r\nimport { buildDrawDataMap as buildDeferDrawDataMap } from \"../../webgl2/utils/worker/render_file/draw/light/defer/deferDrawRenderCommandBufferUtils\";\r\nimport { initData as initLightWorkerDataWebGL2 } from \"../webgl2/render_file/light/LightWorkerSystem\";\r\nimport { initData as initLightWorkerDataWebGL1 } from \"../webgl1/render_file/light/LightWorkerSystem\";\r\nimport { WebGL2RenderInitWorkerData, WebGL2LightInitWorkerData } from \"../../webgl2/type/messageDataType\";\r\nimport { WebGL1LightInitWorkerData } from \"../../webgl1/type/messageDataType\";\r\nimport { WebGL1PointLightWorkerData } from \"../webgl1/render_file/light/PointLightWorkerData\";\r\nimport { WebGL2PointLightWorkerData } from \"../webgl2/render_file/light/PointLightWorkerData\";\r\nimport { RenderCommandBufferForDrawData } from \"../../utils/worker/render_file/type/dataType\";\r\nimport { detect as detectWebGL1, initData as initWebGL1GPUDetectWorkerData } from \"../webgl1/render_file/device/GPUDetectWorkerSystem\";\r\nimport {\r\n    detect as detectWebGL2, initData as initWebGL2GPUDetectWorkerData\r\n} from \"../webgl2/render_file/device/GPUDetectWorkerSystem\";\r\nimport { GPUDetectWorkerData } from \"./device/GPUDetectWorkerData\";\r\nimport { render as renderWebGL1 } from \"../webgl1/render_file/render/RenderWorkerSystem\";\r\nimport { BasicDrawRenderCommandBufferWorkerData } from \"./draw/basic/BasicDrawRenderCommandBufferWorkerData\";\r\nimport { LightDrawRenderCommandBufferWorkerData } from \"./draw/light/LightDrawRenderCommandBufferWorkerData\";\r\nimport { createTypeArraysOnlyOnce } from \"./command_buffer/RenderCommandBufferWorkerSystem\";\r\nimport { BasicRenderCommandBufferWorkerData } from \"./command_buffer/BasicRenderCommandBufferWorkerData\";\r\nimport { LightRenderCommandBufferWorkerData } from \"./command_buffer/LightRenderCommandBufferWorkerData\";\r\nimport {\r\n    init as initWebGL2Render,\r\n    render as renderWebGL2\r\n} from \"../webgl2/render_file/render/RenderWorkerSystem\";\r\nimport { initData as initWebGL2GLSLSenderData } from \"../webgl2/render_file/shader/glslSender/GLSLSenderWorkerSystem\";\r\nimport { WebGL2GLSLSenderWorkerData } from \"../webgl2/render_file/shader/glslSender/GLSLSenderWorkerData\";\r\nimport { initData as initWebGL1GLSLSenderData } from \"../webgl1/render_file/shader/glslSender/GLSLSenderWorkerSystem\";\r\nimport { WebGL1GLSLSenderWorkerData } from \"../webgl1/render_file/shader/glslSender/GLSLSenderWorkerData\";\r\nimport { VaoWorkerData } from \"./vao/VaoWorkerData\";\r\nimport { WebGL1ProgramWorkerData } from \"../webgl1/render_file/shader/program/ProgramWorkerData\";\r\nimport { WebGL2ProgramWorkerData } from \"../webgl2/render_file/shader/program/ProgramWorkerData\";\r\nimport { buildDrawDataMap as buildWebGL1DrawDataMap } from \"../../webgl1/utils/worker/render_file/render/renderUtils\";\r\nimport { buildDrawDataMap as buildWebGL2DrawDataMap } from \"../../webgl2/utils/worker/render_file/render/renderUtils\";\r\nimport { initData as initVaoData } from \"./vao/VaoWorkerSystem\";\r\nimport { disposeBuffers as disposeWebGL1GeometryBuffers } from \"../../webgl1/utils/worker/both_file/buffer/bufferUtils\";\r\nimport { disposeBuffers as disposeWebGL2GeometryBuffers } from \"../../webgl2/utils/worker/both_file/buffer/bufferUtils\";\r\nimport { WebGL1LocationWorkerData } from \"../webgl1/render_file/shader/location/LocationWorkerData\";\r\nimport { WebGL2LocationWorkerData } from \"../webgl2/render_file/shader/location/LocationWorkerData\";\r\nimport { initData as initWebGL1LocationData } from \"../webgl1/render_file/shader/location/LocationWorkerSystem\";\r\nimport { initData as initWebGL2LocationData } from \"../webgl2/render_file/shader/location/LocationWorkerSystem\";\r\nimport { WebGL1ShaderWorkerData } from \"../webgl1/render_file/shader/ShaderWorkerData\";\r\nimport { WebGL2ShaderWorkerData } from \"../webgl2/render_file/shader/ShaderWorkerData\";\r\nimport { initData as initDeferLightPassData } from \"../webgl2/render_file/render/light/defer/light/DeferLightPassWorkerSystem\";\r\nimport { WebGL1DirectionLightWorkerData } from \"../webgl1/render_file/light/DirectionLightWorkerData\";\r\nimport { WebGL2DirectionLightWorkerData } from \"../webgl2/render_file/light/DirectionLightWorkerData\";\r\nimport { DeferDirectionLightPassWorkerData } from \"../webgl2/render_file/render/light/defer/light/DeferDirectionLightPassWorkerData\";\r\nimport { DeferPointLightPassWorkerData } from \"../webgl2/render_file/render/light/defer/light/DeferPointLightPassWorkerData\";\r\nimport { DeferAmbientLightPassWorkerData } from \"../webgl2/render_file/render/light/defer/light/DeferAmbientLightPassWorkerData\";\r\nimport { initNeedInitTextures, setMaterialTextureList } from \"./texture/MapManagerWorkerSystem\";\r\nimport { initData as initMateiralData, initMaterials } from \"./material/AllMaterialWorkerSystem\";\r\n\r\ndeclare var self: any;\r\n\r\nexport const onerrorHandler = (msg: string, fileName: string, lineno: number) => {\r\n    Log.error(true, `message:${msg}\\nfileName:${fileName}\\nlineno:${lineno}`)\r\n}\r\n\r\nexport const onmessageHandler = (e) => {\r\n    var data = e.data,\r\n        operateType = data.operateType,\r\n        state: Map<any, any> = null;\r\n\r\n    switch (operateType) {\r\n        case EWorkerOperateType.INIT_CONFIG:\r\n            setIsTest(data.isTest, InitConfigWorkerData).run();\r\n            break;\r\n        case EWorkerOperateType.INIT_DATA:\r\n            setVersion(data.webglVersion, WebGLDetectWorkerData);\r\n            break;\r\n        case EWorkerOperateType.INIT_GL:\r\n            initDataWhenInitGL();\r\n\r\n            if (isWebgl1(WebGLDetectWorkerData)) {\r\n                state = _initWebGL1GL(data, WebGLDetectWorkerData, GPUDetectWorkerData);\r\n            }\r\n            else {\r\n                state = _initWebGL2GL(data, WebGLDetectWorkerData, GPUDetectWorkerData);\r\n            }\r\n\r\n            setState(state, StateWorkerData);\r\n\r\n            initState(state, getGL, setSide, DeviceManagerWorkerData);\r\n            break;\r\n        case EWorkerOperateType.INIT_VIEWPORT:\r\n            setState(setViewportOfGL(DeviceManagerWorkerData, data.viewportData, getState(StateWorkerData)).run(), StateWorkerData);\r\n            break;\r\n        case EWorkerOperateType.INIT_CLEARCOLOR:\r\n            setClearColor(getGL(DeviceManagerWorkerData, getState(StateWorkerData)), data.clearColorArr4, DeviceManagerWorkerData);\r\n            break;\r\n        case EWorkerOperateType.INIT_MATERIAL_GEOMETRY_LIGHT_TEXTURE:\r\n            if (isWebgl1(WebGLDetectWorkerData)) {\r\n                _handleWebGL1InitRenderData(data, AmbientLightWorkerData, WebGL1DirectionLightWorkerData, WebGL1PointLightWorkerData, WebGL1GLSLSenderWorkerData);\r\n            }\r\n            else {\r\n                _handleWebGL2InitRenderData(data, render_config, AmbientLightWorkerData, WebGL2DirectionLightWorkerData, WebGL2PointLightWorkerData, GPUDetectWorkerData, WebGL2GLSLSenderWorkerData);\r\n            }\r\n            break;\r\n        case EWorkerOperateType.DRAW:\r\n            if (isWebgl1(WebGLDetectWorkerData)) {\r\n                _handleWebGL1Draw(data, AmbientLightWorkerData, WebGL1DirectionLightWorkerData, WebGL1PointLightWorkerData, WebGL1GLSLSenderWorkerData, GPUDetectWorkerData, StateWorkerData);\r\n            }\r\n            else {\r\n                _handleWebGL2Draw(data, AmbientLightWorkerData, WebGL2DirectionLightWorkerData, WebGL2PointLightWorkerData, WebGL2GLSLSenderWorkerData, GPUDetectWorkerData, StateWorkerData);\r\n            }\r\n            break;\r\n        default:\r\n            Log.error(true, Log.info.FUNC_UNKNOW(`operateType:${operateType}`));\r\n            break;\r\n    }\r\n};\r\n\r\nconst _initWebGL1GL =(data: any, WebGLDetectWorkerData: any, GPUDetectWorkerData: any) => {\r\n    return initGL(data, detectWebGL1, WebGLDetectWorkerData, GPUDetectWorkerData).run();\r\n}\r\n\r\nconst _initWebGL2GL =(data: any, WebGLDetectWorkerData: any, GPUDetectWorkerData: any) => {\r\n    return initGL(data, detectWebGL2, WebGLDetectWorkerData, GPUDetectWorkerData).run();\r\n}\r\n\r\nconst _handleWebGL1Draw =(data: any, AmbientLightWorkerData: any, DirectionLightWorkerData: any, PointLightWorkerData: any, GLSLSenderWorkerData, GPUDetectWorkerData: any, StateWorkerData: any) => {\r\n    var state = getState(StateWorkerData),\r\n        drawDataMap = buildWebGL1DrawDataMap(DeviceManagerWorkerData, TextureWorkerData, TextureCacheWorkerData, MapManagerWorkerData, MaterialWorkerData, BasicMaterialWorkerData, LightMaterialWorkerData, AmbientLightWorkerData, DirectionLightWorkerData, PointLightWorkerData, WebGL1ProgramWorkerData, WebGL1LocationWorkerData, GLSLSenderWorkerData, GeometryWorkerData, ArrayBufferWorkerData, IndexBufferWorkerData, BasicDrawRenderCommandBufferWorkerData, LightDrawRenderCommandBufferWorkerData),\r\n        gl = getGL(drawDataMap.DeviceManagerDataFromSystem, state),\r\n        bufferData = data.renderCommandBufferData;\r\n\r\n    _initWebGL1DrawData(gl, data, MapManagerWorkerData, TextureWorkerData, DirectionLightWorkerData, PointLightWorkerData);\r\n\r\n\r\n    clearColor(state, render_config, drawDataMap.DeviceManagerDataFromSystem);\r\n\r\n    if (_isBufferDataExist(bufferData)) {\r\n        bufferData = createTypeArraysOnlyOnce(bufferData, DataBufferConfig, BasicRenderCommandBufferWorkerData, LightRenderCommandBufferWorkerData);\r\n\r\n        renderWebGL1(gl, state, render_config, webgl1_material_config, webgl1_shaderLib_generator, DataBufferConfig, initMaterialShaderWebGL1, drawDataMap, buildInitShaderDataMap(DeviceManagerWorkerData, WebGL1ProgramWorkerData, WebGL1LocationWorkerData, GLSLSenderWorkerData, WebGL1ShaderWorkerData, MapManagerWorkerData, MaterialWorkerData, BasicMaterialWorkerData, LightMaterialWorkerData, AmbientLightWorkerData, DirectionLightWorkerData, PointLightWorkerData, GPUDetectWorkerData, VaoWorkerData), bufferData);\r\n    }\r\n\r\n    commitGL(gl, state);\r\n\r\n    self.postMessage({\r\n        state: ERenderWorkerState.DRAW_COMPLETE\r\n    });\r\n}\r\n\r\nconst _handleWebGL2Draw =(data: any, AmbientLightWorkerData: any, DirectionLightWorkerData: any, PointLightWorkerData: any, GLSLSenderWorkerData, GPUDetectWorkerData: any, StateWorkerData: any) => {\r\n    var state = getState(StateWorkerData),\r\n        drawDataMap = buildWebGL2DrawDataMap(DeviceManagerWorkerData, TextureWorkerData, TextureCacheWorkerData, MapManagerWorkerData, MaterialWorkerData, BasicMaterialWorkerData, LightMaterialWorkerData, AmbientLightWorkerData, DirectionLightWorkerData, PointLightWorkerData, WebGL2ProgramWorkerData, WebGL2LocationWorkerData, GLSLSenderWorkerData, GeometryWorkerData, BasicDrawRenderCommandBufferWorkerData, LightDrawRenderCommandBufferWorkerData),\r\n        gl = getGL(drawDataMap.DeviceManagerDataFromSystem, state),\r\n        bufferData = data.renderCommandBufferData;\r\n\r\n    _initWebGL2DrawData(gl, data, MapManagerWorkerData, TextureWorkerData, DirectionLightWorkerData, PointLightWorkerData);\r\n\r\n\r\n    clearColor(state, render_config, drawDataMap.DeviceManagerDataFromSystem);\r\n\r\n    if (_isBufferDataExist(bufferData)) {\r\n        bufferData = createTypeArraysOnlyOnce(bufferData, DataBufferConfig, BasicRenderCommandBufferWorkerData, LightRenderCommandBufferWorkerData);\r\n\r\n        renderWebGL2(gl, state, render_config, webgl2_material_config, webgl2_shaderLib_generator, DataBufferConfig, initMaterialShaderWebGL2, drawDataMap, buildDeferDrawDataMap(GBufferWorkerData, DeferAmbientLightPassWorkerData, DeferDirectionLightPassWorkerData, DeferPointLightPassWorkerData), buildInitShaderDataMap(DeviceManagerWorkerData, WebGL2ProgramWorkerData, WebGL2LocationWorkerData, GLSLSenderWorkerData, WebGL2ShaderWorkerData, MapManagerWorkerData, MaterialWorkerData, BasicMaterialWorkerData, LightMaterialWorkerData, AmbientLightWorkerData, DirectionLightWorkerData, PointLightWorkerData, GPUDetectWorkerData, VaoWorkerData), bufferData);\r\n    }\r\n\r\n    commitGL(gl, state);\r\n\r\n    self.postMessage({\r\n        state: ERenderWorkerState.DRAW_COMPLETE\r\n    });\r\n}\r\n\r\nconst _initWebGL1DrawData =(gl:any, data: any, MapManagerWorkerData:any, TextureWorkerData:any, DirectionLightWorkerData: any, PointLightWorkerData: any, ) => {\r\n    _initOtherDrawData(gl, data, MapManagerWorkerData, TextureWorkerData, DirectionLightWorkerData, PointLightWorkerData);\r\n    _initWebGL1DisposeDrawData(data);\r\n}\r\n\r\nconst _initWebGL2DrawData =(gl:any, data: any, MapManagerWorkerData:any, TextureWorkerData:any, DirectionLightWorkerData: any, PointLightWorkerData: any, ) => {\r\n    _initOtherDrawData(gl, data, MapManagerWorkerData, TextureWorkerData, DirectionLightWorkerData, PointLightWorkerData);\r\n    _initWebGL2DisposeDrawData(data);\r\n}\r\n\r\nconst _initOtherDrawData =(gl:any, data: any, MapManagerWorkerData:any, TextureWorkerData:any, DirectionLightWorkerData: any, PointLightWorkerData: any, ) => {\r\n    var state = null,\r\n        geometryData = data.geometryData,\r\n        materialData = data.materialData,\r\n        lightData = data.lightData,\r\n        textureData = data.textureData;\r\n\r\n    if (geometryData !== null) {\r\n        if (_needUpdateGeometryWorkerData(geometryData)) {\r\n            updatePointCacheDatas(geometryData.verticesInfoList, geometryData.normalsInfoList, geometryData.texCoordsInfoList, geometryData.indicesInfoList, GeometryWorkerData);\r\n        }\r\n        else if (_needResetGeometryWorkerData(geometryData)) {\r\n            resetPointCacheDatas(geometryData.verticesInfoList, geometryData.normalsInfoList, geometryData.texCoordsInfoList, geometryData.indicesInfoList, GeometryWorkerData);\r\n        }\r\n    }\r\n\r\n    if (materialData !== null) {\r\n        initNewInitedMaterials(materialData.workerInitList, MaterialWorkerData);\r\n    }\r\n\r\n    if (lightData !== null) {\r\n        _setLightDrawData(lightData, DirectionLightWorkerData, PointLightWorkerData);\r\n    }\r\n\r\n    if (textureData !== null) {\r\n        _setTextureDrawData(textureData, MapManagerWorkerData, TextureWorkerData);\r\n\r\n        _initNewTextures(gl, textureData, TextureWorkerData);\r\n    }\r\n}\r\n\r\nconst _initWebGL1DisposeDrawData =(data: any) => {\r\n    var state = null,\r\n        disposeData = data.disposeData;\r\n\r\n    if (disposeData !== null) {\r\n        if (disposeData.geometryDisposeData !== null) {\r\n            disposeWebGL1GeometryBuffers(disposeData.geometryDisposeData.disposedGeometryIndexArray, disposeArrayBuffer, disposeIndexBuffer, GPUDetectWorkerData, VaoWorkerData, ArrayBufferWorkerData, IndexBufferWorkerData, DeviceManagerWorkerData);\r\n        }\r\n\r\n        if (disposeData.textureDisposeData !== null) {\r\n            disposeSourceAndGLTexture(disposeData.textureDisposeData, getGL(DeviceManagerWorkerData, getState(StateWorkerData)), TextureCacheWorkerData, TextureWorkerData, GPUDetectWorkerData);\r\n        }\r\n    }\r\n}\r\n\r\nconst _initWebGL2DisposeDrawData =(data: any) => {\r\n    var state = null,\r\n        disposeData = data.disposeData;\r\n\r\n    if (disposeData !== null) {\r\n        if (disposeData.geometryDisposeData !== null) {\r\n            disposeWebGL2GeometryBuffers(disposeData.geometryDisposeData.disposedGeometryIndexArray, DeviceManagerWorkerData, VaoWorkerData);\r\n        }\r\n\r\n        if (disposeData.textureDisposeData !== null) {\r\n            disposeSourceAndGLTexture(disposeData.textureDisposeData, getGL(DeviceManagerWorkerData, getState(StateWorkerData)), TextureCacheWorkerData, TextureWorkerData, GPUDetectWorkerData);\r\n        }\r\n    }\r\n}\r\n\r\nconst _isBufferDataExist =(bufferData: RenderCommandBufferForDrawData) => !!bufferData;\r\n\r\nconst _handleWebGL1InitRenderData =(data: any, AmbientLightWorkerData: any, DirectionLightWorkerData, PointLightWorkerData: any, GLSLSenderWorkerData: any) => {\r\n    var state = getState(StateWorkerData),\r\n        gl = getGL(DeviceManagerWorkerData, state);\r\n\r\n    fromArray([\r\n        _initWebGL1Lights(data.lightData, AmbientLightWorkerData, DirectionLightWorkerData, PointLightWorkerData),\r\n        _initMaterialData(getGL(DeviceManagerWorkerData, state), data.materialData, data.textureData, MapManagerWorkerData, TextureCacheWorkerData, TextureWorkerData, MaterialWorkerData, BasicMaterialWorkerData, LightMaterialWorkerData),\r\n        _initGeometrys(data.geometryData, DataBufferConfig, GeometryWorkerData)\r\n    ]).mergeAll()\r\n        .concat(\r\n        _initTextures(data.textureData, TextureWorkerData),\r\n        _initMaterials(state, getGL(DeviceManagerWorkerData, state), webgl1_material_config, webgl1_shaderLib_generator, initNoMaterialShaderWebGL1, data.materialData, data.textureData, TextureWorkerData, AmbientLightWorkerData, DirectionLightWorkerData, PointLightWorkerData, GPUDetectWorkerData, GLSLSenderWorkerData, WebGL1ProgramWorkerData, VaoWorkerData, WebGL1LocationWorkerData, WebGL1ShaderWorkerData)\r\n        )\r\n        .subscribe(null, null, () => {\r\n            self.postMessage({\r\n                state: ERenderWorkerState.INIT_COMPLETE\r\n            });\r\n        })\r\n}\r\n\r\nconst _handleWebGL2InitRenderData =(data: any, render_config: IRenderConfig, AmbientLightWorkerData: any, DirectionLightWorkerData, PointLightWorkerData: any, GPUDetectWorkerData: any, GLSLSenderWorkerData: any) => {\r\n    var state = getState(StateWorkerData),\r\n        gl = getGL(DeviceManagerWorkerData, state),\r\n        renderData = data.renderData;\r\n\r\n    fromArray([\r\n        _initWebGL2Lights(data.lightData, DirectionLightWorkerData, PointLightWorkerData),\r\n        _initMaterialData(getGL(DeviceManagerWorkerData, state), data.materialData, data.textureData, MapManagerWorkerData, TextureCacheWorkerData, TextureWorkerData, MaterialWorkerData, BasicMaterialWorkerData, LightMaterialWorkerData),\r\n        _initGeometrys(data.geometryData, DataBufferConfig, GeometryWorkerData)\r\n    ]).mergeAll()\r\n        .concat(\r\n        _initTextures(data.textureData, TextureWorkerData),\r\n        _initMaterials(state, getGL(DeviceManagerWorkerData, state), webgl2_material_config, webgl2_shaderLib_generator, initNoMaterialShaderWebGL2, data.materialData, data.textureData, TextureWorkerData, AmbientLightWorkerData, DirectionLightWorkerData, PointLightWorkerData, GPUDetectWorkerData, GLSLSenderWorkerData, WebGL2ProgramWorkerData, VaoWorkerData, WebGL2LocationWorkerData, WebGL2ShaderWorkerData),\r\n        _initWebGL2Render(gl, render_config, renderData, DataBufferConfig, GBufferWorkerData, DeferAmbientLightPassWorkerData, DeferDirectionLightPassWorkerData, DeferPointLightPassWorkerData, WebGL2ShaderWorkerData, WebGL2ProgramWorkerData, WebGL2LocationWorkerData, GLSLSenderWorkerData, GPUDetectWorkerData)\r\n        )\r\n        .subscribe(null, null, () => {\r\n            self.postMessage({\r\n                state: ERenderWorkerState.INIT_COMPLETE\r\n            });\r\n        })\r\n}\r\n\r\nconst _initWebGL2Render =(gl: any, render_config: IRenderConfig, renderData: WebGL2RenderInitWorkerData, DataBufferConfig: any, GBufferWorkerData: any, DeferAmbientLightPassWorkerData: any, DeferDirectionLightPassWorkerData: any, DeferPointLightPassWorkerData: any, ShaderWorkerData: any, ProgramWorkerData: any, LocationWorkerData: any, GLSLSenderWorkerData: any, GPUDetectWorkerData: any) => {\r\n    return callFunc(() => {\r\n        if (_isDataNotExist(renderData) || _isDataNotExist(renderData.deferShading) || renderData.deferShading.isInit === false) {\r\n            return;\r\n        }\r\n\r\n        initWebGL2Render(gl, render_config, DataBufferConfig, GBufferWorkerData, DeferAmbientLightPassWorkerData, DeferDirectionLightPassWorkerData, DeferPointLightPassWorkerData, ShaderWorkerData, ProgramWorkerData, LocationWorkerData, GLSLSenderWorkerData, GPUDetectWorkerData);\r\n    })\r\n}\r\n\r\nconst _isDataNotExist =(data: any) => data === null || data === void 0;\r\n\r\nexport const initDataWhenInitGL = () => {\r\n    _initData();\r\n\r\n    if (isWebgl1(WebGLDetectWorkerData)) {\r\n        _initWebGL1Data();\r\n    }\r\n    else {\r\n        _initWebGL2Data();\r\n    }\r\n}\r\n\r\n\r\n\r\nconst _initData =() => {\r\n    initDrawRenderCommandBufferForDrawData(BasicDrawRenderCommandBufferWorkerData, LightDrawRenderCommandBufferWorkerData);\r\n\r\n    initVaoData(VaoWorkerData);\r\n\r\n    initDeviceManagerData(DeviceManagerWorkerData);\r\n}\r\n\r\nconst _initWebGL1Data =() => {\r\n    initProgramData(WebGL1ProgramWorkerData);\r\n\r\n    initWebGL1LocationData(WebGL1LocationWorkerData);\r\n\r\n    initWebGL1GLSLSenderData(WebGL1GLSLSenderWorkerData);\r\n\r\n    initArrayBufferData(ArrayBufferWorkerData);\r\n\r\n    initIndexBufferData(IndexBufferWorkerData);\r\n\r\n    initWebGL1ShaderData(WebGL1ShaderWorkerData);\r\n\r\n    initWebGL1GPUDetectWorkerData(GPUDetectWorkerData);\r\n}\r\n\r\nconst _initWebGL2Data =() => {\r\n    initProgramData(WebGL2ProgramWorkerData);\r\n\r\n    initWebGL2LocationData(WebGL2LocationWorkerData);\r\n\r\n    initWebGL2GLSLSenderData(WebGL2GLSLSenderWorkerData);\r\n\r\n    initWebGL2ShaderData(WebGL2ShaderWorkerData);\r\n\r\n    initDeferLightPassData(DeferAmbientLightPassWorkerData, DeferDirectionLightPassWorkerData, DeferPointLightPassWorkerData);\r\n\r\n    initWebGL2GPUDetectWorkerData(GPUDetectWorkerData);\r\n}\r\n\r\nconst _needUpdateGeometryWorkerData =(geometryData: GeometryUpdateWorkerData) => {\r\n    return geometryData.type === EGeometryWorkerDataOperateType.ADD;\r\n}\r\n\r\nconst _needResetGeometryWorkerData =(geometryData: GeometryResetWorkerData) => {\r\n    return geometryData.type === EGeometryWorkerDataOperateType.RESET;\r\n}\r\n\r\nconst _initMaterials =(state: Map<any, any>, gl: WebGLRenderingContext, material_config: IMaterialConfig, shaderLib_generator: IShaderLibGenerator, initNoMaterialShader: Function, materialData: MaterialInitWorkerData, textureData: TextureInitWorkerData, TextureWorkerData: any, AmbientLightWorkerData: any, DirectionLightWorkerData, PointLightWorkerData: any, GPUDetectWorkerData: any, GLSLSenderWorkerData: any, ProgramWorkerData: any, VaoWorkerData: any, LocationWorkerData: any, ShaderWorkerData: any) => {\r\n    return callFunc(() => {\r\n        if (_isDataNotExist(materialData)) {\r\n            return;\r\n        }\r\n\r\n        initMaterials(state, gl, material_config, shaderLib_generator, initNoMaterialShader, materialData.basicMaterialData, materialData.lightMaterialData, TextureWorkerData, AmbientLightWorkerData, DirectionLightWorkerData, PointLightWorkerData, GPUDetectWorkerData, GLSLSenderWorkerData, ProgramWorkerData, VaoWorkerData, LocationWorkerData, ShaderWorkerData);\r\n    })\r\n}\r\n\r\nconst _initMaterialData =(gl: WebGLRenderingContext, materialData: MaterialInitWorkerData, textureData: TextureInitWorkerData, MapManagerWorkerData: any, TextureCacheWorkerData: any, TextureWorkerData: any, MaterialWorkerData: any, BasicMaterialWorkerData: any, LightMaterialWorkerData: any) => {\r\n    return callFunc(() => {\r\n        if (_isDataNotExist(materialData)) {\r\n            return;\r\n        }\r\n\r\n        initMateiralData(materialData, textureData, TextureCacheWorkerData, TextureWorkerData, MapManagerWorkerData, MaterialWorkerData, BasicMaterialWorkerData, LightMaterialWorkerData);\r\n    })\r\n}\r\n\r\nconst _initGeometrys =(geometryData: GeometryInitWorkerData, DataBufferConfig: any, GeometryWorkerData: any) => {\r\n    return callFunc(() => {\r\n        if (_isDataNotExist(geometryData)) {\r\n            return;\r\n        }\r\n\r\n        initGeometryWorkerData(geometryData.buffer, geometryData.indexType, geometryData.indexTypeSize, DataBufferConfig, GeometryWorkerData);\r\n\r\n        setPointCacheDatas(geometryData.verticesInfoList, geometryData.normalsInfoList, geometryData.texCoordsInfoList, geometryData.indicesInfoList, GeometryWorkerData);\r\n    })\r\n}\r\n\r\nconst _initWebGL1Lights =(lightData: WebGL1LightInitWorkerData, AmbientLightWorkerData: any, DirectionLightWorkerData: any, PointLightWorkerData: any) => {\r\n    return callFunc(() => {\r\n        if (_isDataNotExist(lightData)) {\r\n            return;\r\n        }\r\n\r\n        initLightWorkerDataWebGL1(lightData, AmbientLightWorkerData, DirectionLightWorkerData, PointLightWorkerData);\r\n    })\r\n}\r\n\r\nconst _initWebGL2Lights =(lightData: WebGL2LightInitWorkerData, DirectionLightWorkerData: any, PointLightWorkerData: any) => {\r\n    return callFunc(() => {\r\n        if (_isDataNotExist(lightData)) {\r\n            return;\r\n        }\r\n\r\n        initLightWorkerDataWebGL2(lightData, DirectionLightWorkerData, PointLightWorkerData);\r\n    })\r\n}\r\n\r\nconst _setLightDrawData =(lightData: LightDrawWorkerData, DirectionLightWorkerData: any, PointLightWorkerData: any) => {\r\n    var directionLightData = lightData.directionLightData,\r\n        pointLightData = lightData.pointLightData;\r\n\r\n    setDirectionLightPositionArr(directionLightData.positionArr, DirectionLightWorkerData);\r\n    setPointLightPositionArr(pointLightData.positionArr, PointLightWorkerData);\r\n}\r\n\r\nconst _setTextureDrawData =(textureData: TextureDrawWorkerData, MapManagerWorkerData:any, TextureWorkerData: any) => {\r\n    setIndex(textureData.index, TextureWorkerData);\r\n    setUniformSamplerNameMap(textureData.uniformSamplerNameMap, TextureWorkerData);\r\n    setMaterialTextureList(textureData.materialTextureList, MapManagerWorkerData);\r\n\r\n    //todo handle when complete?\r\n    addSourceMapByImageDataStream(textureData.needAddedImageDataArr, TextureWorkerData)\r\n        .subscribe(null, null, null);\r\n}\r\n\r\nconst _initNewTextures = (gl:any, {needInitedTextureIndexArr}, TextureWorkerData: any) => {\r\n    initNeedInitTextures(gl, needInitedTextureIndexArr, TextureWorkerData);\r\n}\r\n\r\nconst _initTextures = (textureData:TextureInitWorkerData, TextureWorkerData:any) => {\r\n    if (_isDataNotExist(textureData)) {\r\n        return empty();\r\n    }\r\n\r\n    return callFunc(() => {\r\n        setIndex(textureData.index, TextureWorkerData);\r\n        setUniformSamplerNameMap(textureData.uniformSamplerNameMap, TextureWorkerData);\r\n    }).concat(addSourceMapByImageDataStream(textureData.needAddedImageDataArr, TextureWorkerData));\r\n}\r\n","import {\r\n    initData as initDeviceManagerWorkerDataSystem\r\n} from \"../renderer/worker/both_file/device/DeviceManagerWorkerSystem\";\r\nimport { initData as initProgramWorkerDataSystem } from \"../renderer/worker/render_file/shader/program/ProgramWorkerSystem\";\r\nimport { initData as initDrawRenderCommandBufferWorkerDataSystem } from \"../renderer/worker/render_file/draw/DrawRenderCommandBufferWorkerSystem\";\r\nimport { update } from \"../renderer/worker/render_file/texture/TextureWorkerSystem\";\r\nimport { initData as initWebGL1LightWorkerDataSystem } from \"../renderer/worker/webgl1/render_file/light/LightWorkerSystem\";\r\nimport { initData as initWebGL2LightWorkerDataSystem } from \"../renderer/worker/webgl2/render_file/light/LightWorkerSystem\";\r\nimport {\r\n    getDirectionLightPosition,\r\n    getPointLightPosition\r\n} from \"../renderer/worker/render_file/render/RenderWorkerSystem\";\r\nimport { initData as initWebGL1GLSLSenderWorkerDataSystem } from \"../renderer/worker/webgl1/render_file/shader/glslSender/GLSLSenderWorkerSystem\";\r\nimport { initData as initWebGL2GLSLSenderWorkerDataSystem } from \"../renderer/worker/webgl2/render_file/shader/glslSender/GLSLSenderWorkerSystem\";\r\nimport { initData as initArrayBufferWorkerDataSystem } from \"../renderer/worker/render_file/buffer/ArrayBufferWorkerSystem\";\r\nimport { initData as initIndexBufferWorkerDataSystem } from \"../renderer/worker/render_file/buffer/IndexBufferWorkerSystem\";\r\nimport { initData as initVaoWorkerDataSystem } from \"../renderer/worker/render_file/vao/VaoWorkerSystem\";\r\nimport { initData as initWebGL1LocationWorkerDataSystem } from \"../renderer/worker/webgl1/render_file/shader/location/LocationWorkerSystem\";\r\nimport { initData as initWebGL2LocationWorkerDataSystem } from \"../renderer/worker/webgl2/render_file/shader/location/LocationWorkerSystem\";\r\nimport { initData as initWebGL1ShaderWorkerDataSystem } from \"../renderer/worker/webgl1/render_file/shader/ShaderWorkerSystem\";\r\nimport { initData as initWebGL2ShaderWorkerDataSystem } from \"../renderer/worker/webgl2/render_file/shader/ShaderWorkerSystem\";\r\nimport { initDataWhenInitGL as initWorkerDataWhenInitGLSystem } from \"../renderer/worker/render_file/RenderWorkerSystem\";\r\nimport { Map } from \"immutable\";\r\nimport { initData } from \"../core/DirectorSystem\";\r\n\r\nexport const initDeviceManagerWorkerData = initDeviceManagerWorkerDataSystem;\r\n\r\nexport const initProgramWorkerData = initProgramWorkerDataSystem;\r\n\r\nexport const initWebGL1GLSLSenderWorkerData = initWebGL1GLSLSenderWorkerDataSystem;\r\n\r\nexport const initWebGL2GLSLSenderWorkerData = initWebGL2GLSLSenderWorkerDataSystem;\r\n\r\nexport const initWebGL1LocationWorkerData = initWebGL1LocationWorkerDataSystem;\r\n\r\nexport const initWebGL2LocationWorkerData = initWebGL2LocationWorkerDataSystem;\r\n\r\nexport const initWebGL1ShaderWorkerData = initWebGL1ShaderWorkerDataSystem;\r\n\r\nexport const initWebGL2ShaderWorkerData = initWebGL2ShaderWorkerDataSystem;\r\n\r\nexport const initWebGL1LightWorkerData = initWebGL1LightWorkerDataSystem;\r\n\r\nexport const initWebGL2LightWorkerData = initWebGL2LightWorkerDataSystem;\r\n\r\nexport const initDrawRenderCommandBufferWorkerData = initDrawRenderCommandBufferWorkerDataSystem;\r\n\r\nexport const initArrayBufferWorkerData = initArrayBufferWorkerDataSystem;\r\n\r\nexport const initIndexBufferWorkerData = initIndexBufferWorkerDataSystem;\r\n\r\nexport const initVaoWorkerData = initVaoWorkerDataSystem;\r\n\r\nexport const initWorkerDataWhenInitGL = initWorkerDataWhenInitGLSystem;\r\n\r\nexport const getDirectionLightPositionInShaderWorker = getDirectionLightPosition;\r\n\r\nexport const getPointLightPositionInShaderWorker = getPointLightPosition;\r\n\r\nexport const updateTextureWorker = update;\r\n","import { DomQuery as DomQueryFromCommonlib } from \"wonder-commonlib/dist/es2015/utils/DomQuery\";\r\nimport { fromArray as fromArrayFromFrp, Operator } from \"wonder-frp/dist/es2015/global/Operator\";\r\nimport {\r\n    getNormalMatrix as getNormalMatrixSystem,\r\n    initData as initThreeDTransformDataSystem\r\n} from \"../component/transform/ThreeDTransformSystem\";\r\nimport { initData as initTagDataSystem } from \"../component/tag/TagSystem\";\r\nimport {\r\n    hasIndices,\r\n    initData as initGeometryDataSystem, setIndices, setVertices\r\n} from \"../component/geometry/GeometrySystem\";\r\nimport { getShaderIndex as getShaderIndexSystem} from \"../component/material/MaterialSystem\";\r\nimport {\r\n    use\r\n} from \"../renderer/shader/ShaderSystem\";\r\n\r\nimport { initData as initMeshRendererDataSystem } from \"../component/renderer/MeshRendererSystem\";\r\nimport { createState as createStateUtils } from \"../utils/stateUtils\";\r\nimport { Map } from \"immutable\";\r\nimport { initData as initArrayBufferDataSystem } from \"../renderer/buffer/ArrayBufferSystem\";\r\nimport { initData as initIndexBufferDataSystem } from \"../renderer/buffer/IndexBufferSystem\";\r\nimport {\r\n    getWorldToCameraMatrix as getWorldToCameraMatrixSystem,\r\n    initData as initCameraControllerDataSystem\r\n} from \"../component/camera/CameraControllerSystem\";\r\nimport { initData as initGameObjectDataSystem } from \"../core/entityObject/gameObject/GameObjectSystem\";\r\nimport { disableVertexAttribArray as disableVertexAttribArrayUtils } from \"../renderer/utils/worker/render_file/shader/program/programUtils\";\r\nimport { initData as initDeviceManagerDataSystem } from \"../renderer/device/DeviceManagerSystem\";\r\nimport { initData as initProgramDataSystem } from \"../renderer/shader/program/ProgramSystem\";\r\nimport { initData as initSceneDataSystem } from \"../core/entityObject/scene/SceneSystem\";\r\nimport { initData as initRenderCommandBufferDataSystem } from \"../renderer/command_buffer/RenderCommandBufferSystem\";\r\nimport { updateSystem as updateAllSystems } from \"../core/DirectorSystem\";\r\nimport { initData as initSendDrawRenderCommandBufferDataSystem } from \"../renderer/worker/logic_file/draw/SendDrawRenderCommandBufferDataSystem\";\r\nimport { initData as initWebGL1LightDataSystem } from \"../component/webgl1/light/LightSystem\";\r\nimport { initData as initWebGL2LightDataSystem } from \"../component/webgl2/light/LightSystem\";\r\nimport { initData as initDrawRenderCommandBufferDataSystem } from \"../renderer/draw/DrawRenderCommandBufferSystem\";\r\nimport { sendAttributeData as sendWebGL1AttributeDataSystem } from \"../renderer/webgl1/render/RenderSystem\";\r\nimport { initData as initWebGL1GLSLSenderDataSystem } from \"../renderer/webgl1/shader/glslSender/GLSLSenderSystem\";\r\nimport { initData as initWebGL2GLSLSenderDataSystem } from \"../renderer/webgl2/shader/glslSender/GLSLSenderSystem\";\r\nimport { initData as initVaoDataSystem } from \"../renderer/webgl2/vao/VaoSystem\";\r\nimport { initData as initWebGL1LocationDataSystem } from \"../renderer/webgl1/shader/location/LocationSystem\";\r\nimport { initData as initWebGL2LocationDataSystem } from \"../renderer/webgl2/shader/location/LocationSystem\";\r\nimport { initData as initWebGL1ShaderDataSystem } from \"../renderer/webgl1/shader/ShaderSystem\";\r\nimport { initData as initWebGL2ShaderDataSystem } from \"../renderer/webgl2/shader/ShaderSystem\";\r\nimport { initData as initDeferLightPassDataSystem } from \"../renderer/webgl2/render/light/defer/light/DeferLightPassSystem\";\r\nimport { initData as initWebGL1GPUDetectDataSystem } from \"../renderer/webgl1/device/GPUDetectSystem\";\r\nimport { initData as initWebGL2GPUDetectDataSystem } from \"../renderer/webgl2/device/GPUDetectSystem\";\r\nimport { initData as initDataSystem } from \"../core/MainSystem\";\r\nimport { initData as initMaterialDataSystem } from \"../component/material/AllMaterialSystem\";\r\nimport { getImageData as getImageDataUtils } from \"../renderer/utils/texture/textureUtils\";\r\nimport { hasDiffuseMap as hasDiffuseMapSystem, hasSpecularMap as hasSpecularMapSystem } from \"../component/material/LightMaterialSystem\";\r\n\r\nexport const initThreeDTransformData = initThreeDTransformDataSystem;\r\n\r\nexport const DomQuery = DomQueryFromCommonlib;\r\n\r\nexport const fromArray = fromArrayFromFrp;\r\n\r\nexport const initTagData = initTagDataSystem;\r\n\r\nexport const initGeometryData = initGeometryDataSystem;\r\n\r\nexport const initMaterialData = initMaterialDataSystem;\r\n\r\nexport const initWebGL1ShaderData = initWebGL1ShaderDataSystem;\r\n\r\nexport const initWebGL2ShaderData = initWebGL2ShaderDataSystem;\r\n\r\nexport const initProgramData = initProgramDataSystem;\r\n\r\nexport const initWebGL1LocationData = initWebGL1LocationDataSystem;\r\n\r\nexport const initWebGL2LocationData = initWebGL2LocationDataSystem;\r\n\r\nexport const initWebGL1GLSLSenderData = initWebGL1GLSLSenderDataSystem;\r\n\r\nexport const initWebGL2GLSLSenderData = initWebGL2GLSLSenderDataSystem;\r\n\r\nexport const initMeshRendererData = initMeshRendererDataSystem;\r\n\r\nexport const initArrayBufferData = initArrayBufferDataSystem;\r\n\r\nexport const initIndexBufferData = initIndexBufferDataSystem;\r\n\r\nexport const initDeviceManagerData = initDeviceManagerDataSystem;\r\n\r\nexport const initCameraControllerData = initCameraControllerDataSystem;\r\n\r\nexport const initWebGL1LightData = initWebGL1LightDataSystem;\r\n\r\nexport const initWebGL2LightData = initWebGL2LightDataSystem;\r\n\r\nexport const initGameObjectData = initGameObjectDataSystem;\r\n\r\nexport const initSceneData = initSceneDataSystem;\r\n\r\nexport const initRenderCommandBufferData = initRenderCommandBufferDataSystem;\r\n\r\nexport const initDrawRenderCommandBufferData = initDrawRenderCommandBufferDataSystem;\r\n\r\nexport const initSendDrawRenderCommandBufferData = initSendDrawRenderCommandBufferDataSystem;\r\n\r\nexport const initVaoData = initVaoDataSystem;\r\n\r\nexport const initDeferLightPassData = initDeferLightPassDataSystem;\r\n\r\nexport const initWebGL1GPUDetectData = initWebGL1GPUDetectDataSystem;\r\n\r\nexport const initWebGL2GPUDetectData = initWebGL2GPUDetectDataSystem;\r\n\r\nexport const initData = initDataSystem;\r\n\r\nexport const createState = createStateUtils;\r\n\r\nexport const useProgram = use;\r\n\r\nexport const sendWebGL1AttributeData = sendWebGL1AttributeDataSystem;\r\n\r\n// export const sendUniformData = sendUniformDataSystem;\r\n\r\nexport const disableVertexAttribArray = disableVertexAttribArrayUtils;\r\n\r\nexport const setGeometryIndices = setIndices;\r\n\r\nexport const setGeometryVertices = setVertices;\r\n\r\nexport const hasGeometryIndices = hasIndices;\r\n\r\nexport const getShaderIndex = getShaderIndexSystem;\r\n\r\nexport const updateSystem = updateAllSystems;\r\n\r\nexport const getNormalMatrix = getNormalMatrixSystem;\r\n\r\nexport const getWorldToCameraMatrix = getWorldToCameraMatrixSystem;\r\n\r\nexport const getImageData = getImageDataUtils;\r\n\r\nexport const hasDiffuseMap = hasDiffuseMapSystem;\r\n\r\nexport const hasSpecularMap = hasSpecularMapSystem;\r\n"],"names":["JudgeUtils","Log","Log$","JudgeUtils$","InnerObserver","root","assert","describe","describeCommonLib","it","itCommonLib","requireFuncCommonLib","ensureFuncCommonLib","this","global","isCached","addActiveTexture","expect","clearAllBindTextureUnitCache","initData","isCachedUtils","addActiveTextureUtils","initDataUtils","ensure","deleteVal","deleteBySwap","ComponentData","deleteBySwapArray","require$$0","require$$1","require$$2","require$$3","require$$4","require$$5","toString","require$$6","require$$7","require$$8","require$$9","getWidth","setWidth","getHeight","setHeight","registerClass","Map","getGL","setGL","setContextConfig","setPixelRatio","getViewport","setViewportToState","setCanvasPixelRatio","setViewportOfGL","getScreenSize","setScreen","clear","setColorWrite","setClearColor","setSide","getGLUtils","setGLUtils","setContextConfigUtils","setPixelRatioUtils","getViewportUtils","setViewportToStateUtils","setViewportOfGLUtils","setCanvasPixelRatioUtils","DomQuery","setScreenUtils","clearUtils","setClearColorUtils","setSideUtils","WorkerDetectData","create","_checkShouldAlive","MeshRendererData","addAddComponentHandle","addAddComponentHandleToMap","addDisposeHandle","addDisposeHandleToMap","ensureFunc","requireCheck","setBatchDatas","getParent","setParent","getGameObject","getChildren","_addChild","setChildren","_setParent","isNotAlive","isTranslate","update","getThreeDTransformDataParent","isAlive","addTag","addTagSystemTag","removeTag","removeTagSystemTag","findGameObjectsByTag","findTagSystemTagGameObjectsByTag","TagData","addComponent","disposeComponent","isThreeDTransformAlive","getThreeDTransformChildren","setThreeDTransformChildren","isGameObjectAlive","getGameObjectChildren","setGameObjectChildren","_isParentExist","_isChildrenExist","ThreeDTransformData","_buildUId","_setDefaultTypeArrData","init","GlobalTempData","setParentHierarchy","setBatchDatasSystem","updateSystem","_disposeMapDatas","_initBufferData","_table","createThreeDTransform","dispose","initGameObject","initGameObjectSystem","getIndexType","getIndexTypeSize","hasIndices","getDrawMode","getVerticesCount","getIndicesCount","addInitHandle","addInitHandleToMap","initGeometry","GeometryData","getVertices","getNormals","getTexCoords","getIndices","getIndexTypeUtils","getIndexTypeSizeUtils","hasIndicesUtils","getDrawModeUtils","getVerticesCountUtils","getIndicesCountUtils","getGeometryDrawMode","getGeometryVertices","getGeometryNormals","getGeometryTexCoords","getGeometryIndices","initGeometrySystem","ensureGetter","getColorArr3","useShader","getOpacity","getAlphaTest","isTestAlpha","use","useProgram","useUtils","createTypeArrays","getSource","getIsNeedUpdate","setIsNeedUpdate","initTextures","initTexture","getBufferCount","needUpdate","markNeedUpdate","filter","bindToUnit","sendData","bindAndUpdate","sendTextureData","getMapCount","getMapCountUtils","bindAndUpdateUtils","initTextureData","useShaderUtils","getColorArr3Utils","getOpacityUtils","MaterialData","createShader","getAlphaTestUtils","disposeMapManager","isTestAlphaUtils","checkShouldAlive","setThreeDTransformParent","createMeshRenderer","createRenderCommandBufferData","buildRenderCommandBufferForDrawData","createRenderCommandBufferDataUtils","updateProjectionMatrix","addToDirtyList","updateProjectionMatrixPerspectiveCamera","getWorldToCameraMatrix","getPMatrix","disposePerspectiveCamera","initDataPerspectiveCamera","CameraControllerData","PerspectiveCameraData","CameraData","initCamera","getWorldToCameraMatrixCamera","getPMatrixCamera","initDataCamera","createGameObject","addChild","addGameObject","removeChild","removeGameObject","DataBufferConfig","initBasicRenderComandBufferData","initLightRenderComandBufferData","createBasicRenderCommandBufferData","createLightRenderCommandBufferData","getColorDataSize","setColor","createDefaultColor","getPosition","getThreeDTransformPosition","detect","WebGLDetectData","isWebgl1","isWebgl1Utils","getColor","getIntensity","getSpecifyLightColorDataSize","isPositionDirty","isColorDirty","isIntensityDirty","cleanPositionDirty","cleanColorDirty","cleanIntensityDirty","createSpecifyLight","getSpecifyLightPosition","setSpecifyLightColor","getIntensityUtils","disposeSpecifyLightComponent","initSpecifyLightData","isPositionDirtyUtils","isColorDirtyUtils","isIntensityDirtyUtils","cleanPositionDirtyUtils","cleanColorDirtyUtils","cleanIntensityDirtyUtils","setIntensity","getConstant","getLinear","getQuadratic","getRange","getIntensityDataSize","isAttenuationDirty","cleanAttenuationDirty","getAllPositionData","getConstantUtils","getLinearUtils","getQuadraticUtils","getRangeUtils","initDataHelper","isAttenuationDirtyUtils","cleanAttenuationDirtyUtils","getAllDirectionLightPositionData","getPointLightAllPositionData","initMaterialShader","initNoMaterialShader","detectExtensionSystem","bindUniformBufferBase","bufferStaticData","bufferDynamicData","bufferSubDynamicData","set","bindVao","initNoMaterialShaderUtils","initMaterialShaderUtils","bindVaoUtils","empty","buildGLSLSource","getGLSLPartData","getGLSLDefineListData","buildGLSLSourceUtils","initMaterial","getShininess","getShading","getLightModel","LightMaterialData","createMaterial","getSpecularColorArr3","getSpecularColorArr3Utils","MapManagerData","TextureData","getEmissionColorArr3","getEmissionColorArr3Utils","getShininessUtils","getShadingUtils","getLightModelUtils","hasDiffuseMap","hasDiffuseMapUtils","hasSpecularMap","hasSpecularMapUtils","initMaterialBase","addMaterialComponent","disposeMaterialComponent","initSpecifyMaterialData","createTypeArraysUtils","setEmptyLocationMap","addSendUniformConfig","addVaoConfig","createVao","unbindVao","disposeVao","_detectExtension","_init","bindIndexBuffer","createAndInitVao","_generateAttributeSource","_buildInitShaderFuncDataMap_1","bindIndexBufferUtils","setMap","getClassName","BasicMaterialData","initMaterialWithoutInitMap","setMapMapManager","initBasicMaterialWithoutInitMap","initLightMaterialWithoutInitMap","initBasicMaterialData","initLightMaterialData","setLightMaterialDefaultData","initMapManagerData","createBasicMaterialTypeArrays","createLightMaterialTypeArrays","addBasicMaterialComponent","addLightMaterialComponent","disposeBasicMaterialComponent","disposeLightMaterialComponent","initBasicMaterial","initLightMaterial","buildRenderCommandUniformData","clearColor","initBasicDrawRenderCommandBufferData","initLightDrawRenderCommandBufferData","clearColorUtils","sendAttributeData","getStartTextureIndex","initGBuffer","initDeferLightPass","render","deferDraw","initDefer","initUbo","buildDrawDataMap","getUniformLocation","isUniformLocationNotExist","getUniformLocationUtils","isUniformLocationNotExistUtils","sendBuffer","sendBufferUtils","sendMatrix3","sendMatrix3Utils","sendMatrix4","sendMatrix4Utils","sendVector3","sendVector3Utils","sendInt","sendIntUtils","sendFloat1","sendFloat1Utils","sendFloat3","sendFloat3Utils","buildDrawFuncDataMap","draw","drawBasic","_sendUniformData","buildSendUniformDataDataMap","renderBasic","AmbientLightData","getColorUtils","addSpecifyLightComponent","computeRadius","computeRadiusUtils","sendUniformData","_sendUniformFuncData","_getUniformData","buildMaterialDataForGetUniformData","sendUniformDataUtils","renderDefer","getAmbientLightColorArr3","isAmbientLightColorDirty","cleanAmbientLightColorDirty","getDirectionLightPosition","getDirectionLightColorArr3","getDirectionLightIntensity","isDirectionLightPositionDirty","isDirectionLightColorDirty","isDirectionLightIntensityDirty","cleanDirectionLightPositionDirty","cleanDirectionLightColorDirty","cleanDirectionLightIntensityDirty","getPointLightPosition","getPointLightColorArr3","getPointLightIntensity","initUtils","renderUtils","basicRender","deferRender","sendAttributeDataUtils","getOrCreateBuffer","_initBuffer","_resetBindedBuffer","_bindVao","drawGameObjects","drawFront","renderFront","isPointLightPositionDirty","isPointLightColorDirty","isPointLightIntensityDirty","isPointLightAttenuationDirty","cleanPointLightPositionDirty","cleanPointLightColorDirty","cleanPointLightIntensityDirty","cleanPointLightAttenuationDirty","frontRender","createRenderCommandBufferWorkerData","initWebGL1Material","initNoMaterialShaderWebGL1","renderWebGL1","initMaterialShaderWebGL1","buildWebGL1DrawDataMap","initWebGL2Material","initNoMaterialShaderWebGL2","initWebGL2Render","renderWebGL2","initMaterialShaderWebGL2","buildWebGL2DrawDataMap","buildDeferDrawDataMap","updateThreeDTransform","updateCameraControllerSystem","renderByWebGLRender","initTextureSystem","getSourceUtils","getWidthUtils","getHeightUtils","getIsNeedUpdateUtils","markNeedUpdateUtils","bindToUnitUtils","needUpdateUtils","updateUtils","initTexturesUtils","initTextureUtils","initTextureCacheData","load","loadBase","_load","timeout","IdleTaskData","loadTexture","setTextureAsset","setTextureAssetSystem","createGeometry","disposeDirectionLightComponent","disposePointLightComponent","addAmbientLightComponent","addDirectionLightComponent","addPointLightComponent","disposeAmbientLightComponent","initAmbientLightData","initWebGL1DirectionLightData","initWebGL1PointLightData","initWebGL2DirectionLightData","initWebGL2PointLightData","disposeBuffer","disposeBufferUtils","disposeComponentSystem","disposeArrayBuffer","disposeIndexBuffer","disposeBuffers","disposeGeometryVaoBuffers","_disposeBuffers","Scheduler","initTransform","initCameraController","initRenderer","addMaterialAddComponentHandle","addMaterialDisposeHandle","addMaterialInitHandle","addMeshRendererAddComponentHandle","addMeshRendererDisposeHandle","addTagAddComponentHandle","addTagDisposeHandle","addThreeDTransformAddComponentHandle","addThreeDTransformDisposeHandle","addCameraControllerAddComponentHandle","addCameraControllerDisposeHandle","addGeometryAddComponentHandle","addGeometryInitHandle","addWebGL1LightAddComponentHandle","addWebGL1LightDisposeHandle","addWebGL1GeometryDisposeHandle","initPointLight","initDirectionLight","addWebGL2LightAddComponentHandle","addWebGL2LightDisposeHandle","addWebGL2GeometryDisposeHandle","createGL","_setScreenData","setScreenFromDeviceManagerWorkerSystem","createGLWorker","setCanvasPixelRatioFromDeviceManagerWorkerSystem","setCanvasPixelRatioFromDeviceManagerSystem","setScreenFromDeviceManagerSystem","getIsTest","setIsTest","getIsTestUtils","setIsTestUtils","detectUtils","fromJS","_initData","initWebGL1ShaderData","initProgramData","initWebGL1LocationData","initArrayBufferData","initIndexBufferData","initDrawRenderCommandBufferData","initWebGL1GLSLSenderData","initWebGL2ShaderData","initWebGL2LocationData","initWebGL2GLSLSenderData","initWebGL1LightData","detectWebGL1","initWebGL2LightData","initDeferLightPassData","detectWebGL2","initGeometryData","initMaterialData","initMeshRendererData","initTagData","initThreeDTransformData","initSceneData","initCameraControllerData","initGameObjectData","initRenderCommandBufferData","initSendDrawRenderCommandBufferData","initVaoData","initDeviceManagerData","initAssetDatabaseData","initDirectorData","initDataMainSystem","initMain","buildViewportDataWorkerSystem","DeviceManagerWorkerData","getState","setState","getCanvas","getCanvasSystem","setCanvas","setCanvasSystem","define","_setFlipY","chrome","firefox","setSpecifyLightCount","initDirectionLightData","initPointLightData","initDrawRenderCommandBufferForDrawData","initWebGL1GPUDetectWorkerData","initWebGL2GPUDetectWorkerData","initDeviceManagerWorkerDataSystem","initProgramWorkerDataSystem","initWebGL1GLSLSenderWorkerDataSystem","initWebGL2GLSLSenderWorkerDataSystem","initWebGL1LocationWorkerDataSystem","initWebGL2LocationWorkerDataSystem","initWebGL1ShaderWorkerDataSystem","initWebGL2ShaderWorkerDataSystem","initWebGL1LightWorkerDataSystem","initWebGL2LightWorkerDataSystem","initDrawRenderCommandBufferWorkerDataSystem","initArrayBufferWorkerDataSystem","initIndexBufferWorkerDataSystem","initVaoWorkerDataSystem","initWorkerDataWhenInitGLSystem","initThreeDTransformDataSystem","DomQueryFromCommonlib","fromArray","fromArrayFromFrp","initTagDataSystem","initGeometryDataSystem","initMaterialDataSystem","initWebGL1ShaderDataSystem","initWebGL2ShaderDataSystem","initProgramDataSystem","initWebGL1LocationDataSystem","initWebGL2LocationDataSystem","initWebGL1GLSLSenderDataSystem","initWebGL2GLSLSenderDataSystem","initMeshRendererDataSystem","initArrayBufferDataSystem","initIndexBufferDataSystem","initDeviceManagerDataSystem","initCameraControllerDataSystem","initWebGL1LightDataSystem","initWebGL2LightDataSystem","initGameObjectDataSystem","initSceneDataSystem","initRenderCommandBufferDataSystem","initDrawRenderCommandBufferDataSystem","initSendDrawRenderCommandBufferDataSystem","initVaoDataSystem","initDeferLightPassDataSystem","initWebGL1GPUDetectDataSystem","initWebGL2GPUDetectDataSystem","initDataSystem","createState","createStateUtils","sendWebGL1AttributeDataSystem","disableVertexAttribArray","disableVertexAttribArrayUtils","getShaderIndex","getShaderIndexSystem","updateAllSystems","getNormalMatrix","getNormalMatrixSystem","getWorldToCameraMatrixSystem","getImageData","getImageDataUtils","hasDiffuseMapSystem","hasSpecularMapSystem"],"mappings":"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GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACpD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACrD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACpD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACrD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACrD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACpD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACrD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACpD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACpD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACrD,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,MAAM,CAAC;QACrD,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG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,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC1C,MAAM,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC3C,MAAM,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC3C,MAAM,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC3C,MAAM,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC3C,MAAM,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QAC3C,MAAM,CAAC,EAAE,CAAC,GAAG,CAA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"}